var zc=Object.defineProperty;var Wc=(t,e,n)=>e in t?zc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Yt=(t,e,n)=>Wc(t,typeof e!="symbol"?e+"":e,n);import{r as J,a as Hc,g as vu,R as bu,c as _a}from"./vendor-KfUPlHYY.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var xu={exports:{}},$r={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=J,Yc=Symbol.for("react.element"),Xc=Symbol.for("react.fragment"),Jc=Object.prototype.hasOwnProperty,Qc=Gc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zc={key:!0,ref:!0,__self:!0,__source:!0};function wu(t,e,n){var r,s={},o=null,u=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)Jc.call(e,r)&&!Zc.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Yc,type:t,key:o,ref:u,props:s,_owner:Qc.current}}$r.Fragment=Xc;$r.jsx=wu;$r.jsxs=wu;xu.exports=$r;var V=xu.exports,Gi={},La=Hc;Gi.createRoot=La.createRoot,Gi.hydrateRoot=La.hydrateRoot;function ed(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Nt(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Na={};function Yi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Nt(e[0])&&Na[e[0]]||(Nt(e[0])&&(Na[e[0]]=new Date),ed(...e))}const Su=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Ma=(t,e,n)=>{t.loadNamespaces(e,Su(t,n))},Va=(t,e,n,r)=>{Nt(n)&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,Su(t,r))},td=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const u=(d,f)=>{const p=e.services.backendConnector.state[`${d}|${f}`];return p===-1||p===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!u(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||u(r,t)&&(!s||u(o,t)))},nd=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Yi("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,t))return!1}}):td(t,e,n)},Nt=t=>typeof t=="string",rd=t=>typeof t=="object"&&t!==null,id=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,sd={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},ad=t=>sd[t],od=t=>t.replace(id,ad);let Xi={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:od};const ud=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xi={...Xi,...t}},ld=()=>Xi;let Au;const cd=t=>{Au=t},dd=()=>Au,fd={type:"3rdParty",init(t){ud(t.options.react),cd(t)}},Pu=J.createContext();class hd{constructor(){Yt(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}const pd=(t,e)=>{const n=J.useRef();return J.useEffect(()=>{n.current=t},[t,e]),n.current},Cu=(t,e,n,r)=>t.getFixedT(e,n,r),md=(t,e,n,r)=>J.useCallback(Cu(t,e,n,r),[t,e,n,r]),qn=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=J.useContext(Pu)||{},o=n||r||dd();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new hd),!o){Yi("You will need to pass in an i18next instance by using initReactI18next");const G=(Z,ee)=>Nt(ee)?ee:rd(ee)&&Nt(ee.defaultValue)?ee.defaultValue:Array.isArray(Z)?Z[Z.length-1]:Z,U=[G,{},!1];return U.t=G,U.i18n={},U.ready=!1,U}o.options.react&&o.options.react.wait!==void 0&&Yi("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...ld(),...o.options.react,...e},{useSuspense:d,keyPrefix:f}=u;let p=s||o.options&&o.options.defaultNS;p=Nt(p)?[p]:p||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(p);const g=(o.isInitialized||o.initializedStoreOnce)&&p.every(G=>nd(G,o,u)),v=md(o,e.lng||null,u.nsMode==="fallback"?p:p[0],f),y=()=>v,C=()=>Cu(o,e.lng||null,u.nsMode==="fallback"?p:p[0],f),[L,N]=J.useState(y);let M=p.join();e.lng&&(M=`${e.lng}${M}`);const B=pd(M),j=J.useRef(!0);J.useEffect(()=>{const{bindI18n:G,bindI18nStore:U}=u;j.current=!0,!g&&!d&&(e.lng?Va(o,e.lng,p,()=>{j.current&&N(C)}):Ma(o,p,()=>{j.current&&N(C)})),g&&B&&B!==M&&j.current&&N(C);const Z=()=>{j.current&&N(C)};return G&&o&&o.on(G,Z),U&&o&&o.store.on(U,Z),()=>{j.current=!1,G&&o&&G.split(" ").forEach(ee=>o.off(ee,Z)),U&&o&&U.split(" ").forEach(ee=>o.store.off(ee,Z))}},[o,M]),J.useEffect(()=>{j.current&&g&&N(y)},[o,f,g]);const $=[L,o,g];if($.t=L,$.i18n=o,$.ready=g,g||!g&&!d)return $;throw new Promise(G=>{e.lng?Va(o,e.lng,p,()=>G()):Ma(o,p,()=>G())})};function gd(t){let{i18n:e,defaultNS:n,children:r}=t;const s=J.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return J.createElement(Pu.Provider,{value:s},r)}const se=t=>typeof t=="string",kn=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},Ia=t=>t==null?"":""+t,yd=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},vd=/###/g,Fa=t=>t&&t.indexOf("###")>-1?t.replace(vd,"."):t,Ba=t=>!t||se(t),Rn=(t,e,n)=>{const r=se(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Ba(t))return{};const o=Fa(r[s]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++s}return Ba(t)?{}:{obj:t,k:Fa(r[s])}},Ka=(t,e,n)=>{const{obj:r,k:s}=Rn(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let o=e[e.length-1],u=e.slice(0,e.length-1),d=Rn(t,u,Object);for(;d.obj===void 0&&u.length;)o=`${u[u.length-1]}.${o}`,u=u.slice(0,u.length-1),d=Rn(t,u,Object),d&&d.obj&&typeof d.obj[`${d.k}.${o}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${o}`]=n},bd=(t,e,n,r)=>{const{obj:s,k:o}=Rn(t,e,Object);s[o]=s[o]||[],s[o].push(n)},Er=(t,e)=>{const{obj:n,k:r}=Rn(t,e);if(n)return n[r]},xd=(t,e,n)=>{const r=Er(t,n);return r!==void 0?r:Er(e,n)},ku=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?se(t[r])||t[r]instanceof String||se(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):ku(t[r],e[r],n):t[r]=e[r]);return t},Xt=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var wd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Sd=t=>se(t)?t.replace(/[&<>"'\/]/g,e=>wd[e]):t;class Ad{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Pd=[" ",",","?","!",";"],Cd=new Ad(20),kd=(t,e,n)=>{e=e||"",n=n||"";const r=Pd.filter(u=>e.indexOf(u)<0&&n.indexOf(u)<0);if(r.length===0)return!0;const s=Cd.getRegExp(`(${r.map(u=>u==="?"?"\\?":u).join("|")})`);let o=!s.test(t);if(!o){const u=t.indexOf(n);u>0&&!s.test(t.substring(0,u))&&(o=!0)}return o},Ji=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let o=0;o<r.length;){if(!s||typeof s!="object")return;let u,d="";for(let f=o;f<r.length;++f)if(f!==o&&(d+=n),d+=r[f],u=s[d],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&f<r.length-1)continue;o+=f-o+1;break}s=u}return s},Or=t=>t&&t.replace("_","-"),Dd={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Rr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Dd,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(se(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Rr(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Rr(this.logger,e)}}var Ze=new Rr;class qr{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(u=>{let[d,f]=u;for(let p=0;p<f;p++)d(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(u=>{let[d,f]=u;for(let p=0;p<f;p++)d.apply(d,[e,...r])})}}class $a extends qr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,n],r&&(Array.isArray(r)?d.push(...r):se(r)&&o?d.push(...r.split(o)):d.push(r)));const f=Er(this.data,d);return!f&&!n&&!r&&e.indexOf(".")>-1&&(e=d[0],n=d[1],r=d.slice(2).join(".")),f||!u||!se(r)?f:Ji(this.data&&this.data[e]&&this.data[e][n],r,o)}addResource(e,n,r,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let d=[e,n];r&&(d=d.concat(u?r.split(u):r)),e.indexOf(".")>-1&&(d=e.split("."),s=n,n=d[1]),this.addNamespaces(n),Ka(this.data,d,s),o.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(se(r[o])||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,o){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},d=[e,n];e.indexOf(".")>-1&&(d=e.split("."),s=r,r=n,n=d[1]),this.addNamespaces(n);let f=Er(this.data,d)||{};u.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?ku(f,r,o):f={...f,...r},Ka(this.data,d,f),u.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var Du={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,n,r,s))}),e}};const qa={};class jr extends qr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),yd(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ze.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const u=r&&e.indexOf(r)>-1,d=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!kd(e,r,s);if(u&&!d){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:se(o)?[o]:o};const p=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(p[0])>-1)&&(o=p.shift()),e=p.join(s)}return{key:e,namespaces:se(o)?[o]:o}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],n),f=d[d.length-1],p=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(g){const G=n.nsSeparator||this.options.nsSeparator;return s?{res:`${f}${G}${u}`,usedKey:u,exactUsedKey:u,usedLng:p,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:`${f}${G}${u}`}return s?{res:u,usedKey:u,exactUsedKey:u,usedLng:p,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:u}const v=this.resolve(e,n);let y=v&&v.res;const C=v&&v.usedKey||u,L=v&&v.exactUsedKey||u,N=Object.prototype.toString.apply(y),M=["[object Number]","[object Function]","[object RegExp]"],B=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,$=!se(y)&&typeof y!="boolean"&&typeof y!="number";if(j&&y&&$&&M.indexOf(N)<0&&!(se(B)&&Array.isArray(y))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const G=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,y,{...n,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return s?(v.res=G,v.usedParams=this.getUsedParamsDetails(n),v):G}if(o){const G=Array.isArray(y),U=G?[]:{},Z=G?L:C;for(const ee in y)if(Object.prototype.hasOwnProperty.call(y,ee)){const ie=`${Z}${o}${ee}`;U[ee]=this.translate(ie,{...n,joinArrays:!1,ns:d}),U[ee]===ie&&(U[ee]=y[ee])}y=U}}else if(j&&se(B)&&Array.isArray(y))y=y.join(B),y&&(y=this.extendTranslation(y,e,n,r));else{let G=!1,U=!1;const Z=n.count!==void 0&&!se(n.count),ee=jr.hasDefaultValue(n),ie=Z?this.pluralResolver.getSuffix(p,n.count,n):"",Pe=n.ordinal&&Z?this.pluralResolver.getSuffix(p,n.count,{ordinal:!1}):"",Ce=Z&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),Me=Ce&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${ie}`]||n[`defaultValue${Pe}`]||n.defaultValue;!this.isValidLookup(y)&&ee&&(G=!0,y=Me),this.isValidLookup(y)||(U=!0,y=u);const We=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:y,Ge=ee&&Me!==y&&this.options.updateMissing;if(U||G||Ge){if(this.logger.log(Ge?"updateKey":"missingKey",p,f,u,Ge?Me:y),o){const fe=this.resolve(u,{...n,keySeparator:!1});fe&&fe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ye=[];const rt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&rt&&rt[0])for(let fe=0;fe<rt.length;fe++)Ye.push(rt[fe]);else this.options.saveMissingTo==="all"?Ye=this.languageUtils.toResolveHierarchy(n.lng||this.language):Ye.push(n.lng||this.language);const Se=(fe,ke,Ae)=>{const It=ee&&Ae!==y?Ae:We;this.options.missingKeyHandler?this.options.missingKeyHandler(fe,f,ke,It,Ge,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(fe,f,ke,It,Ge,n),this.emit("missingKey",fe,f,ke,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Z?Ye.forEach(fe=>{const ke=this.pluralResolver.getSuffixes(fe,n);Ce&&n[`defaultValue${this.options.pluralSeparator}zero`]&&ke.indexOf(`${this.options.pluralSeparator}zero`)<0&&ke.push(`${this.options.pluralSeparator}zero`),ke.forEach(Ae=>{Se([fe],u+Ae,n[`defaultValue${Ae}`]||Me)})}):Se(Ye,u,Me))}y=this.extendTranslation(y,e,n,v,r),U&&y===u&&this.options.appendNamespaceToMissingKey&&(y=`${f}:${u}`),(U||G)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}:${u}`:u,G?y:void 0):y=this.options.parseMissingKeyHandler(y))}return s?(v.res=y,v.usedParams=this.getUsedParamsDetails(n),v):y}extendTranslation(e,n,r,s,o){var u=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=se(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const y=e.match(this.interpolator.nestingRegexp);g=y&&y.length}let v=r.replace&&!se(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||s.usedLng,r),p){const y=e.match(this.interpolator.nestingRegexp),C=y&&y.length;g<C&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,C=new Array(y),L=0;L<y;L++)C[L]=arguments[L];return o&&o[0]===C[0]&&!r.context?(u.logger.warn(`It seems you are nesting recursively key: ${C[0]} in key: ${n[0]}`),null):u.translate(...C,n)},r)),r.interpolation&&this.interpolator.reset()}const d=r.postProcess||this.options.postProcess,f=se(d)?[d]:d;return e!=null&&f&&f.length&&r.applyPostProcessor!==!1&&(e=Du.handle(f,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,o,u,d;return se(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(r))return;const p=this.extractFromKey(f,n),g=p.key;s=g;let v=p.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const y=n.count!==void 0&&!se(n.count),C=y&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),L=n.context!==void 0&&(se(n.context)||typeof n.context=="number")&&n.context!=="",N=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);v.forEach(M=>{this.isValidLookup(r)||(d=M,!qa[`${N[0]}-${M}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(d)&&(qa[`${N[0]}-${M}`]=!0,this.logger.warn(`key "${s}" for languages "${N.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(B=>{if(this.isValidLookup(r))return;u=B;const j=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(j,g,B,M,n);else{let G;y&&(G=this.pluralResolver.getSuffix(B,n.count,n));const U=`${this.options.pluralSeparator}zero`,Z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(j.push(g+G),n.ordinal&&G.indexOf(Z)===0&&j.push(g+G.replace(Z,this.options.pluralSeparator)),C&&j.push(g+U)),L){const ee=`${g}${this.options.contextSeparator}${n.context}`;j.push(ee),y&&(j.push(ee+G),n.ordinal&&G.indexOf(Z)===0&&j.push(ee+G.replace(Z,this.options.pluralSeparator)),C&&j.push(ee+U))}}let $;for(;$=j.pop();)this.isValidLookup(r)||(o=$,r=this.getResource(B,M,$,n))}))})}),{res:r,usedKey:s,exactUsedKey:o,usedLng:u,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!se(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const o of n)delete s[o]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const ji=t=>t.charAt(0).toUpperCase()+t.slice(1);class Ua{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ze.create("languageUtils")}getScriptPartFromCode(e){if(e=Or(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Or(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(se(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=ji(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=ji(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=ji(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),se(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],o=u=>{u&&(this.isSupportedCode(u)?s.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return se(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):se(e)&&o(this.formatLanguageCode(e)),r.forEach(u=>{s.indexOf(u)<0&&o(this.formatLanguageCode(u))}),s}}let Td=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ed={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Od=["v1","v2","v3"],Rd=["v4"],za={zero:0,one:1,two:2,few:3,many:4,other:5},jd=()=>{const t={};return Td.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:Ed[e.fc]}})}),t};class _d{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Ze.create("pluralResolver"),(!this.options.compatibilityJSON||Rd.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=jd(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Or(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let u;try{u=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const f=this.languageUtils.getLanguagePartFromCode(e);u=this.getRule(f,n)}return this.pluralRulesCache[o]=u,u}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,o)=>za[s]-za[o]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const o=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Od.includes(this.options.compatibilityJSON)}}const Wa=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=xd(t,e,n);return!o&&s&&se(n)&&(o=Ji(t,n,r),o===void 0&&(o=Ji(e,n,r))),o},_i=t=>t.replace(/\$/g,"$$$$");class Ld{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ze.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:o,prefixEscaped:u,suffix:d,suffixEscaped:f,formatSeparator:p,unescapeSuffix:g,unescapePrefix:v,nestingPrefix:y,nestingPrefixEscaped:C,nestingSuffix:L,nestingSuffixEscaped:N,nestingOptionsSeparator:M,maxReplaces:B,alwaysFormat:j}=e.interpolation;this.escape=n!==void 0?n:Sd,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Xt(o):u||"{{",this.suffix=d?Xt(d):f||"}}",this.formatSeparator=p||",",this.unescapePrefix=g?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=y?Xt(y):C||Xt("$t("),this.nestingSuffix=L?Xt(L):N||Xt(")"),this.nestingOptionsSeparator=M||",",this.maxReplaces=B||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let o,u,d;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=C=>{if(C.indexOf(this.formatSeparator)<0){const B=Wa(n,f,C,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(B,void 0,r,{...s,...n,interpolationkey:C}):B}const L=C.split(this.formatSeparator),N=L.shift().trim(),M=L.join(this.formatSeparator).trim();return this.format(Wa(n,f,N,this.options.keySeparator,this.options.ignoreJSONStructure),M,r,{...s,...n,interpolationkey:N})};this.resetRegExp();const g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,v=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:C=>_i(C)},{regex:this.regexp,safeValue:C=>this.escapeValue?_i(this.escape(C)):_i(C)}].forEach(C=>{for(d=0;o=C.regex.exec(e);){const L=o[1].trim();if(u=p(L),u===void 0)if(typeof g=="function"){const M=g(e,o,s);u=se(M)?M:""}else if(s&&Object.prototype.hasOwnProperty.call(s,L))u="";else if(v){u=o[0];continue}else this.logger.warn(`missed to pass in variable ${L} for interpolating ${e}`),u="";else!se(u)&&!this.useRawValueToEscape&&(u=Ia(u));const N=C.safeValue(u);if(e=e.replace(o[0],N),v?(C.regex.lastIndex+=u.length,C.regex.lastIndex-=o[0].length):C.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,u;const d=(f,p)=>{const g=this.nestingOptionsSeparator;if(f.indexOf(g)<0)return f;const v=f.split(new RegExp(`${g}[ ]*{`));let y=`{${v[1]}`;f=v[0],y=this.interpolate(y,u);const C=y.match(/'/g),L=y.match(/"/g);(C&&C.length%2===0&&!L||L.length%2!==0)&&(y=y.replace(/'/g,'"'));try{u=JSON.parse(y),p&&(u={...p,...u})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,N),`${f}${g}${y}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,f};for(;s=this.nestingRegexp.exec(e);){let f=[];u={...r},u=u.replace&&!se(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;let p=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const g=s[1].split(this.formatSeparator).map(v=>v.trim());s[1]=g.shift(),f=g,p=!0}if(o=n(d.call(this,s[1].trim(),u),u),o&&s[0]===e&&!se(o))return o;se(o)||(o=Ia(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),p&&(o=f.reduce((g,v)=>this.format(g,v,r.lng,{...r,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const Nd=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(u=>{if(u){const[d,...f]=u.split(":"),p=f.join(":").trim().replace(/^'+|'+$/g,""),g=d.trim();n[g]||(n[g]=p),p==="false"&&(n[g]=!1),p==="true"&&(n[g]=!0),isNaN(p)||(n[g]=parseInt(p,10))}})}return{formatName:e,formatOptions:n}},Jt=t=>{const e={};return(n,r,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const u=r+JSON.stringify(o);let d=e[u];return d||(d=t(Or(r),s),e[u]=d),d(n)}};class Md{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ze.create("formatter"),this.options=e,this.formats={number:Jt((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return o=>s.format(o)}),currency:Jt((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return o=>s.format(o)}),datetime:Jt((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return o=>s.format(o)}),relativetime:Jt((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return o=>s.format(o,r.range||"day")}),list:Jt((n,r)=>{const s=new Intl.ListFormat(n,{...r});return o=>s.format(o)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Jt(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(d=>d.indexOf(")")>-1)){const d=o.findIndex(f=>f.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,d)].join(this.formatSeparator)}return o.reduce((d,f)=>{const{formatName:p,formatOptions:g}=Nd(f);if(this.formats[p]){let v=d;try{const y=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},C=y.locale||y.lng||s.locale||s.lng||r;v=this.formats[p](d,C,{...g,...s,...y})}catch(y){this.logger.warn(y)}return v}else this.logger.warn(`there was no format function for ${p}`);return d},e)}}const Vd=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Id extends qr{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Ze.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const o={},u={},d={},f={};return e.forEach(p=>{let g=!0;n.forEach(v=>{const y=`${p}|${v}`;!r.reload&&this.store.hasResourceBundle(p,v)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?u[y]===void 0&&(u[y]=!0):(this.state[y]=1,g=!1,u[y]===void 0&&(u[y]=!0),o[y]===void 0&&(o[y]=!0),f[v]===void 0&&(f[v]=!0)))}),g||(d[p]=!0)}),(Object.keys(o).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(u),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(f)}}loaded(e,n,r){const s=e.split("|"),o=s[0],u=s[1];n&&this.emit("failedLoading",o,u,n),!n&&r&&this.store.addResourceBundle(o,u,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const d={};this.queue.forEach(f=>{bd(f.loaded,[o],u),Vd(f,e),n&&f.errors.push(n),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(p=>{d[p]||(d[p]={});const g=f.loaded[p];g.length&&g.forEach(v=>{d[p][v]===void 0&&(d[p][v]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(f=>!f.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!e.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:o,callback:u});return}this.readingCalls++;const d=(p,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(p&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,o*2,u)},o);return}u(p,g)},f=this.backend[r].bind(this.backend);if(f.length===2){try{const p=f(e,n);p&&typeof p.then=="function"?p.then(g=>d(null,g)).catch(d):d(null,p)}catch(p){d(p)}return}return f(e,n,d)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();se(e)&&(e=this.languageUtils.toResolveHierarchy(e)),se(n)&&(n=[n]);const o=this.queueLoad(e,n,r,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(u=>{this.loadOne(u)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],o=r[1];this.read(s,o,"read",void 0,void 0,(u,d)=>{u&&this.logger.warn(`${n}loading namespace ${o} for language ${s} failed`,u),!u&&d&&this.logger.log(`${n}loaded namespace ${o} for language ${s}`,d),this.loaded(e,u,d)})}saveMissing(e,n,r,s,o){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const f={...u,isUpdate:o},p=this.backend.create.bind(this.backend);if(p.length<6)try{let g;p.length===5?g=p(e,n,r,s,f):g=p(e,n,r,s),g&&typeof g.then=="function"?g.then(v=>d(null,v)).catch(d):d(null,g)}catch(g){d(g)}else p(e,n,r,s,d,f)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const Ha=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),se(t[1])&&(e.defaultValue=t[1]),se(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Ga=t=>(se(t.ns)&&(t.ns=[t.ns]),se(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),se(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Sr=()=>{},Fd=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Mn extends qr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ga(e),this.services={},this.logger=Ze,this.modules={external:[]},Fd(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(se(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=Ha();this.options={...s,...this.options,...Ga(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const o=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?Ze.init(o(this.modules.logger),this.options):Ze.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=Md);const v=new Ua(this.options);this.store=new $a(this.options.resources,this.options);const y=this.services;y.logger=Ze,y.resourceStore=this.store,y.languageUtils=v,y.pluralResolver=new _d(v,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(y.formatter=o(g),y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Ld(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new Id(o(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",function(C){for(var L=arguments.length,N=new Array(L>1?L-1:0),M=1;M<L;M++)N[M-1]=arguments[M];e.emit(C,...N)}),this.modules.languageDetector&&(y.languageDetector=o(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=o(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new jr(this.services,this.options),this.translator.on("*",function(C){for(var L=arguments.length,N=new Array(L>1?L-1:0),M=1;M<L;M++)N[M-1]=arguments[M];e.emit(C,...N)}),this.modules.external.forEach(C=>{C.init&&C.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Sr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return e.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return e.store[g](...arguments),e}});const f=kn(),p=()=>{const g=(v,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(y),r(v,y)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?p():setTimeout(p,0),f}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sr;const s=se(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],u=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(p=>{p!=="cimode"&&o.indexOf(p)<0&&o.push(p)})};s?u(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>u(f)),this.options.preload&&this.options.preload.forEach(d=>u(d)),this.services.backendConnector.load(o,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(d)})}else r(null)}reloadResources(e,n,r){const s=kn();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Sr),this.services.backendConnector.reload(e,n,o=>{s.resolve(),r(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Du.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=kn();this.emit("languageChanging",e);const o=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},u=(f,p)=>{p?(o(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(f,function(){return r.t(...arguments)})},d=f=>{!e&&!f&&this.services.languageDetector&&(f=[]);const p=se(f)?f:this.services.languageUtils.getBestMatchFromCodes(f);p&&(this.language||o(p),this.translator.language||this.translator.changeLanguage(p),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(p)),this.loadResources(p,g=>{u(g,p)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(e),s}getFixedT(e,n,r){var s=this;const o=function(u,d){let f;if(typeof d!="object"){for(var p=arguments.length,g=new Array(p>2?p-2:0),v=2;v<p;v++)g[v-2]=arguments[v];f=s.options.overloadTranslationOptionHandler([u,d].concat(g))}else f={...d};f.lng=f.lng||o.lng,f.lngs=f.lngs||o.lngs,f.ns=f.ns||o.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||r||o.keyPrefix);const y=s.options.keySeparator||".";let C;return f.keyPrefix&&Array.isArray(u)?C=u.map(L=>`${f.keyPrefix}${y}${L}`):C=f.keyPrefix?`${f.keyPrefix}${y}${u}`:u,s.t(C,f)};return se(e)?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const u=(d,f)=>{const p=this.services.backendConnector.state[`${d}|${f}`];return p===-1||p===0||p===2};if(n.precheck){const d=n.precheck(this,u);if(d!==void 0)return d}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(r,e)&&(!s||u(o,e)))}loadNamespaces(e,n){const r=kn();return this.options.ns?(se(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=kn();se(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(u=>s.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return o.length?(this.options.preload=s.concat(o),this.loadResources(u=>{r.resolve(),n&&n(u)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new Ua(Ha());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Mn(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sr;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Mn(s);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(d=>{o[d]=this[d]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new $a(this.store.data,s),o.services.resourceStore=o.store),o.translator=new jr(o.services,s),o.translator.on("*",function(d){for(var f=arguments.length,p=new Array(f>1?f-1:0),g=1;g<f;g++)p[g-1]=arguments[g];o.emit(d,...p)}),o.init(s,n),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Oe=Mn.createInstance();Oe.createInstance=Mn.createInstance;Oe.createInstance;Oe.dir;Oe.init;Oe.loadResources;Oe.reloadResources;Oe.use;Oe.changeLanguage;Oe.getFixedT;Oe.t;Oe.exists;Oe.setDefaultNamespace;Oe.hasLoadedNamespace;Oe.loadNamespaces;Oe.loadLanguages;const{slice:Bd,forEach:Kd}=[];function $d(t){return Kd.call(Bd.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function qd(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const Ya=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ud=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let o=`${t}=${s}`;if(r.maxAge>0){const u=r.maxAge-0;if(Number.isNaN(u))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(u)}`}if(r.domain){if(!Ya.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!Ya.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},Xa={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=Ud(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var zd={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Xa.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:o}=e;n&&typeof document<"u"&&Xa.create(n,t,r,s,o)}},Wd={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const u=s.substring(1).split("&");for(let d=0;d<u.length;d++){const f=u[d].indexOf("=");f>0&&u[d].substring(0,f)===e&&(n=u[d].substring(f+1))}}return n}},Hd={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const u=o.substring(1);if(e){const d=u.split("&");for(let f=0;f<d.length;f++){const p=d[f].indexOf("=");p>0&&d[f].substring(0,p)===e&&(r=d[f].substring(p+1))}}if(r)return r;if(!r&&n>-1){const d=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?(s=d[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let Qt=null;const Ja=()=>{if(Qt!==null)return Qt;try{if(Qt=typeof window<"u"&&window.localStorage!==null,!Qt)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Qt=!1}return Qt};var Gd={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Ja())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&Ja()&&window.localStorage.setItem(n,t)}};let Zt=null;const Qa=()=>{if(Zt!==null)return Zt;try{if(Zt=typeof window<"u"&&window.sessionStorage!==null,!Zt)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Zt=!1}return Zt};var Yd={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Qa())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&Qa()&&window.sessionStorage.setItem(n,t)}},Xd={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let o=0;o<n.length;o++)e.push(n[o]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},Jd={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Qd={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},Zd={name:"subdomain",lookup(t){var s,o;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((o=(s=window.location)==null?void 0:s.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let Tu=!1;try{document.cookie,Tu=!0}catch{}const Eu=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Tu||Eu.splice(1,1);const ef=()=>({order:Eu,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Ou{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=$d(n,this.options||{},ef()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(zd),this.addDetector(Wd),this.addDetector(Gd),this.addDetector(Yd),this.addDetector(Xd),this.addDetector(Jd),this.addDetector(Qd),this.addDetector(Zd),this.addDetector(Hd)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!qd(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Ou.type="languageDetector";const tf={appName:"Fair Play Deck",appDescription:"Manage household tasks with your partner",ok:"OK",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",add:"Add",close:"Close",back:"Back",next:"Next",prev:"Previous",loading:"Loading...",error:"Error",success:"Success"},nf={dashboard:"Dashboard",gameBoard:"Game Board",cardGallery:"Cards",insights:"Insights",settings:"Settings"},rf={title:"Cards",dailyGrind:"Daily Grind",kids:"Kids",home:"Home",magic:"Magic",wild:"Wild",custom:"Custom",unassigned:"Unassigned",assigned:"Assigned",completed:"Completed",noCards:"No cards yet. Create or import some to get started."},sf={partnerA:"Partner A",partnerB:"Partner B",createPartner:"Create Partner Profile",editPartner:"Edit Partner",name:"Name",avatar:"Avatar",theme:"Theme Color"},af={deal:"Deal Cards",dealModes:{random:"Random Deal",weighted:"Weighted",draft:"Draft Mode",auction:"Auction",quick:"Quick Deal"},negotiate:"Negotiate",propose:"Propose Trade",accept:"Accept",reject:"Reject",counter:"Counter Offer"},of={welcome:"Welcome to Fair Play Deck",step1:"Manage household tasks together",step2:"Fair distribution of responsibilities",step3:"Negotiate and balance workload",getStarted:"Get Started"},uf={title:"Settings",language:"Language",theme:"Theme",notifications:"Notifications",sound:"Sound Effects",animations:"Animations",backup:"Backup & Export",about:"About"},lf={common:tf,navigation:nf,cards:rf,partners:sf,game:af,onboarding:of,settings:uf},cf={appName:"פייר פליי דק",appDescription:"ניהול מטלות בית עם בן/בת הזוג",ok:"אישור",cancel:"ביטול",save:"שמור",delete:"מחק",edit:"ערוך",add:"הוסף",close:"סגור",back:"חזור",next:"הבא",prev:"הקודם",loading:"טוען...",error:"שגיאה",success:"הצלחה"},df={dashboard:"לוח בקרה",gameBoard:"לוח המשחק",cardGallery:"כרטיסים",insights:"תובנות",settings:"הגדרות"},ff={title:"כרטיסים",dailyGrind:"השגרה היומית",kids:"ילדים",home:"הבית",magic:"קסם",wild:"פרא",custom:"מותאם אישית",unassigned:"לא משוייך",assigned:"משוייך",completed:"הושלם",noCards:"אין כרטיסים עדיין. צור או ייבא כרטיסים כדי להתחיל."},hf={partnerA:"שותף א",partnerB:"שותף ב",createPartner:"יצור פרופיל שותף",editPartner:"ערוך שותף",name:"שם",avatar:"אווטר",theme:"צבע ערכת הנושא"},pf={deal:"חלק כרטיסים",dealModes:{random:"חלוקה אקראית",weighted:"משוקלל",draft:"מצב ערסול",auction:"מכירה פומבית",quick:"חלוקה מהירה"},negotiate:"משא ומתן",propose:"הצע החלפה",accept:"קבל",reject:"דחה",counter:"הצע נגדית"},mf={welcome:"ברוכים הבאים ל-Fair Play Deck",step1:"נהל מטלות בית יחד",step2:"חלוקה הוגנת של אחריות",step3:"משא ומתן והאזנת עומסי עבודה",getStarted:"בואו נתחיל"},gf={title:"הגדרות",language:"שפה",theme:"ערכת נושא",notifications:"התראות",sound:"אפקטי קול",animations:"אנימציות",backup:"גיבוי וייצוא",about:"אודות"},yf={common:cf,navigation:df,cards:ff,partners:hf,game:pf,onboarding:mf,settings:gf},vf={en:{translation:lf},he:{translation:yf}};Oe.use(Ou).use(fd).init({resources:vf,fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},react:{useSuspense:!0}});const bf={},Za=t=>{let e;const n=new Set,r=(g,v)=>{const y=typeof g=="function"?g(e):g;if(!Object.is(y,e)){const C=e;e=v??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(L=>L(e,C))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(bf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(r,s,f);return f},xf=t=>t?Za(t):Za;var Ru={exports:{}},ju={},_u={exports:{}},Lu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var an=J;function wf(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sf=typeof Object.is=="function"?Object.is:wf,Af=an.useState,Pf=an.useEffect,Cf=an.useLayoutEffect,kf=an.useDebugValue;function Df(t,e){var n=e(),r=Af({inst:{value:n,getSnapshot:e}}),s=r[0].inst,o=r[1];return Cf(function(){s.value=n,s.getSnapshot=e,Li(s)&&o({inst:s})},[t,n,e]),Pf(function(){return Li(s)&&o({inst:s}),t(function(){Li(s)&&o({inst:s})})},[t]),kf(n),n}function Li(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sf(t,n)}catch{return!0}}function Tf(t,e){return e()}var Ef=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Tf:Df;Lu.useSyncExternalStore=an.useSyncExternalStore!==void 0?an.useSyncExternalStore:Ef;_u.exports=Lu;var Of=_u.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur=J,Rf=Of;function jf(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _f=typeof Object.is=="function"?Object.is:jf,Lf=Rf.useSyncExternalStore,Nf=Ur.useRef,Mf=Ur.useEffect,Vf=Ur.useMemo,If=Ur.useDebugValue;ju.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var o=Nf(null);if(o.current===null){var u={hasValue:!1,value:null};o.current=u}else u=o.current;o=Vf(function(){function f(C){if(!p){if(p=!0,g=C,C=r(C),s!==void 0&&u.hasValue){var L=u.value;if(s(L,C))return v=L}return v=C}if(L=v,_f(g,C))return L;var N=r(C);return s!==void 0&&s(L,N)?(g=C,L):(g=C,v=N)}var p=!1,g,v,y=n===void 0?null:n;return[function(){return f(e())},y===null?void 0:function(){return f(y())}]},[e,n,r,s]);var d=Lf(t,o[0],o[1]);return Mf(function(){u.hasValue=!0,u.value=d},[d]),If(d),d};Ru.exports=ju;var Ff=Ru.exports;const Bf=vu(Ff),Nu={},{useDebugValue:Kf}=bu,{useSyncExternalStoreWithSelector:$f}=Bf;let eo=!1;const qf=t=>t;function Uf(t,e=qf,n){(Nu?"production":void 0)!=="production"&&n&&!eo&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),eo=!0);const r=$f(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Kf(r),r}const zf=t=>{(Nu?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?xf(t):t,n=(r,s)=>Uf(e,r,s);return Object.assign(n,e),n},gs=t=>zf,Wf={};function Hf(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const u=f=>f===null?null:JSON.parse(f,void 0),d=(o=n.getItem(s))!=null?o:null;return d instanceof Promise?d.then(u):u(d)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const Vn=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Vn(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Vn(r)(n)}}}},Gf=(t,e)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:M=>M,version:0,merge:(M,B)=>({...B,...M}),...e},u=!1;const d=new Set,f=new Set;let p;try{p=o.getStorage()}catch{}if(!p)return t((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...M)},r,s);const g=Vn(o.serialize),v=()=>{const M=o.partialize({...r()});let B;const j=g({state:M,version:o.version}).then($=>p.setItem(o.name,$)).catch($=>{B=$});if(B)throw B;return j},y=s.setState;s.setState=(M,B)=>{y(M,B),v()};const C=t((...M)=>{n(...M),v()},r,s);let L;const N=()=>{var M;if(!p)return;u=!1,d.forEach(j=>j(r()));const B=((M=o.onRehydrateStorage)==null?void 0:M.call(o,r()))||void 0;return Vn(p.getItem.bind(p))(o.name).then(j=>{if(j)return o.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==o.version){if(o.migrate)return o.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var $;return L=o.merge(j,($=r())!=null?$:C),n(L,!0),v()}).then(()=>{B==null||B(L,void 0),u=!0,f.forEach(j=>j(L))}).catch(j=>{B==null||B(void 0,j)})};return s.persist={setOptions:M=>{o={...o,...M},M.getStorage&&(p=M.getStorage())},clearStorage:()=>{p==null||p.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>u,onHydrate:M=>(d.add(M),()=>{d.delete(M)}),onFinishHydration:M=>(f.add(M),()=>{f.delete(M)})},N(),L||C},Yf=(t,e)=>(n,r,s)=>{let o={storage:Hf(()=>localStorage),partialize:N=>N,version:0,merge:(N,M)=>({...M,...N}),...e},u=!1;const d=new Set,f=new Set;let p=o.storage;if(!p)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...N)},r,s);const g=()=>{const N=o.partialize({...r()});return p.setItem(o.name,{state:N,version:o.version})},v=s.setState;s.setState=(N,M)=>{v(N,M),g()};const y=t((...N)=>{n(...N),g()},r,s);s.getInitialState=()=>y;let C;const L=()=>{var N,M;if(!p)return;u=!1,d.forEach(j=>{var $;return j(($=r())!=null?$:y)});const B=((M=o.onRehydrateStorage)==null?void 0:M.call(o,(N=r())!=null?N:y))||void 0;return Vn(p.getItem.bind(p))(o.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==o.version){if(o.migrate)return[!0,o.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var $;const[G,U]=j;if(C=o.merge(U,($=r())!=null?$:y),n(C,!0),G)return g()}).then(()=>{B==null||B(C,void 0),C=r(),u=!0,f.forEach(j=>j(C))}).catch(j=>{B==null||B(void 0,j)})};return s.persist={setOptions:N=>{o={...o,...N},N.storage&&(p=N.storage)},clearStorage:()=>{p==null||p.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>L(),hasHydrated:()=>u,onHydrate:N=>(d.add(N),()=>{d.delete(N)}),onFinishHydration:N=>(f.add(N),()=>{f.delete(N)})},o.skipHydration||L(),C||y},Xf=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Wf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Gf(t,e)):Yf(t,e),ys=Xf,_r=gs()(ys((t,e)=>({cards:[],selectedCards:[],searchQuery:"",filterCategory:null,filterStatus:null,addCard:n=>t(r=>({cards:[...r.cards,n]})),removeCard:n=>t(r=>({cards:r.cards.filter(s=>s.id!==n),selectedCards:r.selectedCards.filter(s=>s!==n)})),updateCard:n=>t(r=>({cards:r.cards.map(s=>s.id===n.id?n:s)})),getCard:n=>e().cards.find(s=>s.id===n),getCards:()=>e().cards,getCardsByCategory:n=>e().cards.filter(s=>s.category===n),getCardsByStatus:n=>e().cards.filter(s=>s.status===n),getCardsByHolder:n=>e().cards.filter(s=>s.holder===n),selectCard:n=>t(r=>({selectedCards:[...new Set([...r.selectedCards,n])]})),deselectCard:n=>t(r=>({selectedCards:r.selectedCards.filter(s=>s!==n)})),toggleCard:n=>t(r=>({selectedCards:r.selectedCards.includes(n)?r.selectedCards.filter(o=>o!==n):[...r.selectedCards,n]})),clearSelection:()=>t(()=>({selectedCards:[]})),getSelectedCards:()=>{const n=e();return n.cards.filter(r=>n.selectedCards.includes(r.id))},setSearchQuery:n=>t(()=>({searchQuery:n})),setFilterCategory:n=>t(()=>({filterCategory:n})),setFilterStatus:n=>t(()=>({filterStatus:n})),getFilteredCards:()=>{const n=e();let r=n.cards;if(n.searchQuery){const s=n.searchQuery.toLowerCase();r=r.filter(o=>o.title.en.toLowerCase().includes(s)||o.title.he.toLowerCase().includes(s)||o.description.en.toLowerCase().includes(s)||o.description.he.toLowerCase().includes(s))}return n.filterCategory&&(r=r.filter(s=>s.category===n.filterCategory)),n.filterStatus&&(r=r.filter(s=>s.status===n.filterStatus)),r},bulkAddCards:n=>t(r=>({cards:[...r.cards,...n]})),bulkRemoveCards:n=>t(r=>({cards:r.cards.filter(s=>!n.includes(s.id)),selectedCards:r.selectedCards.filter(s=>!n.includes(s))})),clearAll:()=>t(()=>({cards:[],selectedCards:[],searchQuery:"",filterCategory:null,filterStatus:null}))}),{name:"card-store",version:1})),Jf=gs()(ys((t,e)=>({gameState:null,currentDealMode:"random",isDealing:!1,dealHistory:[],initializeGame:n=>t(()=>({gameState:n,isDealing:!1})),setGameState:n=>t(()=>({gameState:n})),getGameState:()=>e().gameState,setCurrentDealMode:n=>t(()=>({currentDealMode:n})),setIsDealing:n=>t(()=>({isDealing:n})),addToDealHistory:n=>t(r=>({dealHistory:[...r.dealHistory,n]})),clearDealHistory:()=>t(()=>({dealHistory:[]})),endGame:()=>t(n=>n.gameState?{gameState:{...n.gameState,isActive:!1}}:{}),resetGame:()=>t(()=>({gameState:null,currentDealMode:"random",isDealing:!1,dealHistory:[]}))}),{name:"game-store",version:1})),to={language:"en",theme:"auto",animations:!0,soundEnabled:!0,notifications:!0,defaultDealMode:"random"},Mu=gs()(ys((t,e)=>({...to,setLanguage:n=>t(()=>({language:n})),setTheme:n=>t(()=>({theme:n})),toggleAnimations:()=>t(n=>({animations:!n.animations})),toggleSound:()=>t(n=>({soundEnabled:!n.soundEnabled})),toggleNotifications:()=>t(n=>({notifications:!n.notifications})),setDefaultDealMode:n=>t(()=>({defaultDealMode:n})),getSettings:()=>{const n=e();return{language:n.language,theme:n.theme,animations:n.animations,soundEnabled:n.soundEnabled,notifications:n.notifications,defaultDealMode:n.defaultDealMode}},resetSettings:()=>t(()=>to)}),{name:"settings-store",version:1}));var Vu={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(_a,function(){var n=function(i,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])})(i,a)},r=function(){return(r=Object.assign||function(i){for(var a,l=1,c=arguments.length;l<c;l++)for(var h in a=arguments[l])Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h]);return i}).apply(this,arguments)};function s(i,a,l){for(var c,h=0,m=a.length;h<m;h++)!c&&h in a||((c=c||Array.prototype.slice.call(a,0,h))[h]=a[h]);return i.concat(c||Array.prototype.slice.call(a))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:_a,u=Object.keys,d=Array.isArray;function f(i,a){return typeof a!="object"||u(a).forEach(function(l){i[l]=a[l]}),i}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var p=Object.getPrototypeOf,g={}.hasOwnProperty;function v(i,a){return g.call(i,a)}function y(i,a){typeof a=="function"&&(a=a(p(i))),(typeof Reflect>"u"?u:Reflect.ownKeys)(a).forEach(function(l){L(i,l,a[l])})}var C=Object.defineProperty;function L(i,a,l,c){C(i,a,f(l&&v(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},c))}function N(i){return{from:function(a){return i.prototype=Object.create(a.prototype),L(i.prototype,"constructor",i),{extend:y.bind(null,i.prototype)}}}}var M=Object.getOwnPropertyDescriptor,B=[].slice;function j(i,a,l){return B.call(i,a,l)}function $(i,a){return a(i)}function G(i){if(!i)throw new Error("Assertion Failed")}function U(i){o.setImmediate?setImmediate(i):setTimeout(i,0)}function Z(i,a){if(typeof a=="string"&&v(i,a))return i[a];if(!a)return i;if(typeof a!="string"){for(var l=[],c=0,h=a.length;c<h;++c){var m=Z(i,a[c]);l.push(m)}return l}var b=a.indexOf(".");if(b!==-1){var x=i[a.substr(0,b)];return x==null?void 0:Z(x,a.substr(b+1))}}function ee(i,a,l){if(i&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof a!="string"&&"length"in a){G(typeof l!="string"&&"length"in l);for(var c=0,h=a.length;c<h;++c)ee(i,a[c],l[c])}else{var m,b,x=a.indexOf(".");x!==-1?(m=a.substr(0,x),(b=a.substr(x+1))===""?l===void 0?d(i)&&!isNaN(parseInt(m))?i.splice(m,1):delete i[m]:i[m]=l:ee(x=!(x=i[m])||!v(i,m)?i[m]={}:x,b,l)):l===void 0?d(i)&&!isNaN(parseInt(a))?i.splice(a,1):delete i[a]:i[a]=l}}function ie(i){var a,l={};for(a in i)v(i,a)&&(l[a]=i[a]);return l}var Pe=[].concat;function Ce(i){return Pe.apply([],i)}var wt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ce([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(a){return a+i+"Array"})}))).filter(function(i){return o[i]}),Me=new Set(wt.map(function(i){return o[i]})),nt=null;function We(i){return nt=new WeakMap,i=function a(l){if(!l||typeof l!="object")return l;var c=nt.get(l);if(c)return c;if(d(l)){c=[],nt.set(l,c);for(var h=0,m=l.length;h<m;++h)c.push(a(l[h]))}else if(Me.has(l.constructor))c=l;else{var b,x=p(l);for(b in c=x===Object.prototype?{}:Object.create(x),nt.set(l,c),l)v(l,b)&&(c[b]=a(l[b]))}return c}(i),nt=null,i}var Ge={}.toString;function Ye(i){return Ge.call(i).slice(8,-1)}var rt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Se=typeof rt=="symbol"?function(i){var a;return i!=null&&(a=i[rt])&&a.apply(i)}:function(){return null};function fe(i,a){return a=i.indexOf(a),0<=a&&i.splice(a,1),0<=a}var ke={};function Ae(i){var a,l,c,h;if(arguments.length===1){if(d(i))return i.slice();if(this===ke&&typeof i=="string")return[i];if(h=Se(i)){for(l=[];!(c=h.next()).done;)l.push(c.value);return l}if(i==null)return[i];if(typeof(a=i.length)!="number")return[i];for(l=new Array(a);a--;)l[a]=i[a];return l}for(a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return l}var It=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},pn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$e=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(pn),hc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ft(i,a){this.name=i,this.message=a}function Xs(i,a){return i+". Errors: "+Object.keys(a).map(function(l){return a[l].toString()}).filter(function(l,c,h){return h.indexOf(l)===c}).join(`
`)}function Gn(i,a,l,c){this.failures=a,this.failedKeys=c,this.successCount=l,this.message=Xs(i,a)}function Bt(i,a){this.name="BulkError",this.failures=Object.keys(a).map(function(l){return a[l]}),this.failuresByPos=a,this.message=Xs(i,this.failures)}N(Ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(Gn).from(Ft),N(Bt).from(Ft);var Xr=$e.reduce(function(i,a){return i[a]=a+"Error",i},{}),pc=Ft,ne=$e.reduce(function(i,a){var l=a+"Error";function c(h,m){this.name=l,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=hc[a]||l,this.inner=null)}return N(c).from(pc),i[a]=c,i},{});ne.Syntax=SyntaxError,ne.Type=TypeError,ne.Range=RangeError;var Js=pn.reduce(function(i,a){return i[a+"Error"]=ne[a],i},{}),Yn=$e.reduce(function(i,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(i[a+"Error"]=ne[a]),i},{});function he(){}function fn(i){return i}function mc(i,a){return i==null||i===fn?a:function(l){return a(i(l))}}function xt(i,a){return function(){i.apply(this,arguments),a.apply(this,arguments)}}function gc(i,a){return i===he?a:function(){var l=i.apply(this,arguments);l!==void 0&&(arguments[0]=l);var c=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=a.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?xt(c,this.onsuccess):c),h&&(this.onerror=this.onerror?xt(h,this.onerror):h),m!==void 0?m:l}}function yc(i,a){return i===he?a:function(){i.apply(this,arguments);var l=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?xt(l,this.onsuccess):l),c&&(this.onerror=this.onerror?xt(c,this.onerror):c)}}function vc(i,a){return i===he?a:function(l){var c=i.apply(this,arguments);f(l,c);var h=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,l=a.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?xt(h,this.onsuccess):h),m&&(this.onerror=this.onerror?xt(m,this.onerror):m),c===void 0?l===void 0?void 0:l:f(c,l)}}function bc(i,a){return i===he?a:function(){return a.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function Jr(i,a){return i===he?a:function(){var l=i.apply(this,arguments);if(l&&typeof l.then=="function"){for(var c=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return l.then(function(){return a.apply(c,m)})}return a.apply(this,arguments)}}Yn.ModifyError=Gn,Yn.DexieError=Ft,Yn.BulkError=Bt;var Xe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Qs(i){Xe=i}var hn={},Zs=100,wt=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,p(i),i];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,p(a),i]}(),pn=wt[0],$e=wt[1],wt=wt[2],$e=$e&&$e.then,St=pn&&pn.constructor,Qr=!!wt,mn=function(i,a){gn.push([i,a]),Xn&&(queueMicrotask(wc),Xn=!1)},Zr=!0,Xn=!0,At=[],Jn=[],ei=fn,lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:he,pgp:!1,env:{},finalize:he},te=lt,gn=[],Pt=0,Qn=[];function X(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=te;if(typeof i!="function"){if(i!==hn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ni(this,this._value))}this._state=null,this._value=null,++a.ref,function l(c,h){try{h(function(m){if(c._state===null){if(m===c)throw new TypeError("A promise cannot be resolved with itself.");var b=c._lib&&Kt();m&&typeof m.then=="function"?l(c,function(x,S){m instanceof X?m._then(x,S):m.then(x,S)}):(c._state=!0,c._value=m,ta(c)),b&&$t()}},ni.bind(null,c))}catch(m){ni(c,m)}}(this,i)}var ti={get:function(){var i=te,a=nr;function l(c,h){var m=this,b=!i.global&&(i!==te||a!==nr),x=b&&!dt(),S=new X(function(A,T){ri(m,new ea(ra(c,i,b,x),ra(h,i,b,x),A,T,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return l.prototype=hn,l},set:function(i){L(this,"then",i&&i.prototype===hn?ti:{get:function(){return i},set:ti.set})}};function ea(i,a,l,c,h){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof a=="function"?a:null,this.resolve=l,this.reject=c,this.psd=h}function ni(i,a){var l,c;Jn.push(a),i._state===null&&(l=i._lib&&Kt(),a=ei(a),i._state=!1,i._value=a,c=i,At.some(function(h){return h._value===c._value})||At.push(c),ta(i),l&&$t())}function ta(i){var a=i._listeners;i._listeners=[];for(var l=0,c=a.length;l<c;++l)ri(i,a[l]);var h=i._PSD;--h.ref||h.finalize(),Pt===0&&(++Pt,mn(function(){--Pt==0&&ii()},[]))}function ri(i,a){if(i._state!==null){var l=i._state?a.onFulfilled:a.onRejected;if(l===null)return(i._state?a.resolve:a.reject)(i._value);++a.psd.ref,++Pt,mn(xc,[l,i,a])}else i._listeners.push(a)}function xc(i,a,l){try{var c,h=a._value;!a._state&&Jn.length&&(Jn=[]),c=Xe&&a._consoleTask?a._consoleTask.run(function(){return i(h)}):i(h),a._state||Jn.indexOf(h)!==-1||function(m){for(var b=At.length;b;)if(At[--b]._value===m._value)return At.splice(b,1)}(a),l.resolve(c)}catch(m){l.reject(m)}finally{--Pt==0&&ii(),--l.psd.ref||l.psd.finalize()}}function wc(){Ct(lt,function(){Kt()&&$t()})}function Kt(){var i=Zr;return Xn=Zr=!1,i}function $t(){var i,a,l;do for(;0<gn.length;)for(i=gn,gn=[],l=i.length,a=0;a<l;++a){var c=i[a];c[0].apply(null,c[1])}while(0<gn.length);Xn=Zr=!0}function ii(){var i=At;At=[],i.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var a=Qn.slice(0),l=a.length;l;)a[--l]()}function Zn(i){return new X(hn,!1,i)}function ge(i,a){var l=te;return function(){var c=Kt(),h=te;try{return ft(l,!0),i.apply(this,arguments)}catch(m){a&&a(m)}finally{ft(h,!1),c&&$t()}}}y(X.prototype,{then:ti,_then:function(i,a){ri(this,new ea(null,null,i,a,te))},catch:function(i){if(arguments.length===1)return this.then(null,i);var a=i,l=arguments[1];return typeof a=="function"?this.then(null,function(c){return(c instanceof a?l:Zn)(c)}):this.then(null,function(c){return(c&&c.name===a?l:Zn)(c)})},finally:function(i){return this.then(function(a){return X.resolve(i()).then(function(){return a})},function(a){return X.resolve(i()).then(function(){return Zn(a)})})},timeout:function(i,a){var l=this;return i<1/0?new X(function(c,h){var m=setTimeout(function(){return h(new ne.Timeout(a))},i);l.then(c,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(X.prototype,Symbol.toStringTag,"Dexie.Promise"),lt.env=na(),y(X,{all:function(){var i=Ae.apply(null,arguments).map(rr);return new X(function(a,l){i.length===0&&a([]);var c=i.length;i.forEach(function(h,m){return X.resolve(h).then(function(b){i[m]=b,--c||a(i)},l)})})},resolve:function(i){return i instanceof X?i:i&&typeof i.then=="function"?new X(function(a,l){i.then(a,l)}):new X(hn,!0,i)},reject:Zn,race:function(){var i=Ae.apply(null,arguments).map(rr);return new X(function(a,l){i.map(function(c){return X.resolve(c).then(a,l)})})},PSD:{get:function(){return te},set:function(i){return te=i}},totalEchoes:{get:function(){return nr}},newPSD:ct,usePSD:Ct,scheduler:{get:function(){return mn},set:function(i){mn=i}},rejectionMapper:{get:function(){return ei},set:function(i){ei=i}},follow:function(i,a){return new X(function(l,c){return ct(function(h,m){var b=te;b.unhandleds=[],b.onunhandled=m,b.finalize=xt(function(){var x,S=this;x=function(){S.unhandleds.length===0?h():m(S.unhandleds[0])},Qn.push(function A(){x(),Qn.splice(Qn.indexOf(A),1)}),++Pt,mn(function(){--Pt==0&&ii()},[])},b.finalize),i()},a,l,c)})}}),St&&(St.allSettled&&L(X,"allSettled",function(){var i=Ae.apply(null,arguments).map(rr);return new X(function(a){i.length===0&&a([]);var l=i.length,c=new Array(l);i.forEach(function(h,m){return X.resolve(h).then(function(b){return c[m]={status:"fulfilled",value:b}},function(b){return c[m]={status:"rejected",reason:b}}).then(function(){return--l||a(c)})})})}),St.any&&typeof AggregateError<"u"&&L(X,"any",function(){var i=Ae.apply(null,arguments).map(rr);return new X(function(a,l){i.length===0&&l(new AggregateError([]));var c=i.length,h=new Array(c);i.forEach(function(m,b){return X.resolve(m).then(function(x){return a(x)},function(x){h[b]=x,--c||l(new AggregateError(h))})})})}),St.withResolvers&&(X.withResolvers=St.withResolvers));var De={awaits:0,echoes:0,id:0},Sc=0,er=[],tr=0,nr=0,Ac=0;function ct(i,a,l,c){var h=te,m=Object.create(h);return m.parent=h,m.ref=0,m.global=!1,m.id=++Ac,lt.env,m.env=Qr?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},a&&f(m,a),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Ct(m,i,l,c),m.ref===0&&m.finalize(),c}function qt(){return De.id||(De.id=++Sc),++De.awaits,De.echoes+=Zs,De.id}function dt(){return!!De.awaits&&(--De.awaits==0&&(De.id=0),De.echoes=De.awaits*Zs,!0)}function rr(i){return De.echoes&&i&&i.constructor===St?(qt(),i.then(function(a){return dt(),a},function(a){return dt(),be(a)})):i}function Pc(){var i=er[er.length-1];er.pop(),ft(i,!1)}function ft(i,a){var l,c=te;(a?!De.echoes||tr++&&i===te:!tr||--tr&&i===te)||queueMicrotask(a?(function(h){++nr,De.echoes&&--De.echoes!=0||(De.echoes=De.awaits=De.id=0),er.push(te),ft(h,!0)}).bind(null,i):Pc),i!==te&&(te=i,c===lt&&(lt.env=na()),Qr&&(l=lt.env.Promise,a=i.env,(c.global||i.global)&&(Object.defineProperty(o,"Promise",a.PromiseProp),l.all=a.all,l.race=a.race,l.resolve=a.resolve,l.reject=a.reject,a.allSettled&&(l.allSettled=a.allSettled),a.any&&(l.any=a.any))))}function na(){var i=o.Promise;return Qr?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Ct(i,a,l,c,h){var m=te;try{return ft(i,!0),a(l,c,h)}finally{ft(m,!1)}}function ra(i,a,l,c){return typeof i!="function"?i:function(){var h=te;l&&qt(),ft(a,!0);try{return i.apply(this,arguments)}finally{ft(h,!1),c&&queueMicrotask(dt)}}}function si(i){Promise===St&&De.echoes===0?tr===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+$e).indexOf("[native code]")===-1&&(qt=dt=he);var be=X.reject,kt="￿",it="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ia="String expected.",Ut=[],ir="__dbnames",ai="readonly",oi="readwrite";function Dt(i,a){return i?a?function(){return i.apply(this,arguments)&&a.apply(this,arguments)}:i:a}var sa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function sr(i){return typeof i!="string"||/\./.test(i)?function(a){return a}:function(a){return a[i]===void 0&&i in a&&delete(a=We(a))[i],a}}function aa(){throw ne.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ce(i,a){try{var l=oa(i),c=oa(a);if(l!==c)return l==="Array"?1:c==="Array"?-1:l==="binary"?1:c==="binary"?-1:l==="string"?1:c==="string"?-1:l==="Date"?1:c!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return a<i?1:i<a?-1:0;case"binary":return function(h,m){for(var b=h.length,x=m.length,S=b<x?b:x,A=0;A<S;++A)if(h[A]!==m[A])return h[A]<m[A]?-1:1;return b===x?0:b<x?-1:1}(ua(i),ua(a));case"Array":return function(h,m){for(var b=h.length,x=m.length,S=b<x?b:x,A=0;A<S;++A){var T=ce(h[A],m[A]);if(T!==0)return T}return b===x?0:b<x?-1:1}(i,a)}}catch{}return NaN}function oa(i){var a=typeof i;return a!="object"?a:ArrayBuffer.isView(i)?"binary":(i=Ye(i),i==="ArrayBuffer"?"binary":i)}function ua(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}function ar(i,a,l){var c=i.schema.yProps;return c?(a&&0<l.numFailures&&(a=a.filter(function(h,m){return!l.failures[m]})),Promise.all(c.map(function(h){return h=h.updatesTable,a?i.db.table(h).where("k").anyOf(a).delete():i.db.table(h).clear()})).then(function(){return l})):l}var yn=(la.prototype.execute=function(i){var a=this["@@propmod"];if(a.add!==void 0){var l=a.add;if(d(l))return s(s([],d(i)?i:[],!0),l).sort();if(typeof l=="number")return(Number(i)||0)+l;if(typeof l=="bigint")try{return BigInt(i)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(a.remove!==void 0){var c=a.remove;if(d(c))return d(i)?i.filter(function(h){return!c.includes(h)}).sort():[];if(typeof c=="number")return Number(i)-c;if(typeof c=="bigint")try{return BigInt(i)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return l=(l=a.replacePrefix)===null||l===void 0?void 0:l[0],l&&typeof i=="string"&&i.startsWith(l)?a.replacePrefix[1]+i.substring(l.length):i},la);function la(i){this["@@propmod"]=i}function ca(i,a){for(var l=u(a),c=l.length,h=!1,m=0;m<c;++m){var b=l[m],x=a[b],S=Z(i,b);x instanceof yn?(ee(i,b,x.execute(S)),h=!0):S!==x&&(ee(i,b,x),h=!0)}return h}var da=(pe.prototype._trans=function(i,a,l){var c=this._tx||te.trans,h=this.name,m=Xe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function b(A,T,w){if(!w.schema[h])throw new ne.NotFound("Table "+h+" not part of transaction");return a(w.idbtrans,w)}var x=Kt();try{var S=c&&c.db._novip===this.db._novip?c===te.trans?c._promise(i,b,l):ct(function(){return c._promise(i,b,l)},{trans:c,transless:te.transless||te}):function A(T,w,O,P){if(T.idbdb&&(T._state.openComplete||te.letThrough||T._vip)){var k=T._createTransaction(w,O,T._dbSchema);try{k.create(),T._state.PR1398_maxLoop=3}catch(D){return D.name===Xr.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return A(T,w,O,P)})):be(D)}return k._promise(w,function(D,E){return ct(function(){return te.trans=k,P(D,E,k)})}).then(function(D){if(w==="readwrite")try{k.idbtrans.commit()}catch{}return w==="readonly"?D:k._completion.then(function(){return D})})}if(T._state.openComplete)return be(new ne.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return be(new ne.DatabaseClosed);T.open().catch(he)}return T._state.dbReadyPromise.then(function(){return A(T,w,O,P)})}(this.db,i,[this.name],b);return m&&(S._consoleTask=m,S=S.catch(function(A){return console.trace(A),be(A)})),S}finally{x&&$t()}},pe.prototype.get=function(i,a){var l=this;return i&&i.constructor===Object?this.where(i).first(a):i==null?be(new ne.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return l.core.get({trans:c,key:i}).then(function(h){return l.hook.reading.fire(h)})}).then(a)},pe.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(d(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var a=u(i);if(a.length===1)return this.where(a[0]).equals(i[a[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&a.every(function(A){return 0<=x.keyPath.indexOf(A)})){for(var S=0;S<a.length;++S)if(a.indexOf(x.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(x,S){return x.keyPath.length-S.keyPath.length})[0];if(l&&this.db._maxKey!==kt){var m=l.keyPath.slice(0,a.length);return this.where(m).equals(m.map(function(S){return i[S]}))}!l&&Xe&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var c=this.schema.idxByName;function h(x,S){return ce(x,S)===0}var b=a.reduce(function(w,S){var A=w[0],T=w[1],w=c[S],O=i[S];return[A||w,A||!w?Dt(T,w&&w.multi?function(P){return P=Z(P,S),d(P)&&P.some(function(k){return h(O,k)})}:function(P){return h(O,Z(P,S))}):T]},[null,null]),m=b[0],b=b[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(b):l?this.filter(b):this.where(a).equals("")},pe.prototype.filter=function(i){return this.toCollection().and(i)},pe.prototype.count=function(i){return this.toCollection().count(i)},pe.prototype.offset=function(i){return this.toCollection().offset(i)},pe.prototype.limit=function(i){return this.toCollection().limit(i)},pe.prototype.each=function(i){return this.toCollection().each(i)},pe.prototype.toArray=function(i){return this.toCollection().toArray(i)},pe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pe.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,d(i)?"[".concat(i.join("+"),"]"):i))},pe.prototype.reverse=function(){return this.toCollection().reverse()},pe.prototype.mapToClass=function(i){var a,l=this.db,c=this.name;function h(){return a!==null&&a.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof aa&&(function(S,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function T(){this.constructor=S}n(S,A),S.prototype=A===null?Object.create(A):(T.prototype=A.prototype,new T)}(h,a=i),Object.defineProperty(h.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),h.prototype.table=function(){return c},i=h);for(var m=new Set,b=i.prototype;b;b=p(b))Object.getOwnPropertyNames(b).forEach(function(S){return m.add(S)});function x(S){if(!S)return S;var A,T=Object.create(i.prototype);for(A in S)if(!m.has(A))try{T[A]=S[A]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),i},pe.prototype.defineClass=function(){return this.mapToClass(function(i){f(this,i)})},pe.prototype.add=function(i,a){var l=this,c=this.schema.primKey,h=c.auto,m=c.keyPath,b=i;return m&&h&&(b=sr(m)(i)),this._trans("readwrite",function(x){return l.core.mutate({trans:x,type:"add",keys:a!=null?[a]:null,values:[b]})}).then(function(x){return x.numFailures?X.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{ee(i,m,x)}catch{}return x})},pe.prototype.upsert=function(i,a){var l=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return l.core.get({trans:h,key:i}).then(function(m){var b=m??{};return ca(b,a),c&&ee(b,c,i),l.core.mutate({trans:h,type:"put",values:[b],keys:[i],upsert:!0,updates:{keys:[i],changeSpecs:[a]}}).then(function(x){return x.numFailures?X.reject(x.failures[0]):!!m})})})},pe.prototype.update=function(i,a){return typeof i!="object"||d(i)?this.where(":id").equals(i).modify(a):(i=Z(i,this.schema.primKey.keyPath),i===void 0?be(new ne.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(a))},pe.prototype.put=function(i,a){var l=this,c=this.schema.primKey,h=c.auto,m=c.keyPath,b=i;return m&&h&&(b=sr(m)(i)),this._trans("readwrite",function(x){return l.core.mutate({trans:x,type:"put",values:[b],keys:a!=null?[a]:null})}).then(function(x){return x.numFailures?X.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{ee(i,m,x)}catch{}return x})},pe.prototype.delete=function(i){var a=this;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"delete",keys:[i]}).then(function(c){return ar(a,[i],c)}).then(function(c){return c.numFailures?X.reject(c.failures[0]):void 0})})},pe.prototype.clear=function(){var i=this;return this._trans("readwrite",function(a){return i.core.mutate({trans:a,type:"deleteRange",range:sa}).then(function(l){return ar(i,null,l)})}).then(function(a){return a.numFailures?X.reject(a.failures[0]):void 0})},pe.prototype.bulkGet=function(i){var a=this;return this._trans("readonly",function(l){return a.core.getMany({keys:i,trans:l}).then(function(c){return c.map(function(h){return a.hook.reading.fire(h)})})})},pe.prototype.bulkAdd=function(i,a,l){var c=this,h=Array.isArray(a)?a:void 0,m=(l=l||(h?void 0:a))?l.allKeys:void 0;return this._trans("readwrite",function(b){var A=c.schema.primKey,x=A.auto,A=A.keyPath;if(A&&h)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,A=A&&x?i.map(sr(A)):i;return c.core.mutate({trans:b,type:"add",keys:h,values:A,wantResults:m}).then(function(k){var w=k.numFailures,O=k.results,P=k.lastResult,k=k.failures;if(w===0)return m?O:P;throw new Bt("".concat(c.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),k)})})},pe.prototype.bulkPut=function(i,a,l){var c=this,h=Array.isArray(a)?a:void 0,m=(l=l||(h?void 0:a))?l.allKeys:void 0;return this._trans("readwrite",function(b){var A=c.schema.primKey,x=A.auto,A=A.keyPath;if(A&&h)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,A=A&&x?i.map(sr(A)):i;return c.core.mutate({trans:b,type:"put",keys:h,values:A,wantResults:m}).then(function(k){var w=k.numFailures,O=k.results,P=k.lastResult,k=k.failures;if(w===0)return m?O:P;throw new Bt("".concat(c.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),k)})})},pe.prototype.bulkUpdate=function(i){var a=this,l=this.core,c=i.map(function(b){return b.key}),h=i.map(function(b){return b.changes}),m=[];return this._trans("readwrite",function(b){return l.getMany({trans:b,keys:c,cache:"clone"}).then(function(x){var S=[],A=[];i.forEach(function(w,O){var P=w.key,k=w.changes,D=x[O];if(D){for(var E=0,R=Object.keys(k);E<R.length;E++){var _=R[E],I=k[_];if(_===a.schema.primKey.keyPath){if(ce(I,P)!==0)throw new ne.Constraint("Cannot update primary key in bulkUpdate()")}else ee(D,_,I)}m.push(O),S.push(P),A.push(D)}});var T=S.length;return l.mutate({trans:b,type:"put",keys:S,values:A,updates:{keys:c,changeSpecs:h}}).then(function(w){var O=w.numFailures,P=w.failures;if(O===0)return T;for(var k=0,D=Object.keys(P);k<D.length;k++){var E,R=D[k],_=m[Number(R)];_!=null&&(E=P[R],delete P[R],P[_]=E)}throw new Bt("".concat(a.name,".bulkUpdate(): ").concat(O," of ").concat(T," operations failed"),P)})})})},pe.prototype.bulkDelete=function(i){var a=this,l=i.length;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"delete",keys:i}).then(function(h){return ar(a,i,h)})}).then(function(b){var h=b.numFailures,m=b.lastResult,b=b.failures;if(h===0)return m;throw new Bt("".concat(a.name,".bulkDelete(): ").concat(h," of ").concat(l," operations failed"),b)})},pe);function pe(){}function vn(i){function a(b,x){if(x){for(var S=arguments.length,A=new Array(S-1);--S;)A[S-1]=arguments[S];return l[b].subscribe.apply(null,A),i}if(typeof b=="string")return l[b]}var l={};a.addEventType=m;for(var c=1,h=arguments.length;c<h;++c)m(arguments[c]);return a;function m(b,x,S){if(typeof b!="object"){var A;x=x||bc;var T={subscribers:[],fire:S=S||he,subscribe:function(w){T.subscribers.indexOf(w)===-1&&(T.subscribers.push(w),T.fire=x(T.fire,w))},unsubscribe:function(w){T.subscribers=T.subscribers.filter(function(O){return O!==w}),T.fire=T.subscribers.reduce(x,S)}};return l[b]=a[b]=T}u(A=b).forEach(function(w){var O=A[w];if(d(O))m(w,A[w][0],A[w][1]);else{if(O!=="asap")throw new ne.InvalidArgument("Invalid event config");var P=m(w,fn,function(){for(var k=arguments.length,D=new Array(k);k--;)D[k]=arguments[k];P.subscribers.forEach(function(E){U(function(){E.apply(null,D)})})})}})}}function bn(i,a){return N(a).from({prototype:i}),a}function zt(i,a){return!(i.filter||i.algorithm||i.or)&&(a?i.justLimit:!i.replayFilter)}function ui(i,a){i.filter=Dt(i.filter,a)}function li(i,a,l){var c=i.replayFilter;i.replayFilter=c?function(){return Dt(c(),a())}:a,i.justLimit=l&&!c}function or(i,a){if(i.isPrimKey)return a.primaryKey;var l=a.getIndexByKeyPath(i.index);if(!l)throw new ne.Schema("KeyPath "+i.index+" on object store "+a.name+" is not indexed");return l}function fa(i,a,l){var c=or(i,a.schema);return a.openCursor({trans:l,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:c,range:i.range}})}function ur(i,a,l,c){var h=i.replayFilter?Dt(i.filter,i.replayFilter()):i.filter;if(i.or){var m={},b=function(x,S,A){var T,w;h&&!h(S,A,function(O){return S.stop(O)},function(O){return S.fail(O)})||((w=""+(T=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(T)),v(m,w)||(m[w]=!0,a(x,S,A)))};return Promise.all([i.or._iterate(b,l),ha(fa(i,c,l),i.algorithm,b,!i.keysOnly&&i.valueMapper)])}return ha(fa(i,c,l),Dt(i.algorithm,h),a,!i.keysOnly&&i.valueMapper)}function ha(i,a,l,c){var h=ge(c?function(m,b,x){return l(c(m),b,x)}:l);return i.then(function(m){if(m)return m.start(function(){var b=function(){return m.continue()};a&&!a(m,function(x){return b=x},function(x){m.stop(x),b=he},function(x){m.fail(x),b=he})||h(m.value,m,function(x){return b=x}),b()})})}var Cc=(de.prototype._read=function(i,a){var l=this._ctx;return l.error?l.table._trans(null,be.bind(null,l.error)):l.table._trans("readonly",i).then(a)},de.prototype._write=function(i){var a=this._ctx;return a.error?a.table._trans(null,be.bind(null,a.error)):a.table._trans("readwrite",i,"locked")},de.prototype._addAlgorithm=function(i){var a=this._ctx;a.algorithm=Dt(a.algorithm,i)},de.prototype._iterate=function(i,a){return ur(this._ctx,i,a,this._ctx.table.core)},de.prototype.clone=function(i){var a=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return i&&f(l,i),a._ctx=l,a},de.prototype.raw=function(){return this._ctx.valueMapper=null,this},de.prototype.each=function(i){var a=this._ctx;return this._read(function(l){return ur(a,i,l,a.table.core)})},de.prototype.count=function(i){var a=this;return this._read(function(l){var c=a._ctx,h=c.table.core;if(zt(c,!0))return h.count({trans:l,query:{index:or(c,h.schema),range:c.range}}).then(function(b){return Math.min(b,c.limit)});var m=0;return ur(c,function(){return++m,!1},l,h).then(function(){return m})}).then(i)},de.prototype.sortBy=function(i,a){var l=i.split(".").reverse(),c=l[0],h=l.length-1;function m(S,A){return A?m(S[l[A]],A-1):S[c]}var b=this._ctx.dir==="next"?1:-1;function x(S,A){return ce(m(S,h),m(A,h))*b}return this.toArray(function(S){return S.sort(x)}).then(a)},de.prototype.toArray=function(i){var a=this;return this._read(function(l){var c=a._ctx;if(c.dir==="next"&&zt(c,!0)&&0<c.limit){var h=c.valueMapper,m=or(c,c.table.core.schema);return c.table.core.query({trans:l,limit:c.limit,values:!0,query:{index:m,range:c.range}}).then(function(x){return x=x.result,h?x.map(h):x})}var b=[];return ur(c,function(x){return b.push(x)},l,c.table.core).then(function(){return b})},i)},de.prototype.offset=function(i){var a=this._ctx;return i<=0||(a.offset+=i,zt(a)?li(a,function(){var l=i;return function(c,h){return l===0||(l===1?--l:h(function(){c.advance(l),l=0}),!1)}}):li(a,function(){var l=i;return function(){return--l<0}})),this},de.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),li(this._ctx,function(){var a=i;return function(l,c,h){return--a<=0&&c(h),0<=a}},!0),this},de.prototype.until=function(i,a){return ui(this._ctx,function(l,c,h){return!i(l.value)||(c(h),a)}),this},de.prototype.first=function(i){return this.limit(1).toArray(function(a){return a[0]}).then(i)},de.prototype.last=function(i){return this.reverse().first(i)},de.prototype.filter=function(i){var a;return ui(this._ctx,function(l){return i(l.value)}),(a=this._ctx).isMatch=Dt(a.isMatch,i),this},de.prototype.and=function(i){return this.filter(i)},de.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},de.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},de.prototype.desc=function(){return this.reverse()},de.prototype.eachKey=function(i){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(l,c){i(c.key,c)})},de.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},de.prototype.eachPrimaryKey=function(i){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(l,c){i(c.primaryKey,c)})},de.prototype.keys=function(i){var a=this._ctx;a.keysOnly=!a.isMatch;var l=[];return this.each(function(c,h){l.push(h.key)}).then(function(){return l}).then(i)},de.prototype.primaryKeys=function(i){var a=this._ctx;if(a.dir==="next"&&zt(a,!0)&&0<a.limit)return this._read(function(c){var h=or(a,a.table.core.schema);return a.table.core.query({trans:c,values:!1,limit:a.limit,query:{index:h,range:a.range}})}).then(function(c){return c.result}).then(i);a.keysOnly=!a.isMatch;var l=[];return this.each(function(c,h){l.push(h.primaryKey)}).then(function(){return l}).then(i)},de.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},de.prototype.firstKey=function(i){return this.limit(1).keys(function(a){return a[0]}).then(i)},de.prototype.lastKey=function(i){return this.reverse().firstKey(i)},de.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var a={};return ui(this._ctx,function(h){var c=h.primaryKey.toString(),h=v(a,c);return a[c]=!0,!h}),this},de.prototype.modify=function(i){var a=this,l=this._ctx;return this._write(function(c){var h=typeof i=="function"?i:function(D){return ca(D,i)},m=l.table.core,A=m.schema.primaryKey,b=A.outbound,x=A.extractKey,S=200,A=a.db._options.modifyChunkSize;A&&(S=typeof A=="object"?A[m.name]||A["*"]||200:A);function T(D,_){var R=_.failures,_=_.numFailures;O+=D-_;for(var I=0,F=u(R);I<F.length;I++){var q=F[I];w.push(R[q])}}var w=[],O=0,P=[],k=i===pa;return a.clone().primaryKeys().then(function(D){function E(_){var I=Math.min(S,D.length-_),F=D.slice(_,_+I);return(k?Promise.resolve([]):m.getMany({trans:c,keys:F,cache:"immutable"})).then(function(q){var H=[],K=[],z=b?[]:null,Y=k?F:[];if(!k)for(var W=0;W<I;++W){var Q=q[W],oe={value:We(Q),primKey:D[_+W]};h.call(oe,oe.value,oe)!==!1&&(oe.value==null?Y.push(D[_+W]):b||ce(x(Q),x(oe.value))===0?(K.push(oe.value),b&&z.push(D[_+W])):(Y.push(D[_+W]),H.push(oe.value)))}return Promise.resolve(0<H.length&&m.mutate({trans:c,type:"add",values:H}).then(function(ue){for(var le in ue.failures)Y.splice(parseInt(le),1);T(H.length,ue)})).then(function(){return(0<K.length||R&&typeof i=="object")&&m.mutate({trans:c,type:"put",keys:z,values:K,criteria:R,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<_}).then(function(ue){return T(K.length,ue)})}).then(function(){return(0<Y.length||R&&k)&&m.mutate({trans:c,type:"delete",keys:Y,criteria:R,isAdditionalChunk:0<_}).then(function(ue){return ar(l.table,Y,ue)}).then(function(ue){return T(Y.length,ue)})}).then(function(){return D.length>_+I&&E(_+S)})})}var R=zt(l)&&l.limit===1/0&&(typeof i!="function"||k)&&{index:l.index,range:l.range};return E(0).then(function(){if(0<w.length)throw new Gn("Error modifying one or more objects",w,O,P);return D.length})})})},de.prototype.delete=function(){var i=this._ctx,a=i.range;return!zt(i)||i.table.schema.yProps||!i.isPrimKey&&a.type!==3?this.modify(pa):this._write(function(l){var c=i.table.core.schema.primaryKey,h=a;return i.table.core.count({trans:l,query:{index:c,range:h}}).then(function(m){return i.table.core.mutate({trans:l,type:"deleteRange",range:h}).then(function(S){var x=S.failures,S=S.numFailures;if(S)throw new Gn("Could not delete some values",Object.keys(x).map(function(A){return x[A]}),m-S);return m-S})})})},de);function de(){}var pa=function(i,a){return a.value=null};function kc(i,a){return i<a?-1:i===a?0:1}function Dc(i,a){return a<i?-1:i===a?0:1}function Ie(i,a,l){return i=i instanceof ga?new i.Collection(i):i,i._ctx.error=new(l||TypeError)(a),i}function Wt(i){return new i.Collection(i,function(){return ma("")}).limit(0)}function lr(i,a,l,c){var h,m,b,x,S,A,T,w=l.length;if(!l.every(function(k){return typeof k=="string"}))return Ie(i,ia);function O(k){h=k==="next"?function(E){return E.toUpperCase()}:function(E){return E.toLowerCase()},m=k==="next"?function(E){return E.toLowerCase()}:function(E){return E.toUpperCase()},b=k==="next"?kc:Dc;var D=l.map(function(E){return{lower:m(E),upper:h(E)}}).sort(function(E,R){return b(E.lower,R.lower)});x=D.map(function(E){return E.upper}),S=D.map(function(E){return E.lower}),T=(A=k)==="next"?"":c}O("next"),i=new i.Collection(i,function(){return ht(x[0],S[w-1]+c)}),i._ondirectionchange=function(k){O(k)};var P=0;return i._addAlgorithm(function(k,D,E){var R=k.key;if(typeof R!="string")return!1;var _=m(R);if(a(_,S,P))return!0;for(var I=null,F=P;F<w;++F){var q=function(H,K,z,Y,W,Q){for(var oe=Math.min(H.length,Y.length),ue=-1,le=0;le<oe;++le){var Fe=K[le];if(Fe!==Y[le])return W(H[le],z[le])<0?H.substr(0,le)+z[le]+z.substr(le+1):W(H[le],Y[le])<0?H.substr(0,le)+Y[le]+z.substr(le+1):0<=ue?H.substr(0,ue)+K[ue]+z.substr(ue+1):null;W(H[le],Fe)<0&&(ue=le)}return oe<Y.length&&Q==="next"?H+z.substr(H.length):oe<H.length&&Q==="prev"?H.substr(0,z.length):ue<0?null:H.substr(0,ue)+Y[ue]+z.substr(ue+1)}(R,_,x[F],S[F],b,A);q===null&&I===null?P=F+1:(I===null||0<b(I,q))&&(I=q)}return D(I!==null?function(){k.continue(I+T)}:E),!1}),i}function ht(i,a,l,c){return{type:2,lower:i,upper:a,lowerOpen:l,upperOpen:c}}function ma(i){return{type:1,lower:i,upper:i}}var ga=(Object.defineProperty(Te.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Te.prototype.between=function(i,a,l,c){l=l!==!1,c=c===!0;try{return 0<this._cmp(i,a)||this._cmp(i,a)===0&&(l||c)&&(!l||!c)?Wt(this):new this.Collection(this,function(){return ht(i,a,!l,!c)})}catch{return Ie(this,it)}},Te.prototype.equals=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ma(i)})},Te.prototype.above=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(i,void 0,!0)})},Te.prototype.aboveOrEqual=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(i,void 0,!1)})},Te.prototype.below=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(void 0,i,!1,!0)})},Te.prototype.belowOrEqual=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(void 0,i)})},Te.prototype.startsWith=function(i){return typeof i!="string"?Ie(this,ia):this.between(i,i+kt,!0,!0)},Te.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):lr(this,function(a,l){return a.indexOf(l[0])===0},[i],kt)},Te.prototype.equalsIgnoreCase=function(i){return lr(this,function(a,l){return a===l[0]},[i],"")},Te.prototype.anyOfIgnoreCase=function(){var i=Ae.apply(ke,arguments);return i.length===0?Wt(this):lr(this,function(a,l){return l.indexOf(a)!==-1},i,"")},Te.prototype.startsWithAnyOfIgnoreCase=function(){var i=Ae.apply(ke,arguments);return i.length===0?Wt(this):lr(this,function(a,l){return l.some(function(c){return a.indexOf(c)===0})},i,kt)},Te.prototype.anyOf=function(){var i=this,a=Ae.apply(ke,arguments),l=this._cmp;try{a.sort(l)}catch{return Ie(this,it)}if(a.length===0)return Wt(this);var c=new this.Collection(this,function(){return ht(a[0],a[a.length-1])});c._ondirectionchange=function(m){l=m==="next"?i._ascending:i._descending,a.sort(l)};var h=0;return c._addAlgorithm(function(m,b,x){for(var S=m.key;0<l(S,a[h]);)if(++h===a.length)return b(x),!1;return l(S,a[h])===0||(b(function(){m.continue(a[h])}),!1)}),c},Te.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Te.prototype.noneOf=function(){var i=Ae.apply(ke,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Ie(this,it)}var a=i.reduce(function(l,c){return l?l.concat([[l[l.length-1][1],c]]):[[-1/0,c]]},null);return a.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},Te.prototype.inAnyRange=function(R,a){var l=this,c=this._cmp,h=this._ascending,m=this._descending,b=this._min,x=this._max;if(R.length===0)return Wt(this);if(!R.every(function(_){return _[0]!==void 0&&_[1]!==void 0&&h(_[0],_[1])<=0}))return Ie(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument);var S=!a||a.includeLowers!==!1,A=a&&a.includeUppers===!0,T,w=h;function O(_,I){return w(_[0],I[0])}try{(T=R.reduce(function(_,I){for(var F=0,q=_.length;F<q;++F){var H=_[F];if(c(I[0],H[1])<0&&0<c(I[1],H[0])){H[0]=b(H[0],I[0]),H[1]=x(H[1],I[1]);break}}return F===q&&_.push(I),_},[])).sort(O)}catch{return Ie(this,it)}var P=0,k=A?function(_){return 0<h(_,T[P][1])}:function(_){return 0<=h(_,T[P][1])},D=S?function(_){return 0<m(_,T[P][0])}:function(_){return 0<=m(_,T[P][0])},E=k,R=new this.Collection(this,function(){return ht(T[0][0],T[T.length-1][1],!S,!A)});return R._ondirectionchange=function(_){w=_==="next"?(E=k,h):(E=D,m),T.sort(O)},R._addAlgorithm(function(_,I,F){for(var q,H=_.key;E(H);)if(++P===T.length)return I(F),!1;return!k(q=H)&&!D(q)||(l._cmp(H,T[P][1])===0||l._cmp(H,T[P][0])===0||I(function(){w===h?_.continue(T[P][0]):_.continue(T[P][1])}),!1)}),R},Te.prototype.startsWithAnyOf=function(){var i=Ae.apply(ke,arguments);return i.every(function(a){return typeof a=="string"})?i.length===0?Wt(this):this.inAnyRange(i.map(function(a){return[a,a+kt]})):Ie(this,"startsWithAnyOf() only works with strings")},Te);function Te(){}function Je(i){return ge(function(a){return xn(a),i(a.target.error),!1})}function xn(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var wn="storagemutated",ci="x-storagemutated-1",pt=vn(null,wn),Tc=(Qe.prototype._lock=function(){return G(!te.global),++this._reculock,this._reculock!==1||te.global||(te.lockOwnerFor=this),this},Qe.prototype._unlock=function(){if(G(!te.global),--this._reculock==0)for(te.global||(te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Ct(i[1],i[0])}catch{}}return this},Qe.prototype._locked=function(){return this._reculock&&te.lockOwnerFor!==this},Qe.prototype.create=function(i){var a=this;if(!this.mode)return this;var l=this.db.idbdb,c=this.db._state.dbOpenError;if(G(!this.idbtrans),!i&&!l)switch(c&&c.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(c);case"MissingAPIError":throw new ne.MissingAPI(c.message,c);default:throw new ne.OpenFailed(c)}if(!this.active)throw new ne.TransactionInactive;return G(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ge(function(h){xn(h),a._reject(i.error)}),i.onabort=ge(function(h){xn(h),a.active&&a._reject(new ne.Abort(i.error)),a.active=!1,a.on("abort").fire(h)}),i.oncomplete=ge(function(){a.active=!1,a._resolve(),"mutatedParts"in i&&pt.storagemutated.fire(i.mutatedParts)}),this},Qe.prototype._promise=function(i,a,l){var c=this;if(i==="readwrite"&&this.mode!=="readwrite")return be(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return be(new ne.TransactionInactive);if(this._locked())return new X(function(m,b){c._blockedFuncs.push([function(){c._promise(i,a,l).then(m,b)},te])});if(l)return ct(function(){var m=new X(function(b,x){c._lock();var S=a(b,x,c);S&&S.then&&S.then(b,x)});return m.finally(function(){return c._unlock()}),m._lib=!0,m});var h=new X(function(m,b){var x=a(m,b,c);x&&x.then&&x.then(m,b)});return h._lib=!0,h},Qe.prototype._root=function(){return this.parent?this.parent._root():this},Qe.prototype.waitFor=function(i){var a,l=this._root(),c=X.resolve(i);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return c}):(l._waitingFor=c,l._waitingQueue=[],a=l.idbtrans.objectStore(l.storeNames[0]),function m(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(a.get(-1/0).onsuccess=m)}());var h=l._waitingFor;return new X(function(m,b){c.then(function(x){return l._waitingQueue.push(ge(m.bind(null,x)))},function(x){return l._waitingQueue.push(ge(b.bind(null,x)))}).finally(function(){l._waitingFor===h&&(l._waitingFor=null)})})},Qe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ne.Abort))},Qe.prototype.table=function(i){var a=this._memoizedTables||(this._memoizedTables={});if(v(a,i))return a[i];var l=this.schema[i];if(!l)throw new ne.NotFound("Table "+i+" not part of transaction");return l=new this.db.Table(i,l,this),l.core=this.db.core.table(i),a[i]=l},Qe);function Qe(){}function di(i,a,l,c,h,m,b,x){return{name:i,keyPath:a,unique:l,multi:c,auto:h,compound:m,src:(l&&!b?"&":"")+(c?"*":"")+(h?"++":"")+ya(a),type:x}}function ya(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function fi(i,a,l){return{name:i,primKey:a,indexes:l,mappedClass:null,idxByName:(c=function(h){return[h.name,h]},l.reduce(function(h,m,b){return b=c(m,b),b&&(h[b[0]]=b[1]),h},{}))};var c}var Sn=function(i){try{return i.only([[]]),Sn=function(){return[[]]},[[]]}catch{return Sn=function(){return kt},kt}};function hi(i){return i==null?function(){}:typeof i=="string"?(a=i).split(".").length===1?function(l){return l[a]}:function(l){return Z(l,a)}:function(l){return Z(l,i)};var a}function va(i){return[].slice.call(i)}var Ec=0;function An(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function Oc(i,a,S){function c(E){if(E.type===3)return null;if(E.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=E.lower,k=E.upper,D=E.lowerOpen,E=E.upperOpen;return P===void 0?k===void 0?null:a.upperBound(k,!!E):k===void 0?a.lowerBound(P,!!D):a.bound(P,k,!!D,!!E)}function h(O){var P,k=O.name;return{name:k,schema:O,mutate:function(D){var E=D.trans,R=D.type,_=D.keys,I=D.values,F=D.range;return new Promise(function(q,H){q=ge(q);var K=E.objectStore(k),z=K.keyPath==null,Y=R==="put"||R==="add";if(!Y&&R!=="delete"&&R!=="deleteRange")throw new Error("Invalid operation type: "+R);var W,Q=(_||I||{length:1}).length;if(_&&I&&_.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(Q===0)return q({numFailures:0,failures:{},results:[],lastResult:void 0});function oe(Ve){++Fe,xn(Ve)}var ue=[],le=[],Fe=0;if(R==="deleteRange"){if(F.type===4)return q({numFailures:Fe,failures:le,results:[],lastResult:void 0});F.type===3?ue.push(W=K.clear()):ue.push(W=K.delete(c(F)))}else{var z=Y?z?[I,_]:[I,null]:[_,null],ae=z[0],je=z[1];if(Y)for(var _e=0;_e<Q;++_e)ue.push(W=je&&je[_e]!==void 0?K[R](ae[_e],je[_e]):K[R](ae[_e])),W.onerror=oe;else for(_e=0;_e<Q;++_e)ue.push(W=K[R](ae[_e])),W.onerror=oe}function wr(Ve){Ve=Ve.target.result,ue.forEach(function(Ot,Ri){return Ot.error!=null&&(le[Ri]=Ot.error)}),q({numFailures:Fe,failures:le,results:R==="delete"?_:ue.map(function(Ot){return Ot.result}),lastResult:Ve})}W.onerror=function(Ve){oe(Ve),wr(Ve)},W.onsuccess=wr})},getMany:function(D){var E=D.trans,R=D.keys;return new Promise(function(_,I){_=ge(_);for(var F,q=E.objectStore(k),H=R.length,K=new Array(H),z=0,Y=0,W=function(ue){ue=ue.target,K[ue._pos]=ue.result,++Y===z&&_(K)},Q=Je(I),oe=0;oe<H;++oe)R[oe]!=null&&((F=q.get(R[oe]))._pos=oe,F.onsuccess=W,F.onerror=Q,++z);z===0&&_(K)})},get:function(D){var E=D.trans,R=D.key;return new Promise(function(_,I){_=ge(_);var F=E.objectStore(k).get(R);F.onsuccess=function(q){return _(q.target.result)},F.onerror=Je(I)})},query:(P=A,function(D){return new Promise(function(E,R){E=ge(E);var _,I,F,z=D.trans,q=D.values,H=D.limit,W=D.query,K=H===1/0?void 0:H,Y=W.index,W=W.range,z=z.objectStore(k),Y=Y.isPrimaryKey?z:z.index(Y.name),W=c(W);if(H===0)return E({result:[]});P?((K=q?Y.getAll(W,K):Y.getAllKeys(W,K)).onsuccess=function(Q){return E({result:Q.target.result})},K.onerror=Je(R)):(_=0,I=!q&&"openKeyCursor"in Y?Y.openKeyCursor(W):Y.openCursor(W),F=[],I.onsuccess=function(Q){var oe=I.result;return oe?(F.push(q?oe.value:oe.primaryKey),++_===H?E({result:F}):void oe.continue()):E({result:F})},I.onerror=Je(R))})}),openCursor:function(D){var E=D.trans,R=D.values,_=D.query,I=D.reverse,F=D.unique;return new Promise(function(q,H){q=ge(q);var Y=_.index,K=_.range,z=E.objectStore(k),z=Y.isPrimaryKey?z:z.index(Y.name),Y=I?F?"prevunique":"prev":F?"nextunique":"next",W=!R&&"openKeyCursor"in z?z.openKeyCursor(c(K),Y):z.openCursor(c(K),Y);W.onerror=Je(H),W.onsuccess=ge(function(Q){var oe,ue,le,Fe,ae=W.result;ae?(ae.___id=++Ec,ae.done=!1,oe=ae.continue.bind(ae),ue=(ue=ae.continuePrimaryKey)&&ue.bind(ae),le=ae.advance.bind(ae),Fe=function(){throw new Error("Cursor not stopped")},ae.trans=E,ae.stop=ae.continue=ae.continuePrimaryKey=ae.advance=function(){throw new Error("Cursor not started")},ae.fail=ge(H),ae.next=function(){var je=this,_e=1;return this.start(function(){return _e--?je.continue():je.stop()}).then(function(){return je})},ae.start=function(je){function _e(){if(W.result)try{je()}catch(Ve){ae.fail(Ve)}else ae.done=!0,ae.start=function(){throw new Error("Cursor behind last entry")},ae.stop()}var wr=new Promise(function(Ve,Ot){Ve=ge(Ve),W.onerror=Je(Ot),ae.fail=Ot,ae.stop=function(Ri){ae.stop=ae.continue=ae.continuePrimaryKey=ae.advance=Fe,Ve(Ri)}});return W.onsuccess=ge(function(Ve){W.onsuccess=_e,_e()}),ae.continue=oe,ae.continuePrimaryKey=ue,ae.advance=le,_e(),wr},q(ae)):q(null)},H)})},count:function(D){var E=D.query,R=D.trans,_=E.index,I=E.range;return new Promise(function(F,q){var H=R.objectStore(k),K=_.isPrimaryKey?H:H.index(_.name),H=c(I),K=H?K.count(H):K.count();K.onsuccess=ge(function(z){return F(z.target.result)}),K.onerror=Je(q)})}}}var m,b,x,T=(b=S,x=va((m=i).objectStoreNames),{schema:{name:m.name,tables:x.map(function(O){return b.objectStore(O)}).map(function(O){var P=O.keyPath,E=O.autoIncrement,k=d(P),D={},E={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P==null,compound:k,keyPath:P,autoIncrement:E,unique:!0,extractKey:hi(P)},indexes:va(O.indexNames).map(function(R){return O.index(R)}).map(function(F){var _=F.name,I=F.unique,q=F.multiEntry,F=F.keyPath,q={name:_,compound:d(F),keyPath:F,unique:I,multiEntry:q,extractKey:hi(F)};return D[An(F)]=q}),getIndexByKeyPath:function(R){return D[An(R)]}};return D[":id"]=E.primaryKey,P!=null&&(D[An(P)]=E.primaryKey),E})},hasGetAll:0<x.length&&"getAll"in b.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=T.schema,A=T.hasGetAll,T=S.tables.map(h),w={};return T.forEach(function(O){return w[O.name]=O}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(O){if(!w[O])throw new Error("Table '".concat(O,"' not found"));return w[O]},MIN_KEY:-1/0,MAX_KEY:Sn(a),schema:S}}function Rc(i,a,l,c){var h=l.IDBKeyRange;return l.indexedDB,{dbcore:(c=Oc(a,h,c),i.dbcore.reduce(function(m,b){return b=b.create,r(r({},m),b(m))},c))}}function cr(i,c){var l=c.db,c=Rc(i._middlewares,l,i._deps,c);i.core=c.dbcore,i.tables.forEach(function(h){var m=h.name;i.core.schema.tables.some(function(b){return b.name===m})&&(h.core=i.core.table(m),i[m]instanceof i.Table&&(i[m].core=h.core))})}function dr(i,a,l,c){l.forEach(function(h){var m=c[h];a.forEach(function(b){var x=function S(A,T){return M(A,T)||(A=p(A))&&S(A,T)}(b,h);(!x||"value"in x&&x.value===void 0)&&(b===i.Transaction.prototype||b instanceof i.Transaction?L(b,h,{get:function(){return this.table(h)},set:function(S){C(this,h,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):b[h]=new i.Table(h,m))})})}function pi(i,a){a.forEach(function(l){for(var c in l)l[c]instanceof i.Table&&delete l[c]})}function jc(i,a){return i._cfg.version-a._cfg.version}function _c(i,a,l,c){var h=i._dbSchema;l.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=fi("$meta",xa("")[0],[]),i._storeNames.push("$meta"));var m=i._createTransaction("readwrite",i._storeNames,h);m.create(l),m._completion.catch(c);var b=m._reject.bind(m),x=te.transless||te;ct(function(){return te.trans=m,te.transless=x,a!==0?(cr(i,l),A=a,((S=m).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(T){return T??A}):X.resolve(A)).then(function(T){return O=T,P=m,k=l,D=[],T=(w=i)._versions,E=w._dbSchema=hr(0,w.idbdb,k),(T=T.filter(function(R){return R._cfg.version>=O})).length!==0?(T.forEach(function(R){D.push(function(){var _=E,I=R._cfg.dbschema;pr(w,_,k),pr(w,I,k),E=w._dbSchema=I;var F=mi(_,I);F.add.forEach(function(Y){gi(k,Y[0],Y[1].primKey,Y[1].indexes)}),F.change.forEach(function(Y){if(Y.recreate)throw new ne.Upgrade("Not yet support for changing primary key");var W=k.objectStore(Y.name);Y.add.forEach(function(Q){return fr(W,Q)}),Y.change.forEach(function(Q){W.deleteIndex(Q.name),fr(W,Q)}),Y.del.forEach(function(Q){return W.deleteIndex(Q)})});var q=R._cfg.contentUpgrade;if(q&&R._cfg.version>O){cr(w,k),P._memoizedTables={};var H=ie(I);F.del.forEach(function(Y){H[Y]=_[Y]}),pi(w,[w.Transaction.prototype]),dr(w,[w.Transaction.prototype],u(H),H),P.schema=H;var K,z=It(q);return z&&qt(),F=X.follow(function(){var Y;(K=q(P))&&z&&(Y=dt.bind(null,null),K.then(Y,Y))}),K&&typeof K.then=="function"?X.resolve(K):F.then(function(){return K})}}),D.push(function(_){var I,F,q=R._cfg.dbschema;I=q,F=_,[].slice.call(F.db.objectStoreNames).forEach(function(H){return I[H]==null&&F.db.deleteObjectStore(H)}),pi(w,[w.Transaction.prototype]),dr(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),P.schema=w._dbSchema}),D.push(function(_){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===R._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(I){return I!=="$meta"})):_.objectStore("$meta").put(R._cfg.version,"version"))})}),function R(){return D.length?X.resolve(D.shift()(P.idbtrans)).then(R):X.resolve()}().then(function(){ba(E,k)})):X.resolve();var w,O,P,k,D,E}).catch(b)):(u(h).forEach(function(T){gi(l,T,h[T].primKey,h[T].indexes)}),cr(i,l),void X.follow(function(){return i.on.populate.fire(m)}).catch(b));var S,A})}function Lc(i,a){ba(i._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var l=hr(0,i.idbdb,a);pr(i,i._dbSchema,a);for(var c=0,h=mi(l,i._dbSchema).change;c<h.length;c++){var m=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=a.objectStore(b.name);b.add.forEach(function(S){Xe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(S.src)),fr(x,S)})}(h[c]);if(typeof m=="object")return m.value}}function mi(i,a){var l,c={del:[],add:[],change:[]};for(l in i)a[l]||c.del.push(l);for(l in a){var h=i[l],m=a[l];if(h){var b={name:l,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)b.recreate=!0,c.change.push(b);else{var x=h.idxByName,S=m.idxByName,A=void 0;for(A in x)S[A]||b.del.push(A);for(A in S){var T=x[A],w=S[A];T?T.src!==w.src&&b.change.push(w):b.add.push(w)}(0<b.del.length||0<b.add.length||0<b.change.length)&&c.change.push(b)}}else c.add.push([l,m])}return c}function gi(i,a,l,c){var h=i.db.createObjectStore(a,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return c.forEach(function(m){return fr(h,m)}),h}function ba(i,a){u(i).forEach(function(l){a.db.objectStoreNames.contains(l)||(Xe&&console.debug("Dexie: Creating missing table",l),gi(a,l,i[l].primKey,i[l].indexes))})}function fr(i,a){i.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function hr(i,a,l){var c={};return j(a.objectStoreNames,0).forEach(function(h){for(var m=l.objectStore(h),b=di(ya(A=m.keyPath),A||"",!0,!1,!!m.autoIncrement,A&&typeof A!="string",!0),x=[],S=0;S<m.indexNames.length;++S){var T=m.index(m.indexNames[S]),A=T.keyPath,T=di(T.name,A,!!T.unique,!!T.multiEntry,!1,A&&typeof A!="string",!1);x.push(T)}c[h]=fi(h,b,x)}),c}function pr(i,a,l){for(var c=l.db.objectStoreNames,h=0;h<c.length;++h){var m=c[h],b=l.objectStore(m);i._hasGetAll="getAll"in b;for(var x=0;x<b.indexNames.length;++x){var S=b.indexNames[x],A=b.index(S).keyPath,T=typeof A=="string"?A:"["+j(A).join("+")+"]";!a[m]||(A=a[m].idxByName[T])&&(A.name=S,delete a[m].idxByName[T],a[m].idxByName[S]=A)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function xa(i){return i.split(",").map(function(a,l){var m=a.split(":"),c=(h=m[1])===null||h===void 0?void 0:h.trim(),h=(a=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return di(h,m||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),d(m),l===0,c)})}var Nc=(Ht.prototype._createTableSchema=fi,Ht.prototype._parseIndexSyntax=xa,Ht.prototype._parseStoresSpec=function(i,a){var l=this;u(i).forEach(function(c){if(i[c]!==null){var h=l._parseIndexSyntax(i[c]),m=h.shift();if(!m)throw new ne.Schema("Invalid schema for table "+c+": "+i[c]);if(m.unique=!0,m.multi)throw new ne.Schema("Primary key cannot be multiEntry*");h.forEach(function(b){if(b.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}),h=l._createTableSchema(c,m,h),a[c]=h}})},Ht.prototype.stores=function(l){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,l):l;var l=a._versions,c={},h={};return l.forEach(function(m){f(c,m._cfg.storesSource),h=m._cfg.dbschema={},m._parseStoresSpec(c,h)}),a._dbSchema=h,pi(a,[a._allTables,a,a.Transaction.prototype]),dr(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],u(h),h),a._storeNames=u(h),this},Ht.prototype.upgrade=function(i){return this._cfg.contentUpgrade=Jr(this._cfg.contentUpgrade||he,i),this},Ht);function Ht(){}function yi(i,a){var l=i._dbNamesDB;return l||(l=i._dbNamesDB=new st(ir,{addons:[],indexedDB:i,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function vi(i){return i&&typeof i.databases=="function"}function bi(i){return ct(function(){return te.letThrough=!0,i()})}function xi(i){return!("from"in i)}var Re=function(i,a){if(!this){var l=new Re;return i&&"d"in i&&f(l,i),l}f(this,arguments.length?{d:1,from:i,to:1<arguments.length?a:i}:{d:0})};function Pn(i,a,l){var c=ce(a,l);if(!isNaN(c)){if(0<c)throw RangeError();if(xi(i))return f(i,{from:a,to:l,d:1});var h=i.l,c=i.r;if(ce(l,i.from)<0)return h?Pn(h,a,l):i.l={from:a,to:l,d:1,l:null,r:null},Sa(i);if(0<ce(a,i.to))return c?Pn(c,a,l):i.r={from:a,to:l,d:1,l:null,r:null},Sa(i);ce(a,i.from)<0&&(i.from=a,i.l=null,i.d=c?c.d+1:1),0<ce(l,i.to)&&(i.to=l,i.r=null,i.d=i.l?i.l.d+1:1),l=!i.r,h&&!i.l&&Cn(i,h),c&&l&&Cn(i,c)}}function Cn(i,a){xi(a)||function l(c,S){var m=S.from,b=S.to,x=S.l,S=S.r;Pn(c,m,b),x&&l(c,x),S&&l(c,S)}(i,a)}function wa(i,a){var l=mr(a),c=l.next();if(c.done)return!1;for(var h=c.value,m=mr(i),b=m.next(h.from),x=b.value;!c.done&&!b.done;){if(ce(x.from,h.to)<=0&&0<=ce(x.to,h.from))return!0;ce(h.from,x.from)<0?h=(c=l.next(x.from)).value:x=(b=m.next(h.from)).value}return!1}function mr(i){var a=xi(i)?null:{s:0,n:i};return{next:function(l){for(var c=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,c)for(;a.n.l&&ce(l,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!c||ce(l,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function Sa(i){var a,l,c=(((a=i.r)===null||a===void 0?void 0:a.d)||0)-(((l=i.l)===null||l===void 0?void 0:l.d)||0),h=1<c?"r":c<-1?"l":"";h&&(a=h=="r"?"l":"r",l=r({},i),c=i[h],i.from=c.from,i.to=c.to,i[h]=c[h],l[h]=c[a],(i[a]=l).d=Aa(l)),i.d=Aa(i)}function Aa(l){var a=l.r,l=l.l;return(a?l?Math.max(a.d,l.d):a.d:l?l.d:0)+1}function gr(i,a){return u(a).forEach(function(l){i[l]?Cn(i[l],a[l]):i[l]=function c(h){var m,b,x={};for(m in h)v(h,m)&&(b=h[m],x[m]=!b||typeof b!="object"||Me.has(b.constructor)?b:c(b));return x}(a[l])}),i}function wi(i,a){return i.all||a.all||Object.keys(i).some(function(l){return a[l]&&wa(a[l],i[l])})}y(Re.prototype,(($e={add:function(i){return Cn(this,i),this},addKey:function(i){return Pn(this,i,i),this},addKeys:function(i){var a=this;return i.forEach(function(l){return Pn(a,l,l)}),this},hasKey:function(i){var a=mr(this).next(i).value;return a&&ce(a.from,i)<=0&&0<=ce(a.to,i)}})[rt]=function(){return mr(this)},$e));var Tt={},Si={},Ai=!1;function yr(i){gr(Si,i),Ai||(Ai=!0,setTimeout(function(){Ai=!1,Pi(Si,!(Si={}))},0))}function Pi(i,a){a===void 0&&(a=!1);var l=new Set;if(i.all)for(var c=0,h=Object.values(Tt);c<h.length;c++)Pa(b=h[c],i,l,a);else for(var m in i){var b,x=/^idb\:\/\/(.*)\/(.*)\//.exec(m);x&&(m=x[1],x=x[2],(b=Tt["idb://".concat(m,"/").concat(x)])&&Pa(b,i,l,a))}l.forEach(function(S){return S()})}function Pa(i,a,l,c){for(var h=[],m=0,b=Object.entries(i.queries.query);m<b.length;m++){for(var x=b[m],S=x[0],A=[],T=0,w=x[1];T<w.length;T++){var O=w[T];wi(a,O.obsSet)?O.subscribers.forEach(function(E){return l.add(E)}):c&&A.push(O)}c&&h.push([S,A])}if(c)for(var P=0,k=h;P<k.length;P++){var D=k[P],S=D[0],A=D[1];i.queries.query[S]=A}}function Mc(i){var a=i._state,l=i._deps.indexedDB;if(a.isBeingOpened||i.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?be(a.dbOpenError):i});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var c=a.openCanceller,h=Math.round(10*i.verno),m=!1;function b(){if(a.openCanceller!==c)throw new ne.DatabaseClosed("db.open() was cancelled")}function x(){return new X(function(O,P){if(b(),!l)throw new ne.MissingAPI;var k=i.name,D=a.autoSchema||!h?l.open(k):l.open(k,h);if(!D)throw new ne.MissingAPI;D.onerror=Je(P),D.onblocked=ge(i._fireOnBlocked),D.onupgradeneeded=ge(function(E){var R;T=D.transaction,a.autoSchema&&!i._options.allowEmptyDB?(D.onerror=xn,T.abort(),D.result.close(),(R=l.deleteDatabase(k)).onsuccess=R.onerror=ge(function(){P(new ne.NoSuchDatabase("Database ".concat(k," doesnt exist")))})):(T.onerror=Je(P),E=E.oldVersion>Math.pow(2,62)?0:E.oldVersion,w=E<1,i.idbdb=D.result,m&&Lc(i,T),_c(i,E/10,T,P))},P),D.onsuccess=ge(function(){T=null;var E,R,_,I,F,q=i.idbdb=D.result,H=j(q.objectStoreNames);if(0<H.length)try{var K=q.transaction((I=H).length===1?I[0]:I,"readonly");if(a.autoSchema)R=q,_=K,(E=i).verno=R.version/10,_=E._dbSchema=hr(0,R,_),E._storeNames=j(R.objectStoreNames,0),dr(E,[E._allTables],u(_),_);else if(pr(i,i._dbSchema,K),((F=mi(hr(0,(F=i).idbdb,K),F._dbSchema)).add.length||F.change.some(function(z){return z.add.length||z.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),q.close(),h=q.version+1,m=!0,O(x());cr(i,K)}catch{}Ut.push(i),q.onversionchange=ge(function(z){a.vcFired=!0,i.on("versionchange").fire(z)}),q.onclose=ge(function(){i.close({disableAutoOpen:!1})}),w&&(F=i._deps,K=k,q=F.indexedDB,F=F.IDBKeyRange,vi(q)||K===ir||yi(q,F).put({name:K}).catch(he)),O()},P)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<h)return h=0,x()}return X.reject(O)})}var S,A=a.dbReadyResolve,T=null,w=!1;return X.race([c,(typeof navigator>"u"?X.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function P(){return indexedDB.databases().finally(O)}S=setInterval(P,100),P()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(x)]).then(function(){return b(),a.onReadyBeingFired=[],X.resolve(bi(function(){return i.on.ready.fire(i.vip)})).then(function O(){if(0<a.onReadyBeingFired.length){var P=a.onReadyBeingFired.reduce(Jr,he);return a.onReadyBeingFired=[],X.resolve(bi(function(){return P(i.vip)})).then(O)}})}).finally(function(){a.openCanceller===c&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(O){a.dbOpenError=O;try{T&&T.abort()}catch{}return c===a.openCanceller&&i._close(),be(O)}).finally(function(){a.openComplete=!0,A()}).then(function(){var O;return w&&(O={},i.tables.forEach(function(P){P.schema.indexes.forEach(function(k){k.name&&(O["idb://".concat(i.name,"/").concat(P.name,"/").concat(k.name)]=new Re(-1/0,[[[]]]))}),O["idb://".concat(i.name,"/").concat(P.name,"/")]=O["idb://".concat(i.name,"/").concat(P.name,"/:dels")]=new Re(-1/0,[[[]]])}),pt(wn).fire(O),Pi(O,!0)),i})}function Ci(i){function a(m){return i.next(m)}var l=h(a),c=h(function(m){return i.throw(m)});function h(m){return function(S){var x=m(S),S=x.value;return x.done?S:S&&typeof S.then=="function"?S.then(l,c):d(S)?Promise.all(S).then(l,c):l(S)}}return h(a)()}function vr(i,a,l){for(var c=d(i)?i.slice():[i],h=0;h<l;++h)c.push(a);return c}var Vc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(a){var l=i.table(a),c=l.schema,h={},m=[];function b(w,O,P){var k=An(w),D=h[k]=h[k]||[],E=w==null?0:typeof w=="string"?1:w.length,R=0<O,R=r(r({},P),{name:R?"".concat(k,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:R,keyTail:O,keyLength:E,extractKey:hi(w),unique:!R&&P.unique});return D.push(R),R.isPrimaryKey||m.push(R),1<E&&b(E===2?w[0]:w.slice(0,E-1),O+1,P),D.sort(function(_,I){return _.keyTail-I.keyTail}),R}a=b(c.primaryKey.keyPath,0,c.primaryKey),h[":id"]=[a];for(var x=0,S=c.indexes;x<S.length;x++){var A=S[x];b(A.keyPath,0,A)}function T(w){var O,P=w.query.index;return P.isVirtual?r(r({},w),{query:{index:P.lowLevelIndex,range:(O=w.query.range,P=P.keyTail,{type:O.type===1?2:O.type,lower:vr(O.lower,O.lowerOpen?i.MAX_KEY:i.MIN_KEY,P),lowerOpen:!0,upper:vr(O.upper,O.upperOpen?i.MIN_KEY:i.MAX_KEY,P),upperOpen:!0})}}):w}return r(r({},l),{schema:r(r({},c),{primaryKey:a,indexes:m,getIndexByKeyPath:function(w){return(w=h[An(w)])&&w[0]}}),count:function(w){return l.count(T(w))},query:function(w){return l.query(T(w))},openCursor:function(w){var O=w.query.index,P=O.keyTail,k=O.isVirtual,D=O.keyLength;return k?l.openCursor(T(w)).then(function(R){return R&&E(R)}):l.openCursor(w);function E(R){return Object.create(R,{continue:{value:function(_){_!=null?R.continue(vr(_,w.reverse?i.MAX_KEY:i.MIN_KEY,P)):w.unique?R.continue(R.key.slice(0,D).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,P)):R.continue()}},continuePrimaryKey:{value:function(_,I){R.continuePrimaryKey(vr(_,i.MAX_KEY,P),I)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var _=R.key;return D===1?_[0]:_.slice(0,D)}},value:{get:function(){return R.value}}})}}})}})}};function ki(i,a,l,c){return l=l||{},c=c||"",u(i).forEach(function(h){var m,b,x;v(a,h)?(m=i[h],b=a[h],typeof m=="object"&&typeof b=="object"&&m&&b?(x=Ye(m))!==Ye(b)?l[c+h]=a[h]:x==="Object"?ki(m,b,l,c+h+"."):m!==b&&(l[c+h]=a[h]):m!==b&&(l[c+h]=a[h])):l[c+h]=void 0}),u(a).forEach(function(h){v(i,h)||(l[c+h]=a[h])}),l}function Di(i,a){return a.type==="delete"?a.keys:a.keys||a.values.map(i.extractKey)}var Ic={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(a){var l=i.table(a),c=l.schema.primaryKey;return r(r({},l),{mutate:function(h){var m=te.trans,b=m.table(a).hook,x=b.deleting,S=b.creating,A=b.updating;switch(h.type){case"add":if(S.fire===he)break;return m._promise("readwrite",function(){return T(h)},!0);case"put":if(S.fire===he&&A.fire===he)break;return m._promise("readwrite",function(){return T(h)},!0);case"delete":if(x.fire===he)break;return m._promise("readwrite",function(){return T(h)},!0);case"deleteRange":if(x.fire===he)break;return m._promise("readwrite",function(){return function w(O,P,k){return l.query({trans:O,values:!1,query:{index:c,range:P},limit:k}).then(function(D){var E=D.result;return T({type:"delete",keys:E,trans:O}).then(function(R){return 0<R.numFailures?Promise.reject(R.failures[0]):E.length<k?{failures:[],numFailures:0,lastResult:void 0}:w(O,r(r({},P),{lower:E[E.length-1],lowerOpen:!0}),k)})})}(h.trans,h.range,1e4)},!0)}return l.mutate(h);function T(w){var O,P,k,D=te.trans,E=w.keys||Di(c,w);if(!E)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?r(r({},w),{keys:E}):r({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),O=l,k=E,((P=w).type==="add"?Promise.resolve([]):O.getMany({trans:P.trans,keys:k,cache:"immutable"})).then(function(R){var _=E.map(function(I,F){var q,H,K,z=R[F],Y={onerror:null,onsuccess:null};return w.type==="delete"?x.fire.call(Y,I,z,D):w.type==="add"||z===void 0?(q=S.fire.call(Y,I,w.values[F],D),I==null&&q!=null&&(w.keys[F]=I=q,c.outbound||ee(w.values[F],c.keyPath,I))):(q=ki(z,w.values[F]),(H=A.fire.call(Y,q,I,z,D))&&(K=w.values[F],Object.keys(H).forEach(function(W){v(K,W)?K[W]=H[W]:ee(K,W,H[W])}))),Y});return l.mutate(w).then(function(I){for(var F=I.failures,q=I.results,H=I.numFailures,I=I.lastResult,K=0;K<E.length;++K){var z=(q||E)[K],Y=_[K];z==null?Y.onerror&&Y.onerror(F[K]):Y.onsuccess&&Y.onsuccess(w.type==="put"&&R[K]?w.values[K]:z)}return{failures:F,results:q,numFailures:H,lastResult:I}}).catch(function(I){return _.forEach(function(F){return F.onerror&&F.onerror(I)}),Promise.reject(I)})})}}})}})}};function Ca(i,a,l){try{if(!a||a.keys.length<i.length)return null;for(var c=[],h=0,m=0;h<a.keys.length&&m<i.length;++h)ce(a.keys[h],i[m])===0&&(c.push(l?We(a.values[h]):a.values[h]),++m);return c.length===i.length?c:null}catch{return null}}var Fc={stack:"dbcore",level:-1,create:function(i){return{table:function(a){var l=i.table(a);return r(r({},l),{getMany:function(c){if(!c.cache)return l.getMany(c);var h=Ca(c.keys,c.trans._cache,c.cache==="clone");return h?X.resolve(h):l.getMany(c).then(function(m){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?We(m):m},m})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),l.mutate(c)}})}}}};function ka(i,a){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function Da(i,a){switch(i){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Bc={stack:"dbcore",level:0,name:"Observability",create:function(i){var a=i.schema.name,l=new Re(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(c,h,m){if(te.subscr&&h!=="readonly")throw new ne.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(te.querier));return i.transaction(c,h,m)},table:function(c){var h=i.table(c),m=h.schema,b=m.primaryKey,w=m.indexes,x=b.extractKey,S=b.outbound,A=b.autoIncrement&&w.filter(function(P){return P.compound&&P.keyPath.includes(b.keyPath)}),T=r(r({},h),{mutate:function(P){function k(W){return W="idb://".concat(a,"/").concat(c,"/").concat(W),I[W]||(I[W]=new Re)}var D,E,R,_=P.trans,I=P.mutatedParts||(P.mutatedParts={}),F=k(""),q=k(":dels"),H=P.type,Y=P.type==="deleteRange"?[P.range]:P.type==="delete"?[P.keys]:P.values.length<50?[Di(b,P).filter(function(W){return W}),P.values]:[],K=Y[0],z=Y[1],Y=P.trans._cache;return d(K)?(F.addKeys(K),(Y=H==="delete"||K.length===z.length?Ca(K,Y):null)||q.addKeys(K),(Y||z)&&(D=k,E=Y,R=z,m.indexes.forEach(function(W){var Q=D(W.name||"");function oe(le){return le!=null?W.extractKey(le):null}function ue(le){return W.multiEntry&&d(le)?le.forEach(function(Fe){return Q.addKey(Fe)}):Q.addKey(le)}(E||R).forEach(function(le,je){var ae=E&&oe(E[je]),je=R&&oe(R[je]);ce(ae,je)!==0&&(ae!=null&&ue(ae),je!=null&&ue(je))})}))):K?(z={from:(z=K.lower)!==null&&z!==void 0?z:i.MIN_KEY,to:(z=K.upper)!==null&&z!==void 0?z:i.MAX_KEY},q.add(z),F.add(z)):(F.add(l),q.add(l),m.indexes.forEach(function(W){return k(W.name).add(l)})),h.mutate(P).then(function(W){return!K||P.type!=="add"&&P.type!=="put"||(F.addKeys(W.results),A&&A.forEach(function(Q){for(var oe=P.values.map(function(ae){return Q.extractKey(ae)}),ue=Q.keyPath.findIndex(function(ae){return ae===b.keyPath}),le=0,Fe=W.results.length;le<Fe;++le)oe[le][ue]=W.results[le];k(Q.name).addKeys(oe)})),_.mutatedParts=gr(_.mutatedParts||{},I),W})}}),w=function(k){var D=k.query,k=D.index,D=D.range;return[k,new Re((k=D.lower)!==null&&k!==void 0?k:i.MIN_KEY,(D=D.upper)!==null&&D!==void 0?D:i.MAX_KEY)]},O={get:function(P){return[b,new Re(P.key)]},getMany:function(P){return[b,new Re().addKeys(P.keys)]},count:w,query:w,openCursor:w};return u(O).forEach(function(P){T[P]=function(k){var D=te.subscr,E=!!D,R=ka(te,h)&&Da(P,k)?k.obsSet={}:D;if(E){var _=function(z){return z="idb://".concat(a,"/").concat(c,"/").concat(z),R[z]||(R[z]=new Re)},I=_(""),F=_(":dels"),D=O[P](k),E=D[0],D=D[1];if((P==="query"&&E.isPrimaryKey&&!k.values?F:_(E.name||"")).add(D),!E.isPrimaryKey){if(P!=="count"){var q=P==="query"&&S&&k.values&&h.query(r(r({},k),{values:!1}));return h[P].apply(this,arguments).then(function(z){if(P==="query"){if(S&&k.values)return q.then(function(oe){return oe=oe.result,I.addKeys(oe),z});var Y=k.values?z.result.map(x):z.result;(k.values?I:F).addKeys(Y)}else if(P==="openCursor"){var W=z,Q=k.values;return W&&Object.create(W,{key:{get:function(){return F.addKey(W.primaryKey),W.key}},primaryKey:{get:function(){var oe=W.primaryKey;return F.addKey(oe),oe}},value:{get:function(){return Q&&I.addKey(W.primaryKey),W.value}}})}return z})}F.add(l)}}return h[P].apply(this,arguments)}}),T}})}};function Ta(i,a,l){if(l.numFailures===0)return a;if(a.type==="deleteRange")return null;var c=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;return l.numFailures===c?null:(a=r({},a),d(a.keys)&&(a.keys=a.keys.filter(function(h,m){return!(m in l.failures)})),"values"in a&&d(a.values)&&(a.values=a.values.filter(function(h,m){return!(m in l.failures)})),a)}function Ti(i,a){return l=i,((c=a).lower===void 0||(c.lowerOpen?0<ce(l,c.lower):0<=ce(l,c.lower)))&&(i=i,(a=a).upper===void 0||(a.upperOpen?ce(i,a.upper)<0:ce(i,a.upper)<=0));var l,c}function Ea(i,a,O,c,h,m){if(!O||O.length===0)return i;var b=a.query.index,x=b.multiEntry,S=a.query.range,A=c.schema.primaryKey.extractKey,T=b.extractKey,w=(b.lowLevelIndex||b).extractKey,O=O.reduce(function(P,k){var D=P,E=[];if(k.type==="add"||k.type==="put")for(var R=new Re,_=k.values.length-1;0<=_;--_){var I,F=k.values[_],q=A(F);R.hasKey(q)||(I=T(F),(x&&d(I)?I.some(function(W){return Ti(W,S)}):Ti(I,S))&&(R.addKey(q),E.push(F)))}switch(k.type){case"add":var H=new Re().addKeys(a.values?P.map(function(Q){return A(Q)}):P),D=P.concat(a.values?E.filter(function(Q){return Q=A(Q),!H.hasKey(Q)&&(H.addKey(Q),!0)}):E.map(function(Q){return A(Q)}).filter(function(Q){return!H.hasKey(Q)&&(H.addKey(Q),!0)}));break;case"put":var K=new Re().addKeys(k.values.map(function(Q){return A(Q)}));D=P.filter(function(Q){return!K.hasKey(a.values?A(Q):Q)}).concat(a.values?E:E.map(function(Q){return A(Q)}));break;case"delete":var z=new Re().addKeys(k.keys);D=P.filter(function(Q){return!z.hasKey(a.values?A(Q):Q)});break;case"deleteRange":var Y=k.range;D=P.filter(function(Q){return!Ti(A(Q),Y)})}return D},i);return O===i?i:(O.sort(function(P,k){return ce(w(P),w(k))||ce(A(P),A(k))}),a.limit&&a.limit<1/0&&(O.length>a.limit?O.length=a.limit:i.length===a.limit&&O.length<a.limit&&(h.dirty=!0)),m?Object.freeze(O):O)}function Oa(i,a){return ce(i.lower,a.lower)===0&&ce(i.upper,a.upper)===0&&!!i.lowerOpen==!!a.lowerOpen&&!!i.upperOpen==!!a.upperOpen}function Kc(i,a){return function(l,c,h,m){if(l===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=ce(l,c))===0){if(h&&m)return 0;if(h)return 1;if(m)return-1}return c}(i.lower,a.lower,i.lowerOpen,a.lowerOpen)<=0&&0<=function(l,c,h,m){if(l===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=ce(l,c))===0){if(h&&m)return 0;if(h)return-1;if(m)return 1}return c}(i.upper,a.upper,i.upperOpen,a.upperOpen)}function $c(i,a,l,c){i.subscribers.add(l),c.addEventListener("abort",function(){var h,m;i.subscribers.delete(l),i.subscribers.size===0&&(h=i,m=a,setTimeout(function(){h.subscribers.size===0&&fe(m,h)},3e3))})}var qc={stack:"dbcore",level:0,name:"Cache",create:function(i){var a=i.schema.name;return r(r({},i),{transaction:function(l,c,h){var m,b,x=i.transaction(l,c,h);return c==="readwrite"&&(b=(m=new AbortController).signal,h=function(S){return function(){if(m.abort(),c==="readwrite"){for(var A=new Set,T=0,w=l;T<w.length;T++){var O=w[T],P=Tt["idb://".concat(a,"/").concat(O)];if(P){var k=i.table(O),D=P.optimisticOps.filter(function(Q){return Q.trans===x});if(x._explicit&&S&&x.mutatedParts)for(var E=0,R=Object.values(P.queries.query);E<R.length;E++)for(var _=0,I=(H=R[E]).slice();_<I.length;_++)wi((K=I[_]).obsSet,x.mutatedParts)&&(fe(H,K),K.subscribers.forEach(function(Q){return A.add(Q)}));else if(0<D.length){P.optimisticOps=P.optimisticOps.filter(function(Q){return Q.trans!==x});for(var F=0,q=Object.values(P.queries.query);F<q.length;F++)for(var H,K,z,Y=0,W=(H=q[F]).slice();Y<W.length;Y++)(K=W[Y]).res!=null&&x.mutatedParts&&(S&&!K.dirty?(z=Object.isFrozen(K.res),z=Ea(K.res,K.req,D,k,K,z),K.dirty?(fe(H,K),K.subscribers.forEach(function(Q){return A.add(Q)})):z!==K.res&&(K.res=z,K.promise=X.resolve({result:z}))):(K.dirty&&fe(H,K),K.subscribers.forEach(function(Q){return A.add(Q)})))}}}A.forEach(function(Q){return Q()})}}},x.addEventListener("abort",h(!1),{signal:b}),x.addEventListener("error",h(!1),{signal:b}),x.addEventListener("complete",h(!0),{signal:b})),x},table:function(l){var c=i.table(l),h=c.schema.primaryKey;return r(r({},c),{mutate:function(m){var b=te.trans;if(h.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(m);var x=Tt["idb://".concat(a,"/").concat(l)];return x?(b=c.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Di(h,m).some(function(S){return S==null}))?(x.optimisticOps.push(m),m.mutatedParts&&yr(m.mutatedParts),b.then(function(S){0<S.numFailures&&(fe(x.optimisticOps,m),(S=Ta(0,m,S))&&x.optimisticOps.push(S),m.mutatedParts&&yr(m.mutatedParts))}),b.catch(function(){fe(x.optimisticOps,m),m.mutatedParts&&yr(m.mutatedParts)})):b.then(function(S){var A=Ta(0,r(r({},m),{values:m.values.map(function(T,w){var O;return S.failures[w]?T:(T=(O=h.keyPath)!==null&&O!==void 0&&O.includes(".")?We(T):r({},T),ee(T,h.keyPath,S.results[w]),T)})}),S);x.optimisticOps.push(A),queueMicrotask(function(){return m.mutatedParts&&yr(m.mutatedParts)})}),b):c.mutate(m)},query:function(m){if(!ka(te,c)||!Da("query",m))return c.query(m);var b=((A=te.trans)===null||A===void 0?void 0:A.db._options.cache)==="immutable",w=te,x=w.requery,S=w.signal,A=function(k,D,E,R){var _=Tt["idb://".concat(k,"/").concat(D)];if(!_)return[];if(!(D=_.queries[E]))return[null,!1,_,null];var I=D[(R.query?R.query.index.name:null)||""];if(!I)return[null,!1,_,null];switch(E){case"query":var F=I.find(function(q){return q.req.limit===R.limit&&q.req.values===R.values&&Oa(q.req.query.range,R.query.range)});return F?[F,!0,_,I]:[I.find(function(q){return("limit"in q.req?q.req.limit:1/0)>=R.limit&&(!R.values||q.req.values)&&Kc(q.req.query.range,R.query.range)}),!1,_,I];case"count":return F=I.find(function(q){return Oa(q.req.query.range,R.query.range)}),[F,!!F,_,I]}}(a,l,"query",m),T=A[0],w=A[1],O=A[2],P=A[3];return T&&w?T.obsSet=m.obsSet:(w=c.query(m).then(function(k){var D=k.result;if(T&&(T.res=D),b){for(var E=0,R=D.length;E<R;++E)Object.freeze(D[E]);Object.freeze(D)}else k.result=We(D);return k}).catch(function(k){return P&&T&&fe(P,T),Promise.reject(k)}),T={obsSet:m.obsSet,promise:w,subscribers:new Set,type:"query",req:m,dirty:!1},P?P.push(T):(P=[T],(O=O||(Tt["idb://".concat(a,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=P)),$c(T,P,x,S),T.promise.then(function(k){return{result:Ea(k.result,m,O==null?void 0:O.optimisticOps,c,T,b)}})}})}})}};function br(i,a){return new Proxy(i,{get:function(l,c,h){return c==="db"?a:Reflect.get(l,c,h)}})}var st=(xe.prototype.version=function(i){if(isNaN(i)||i<.1)throw new ne.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var a=this._versions,l=a.filter(function(c){return c._cfg.version===i})[0];return l||(l=new this.Version(i),a.push(l),a.sort(jc),l.stores({}),this._state.autoSchema=!1,l)},xe.prototype._whenReady=function(i){var a=this;return this.idbdb&&(this._state.openComplete||te.letThrough||this._vip)?i():new X(function(l,c){if(a._state.openComplete)return c(new ne.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void c(new ne.DatabaseClosed);a.open().catch(he)}a._state.dbReadyPromise.then(l,c)}).then(i)},xe.prototype.use=function(i){var a=i.stack,l=i.create,c=i.level,h=i.name;return h&&this.unuse({stack:a,name:h}),i=this._middlewares[a]||(this._middlewares[a]=[]),i.push({stack:a,create:l,level:c??10,name:h}),i.sort(function(m,b){return m.level-b.level}),this},xe.prototype.unuse=function(i){var a=i.stack,l=i.name,c=i.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(h){return c?h.create!==c:!!l&&h.name!==l})),this},xe.prototype.open=function(){var i=this;return Ct(lt,function(){return Mc(i)})},xe.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var i=this._state,a=Ut.indexOf(this);if(0<=a&&Ut.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new X(function(l){i.dbReadyResolve=l}),i.openCanceller=new X(function(l,c){i.cancelOpen=c}))},xe.prototype.close=function(l){var a=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;a?(l.isBeingOpened&&l.cancelOpen(new ne.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new ne.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},xe.prototype.delete=function(i){var a=this;i===void 0&&(i={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new X(function(h,m){function b(){a.close(i);var x=a._deps.indexedDB.deleteDatabase(a.name);x.onsuccess=ge(function(){var S,A,T;S=a._deps,A=a.name,T=S.indexedDB,S=S.IDBKeyRange,vi(T)||A===ir||yi(T,S).delete(A).catch(he),h()}),x.onerror=Je(m),x.onblocked=a._fireOnBlocked}if(l)throw new ne.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(b):b()})},xe.prototype.backendDB=function(){return this.idbdb},xe.prototype.isOpen=function(){return this.idbdb!==null},xe.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},xe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},xe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(xe.prototype,"tables",{get:function(){var i=this;return u(this._allTables).map(function(a){return i._allTables[a]})},enumerable:!1,configurable:!0}),xe.prototype.transaction=function(){var i=(function(a,l,c){var h=arguments.length;if(h<2)throw new ne.InvalidArgument("Too few arguments");for(var m=new Array(h-1);--h;)m[h-1]=arguments[h];return c=m.pop(),[a,Ce(m),c]}).apply(this,arguments);return this._transaction.apply(this,i)},xe.prototype._transaction=function(i,a,l){var c=this,h=te.trans;h&&h.db===this&&i.indexOf("!")===-1||(h=null);var m,b,x=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(b=a.map(function(A){if(A=A instanceof c.Table?A.name:A,typeof A!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return A}),i=="r"||i===ai)m=ai;else{if(i!="rw"&&i!=oi)throw new ne.InvalidArgument("Invalid transaction mode: "+i);m=oi}if(h){if(h.mode===ai&&m===oi){if(!x)throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&b.forEach(function(A){if(h&&h.storeNames.indexOf(A)===-1){if(!x)throw new ne.SubTransaction("Table "+A+" not included in parent transaction.");h=null}}),x&&h&&!h.active&&(h=null)}}catch(A){return h?h._promise(null,function(T,w){w(A)}):be(A)}var S=(function A(T,w,O,P,k){return X.resolve().then(function(){var D=te.transless||te,E=T._createTransaction(w,O,T._dbSchema,P);if(E.explicit=!0,D={trans:E,transless:D},P)E.idbtrans=P.idbtrans;else try{E.create(),E.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch(I){return I.name===Xr.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return A(T,w,O,null,k)})):be(I)}var R,_=It(k);return _&&qt(),D=X.follow(function(){var I;(R=k.call(E,E))&&(_?(I=dt.bind(null,null),R.then(I,I)):typeof R.next=="function"&&typeof R.throw=="function"&&(R=Ci(R)))},D),(R&&typeof R.then=="function"?X.resolve(R).then(function(I){return E.active?I:be(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return R})).then(function(I){return P&&E._resolve(),E._completion.then(function(){return I})}).catch(function(I){return E._reject(I),be(I)})})}).bind(null,this,m,b,h,l);return h?h._promise(m,S,"lock"):te.trans?Ct(te.transless,function(){return c._whenReady(S)}):this._whenReady(S)},xe.prototype.table=function(i){if(!v(this._allTables,i))throw new ne.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},xe);function xe(i,a){var l=this;this._middlewares={},this.verno=0;var c=xe.dependencies;this._options=a=r({addons:xe.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},c=a.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,m,b,x,S,A={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:he,dbReadyPromise:null,cancelOpen:he,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};A.dbReadyPromise=new X(function(w){A.dbReadyResolve=w}),A.openCanceller=new X(function(w,O){A.cancelOpen=O}),this._state=A,this.name=i,this.on=vn(this,"populate","blocked","versionchange","close",{ready:[Jr,he]}),this.once=function(w,O){var P=function(){for(var k=[],D=0;D<arguments.length;D++)k[D]=arguments[D];l.on(w).unsubscribe(P),O.apply(l,k)};return l.on(w,P)},this.on.ready.subscribe=$(this.on.ready.subscribe,function(w){return function(O,P){xe.vip(function(){var k,D=l._state;D.openComplete?(D.dbOpenError||X.resolve().then(O),P&&w(O)):D.onReadyBeingFired?(D.onReadyBeingFired.push(O),P&&w(O)):(w(O),k=l,P||w(function E(){k.on.ready.unsubscribe(O),k.on.ready.unsubscribe(E)}))})}}),this.Collection=(h=this,bn(Cc.prototype,function(R,E){this.db=h;var P=sa,k=null;if(E)try{P=E()}catch(_){k=_}var D=R._ctx,E=D.table,R=E.hook.reading.fire;this._ctx={table:E,index:D.index,isPrimKey:!D.index||E.schema.primKey.keyPath&&D.index===E.schema.primKey.name,range:P,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:D.or,valueMapper:R!==fn?R:null}})),this.Table=(m=this,bn(da.prototype,function(w,O,P){this.db=m,this._tx=P,this.name=w,this.schema=O,this.hook=m._allTables[w]?m._allTables[w].hook:vn(null,{creating:[gc,he],reading:[mc,fn],updating:[vc,he],deleting:[yc,he]})})),this.Transaction=(b=this,bn(Tc.prototype,function(w,O,P,k,D){var E=this;w!=="readonly"&&O.forEach(function(R){R=(R=P[R])===null||R===void 0?void 0:R.yProps,R&&(O=O.concat(R.map(function(_){return _.updatesTable})))}),this.db=b,this.mode=w,this.storeNames=O,this.schema=P,this.chromeTransactionDurability=k,this.idbtrans=null,this.on=vn(this,"complete","error","abort"),this.parent=D||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(R,_){E._resolve=R,E._reject=_}),this._completion.then(function(){E.active=!1,E.on.complete.fire()},function(R){var _=E.active;return E.active=!1,E.on.error.fire(R),E.parent?E.parent._reject(R):_&&E.idbtrans&&E.idbtrans.abort(),be(R)})})),this.Version=(x=this,bn(Nc.prototype,function(w){this.db=x,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,bn(ga.prototype,function(w,O,P){if(this.db=S,this._ctx={table:w,index:O===":id"?null:O,or:P},this._cmp=this._ascending=ce,this._descending=function(k,D){return ce(D,k)},this._max=function(k,D){return 0<ce(k,D)?k:D},this._min=function(k,D){return ce(k,D)<0?k:D},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new ne.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=Sn(a.IDBKeyRange),this._createTransaction=function(w,O,P,k){return new l.Transaction(w,O,P,l._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(w){l.on("blocked").fire(w),Ut.filter(function(O){return O.name===l.name&&O!==l&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(w)})},this.use(Fc),this.use(qc),this.use(Bc),this.use(Vc),this.use(Ic);var T=new Proxy(this,{get:function(w,O,P){if(O==="_vip")return!0;if(O==="table")return function(D){return br(l.table(D),T)};var k=Reflect.get(w,O,P);return k instanceof da?br(k,T):O==="tables"?k.map(function(D){return br(D,T)}):O==="_createTransaction"?function(){return br(k.apply(this,arguments),T)}:k}});this.vip=T,c.forEach(function(w){return w(l)})}var xr,$e=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Uc=(Ei.prototype.subscribe=function(i,a,l){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:a,complete:l})},Ei.prototype[$e]=function(){return this},Ei);function Ei(i){this._subscribe=i}try{xr={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{xr={indexedDB:null,IDBKeyRange:null}}function Ra(i){var a,l=!1,c=new Uc(function(h){var m=It(i),b,x=!1,S={},A={},T={get closed(){return x},unsubscribe:function(){x||(x=!0,b&&b.abort(),w&&pt.storagemutated.unsubscribe(P))}};h.start&&h.start(T);var w=!1,O=function(){return si(k)},P=function(D){gr(S,D),wi(A,S)&&O()},k=function(){var D,E,R;!x&&xr.indexedDB&&(S={},D={},b&&b.abort(),b=new AbortController,R=function(_){var I=Kt();try{m&&qt();var F=ct(i,_);return F=m?F.finally(dt):F}finally{I&&$t()}}(E={subscr:D,signal:b.signal,requery:O,querier:i,trans:null}),Promise.resolve(R).then(function(_){l=!0,a=_,x||E.signal.aborted||(S={},function(I){for(var F in I)if(v(I,F))return;return 1}(A=D)||w||(pt(wn,P),w=!0),si(function(){return!x&&h.next&&h.next(_)}))},function(_){l=!1,["DatabaseClosedError","AbortError"].includes(_==null?void 0:_.name)||x||si(function(){x||h.error&&h.error(_)})}))};return setTimeout(O,0),T});return c.hasValue=function(){return l},c.getValue=function(){return a},c}var Et=st;function Oi(i){var a=mt;try{mt=!0,pt.storagemutated.fire(i),Pi(i,!0)}finally{mt=a}}y(Et,r(r({},Yn),{delete:function(i){return new Et(i,{addons:[]}).delete()},exists:function(i){return new Et(i,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return a=Et.dependencies,l=a.indexedDB,a=a.IDBKeyRange,(vi(l)?Promise.resolve(l.databases()).then(function(c){return c.map(function(h){return h.name}).filter(function(h){return h!==ir})}):yi(l,a).toCollection().primaryKeys()).then(i)}catch{return be(new ne.MissingAPI)}var a,l},defineClass:function(){return function(i){f(this,i)}},ignoreTransaction:function(i){return te.trans?Ct(te.transless,i):i()},vip:bi,async:function(i){return function(){try{var a=Ci(i.apply(this,arguments));return a&&typeof a.then=="function"?a:X.resolve(a)}catch(l){return be(l)}}},spawn:function(i,a,l){try{var c=Ci(i.apply(l,a||[]));return c&&typeof c.then=="function"?c:X.resolve(c)}catch(h){return be(h)}},currentTransaction:{get:function(){return te.trans||null}},waitFor:function(i,a){return a=X.resolve(typeof i=="function"?Et.ignoreTransaction(i):i).timeout(a||6e4),te.trans?te.trans.waitFor(a):a},Promise:X,debug:{get:function(){return Xe},set:function(i){Qs(i)}},derive:N,extend:f,props:y,override:$,Events:vn,on:pt,liveQuery:Ra,extendObservabilitySet:gr,getByKeyPath:Z,setByKeyPath:ee,delByKeyPath:function(i,a){typeof a=="string"?ee(i,a,void 0):"length"in a&&[].map.call(a,function(l){ee(i,l,void 0)})},shallowClone:ie,deepClone:We,getObjectDiff:ki,cmp:ce,asap:U,minKey:-1/0,addons:[],connections:Ut,errnames:Xr,dependencies:xr,cache:Tt,semVer:"4.2.1",version:"4.2.1".split(".").map(function(i){return parseInt(i)}).reduce(function(i,a,l){return i+a/Math.pow(10,2*l)})})),Et.maxKey=Sn(Et.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pt(wn,function(i){mt||(i=new CustomEvent(ci,{detail:i}),mt=!0,dispatchEvent(i),mt=!1)}),addEventListener(ci,function(i){i=i.detail,mt||Oi(i)}));var Gt,mt=!1,ja=function(){};return typeof BroadcastChannel<"u"&&((ja=function(){(Gt=new BroadcastChannel(ci)).onmessage=function(i){return i.data&&Oi(i.data)}})(),typeof Gt.unref=="function"&&Gt.unref(),pt(wn,function(i){mt||Gt.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!st.disableBfCache&&i.persisted){Xe&&console.debug("Dexie: handling persisted pagehide"),Gt!=null&&Gt.close();for(var a=0,l=Ut;a<l.length;a++)l[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!st.disableBfCache&&i.persisted&&(Xe&&console.debug("Dexie: handling persisted pageshow"),ja(),Oi({all:new Re(-1/0,[[]])}))})),X.rejectionMapper=function(i,a){return!i||i instanceof Ft||i instanceof TypeError||i instanceof SyntaxError||!i.name||!Js[i.name]?i:(a=new Js[i.name](a||i.message,i),"stack"in i&&L(a,"stack",{get:function(){return this.inner.stack}}),a)},Qs(Xe),r(st,Object.freeze({__proto__:null,Dexie:st,liveQuery:Ra,Entity:aa,cmp:ce,PropModification:yn,replacePrefix:function(i,a){return new yn({replacePrefix:[i,a]})},add:function(i){return new yn({add:i})},remove:function(i){return new yn({remove:i})},default:st,RangeSet:Re,mergeRanges:Cn,rangesOverlap:wa}),{default:st}),st})})(Vu);var Qf=Vu.exports;const Qi=vu(Qf),no=Symbol.for("Dexie"),Lr=globalThis[no]||(globalThis[no]=Qi);if(Qi.semVer!==Lr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qi.semVer} and ${Lr.semVer}`);const{liveQuery:My,mergeRanges:Vy,rangesOverlap:Iy,RangeSet:Fy,cmp:By,Entity:Ky,PropModification:$y,replacePrefix:qy,add:Uy,remove:zy,DexieYProvider:Wy}=Lr;class Zf extends Lr{constructor(){super("FairPlayDB");Yt(this,"cards");Yt(this,"partners");Yt(this,"gameStates");Yt(this,"negotiations");this.version(1).stores({cards:"++id, category, holder, status, &metadata.createdAt",partners:"&id, name, &theme.color",gameStates:"++id, &createdAt",negotiations:"++id, initiator, status, &createdAt"})}}const eh=new Zf;async function th(){(await eh.cards.toArray()).length===0&&console.log("Database initialized and ready for data")}const nh=[{id:"card-001",category:"daily-grind",title:{en:"Morning Dishes",he:"כלים בבוקר"},description:{en:"Wash breakfast dishes",he:"לשטוף כלים של ארוחת בוקר"},details:{en:"Every morning after breakfast",he:"כל בוקר אחרי ארוחה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","morning","kitchen"],difficulty:1,frequency:"daily",timeEstimate:15},history:[]},{id:"card-002",category:"daily-grind",title:{en:"Dinner Prep",he:"הכנת ארוחת ערב"},description:{en:"Plan and prepare dinner",he:"לתכנן ולהכין ארוחת ערב"},details:{en:"5 days per week",he:"5 ימים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","cooking","evening"],difficulty:2,frequency:"daily",timeEstimate:45},history:[]},{id:"card-003",category:"daily-grind",title:{en:"Kitchen Cleanup",he:"ניקוי המטבח"},description:{en:"Wipe counters and sweep floor",he:"לנגב קאונטרים ולסחוף רצפה"},details:{en:"After meals",he:"אחרי ארוחות"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","cleaning","kitchen"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-004",category:"daily-grind",title:{en:"Evening Dishes",he:"כלים בערב"},description:{en:"Load dishwasher or hand wash",he:"לטעון מדיח או לשטוף ביד"},details:{en:"After dinner",he:"אחרי ארוחת ערב"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","evening","kitchen"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-005",category:"daily-grind",title:{en:"Laundry Run",he:"כביסה"},description:{en:"Wash, dry, and fold clothes",he:"לכבס, להשיק ולקפל ביגוד"},details:{en:"2-3 times per week",he:"2-3 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","laundry","housework"],difficulty:2,frequency:"weekly",timeEstimate:120},history:[]},{id:"card-006",category:"daily-grind",title:{en:"Trash & Recycling",he:"אשפה והקטנת פסולת"},description:{en:"Take out trash and recycling",he:"להוציא אשפה והקטנת פסולת"},details:{en:"2 times per week",he:"2 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning","maintenance"],difficulty:1,frequency:"weekly",timeEstimate:15},history:[]},{id:"card-007",category:"daily-grind",title:{en:"Bathroom Cleaning",he:"ניקוי חדר האמבטיה"},description:{en:"Clean toilet, sink, and floor",he:"לנקות שירותים, כיור ורצפה"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning"],difficulty:2,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-008",category:"daily-grind",title:{en:"Grocery Shopping",he:"קניות מכולת"},description:{en:"Weekly grocery run",he:"קניות מכולת שבועיות"},details:{en:"Once per week",he:"פעם בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","shopping","planning"],difficulty:2,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-009",category:"daily-grind",title:{en:"Meal Planning",he:"תכנון ארוחות"},description:{en:"Plan weekly meals",he:"לתכנן ארוחות לשבוע"},details:{en:"Sunday evening",he:"יום ראשון בערב"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","planning","cooking"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-010",category:"daily-grind",title:{en:"Vaccum Living Room",he:"שאיבת הסלון"},description:{en:"Vacuum and tidy living room",he:"לשאוב ולסדר את הסלון"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning","tidying"],difficulty:1,frequency:"weekly",timeEstimate:25},history:[]},{id:"card-011",category:"daily-grind",title:{en:"Bedsheet Change",he:"החלפת סדינים"},description:{en:"Change all bed sheets",he:"להחליף סדינים בכל המיטות"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning","bedrooms"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-012",category:"daily-grind",title:{en:"Inventory Check",he:"בדיקת מלאי"},description:{en:"Check pantry and fridge",he:"לבדוק את הסידור וההיגייה"},details:{en:"Weekly before shopping",he:"שבועי לפני קניות"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","planning","kitchen"],difficulty:1,frequency:"weekly",timeEstimate:15},history:[]},{id:"card-013",category:"daily-grind",title:{en:"Pay Bills",he:"תשלום חשבונות"},description:{en:"Pay monthly bills online",he:"לשלם חשבונות חודשיים"},details:{en:"Once per month",he:"פעם בחודש"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","finance","admin"],difficulty:1,frequency:"monthly",timeEstimate:30},history:[]},{id:"card-014",category:"daily-grind",title:{en:"Deep Clean Kitchen",he:"ניקוי עמוק של המטבח"},description:{en:"Clean appliances and deep clean",he:"לנקות מכשירים וניקוי עמוק"},details:{en:"Monthly",he:"חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","cleaning","kitchen"],difficulty:3,frequency:"monthly",timeEstimate:90},history:[]},{id:"card-015",category:"daily-grind",title:{en:"Organize Pantry",he:"ארגון המטבח"},description:{en:"Organize and reorganize pantry",he:"לארגן ולהסדר את המטבח"},details:{en:"Monthly",he:"חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","organizing","kitchen"],difficulty:2,frequency:"monthly",timeEstimate:60},history:[]},{id:"card-016",category:"kids",title:{en:"Morning Routine Help",he:"עזרה בשגרת הבוקר"},description:{en:"Help kids get ready for school",he:"לעזור לילדים להתכונן לבית ספר"},details:{en:"School days 6:30-8:00am",he:"ימי בית ספר 6:30-8:00"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","morning"],difficulty:2,frequency:"daily",timeEstimate:45},history:[]},{id:"card-017",category:"kids",title:{en:"Pack Lunches",he:"הכנת קופסות אוכל"},description:{en:"Pack school lunches",he:"לארוז קופסות אוכל לבית ספר"},details:{en:"Daily before school",he:"כל יום לפני בית ספר"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","cooking"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-018",category:"kids",title:{en:"School Pickup/Dropoff",he:"הבאה והסעה לבית ספר"},description:{en:"Drive to/from school",he:"לנהוג לבית ספר ממנו"},details:{en:"Daily 8am and 2:45pm",he:"כל יום 8:00 ו 14:45"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","transport"],difficulty:1,frequency:"daily",timeEstimate:60},history:[]},{id:"card-019",category:"kids",title:{en:"Homework Help",he:"עזרה בעבודות בית"},description:{en:"Help with homework and reading",he:"לעזור עם עבודות בית וקריאה"},details:{en:"3-4 times per week",he:"3-4 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","education"],difficulty:2,frequency:"daily",timeEstimate:45},history:[]},{id:"card-020",category:"kids",title:{en:"Kids Bath Time",he:"אמבטיה לילדים"},description:{en:"Bath and nighttime routine",he:"אמבטיה ושגרת לילה"},details:{en:"Weeknight evenings",he:"ערבי שישי - שלישי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","evening"],difficulty:1,frequency:"daily",timeEstimate:30},history:[]},{id:"card-021",category:"kids",title:{en:"Bedtime Stories",he:"סיפורים לפני שינה"},description:{en:"Read bedtime stories",he:"לקרוא סיפורים לפני שינה"},details:{en:"Weeknights 8pm",he:"ערבי שישי - שלישי 20:00"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","bonding"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-022",category:"kids",title:{en:"Dentist/Doctor Appointments",he:"תורים לרופא וציטור"},description:{en:"Schedule and attend appointments",he:"לתאם ולהביא לתורים"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","admin"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-023",category:"kids",title:{en:"Extracurricular Activities",he:"פעילויות חוצ-כיתתיות"},description:{en:"Drive to sports/music lessons",he:"הסעה לספורט והצגות"},details:{en:"2-3 times per week",he:"2-3 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","kids","activities"],difficulty:1,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-024",category:"kids",title:{en:"Buy School Supplies",he:"קנייה של ציוד בית ספר"},description:{en:"Purchase supplies for school",he:"לקנות ציוד בית ספר"},details:{en:"As needed, mostly Sept",he:"לפי הצורך, בעיקר בספטמבר"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","shopping"],difficulty:1,frequency:"occasional",timeEstimate:45},history:[]},{id:"card-025",category:"kids",title:{en:"Organize Closets",he:"ארגון של ארונות"},description:{en:"Organize seasonal clothes",he:"לארגן ביגוד עונתי"},details:{en:"Twice yearly",he:"פעמיים בשנה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","kids","organizing"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-026",category:"kids",title:{en:"Parent-Teacher Conferences",he:"פגישות אחרי כתה"},description:{en:"Attend school meetings",he:"להשתתף בפגישות בית ספר"},details:{en:"Twice per year",he:"פעמיים בשנה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","school"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-027",category:"kids",title:{en:"Birthday Party Planning",he:"תכנון יום הולדת"},description:{en:"Plan and organize birthday party",he:"לתכנן ולארגן מסיבת יום הולדת"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","celebration"],difficulty:3,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-028",category:"kids",title:{en:"Kids Chores Supervision",he:"פיקוח על חובות הילדים"},description:{en:"Oversee kids do their chores",he:"לפקח שהילדים עושים חובות"},details:{en:"3-4 times per week",he:"3-4 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","kids","responsibility"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-029",category:"kids",title:{en:"Child Medical Care",he:"טיפול רפואי לילדים"},description:{en:"Manage meds and health needs",he:"לנהל תרופות וצרכים בריאותיים"},details:{en:"Daily as needed",he:"כל יום לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","health"],difficulty:1,frequency:"daily",timeEstimate:15},history:[]},{id:"card-030",category:"kids",title:{en:"Weekend Adventure",he:"הרפתקה בסופי שבוע"},description:{en:"Plan fun activity with kids",he:"לתכנן פעילות כיפיות עם ילדים"},details:{en:"Weekend",he:"סוף שבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","kids","bonding"],difficulty:2,frequency:"weekly",timeEstimate:120},history:[]},{id:"card-031",category:"home",title:{en:"Yard Work",he:"עבודה בחצר"},description:{en:"Mow lawn and edge",he:"לכסוח את הדשא ולהדק קצוות"},details:{en:"Every 1-2 weeks",he:"כל שבועיים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","yard","maintenance"],difficulty:2,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-032",category:"home",title:{en:"Garden Watering",he:"השקיית הגן"},description:{en:"Water plants and garden",he:"להשקות צמחים וגן"},details:{en:"2-3 times per week",he:"2-3 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","garden","plants"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-033",category:"home",title:{en:"Car Maintenance",he:"תחזוקת הרכב"},description:{en:"Gas, oil changes, inspections",he:"דלק, שינוי שמן, בדיקות"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","car","maintenance"],difficulty:2,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-034",category:"home",title:{en:"Fix Broken Items",he:"תיקון דברים שבורים"},description:{en:"Repair household items",he:"לתקן פריטים ביתיים"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","repairs","maintenance"],difficulty:2,frequency:"occasional",timeEstimate:90},history:[]},{id:"card-035",category:"home",title:{en:"Gutter Cleaning",he:"ניקוי גופיות"},description:{en:"Clean gutters and downspouts",he:"לנקות גופיות וצינורות ניקוז"},details:{en:"Twice yearly",he:"פעמיים בשנה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","maintenance","exterior"],difficulty:2,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-036",category:"home",title:{en:"HVAC Filter Change",he:"החלפת מסנן אוויר"},description:{en:"Replace HVAC filters",he:"להחליף מסננים"},details:{en:"Every 3 months",he:"כל 3 חודשים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","maintenance","hvac"],difficulty:1,frequency:"monthly",timeEstimate:15},history:[]},{id:"card-037",category:"home",title:{en:"Pest Control",he:"בקרת מזיקים"},description:{en:"Manage pest control service",he:"לנהל שירות בקרת מזיקים"},details:{en:"Quarterly",he:"רבעוני"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["quarterly","maintenance","outside"],difficulty:1,frequency:"occasional",timeEstimate:30},history:[]},{id:"card-038",category:"home",title:{en:"House Deep Clean",he:"ניקוי עמוק של הבית"},description:{en:"Deep clean entire house",he:"ניקוי עמוק של כל הבית"},details:{en:"Every 2-3 months",he:"כל 2-3 חודשים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","cleaning","deep-clean"],difficulty:3,frequency:"occasional",timeEstimate:240},history:[]},{id:"card-039",category:"home",title:{en:"Windows & Mirrors",he:"חלונות ומראות"},description:{en:"Clean all windows and mirrors",he:"לנקות כל חלונות ומראות"},details:{en:"Monthly",he:"חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","cleaning"],difficulty:1,frequency:"monthly",timeEstimate:45},history:[]},{id:"card-040",category:"home",title:{en:"Organize Storage",he:"ארגון אחסון"},description:{en:"Organize closets and storage",he:"לארגן ארונות ואחסון"},details:{en:"Quarterly",he:"רבעוני"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["quarterly","organizing"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-041",category:"home",title:{en:"Paint Touch-ups",he:"תיקון צבע"},description:{en:"Touch up paint on walls",he:"לתיקן צבע על קירות"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","maintenance","decor"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-042",category:"home",title:{en:"Pool/Spa Care",he:"טיפול בבריכה"},description:{en:"Maintain pool water and chemicals",he:"לתחזוק בריכה וכימיקלים"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","pool","maintenance"],difficulty:2,frequency:"weekly",timeEstimate:45},history:[]},{id:"card-043",category:"home",title:{en:"Home Inspection",he:"בדיקת בית"},description:{en:"Check home systems",he:"לבדוק מערכות הבית"},details:{en:"Annually",he:"שנתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["annual","maintenance"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-044",category:"home",title:{en:"Seasonal Decorating",he:"קישוט עונתי"},description:{en:"Decorate for holidays",he:"לקשט לחגים"},details:{en:"Seasonal",he:"עונתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","decorating"],difficulty:2,frequency:"occasional",timeEstimate:90},history:[]},{id:"card-045",category:"home",title:{en:"Furniture Rearrange",he:"סידור ריהוט"},description:{en:"Move and rearrange furniture",he:"להזיז ולסדר ריהוט"},details:{en:"As desired",he:"לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","organizing","decor"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-046",category:"magic",title:{en:"Date Night",he:"ערב בחוץ עם בן/בת הזוג"},description:{en:"Plan and execute date night",he:"לתכנן וליצור ערב רומנטי"},details:{en:"Monthly or as desired",he:"חודשי או לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","romance","couple-time"],difficulty:2,frequency:"monthly",timeEstimate:180},history:[]},{id:"card-047",category:"magic",title:{en:"Breakfast in Bed",he:"ארוחת בוקר במיטה"},description:{en:"Prepare special breakfast",he:"להכין ארוחת בוקר מיוחדת"},details:{en:"Surprise gift of love",he:"מתנה הפתעה של אהבה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","cooking"],difficulty:2,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-048",category:"magic",title:{en:"Massage Night",he:"ערב עיסוי"},description:{en:"Give a relaxing massage",he:"לתת עיסוי מרגיע"},details:{en:"Whenever needed",he:"בכל עת שצוריך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","relaxation"],difficulty:1,frequency:"occasional",timeEstimate:45},history:[]},{id:"card-049",category:"magic",title:{en:"Love Notes",he:"פתקי אהבה"},description:{en:"Leave love notes around house",he:"להשאיר פתקי אהבה בבית"},details:{en:"Small gestures daily",he:"תנועות קטנות כל יום"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","romance","small-gestures"],difficulty:1,frequency:"daily",timeEstimate:5},history:[]},{id:"card-050",category:"magic",title:{en:"Movie Night",he:"ערב סרטים"},description:{en:"Cuddle movie night at home",he:"ערב סרטים עם התקרבות"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","romance","couple-time"],difficulty:1,frequency:"weekly",timeEstimate:120},history:[]},{id:"card-051",category:"magic",title:{en:"Candle Dinner",he:"ארוחה באור נרות"},description:{en:"Cook special candlelit dinner",he:"לבשל ארוחה רומנטית באור נרות"},details:{en:"Special occasions or surprise",he:"אירועים מיוחדים או הפתעה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","cooking"],difficulty:3,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-052",category:"magic",title:{en:"Flowers Surprise",he:"הפתעת פרחים"},description:{en:"Surprise with flowers",he:"לתן הפתעה עם פרחים"},details:{en:"Surprise gift",he:"מתנת הפתעה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","gift"],difficulty:1,frequency:"occasional",timeEstimate:30},history:[]},{id:"card-053",category:"magic",title:{en:"Anniversary Celebration",he:"חגיגת יום נישואין"},description:{en:"Plan special anniversary",he:"לתכנן ולחגוג שנה"},details:{en:"Annual",he:"שנתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["annual","romance","celebration"],difficulty:2,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-054",category:"magic",title:{en:"Weekend Getaway",he:"טיול סוף שבוע"},description:{en:"Plan romantic weekend trip",he:"לתכנן טיול זוגי"},details:{en:"As desired",he:"לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","travel"],difficulty:3,frequency:"occasional",timeEstimate:240},history:[]},{id:"card-055",category:"magic",title:{en:"Morning Coffee Together",he:"קפה בוקר ביחד"},description:{en:"Share quiet coffee time",he:"לשתות קפה שקט ביחד"},details:{en:"Daily morning ritual",he:"טקס בוקר יומי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","romance","ritual"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-056",category:"magic",title:{en:"Plan Date Ideas",he:"תכנון רעיונות לדייט"},description:{en:"Research and plan fun dates",he:"לתכנן רעיונות דייט כיפיים"},details:{en:"Monthly planning",he:"תכנון חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","romance","planning"],difficulty:1,frequency:"monthly",timeEstimate:30},history:[]},{id:"card-057",category:"magic",title:{en:"Love Language Act",he:"פעולת שפת אהבה"},description:{en:"Express love in partner's language",he:"להביע אהבה בדרך המועדפת"},details:{en:"Weekly or more",he:"שבועי או יותר"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","romance","connection"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-058",category:"wild",title:{en:"Adventure Day",he:"יום הרפתקאות"},description:{en:"Plan spontaneous adventure",he:"לתכנן הרפתקה ספונטנית"},details:{en:"Surprise adventure",he:"הרפתקה בהפתעה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","adventure","spontaneous"],difficulty:2,frequency:"occasional",timeEstimate:240},history:[]},{id:"card-059",category:"wild",title:{en:"Karaoke Night",he:"ערב קריוקי"},description:{en:"Have fun singing together",he:"לשיר וליהנות ביחד"},details:{en:"Monthly or as desired",he:"חודשי או לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","fun","social"],difficulty:1,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-060",category:"wild",title:{en:"Road Trip",he:"טיול כביש"},description:{en:"Plan a fun road trip",he:"לתכנן טיול כביש כיפי"},details:{en:"Adventure getaway",he:"טיול הרפתקה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","adventure","travel"],difficulty:3,frequency:"occasional",timeEstimate:360},history:[]},{id:"card-061",category:"wild",title:{en:"Dance Party",he:"מסיבת ריקוד"},description:{en:"Have spontaneous dance party",he:"לעשות מסיבת ריקוד ספונטנית"},details:{en:"Whenever the mood strikes",he:"בכל עת שהמצב מתאים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["spontaneous","fun","activity"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-062",category:"wild",title:{en:"Outdoor Adventure",he:"הרפתקה בחוץ"},description:{en:"Hike or explore nature",he:"לטייל או לחקור טבע"},details:{en:"Weekend adventure",he:"הרפתקת סוף שבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekend","outdoor","adventure"],difficulty:2,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-063",category:"wild",title:{en:"New Recipe Challenge",he:"אתגר מתכון חדש"},description:{en:"Try cooking something new",he:"לנסות לבשל משהו חדש"},details:{en:"Weekly or monthly",he:"שבועי או חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cooking","experiment"],difficulty:2,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-064",category:"wild",title:{en:"Concert or Festival",he:"קונצרט או פסטיבל"},description:{en:"Attend live music event",he:"ללכת להופעה חיה"},details:{en:"As opportunities arise",he:"כשיש הזדמנויות"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","entertainment","social"],difficulty:2,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-065",category:"wild",title:{en:"Sport Game Day",he:"יום משחק ספורט"},description:{en:"Attend or play sports together",he:"להשתתף או לשחק ספורט ביחד"},details:{en:"Seasonal",he:"עונתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","sports","activity"],difficulty:1,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-066",category:"wild",title:{en:"Late Night Snack Run",he:"טיול לחטיף בלילה"},description:{en:"Midnight snack adventure",he:"טיול לחטיפים בחצות הלילה"},details:{en:"Spontaneous fun",he:"כיף ספונטני"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["spontaneous","fun","food"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-067",category:"wild",title:{en:"Try New Restaurant",he:"נסיון במסעדה חדשה"},description:{en:"Explore new dining spot",he:"לחקור מסעדה חדשה"},details:{en:"Monthly or as desired",he:"חודשי או לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","food","exploration"],difficulty:1,frequency:"monthly",timeEstimate:120},history:[]}];function rh(){const{t}=qn(),{setLanguage:e,language:n}=Mu(),[r,s]=J.useState("dashboard"),o=[{id:"dashboard",label:t("navigation.dashboard")},{id:"gameBoard",label:t("navigation.gameBoard")},{id:"cardGallery",label:t("navigation.cardGallery")},{id:"insights",label:t("navigation.insights")},{id:"settings",label:t("navigation.settings")}];return V.jsx("nav",{className:"bg-paper border-b-2 border-ink shadow-brutal-sm",children:V.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[V.jsxs("div",{className:"flex justify-between items-center h-16",children:[V.jsx("div",{className:"flex items-center",children:V.jsx("h1",{className:"font-display text-xl sm:text-2xl font-bold text-ink",children:t("common.appName")})}),V.jsx("div",{className:"hidden md:flex gap-8",children:o.map(u=>V.jsx("button",{onClick:()=>s(u.id),className:`text-sm font-body transition-all ${r===u.id?"text-partner-a font-bold":"text-ink hover:text-partner-b"}`,children:u.label},u.id))}),V.jsx("div",{className:"flex gap-4 items-center",children:V.jsx("button",{onClick:()=>e(n==="en"?"he":"en"),className:"px-3 py-1 bg-unassigned text-ink rounded-md font-body text-sm font-bold hover:shadow-brutal-sm transition-all",children:n==="en"?"עברית":"English"})})]}),V.jsx("div",{className:"md:hidden pb-4 flex gap-2 overflow-x-auto",children:o.map(u=>V.jsx("button",{onClick:()=>s(u.id),className:`px-3 py-1 rounded text-xs whitespace-nowrap transition-all ${r===u.id?"bg-partner-a text-paper font-bold":"bg-concrete text-paper hover:bg-ink"}`,children:u.label},u.id))})]})})}function ih(){return V.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[V.jsx("div",{className:"absolute inset-0 grain opacity-30"}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-paper via-paper to-paper opacity-100"}),V.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-unassigned opacity-5 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-partner-a opacity-3 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute top-1/2 left-1/4 w-64 h-64 bg-partner-b opacity-3 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-concrete rounded-full opacity-20"}),V.jsx("div",{className:"absolute top-1/3 right-1/4 w-3 h-3 bg-concrete rounded-full opacity-15"}),V.jsx("div",{className:"absolute bottom-1/4 right-20 w-2 h-2 bg-concrete rounded-full opacity-20"})]})}const Iu=J.createContext({});function sh(t){const e=J.useRef(null);return e.current===null&&(e.current=t()),e.current}const vs=J.createContext(null),Fu=J.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ah(t=!0){const e=J.useContext(vs);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=J.useId();J.useEffect(()=>{t&&s(o)},[t]);const u=J.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,u]:[!0]}const bs=typeof window<"u",oh=bs?J.useLayoutEffect:J.useEffect,Be=t=>t;let Bu=Be;function xs(t){let e;return()=>(e===void 0&&(e=t()),e)}const on=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},at=t=>t*1e3,ot=t=>t/1e3,uh={useManualTiming:!1};function lh(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(p){o.has(p)&&(f.schedule(p),t()),p(u)}const f={schedule:(p,g=!1,v=!1)=>{const C=v&&r?e:n;return g&&o.add(p),C.has(p)||C.add(p),p},cancel:p=>{n.delete(p),o.delete(p)},process:p=>{if(u=p,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(d),e.clear(),r=!1,s&&(s=!1,f.process(p))}};return f}const Ar=["read","resolveKeyframes","update","preRender","render","postRender"],ch=40;function Ku(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Ar.reduce((B,j)=>(B[j]=lh(o),B),{}),{read:d,resolveKeyframes:f,update:p,preRender:g,render:v,postRender:y}=u,C=()=>{const B=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(B-s.timestamp,ch),1),s.timestamp=B,s.isProcessing=!0,d.process(s),f.process(s),p.process(s),g.process(s),v.process(s),y.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(C))},L=()=>{n=!0,r=!0,s.isProcessing||t(C)};return{schedule:Ar.reduce((B,j)=>{const $=u[j];return B[j]=(G,U=!1,Z=!1)=>(n||L(),$.schedule(G,U,Z)),B},{}),cancel:B=>{for(let j=0;j<Ar.length;j++)u[Ar[j]].cancel(B)},state:s,steps:u}}const{schedule:me,cancel:yt,state:Ee,steps:Ni}=Ku(typeof requestAnimationFrame<"u"?requestAnimationFrame:Be,!0),$u=J.createContext({strict:!1}),ro={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},un={};for(const t in ro)un[t]={isEnabled:e=>ro[t].some(n=>!!e[n])};function dh(t){for(const e in t)un[e]={...un[e],...t[e]}}const fh=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fh.has(t)}let qu=t=>!Nr(t);function hh(t){t&&(qu=e=>e.startsWith("on")?!Nr(e):t(e))}try{hh(require("@emotion/is-prop-valid").default)}catch{}function ph(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(qu(s)||n===!0&&Nr(s)||!e&&!Nr(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function mh(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const zr=J.createContext({});function In(t){return typeof t=="string"||Array.isArray(t)}function Wr(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ws=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ss=["initial",...ws];function Hr(t){return Wr(t.animate)||Ss.some(e=>In(t[e]))}function Uu(t){return!!(Hr(t)||t.variants)}function gh(t,e){if(Hr(t)){const{initial:n,animate:r}=t;return{initial:n===!1||In(n)?n:void 0,animate:In(r)?r:void 0}}return t.inherit!==!1?e:{}}function yh(t){const{initial:e,animate:n}=gh(t,J.useContext(zr));return J.useMemo(()=>({initial:e,animate:n}),[io(e),io(n)])}function io(t){return Array.isArray(t)?t.join(" "):t}const vh=Symbol.for("motionComponentSymbol");function en(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function bh(t,e,n){return J.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):en(n)&&(n.current=r))},[e])}const As=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xh="framerAppearId",zu="data-"+As(xh),{schedule:Ps}=Ku(queueMicrotask,!1),Wu=J.createContext({});function wh(t,e,n,r,s){var o,u;const{visualElement:d}=J.useContext(zr),f=J.useContext($u),p=J.useContext(vs),g=J.useContext(Fu).reducedMotion,v=J.useRef(null);r=r||f.renderer,!v.current&&r&&(v.current=r(t,{visualState:e,parent:d,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const y=v.current,C=J.useContext(Wu);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&Sh(v.current,n,s,C);const L=J.useRef(!1);J.useInsertionEffect(()=>{y&&L.current&&y.update(n,p)});const N=n[zu],M=J.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,N)));return oh(()=>{y&&(L.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),Ps.render(y.render),M.current&&y.animationState&&y.animationState.animateChanges())}),J.useEffect(()=>{y&&(!M.current&&y.animationState&&y.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)===null||B===void 0||B.call(window,N)}),M.current=!1))}),y}function Sh(t,e,n,r){const{layoutId:s,layout:o,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Hu(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||d&&en(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}function Hu(t){if(t)return t.options.allowProjection!==!1?t.projection:Hu(t.parent)}function Ah({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var o,u;t&&dh(t);function d(p,g){let v;const y={...J.useContext(Fu),...p,layoutId:Ph(p)},{isStatic:C}=y,L=yh(p),N=r(p,C);if(!C&&bs){Ch();const M=kh(y);v=M.MeasureLayout,L.visualElement=wh(s,N,y,e,M.ProjectionNode)}return V.jsxs(zr.Provider,{value:L,children:[v&&L.visualElement?V.jsx(v,{visualElement:L.visualElement,...y}):null,n(s,p,bh(N,L.visualElement,g),N,C,L.visualElement)]})}d.displayName=`motion.${typeof s=="string"?s:`create(${(u=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&u!==void 0?u:""})`}`;const f=J.forwardRef(d);return f[vh]=s,f}function Ph({layoutId:t}){const e=J.useContext(Iu).id;return e&&t!==void 0?e+"-"+t:t}function Ch(t,e){J.useContext($u).strict}function kh(t){const{drag:e,layout:n}=un;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Dh=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cs(t){return typeof t!="string"||t.includes("-")?!1:!!(Dh.indexOf(t)>-1||/[A-Z]/u.test(t))}function so(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ks(t,e,n,r){if(typeof e=="function"){const[s,o]=so(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=so(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const Zi=t=>Array.isArray(t),Th=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Eh=t=>Zi(t)?t[t.length-1]||0:t,Ne=t=>!!(t&&t.getVelocity);function kr(t){const e=Ne(t)?t.get():t;return Th(e)?e.toValue():e}function Oh({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const u={latestValues:Rh(r,s,o,t),renderState:e()};return n&&(u.onMount=d=>n({props:r,current:d,...u}),u.onUpdate=d=>n(d)),u}const Gu=t=>(e,n)=>{const r=J.useContext(zr),s=J.useContext(vs),o=()=>Oh(t,e,r,s);return n?o():sh(o)};function Rh(t,e,n,r){const s={},o=r(t,{});for(const y in o)s[y]=kr(o[y]);let{initial:u,animate:d}=t;const f=Hr(t),p=Uu(t);e&&p&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const v=g?d:u;if(v&&typeof v!="boolean"&&!Wr(v)){const y=Array.isArray(v)?v:[v];for(let C=0;C<y.length;C++){const L=ks(t,y[C]);if(L){const{transitionEnd:N,transition:M,...B}=L;for(const j in B){let $=B[j];if(Array.isArray($)){const G=g?$.length-1:0;$=$[G]}$!==null&&(s[j]=$)}for(const j in N)s[j]=N[j]}}}return s}const cn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vt=new Set(cn),Yu=t=>e=>typeof e=="string"&&e.startsWith(t),Xu=Yu("--"),jh=Yu("var(--"),Ds=t=>jh(t)?_h.test(t.split("/*")[0].trim()):!1,_h=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ju=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ut=(t,e,n)=>n>e?e:n<t?t:n,dn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Fn={...dn,transform:t=>ut(0,1,t)},Pr={...dn,default:1},Un=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),gt=Un("deg"),et=Un("%"),re=Un("px"),Lh=Un("vh"),Nh=Un("vw"),ao={...et,parse:t=>et.parse(t)/100,transform:t=>et.transform(t*100)},Mh={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},Vh={rotate:gt,rotateX:gt,rotateY:gt,rotateZ:gt,scale:Pr,scaleX:Pr,scaleY:Pr,scaleZ:Pr,skew:gt,skewX:gt,skewY:gt,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:Fn,originX:ao,originY:ao,originZ:re},oo={...dn,transform:Math.round},Ts={...Mh,...Vh,zIndex:oo,size:re,fillOpacity:Fn,strokeOpacity:Fn,numOctaves:oo},Ih={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fh=cn.length;function Bh(t,e,n){let r="",s=!0;for(let o=0;o<Fh;o++){const u=cn[o],d=t[u];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(u.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||n){const p=Ju(d,Ts[u]);if(!f){s=!1;const g=Ih[u]||u;r+=`${g}(${p}) `}n&&(e[u]=p)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Es(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let u=!1,d=!1;for(const f in e){const p=e[f];if(Vt.has(f)){u=!0;continue}else if(Xu(f)){s[f]=p;continue}else{const g=Ju(p,Ts[f]);f.startsWith("origin")?(d=!0,o[f]=g):r[f]=g}}if(e.transform||(u||n?r.transform=Bh(e,t.transform,n):r.transform&&(r.transform="none")),d){const{originX:f="50%",originY:p="50%",originZ:g=0}=o;r.transformOrigin=`${f} ${p} ${g}`}}const Kh={offset:"stroke-dashoffset",array:"stroke-dasharray"},$h={offset:"strokeDashoffset",array:"strokeDasharray"};function qh(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?Kh:$h;t[o.offset]=re.transform(-r);const u=re.transform(e),d=re.transform(n);t[o.array]=`${u} ${d}`}function uo(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function Uh(t,e,n){const r=uo(e,t.x,t.width),s=uo(n,t.y,t.height);return`${r} ${s}`}function Os(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...p},g,v){if(Es(t,p,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:C,dimensions:L}=t;y.transform&&(L&&(C.transform=y.transform),delete y.transform),L&&(s!==void 0||o!==void 0||C.transform)&&(C.transformOrigin=Uh(L,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),u!==void 0&&qh(y,u,d,f,!1)}const Rs=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Qu=()=>({...Rs(),attrs:{}}),js=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Zu(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const el=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tl(t,e,n,r){Zu(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(el.has(s)?s:As(s),e.attrs[s])}const Mr={};function zh(t){Object.assign(Mr,t)}function nl(t,{layout:e,layoutId:n}){return Vt.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Mr[t]||t==="opacity")}function _s(t,e,n){var r;const{style:s}=t,o={};for(const u in s)(Ne(s[u])||e.style&&Ne(e.style[u])||nl(u,t)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[u]=s[u]);return o}function rl(t,e,n){const r=_s(t,e,n);for(const s in t)if(Ne(t[s])||Ne(e[s])){const o=cn.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function Wh(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const lo=["x","y","width","height","cx","cy","r"],Hh={useVisualState:Gu({scrapeMotionValuesFromProps:rl,createRenderState:Qu,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const d in s)if(Vt.has(d)){o=!0;break}}if(!o)return;let u=!e;if(e)for(let d=0;d<lo.length;d++){const f=lo[d];t[f]!==e[f]&&(u=!0)}u&&me.read(()=>{Wh(n,r),me.render(()=>{Os(r,s,js(n.tagName),t.transformTemplate),tl(n,r)})})}})},Gh={useVisualState:Gu({scrapeMotionValuesFromProps:_s,createRenderState:Rs})};function il(t,e,n){for(const r in e)!Ne(e[r])&&!nl(r,n)&&(t[r]=e[r])}function Yh({transformTemplate:t},e){return J.useMemo(()=>{const n=Rs();return Es(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Xh(t,e){const n=t.style||{},r={};return il(r,n,t),Object.assign(r,Yh(t,e)),r}function Jh(t,e){const n={},r=Xh(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Qh(t,e,n,r){const s=J.useMemo(()=>{const o=Qu();return Os(o,e,js(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};il(o,t.style,t),s.style={...o,...s.style}}return s}function Zh(t=!1){return(n,r,s,{latestValues:o},u)=>{const f=(Cs(n)?Qh:Jh)(r,o,u,n),p=ph(r,typeof n=="string",t),g=n!==J.Fragment?{...p,...f,ref:s}:{},{children:v}=r,y=J.useMemo(()=>Ne(v)?v.get():v,[v]);return J.createElement(n,{...g,children:y})}}function ep(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const u={...Cs(r)?Hh:Gh,preloadedFeatures:t,useRender:Zh(s),createVisualElement:e,Component:r};return Ah(u)}}function sl(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Gr(t,e,n){const r=t.getProps();return ks(r,e,n!==void 0?n:r.custom,t)}const tp=xs(()=>window.ScrollTimeline!==void 0);class np{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(tp()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class rp extends np{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Ls(t,e){return t?t[e]||t.default||t:void 0}const es=2e4;function al(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<es;)e+=n,r=t.next(e);return e>=es?1/0:e}function Ns(t){return typeof t=="function"}function co(t,e){t.timeline=e,t.onfinish=null}const Ms=t=>Array.isArray(t)&&typeof t[0]=="number",ip={linearEasing:void 0};function sp(t,e){const n=xs(t);return()=>{var r;return(r=ip[e])!==null&&r!==void 0?r:n()}}const Vr=sp(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ol=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(on(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function ul(t){return!!(typeof t=="function"&&Vr()||!t||typeof t=="string"&&(t in ts||Vr())||Ms(t)||Array.isArray(t)&&t.every(ul))}const Tn=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ts={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tn([0,.65,.55,1]),circOut:Tn([.55,0,1,.45]),backIn:Tn([.31,.01,.66,-.59]),backOut:Tn([.33,1.53,.69,.99])};function ll(t,e){if(t)return typeof t=="function"&&Vr()?ol(t,e):Ms(t)?Tn(t):Array.isArray(t)?t.map(n=>ll(n,e)||ts.easeOut):ts[t]}const He={x:!1,y:!1};function cl(){return He.x||He.y}function ap(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function dl(t,e){const n=ap(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function fo(t){return e=>{e.pointerType==="touch"||cl()||t(e)}}function op(t,e,n={}){const[r,s,o]=dl(t,n),u=fo(d=>{const{target:f}=d,p=e(d);if(typeof p!="function"||!f)return;const g=fo(v=>{p(v),f.removeEventListener("pointerleave",g)});f.addEventListener("pointerleave",g,s)});return r.forEach(d=>{d.addEventListener("pointerenter",u,s)}),o}const fl=(t,e)=>e?t===e?!0:fl(t,e.parentElement):!1,Vs=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,up=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lp(t){return up.has(t.tagName)||t.tabIndex!==-1}const En=new WeakSet;function ho(t){return e=>{e.key==="Enter"&&t(e)}}function Mi(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const cp=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=ho(()=>{if(En.has(n))return;Mi(n,"down");const s=ho(()=>{Mi(n,"up")}),o=()=>Mi(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function po(t){return Vs(t)&&!cl()}function dp(t,e,n={}){const[r,s,o]=dl(t,n),u=d=>{const f=d.currentTarget;if(!po(d)||En.has(f))return;En.add(f);const p=e(d),g=(C,L)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),!(!po(C)||!En.has(f))&&(En.delete(f),typeof p=="function"&&p(C,{success:L}))},v=C=>{g(C,n.useGlobalTarget||fl(f,C.target))},y=C=>{g(C,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",y,s)};return r.forEach(d=>{!lp(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,s),d.addEventListener("focus",p=>cp(p,s),s)}),o}function fp(t){return t==="x"||t==="y"?He[t]?null:(He[t]=!0,()=>{He[t]=!1}):He.x||He.y?null:(He.x=He.y=!0,()=>{He.x=He.y=!1})}const hl=new Set(["width","height","top","left","right","bottom",...cn]);let Dr;function hp(){Dr=void 0}const tt={now:()=>(Dr===void 0&&tt.set(Ee.isProcessing||uh.useManualTiming?Ee.timestamp:performance.now()),Dr),set:t=>{Dr=t,queueMicrotask(hp)}};function Is(t,e){t.indexOf(e)===-1&&t.push(e)}function Fs(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bs{constructor(){this.subscriptions=[]}add(e){return Is(this.subscriptions,e),()=>Fs(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function pl(t,e){return e?t*(1e3/e):0}const mo=30,pp=t=>!isNaN(parseFloat(t));class mp{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=tt.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=tt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=pp(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Bs);const r=this.events[e].add(n);return e==="change"?()=>{r(),me.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=tt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mo)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mo);return pl(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bn(t,e){return new mp(t,e)}function gp(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bn(n))}function yp(t,e){const n=Gr(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const u in o){const d=Eh(o[u]);gp(t,u,d)}}function vp(t){return!!(Ne(t)&&t.add)}function ns(t,e){const n=t.getValue("willChange");if(vp(n))return n.add(e)}function ml(t){return t.props[zu]}const gl=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,bp=1e-7,xp=12;function wp(t,e,n,r,s){let o,u,d=0;do u=e+(n-e)/2,o=gl(u,r,s)-t,o>0?n=u:e=u;while(Math.abs(o)>bp&&++d<xp);return u}function zn(t,e,n,r){if(t===e&&n===r)return Be;const s=o=>wp(o,0,1,t,n);return o=>o===0||o===1?o:gl(s(o),e,r)}const yl=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vl=t=>e=>1-t(1-e),bl=zn(.33,1.53,.69,.99),Ks=vl(bl),xl=yl(Ks),wl=t=>(t*=2)<1?.5*Ks(t):.5*(2-Math.pow(2,-10*(t-1))),$s=t=>1-Math.sin(Math.acos(t)),Sl=vl($s),Al=yl($s),Pl=t=>/^0[^.\s]+$/u.test(t);function Sp(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Pl(t):!0}const jn=t=>Math.round(t*1e5)/1e5,qs=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ap(t){return t==null}const Pp=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Us=(t,e)=>n=>!!(typeof n=="string"&&Pp.test(n)&&n.startsWith(t)||e&&!Ap(n)&&Object.prototype.hasOwnProperty.call(n,e)),Cl=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,u,d]=r.match(qs);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},Cp=t=>ut(0,255,t),Vi={...dn,transform:t=>Math.round(Cp(t))},Lt={test:Us("rgb","red"),parse:Cl("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Vi.transform(t)+", "+Vi.transform(e)+", "+Vi.transform(n)+", "+jn(Fn.transform(r))+")"};function kp(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rs={test:Us("#"),parse:kp,transform:Lt.transform},tn={test:Us("hsl","hue"),parse:Cl("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+et.transform(jn(e))+", "+et.transform(jn(n))+", "+jn(Fn.transform(r))+")"},Le={test:t=>Lt.test(t)||rs.test(t)||tn.test(t),parse:t=>Lt.test(t)?Lt.parse(t):tn.test(t)?tn.parse(t):rs.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Lt.transform(t):tn.transform(t)},Dp=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Tp(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qs))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Dp))===null||n===void 0?void 0:n.length)||0)>0}const kl="number",Dl="color",Ep="var",Op="var(",go="${}",Rp=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kn(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const d=e.replace(Rp,f=>(Le.test(f)?(r.color.push(o),s.push(Dl),n.push(Le.parse(f))):f.startsWith(Op)?(r.var.push(o),s.push(Ep),n.push(f)):(r.number.push(o),s.push(kl),n.push(parseFloat(f))),++o,go)).split(go);return{values:n,split:d,indexes:r,types:s}}function Tl(t){return Kn(t).values}function El(t){const{split:e,types:n}=Kn(t),r=e.length;return s=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],s[u]!==void 0){const d=n[u];d===kl?o+=jn(s[u]):d===Dl?o+=Le.transform(s[u]):o+=s[u]}return o}}const jp=t=>typeof t=="number"?0:t;function _p(t){const e=Tl(t);return El(t)(e.map(jp))}const vt={test:Tp,parse:Tl,createTransformer:El,getAnimatableNone:_p},Lp=new Set(["brightness","contrast","saturate","opacity"]);function Np(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(qs)||[];if(!r)return t;const s=n.replace(r,"");let o=Lp.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const Mp=/\b([a-z-]*)\(.*?\)/gu,is={...vt,getAnimatableNone:t=>{const e=t.match(Mp);return e?e.map(Np).join(" "):t}},Vp={...Ts,color:Le,backgroundColor:Le,outlineColor:Le,fill:Le,stroke:Le,borderColor:Le,borderTopColor:Le,borderRightColor:Le,borderBottomColor:Le,borderLeftColor:Le,filter:is,WebkitFilter:is},zs=t=>Vp[t];function Ol(t,e){let n=zs(t);return n!==is&&(n=vt),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Ip=new Set(["auto","none","0"]);function Fp(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!Ip.has(o)&&Kn(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=Ol(n,s)}const yo=t=>t===dn||t===re,vo=(t,e)=>parseFloat(t.split(", ")[e]),bo=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return vo(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?vo(o[1],t):0}},Bp=new Set(["x","y","z"]),Kp=cn.filter(t=>!Bp.has(t));function $p(t){const e=[];return Kp.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ln={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:bo(4,13),y:bo(5,14)};ln.translateX=ln.x;ln.translateY=ln.y;const Mt=new Set;let ss=!1,as=!1;function Rl(){if(as){const t=Array.from(Mt).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=$p(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,u])=>{var d;(d=r.getValue(o))===null||d===void 0||d.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}as=!1,ss=!1,Mt.forEach(t=>t.complete()),Mt.clear()}function jl(){Mt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(as=!0)})}function qp(){jl(),Rl()}class Ws{constructor(e,n,r,s,o,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mt.add(this),ss||(ss=!0,me.read(jl),me.resolveKeyframes(Rl))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const u=s==null?void 0:s.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const f=r.readValue(n,d);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=d),s&&u===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const _l=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Up=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zp(t){const e=Up.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Ll(t,e,n=1){const[r,s]=zp(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return _l(u)?parseFloat(u):u}return Ds(s)?Ll(s,e,n+1):s}const Nl=t=>e=>e.test(t),Wp={test:t=>t==="auto",parse:t=>t},Ml=[dn,re,et,gt,Nh,Lh,Wp],xo=t=>Ml.find(Nl(t));class Vl extends Ws{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),Ds(p))){const g=Ll(p,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!hl.has(r)||e.length!==2)return;const[s,o]=e,u=xo(s),d=xo(o);if(u!==d)if(yo(u)&&yo(d))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)Sp(e[s])&&r.push(s);r.length&&Fp(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ln[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const u=s.length-1,d=s[u];s[u]=ln[r](n.measureViewportBox(),window.getComputedStyle(n.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,p])=>{n.getValue(f).set(p)}),this.resolveNoneKeyframes()}}const wo=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vt.test(t)||t==="0")&&!t.startsWith("url("));function Hp(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Gp(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=wo(s,e),d=wo(o,e);return!u||!d?!1:Hp(t)||(n==="spring"||Ns(n))&&r}const Yp=t=>t!==null;function Yr(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(Yp),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const Xp=40;class Il{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=tt.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:u,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Xp?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&qp(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=tt.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:u,onComplete:d,onUpdate:f,isGenerator:p}=this.options;if(!p&&!Gp(e,r,s,o))if(u)this.options.duration=0;else{f&&f(Yr(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ye=(t,e,n)=>t+(e-t)*n;function Ii(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Jp({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,u=0;if(!e)s=o=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;s=Ii(f,d,t+1/3),o=Ii(f,d,t),u=Ii(f,d,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function Ir(t,e){return n=>n>0?e:t}const Fi=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Qp=[rs,Lt,tn],Zp=t=>Qp.find(e=>e.test(t));function So(t){const e=Zp(t);if(!e)return!1;let n=e.parse(t);return e===tn&&(n=Jp(n)),n}const Ao=(t,e)=>{const n=So(t),r=So(e);if(!n||!r)return Ir(t,e);const s={...n};return o=>(s.red=Fi(n.red,r.red,o),s.green=Fi(n.green,r.green,o),s.blue=Fi(n.blue,r.blue,o),s.alpha=ye(n.alpha,r.alpha,o),Lt.transform(s))},em=(t,e)=>n=>e(t(n)),Wn=(...t)=>t.reduce(em),os=new Set(["none","hidden"]);function tm(t,e){return os.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function nm(t,e){return n=>ye(t,e,n)}function Hs(t){return typeof t=="number"?nm:typeof t=="string"?Ds(t)?Ir:Le.test(t)?Ao:sm:Array.isArray(t)?Fl:typeof t=="object"?Le.test(t)?Ao:rm:Ir}function Fl(t,e){const n=[...t],r=n.length,s=t.map((o,u)=>Hs(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=s[u](o);return n}}function rm(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Hs(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function im(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],d=t.indexes[u][s[u]],f=(n=t.values[d])!==null&&n!==void 0?n:0;r[o]=f,s[u]++}return r}const sm=(t,e)=>{const n=vt.createTransformer(e),r=Kn(t),s=Kn(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?os.has(t)&&!s.values.length||os.has(e)&&!r.values.length?tm(t,e):Wn(Fl(im(r,s),s.values),n):Ir(t,e)};function Bl(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ye(t,e,n):Hs(t)(t,e)}const am=5;function Kl(t,e,n){const r=Math.max(e-am,0);return pl(n-t(r),e-r)}const ve={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bi=.001;function om({duration:t=ve.duration,bounce:e=ve.bounce,velocity:n=ve.velocity,mass:r=ve.mass}){let s,o,u=1-e;u=ut(ve.minDamping,ve.maxDamping,u),t=ut(ve.minDuration,ve.maxDuration,ot(t)),u<1?(s=p=>{const g=p*u,v=g*t,y=g-n,C=us(p,u),L=Math.exp(-v);return Bi-y/C*L},o=p=>{const v=p*u*t,y=v*n+n,C=Math.pow(u,2)*Math.pow(p,2)*t,L=Math.exp(-v),N=us(Math.pow(p,2),u);return(-s(p)+Bi>0?-1:1)*((y-C)*L)/N}):(s=p=>{const g=Math.exp(-p*t),v=(p-n)*t+1;return-Bi+g*v},o=p=>{const g=Math.exp(-p*t),v=(n-p)*(t*t);return g*v});const d=5/t,f=lm(s,o,d);if(t=at(t),isNaN(f))return{stiffness:ve.stiffness,damping:ve.damping,duration:t};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:u*2*Math.sqrt(r*p),duration:t}}}const um=12;function lm(t,e,n){let r=n;for(let s=1;s<um;s++)r=r-t(r)/e(r);return r}function us(t,e){return t*Math.sqrt(1-e*e)}const cm=["duration","bounce"],dm=["stiffness","damping","mass"];function Po(t,e){return e.some(n=>t[n]!==void 0)}function fm(t){let e={velocity:ve.velocity,stiffness:ve.stiffness,damping:ve.damping,mass:ve.mass,isResolvedFromDuration:!1,...t};if(!Po(t,dm)&&Po(t,cm))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*ut(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ve.mass,stiffness:s,damping:o}}else{const n=om(t);e={...e,...n,mass:ve.mass},e.isResolvedFromDuration=!0}return e}function $l(t=ve.visualDuration,e=ve.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:f,damping:p,mass:g,duration:v,velocity:y,isResolvedFromDuration:C}=fm({...n,velocity:-ot(n.velocity||0)}),L=y||0,N=p/(2*Math.sqrt(f*g)),M=u-o,B=ot(Math.sqrt(f/g)),j=Math.abs(M)<5;r||(r=j?ve.restSpeed.granular:ve.restSpeed.default),s||(s=j?ve.restDelta.granular:ve.restDelta.default);let $;if(N<1){const U=us(B,N);$=Z=>{const ee=Math.exp(-N*B*Z);return u-ee*((L+N*B*M)/U*Math.sin(U*Z)+M*Math.cos(U*Z))}}else if(N===1)$=U=>u-Math.exp(-B*U)*(M+(L+B*M)*U);else{const U=B*Math.sqrt(N*N-1);$=Z=>{const ee=Math.exp(-N*B*Z),ie=Math.min(U*Z,300);return u-ee*((L+N*B*M)*Math.sinh(ie)+U*M*Math.cosh(ie))/U}}const G={calculatedDuration:C&&v||null,next:U=>{const Z=$(U);if(C)d.done=U>=v;else{let ee=0;N<1&&(ee=U===0?at(L):Kl($,U,Z));const ie=Math.abs(ee)<=r,Pe=Math.abs(u-Z)<=s;d.done=ie&&Pe}return d.value=d.done?u:Z,d},toString:()=>{const U=Math.min(al(G),es),Z=ol(ee=>G.next(U*ee).value,U,30);return U+"ms "+Z}};return G}function Co({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:d,max:f,restDelta:p=.5,restSpeed:g}){const v=t[0],y={done:!1,value:v},C=ie=>d!==void 0&&ie<d||f!==void 0&&ie>f,L=ie=>d===void 0?f:f===void 0||Math.abs(d-ie)<Math.abs(f-ie)?d:f;let N=n*e;const M=v+N,B=u===void 0?M:u(M);B!==M&&(N=B-v);const j=ie=>-N*Math.exp(-ie/r),$=ie=>B+j(ie),G=ie=>{const Pe=j(ie),Ce=$(ie);y.done=Math.abs(Pe)<=p,y.value=y.done?B:Ce};let U,Z;const ee=ie=>{C(y.value)&&(U=ie,Z=$l({keyframes:[y.value,L(y.value)],velocity:Kl($,ie,y.value),damping:s,stiffness:o,restDelta:p,restSpeed:g}))};return ee(0),{calculatedDuration:null,next:ie=>{let Pe=!1;return!Z&&U===void 0&&(Pe=!0,G(ie),ee(ie)),U!==void 0&&ie>=U?Z.next(ie-U):(!Pe&&G(ie),y)}}}const hm=zn(.42,0,1,1),pm=zn(0,0,.58,1),ql=zn(.42,0,.58,1),mm=t=>Array.isArray(t)&&typeof t[0]!="number",gm={linear:Be,easeIn:hm,easeInOut:ql,easeOut:pm,circIn:$s,circInOut:Al,circOut:Sl,backIn:Ks,backInOut:xl,backOut:bl,anticipate:wl},ko=t=>{if(Ms(t)){Bu(t.length===4);const[e,n,r,s]=t;return zn(e,n,r,s)}else if(typeof t=="string")return gm[t];return t};function ym(t,e,n){const r=[],s=n||Bl,o=t.length-1;for(let u=0;u<o;u++){let d=s(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Be:e;d=Wn(f,d)}r.push(d)}return r}function vm(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(Bu(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=ym(e,r,s),f=d.length,p=g=>{if(u&&g<t[0])return e[0];let v=0;if(f>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const y=on(t[v],t[v+1],g);return d[v](y)};return n?g=>p(ut(t[0],t[o-1],g)):p}function bm(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=on(0,e,r);t.push(ye(n,1,s))}}function xm(t){const e=[0];return bm(e,t.length-1),e}function wm(t,e){return t.map(n=>n*e)}function Sm(t,e){return t.map(()=>e||ql).splice(0,t.length-1)}function Fr({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=mm(r)?r.map(ko):ko(r),o={done:!1,value:e[0]},u=wm(n&&n.length===e.length?n:xm(e),t),d=vm(u,e,{ease:Array.isArray(s)?s:Sm(e,s)});return{calculatedDuration:t,next:f=>(o.value=d(f),o.done=f>=t,o)}}const Am=t=>{const e=({timestamp:n})=>t(n);return{start:()=>me.update(e,!0),stop:()=>yt(e),now:()=>Ee.isProcessing?Ee.timestamp:tt.now()}},Pm={decay:Co,inertia:Co,tween:Fr,keyframes:Fr,spring:$l},Cm=t=>t/100;class Gs extends Il{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,u=(s==null?void 0:s.KeyframeResolver)||Ws,d=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new u(o,d,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=this.options,d=Ns(n)?n:Pm[n]||Fr;let f,p;d!==Fr&&typeof e[0]!="number"&&(f=Wn(Cm,Bl(e[0],e[1])),e=[0,100]);const g=d({...this.options,keyframes:e});o==="mirror"&&(p=d({...this.options,keyframes:[...e].reverse(),velocity:-u})),g.calculatedDuration===null&&(g.calculatedDuration=al(g));const{calculatedDuration:v}=g,y=v+s,C=y*(r+1)-s;return{generator:g,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:v,resolvedDuration:y,totalDuration:C}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:ie}=this.options;return{done:!0,value:ie[ie.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:u,mapPercentToKeyframes:d,keyframes:f,calculatedDuration:p,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:y,repeat:C,repeatType:L,repeatDelay:N,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const B=this.currentTime-y*(this.speed>=0?1:-1),j=this.speed>=0?B<0:B>g;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let $=this.currentTime,G=o;if(C){const ie=Math.min(this.currentTime,g)/v;let Pe=Math.floor(ie),Ce=ie%1;!Ce&&ie>=1&&(Ce=1),Ce===1&&Pe--,Pe=Math.min(Pe,C+1),!!(Pe%2)&&(L==="reverse"?(Ce=1-Ce,N&&(Ce-=N/v)):L==="mirror"&&(G=u)),$=ut(0,1,Ce)*v}const U=j?{done:!1,value:f[0]}:G.next($);d&&(U.value=d(U.value));let{done:Z}=U;!j&&p!==null&&(Z=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const ee=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return ee&&s!==void 0&&(U.value=Yr(f,this.options,s)),M&&M(U.value),ee&&this.finish(),U}get duration(){const{resolved:e}=this;return e?ot(e.calculatedDuration):0}get time(){return ot(this.currentTime)}set time(e){e=at(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ot(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Am,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const km=new Set(["opacity","clipPath","filter","transform"]);function Dm(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:d="easeInOut",times:f}={}){const p={[e]:n};f&&(p.offset=f);const g=ll(d,s);return Array.isArray(g)&&(p.easing=g),t.animate(p,{delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}const Tm=xs(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Br=10,Em=2e4;function Om(t){return Ns(t.type)||t.type==="spring"||!ul(t.ease)}function Rm(t,e){const n=new Gs({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<Em;)r=n.sample(o),s.push(r.value),o+=Br;return{times:void 0,keyframes:s,duration:o-Br,ease:"linear"}}const Ul={anticipate:wl,backInOut:xl,circInOut:Al};function jm(t){return t in Ul}class Do extends Il{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new Vl(o,(u,d)=>this.onKeyframesResolved(u,d),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:u,motionValue:d,name:f,startTime:p}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof o=="string"&&Vr()&&jm(o)&&(o=Ul[o]),Om(this.options)){const{onComplete:v,onUpdate:y,motionValue:C,element:L,...N}=this.options,M=Rm(e,N);e=M.keyframes,e.length===1&&(e[1]=e[0]),r=M.duration,s=M.times,o=M.ease,u="keyframes"}const g=Dm(d.owner.current,f,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=p??this.calcStartTime(),this.pendingTimeline?(co(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;d.set(Yr(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:u,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ot(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ot(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=at(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Be;const{animation:r}=n;co(r,e)}return Be}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:u,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:g,onComplete:v,element:y,...C}=this.options,L=new Gs({...C,keyframes:r,duration:s,type:o,ease:u,times:d,isGenerator:!0}),N=at(this.time);p.setWithVelocity(L.sample(N-Br).value,L.sample(N).value,Br)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:u,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=n.owner.getProps();return Tm()&&r&&km.has(r)&&!f&&!p&&!s&&o!=="mirror"&&u!==0&&d!=="inertia"}}const _m={type:"spring",stiffness:500,damping:25,restSpeed:10},Lm=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Nm={type:"keyframes",duration:.8},Mm={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Vm=(t,{keyframes:e})=>e.length>2?Nm:Vt.has(t)?t.startsWith("scale")?Lm(e[1]):_m:Mm;function Im({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:d,from:f,elapsed:p,...g}){return!!Object.keys(g).length}const Ys=(t,e,n,r={},s,o)=>u=>{const d=Ls(r,t)||{},f=d.delay||r.delay||0;let{elapsed:p=0}=r;p=p-at(f);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:y=>{e.set(y),d.onUpdate&&d.onUpdate(y)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:s};Im(d)||(g={...g,...Vm(t,g)}),g.duration&&(g.duration=at(g.duration)),g.repeatDelay&&(g.repeatDelay=at(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const y=Yr(g.keyframes,d);if(y!==void 0)return me.update(()=>{g.onUpdate(y),g.onComplete()}),new rp([])}return!o&&Do.supports(g)?new Do(g):new Gs(g)};function Fm({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function zl(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:u=t.getDefaultTransition(),transitionEnd:d,...f}=e;r&&(u=r);const p=[],g=s&&t.animationState&&t.animationState.getState()[s];for(const v in f){const y=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),C=f[v];if(C===void 0||g&&Fm(g,v))continue;const L={delay:n,...Ls(u||{},v)};let N=!1;if(window.MotionHandoffAnimation){const B=ml(t);if(B){const j=window.MotionHandoffAnimation(B,v,me);j!==null&&(L.startTime=j,N=!0)}}ns(t,v),y.start(Ys(v,y,C,t.shouldReduceMotion&&hl.has(v)?{type:!1}:L,t,N));const M=y.animation;M&&p.push(M)}return d&&Promise.all(p).then(()=>{me.update(()=>{d&&yp(t,d)})}),p}function ls(t,e,n={}){var r;const s=Gr(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const u=s?()=>Promise.all(zl(t,s,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:y}=o;return Bm(t,e,g+p,v,y,n)}:()=>Promise.resolve(),{when:f}=o;if(f){const[p,g]=f==="beforeChildren"?[u,d]:[d,u];return p().then(()=>g())}else return Promise.all([u(),d(n.delay)])}function Bm(t,e,n=0,r=0,s=1,o){const u=[],d=(t.variantChildren.size-1)*r,f=s===1?(p=0)=>p*r:(p=0)=>d-p*r;return Array.from(t.variantChildren).sort(Km).forEach((p,g)=>{p.notify("AnimationStart",e),u.push(ls(p,e,{...o,delay:n+f(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(u)}function Km(t,e){return t.sortNodePosition(e)}function $m(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>ls(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=ls(t,e,n);else{const s=typeof e=="function"?Gr(t,e,n.custom):e;r=Promise.all(zl(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const qm=Ss.length;function Wl(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Wl(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<qm;n++){const r=Ss[n],s=t.props[r];(In(s)||s===!1)&&(e[r]=s)}return e}const Um=[...ws].reverse(),zm=ws.length;function Wm(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$m(t,n,r)))}function Hm(t){let e=Wm(t),n=To(),r=!0;const s=f=>(p,g)=>{var v;const y=Gr(t,g,f==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(y){const{transition:C,transitionEnd:L,...N}=y;p={...p,...N,...L}}return p};function o(f){e=f(t)}function u(f){const{props:p}=t,g=Wl(t.parent)||{},v=[],y=new Set;let C={},L=1/0;for(let M=0;M<zm;M++){const B=Um[M],j=n[B],$=p[B]!==void 0?p[B]:g[B],G=In($),U=B===f?j.isActive:null;U===!1&&(L=M);let Z=$===g[B]&&$!==p[B]&&G;if(Z&&r&&t.manuallyAnimateOnMount&&(Z=!1),j.protectedKeys={...C},!j.isActive&&U===null||!$&&!j.prevProp||Wr($)||typeof $=="boolean")continue;const ee=Gm(j.prevProp,$);let ie=ee||B===f&&j.isActive&&!Z&&G||M>L&&G,Pe=!1;const Ce=Array.isArray($)?$:[$];let Me=Ce.reduce(s(B),{});U===!1&&(Me={});const{prevResolvedValues:nt={}}=j,We={...nt,...Me},Ge=Se=>{ie=!0,y.has(Se)&&(Pe=!0,y.delete(Se)),j.needsAnimating[Se]=!0;const fe=t.getValue(Se);fe&&(fe.liveStyle=!1)};for(const Se in We){const fe=Me[Se],ke=nt[Se];if(C.hasOwnProperty(Se))continue;let Ae=!1;Zi(fe)&&Zi(ke)?Ae=!sl(fe,ke):Ae=fe!==ke,Ae?fe!=null?Ge(Se):y.add(Se):fe!==void 0&&y.has(Se)?Ge(Se):j.protectedKeys[Se]=!0}j.prevProp=$,j.prevResolvedValues=Me,j.isActive&&(C={...C,...Me}),r&&t.blockInitialAnimation&&(ie=!1),ie&&(!(Z&&ee)||Pe)&&v.push(...Ce.map(Se=>({animation:Se,options:{type:B}})))}if(y.size){const M={};y.forEach(B=>{const j=t.getBaseTarget(B),$=t.getValue(B);$&&($.liveStyle=!0),M[B]=j??null}),v.push({animation:M})}let N=!!v.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(v):Promise.resolve()}function d(f,p){var g;if(n[f].isActive===p)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(y=>{var C;return(C=y.animationState)===null||C===void 0?void 0:C.setActive(f,p)}),n[f].isActive=p;const v=u(f);for(const y in n)n[y].protectedKeys={};return v}return{animateChanges:u,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=To(),r=!0}}}function Gm(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!sl(e,t):!1}function Rt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function To(){return{animate:Rt(!0),whileInView:Rt(),whileHover:Rt(),whileTap:Rt(),whileDrag:Rt(),whileFocus:Rt(),exit:Rt()}}class bt{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Ym extends bt{constructor(e){super(e),e.animationState||(e.animationState=Hm(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Wr(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Xm=0;class Jm extends bt{constructor(){super(...arguments),this.id=Xm++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Qm={animation:{Feature:Ym},exit:{Feature:Jm}};function $n(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Hn(t){return{point:{x:t.pageX,y:t.pageY}}}const Zm=t=>e=>Vs(e)&&t(e,Hn(e));function _n(t,e,n,r){return $n(t,e,Zm(n),r)}const Eo=(t,e)=>Math.abs(t-e);function eg(t,e){const n=Eo(t.x,e.x),r=Eo(t.y,e.y);return Math.sqrt(n**2+r**2)}class Hl{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=$i(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,C=eg(v.offset,{x:0,y:0})>=3;if(!y&&!C)return;const{point:L}=v,{timestamp:N}=Ee;this.history.push({...L,timestamp:N});const{onStart:M,onMove:B}=this.handlers;y||(M&&M(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Ki(y,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:C,onSessionEnd:L,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=$i(v.type==="pointercancel"?this.lastMoveEventInfo:Ki(y,this.transformPagePoint),this.history);this.startEvent&&C&&C(v,M),L&&L(v,M)},!Vs(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=Hn(e),d=Ki(u,this.transformPagePoint),{point:f}=d,{timestamp:p}=Ee;this.history=[{...f,timestamp:p}];const{onSessionStart:g}=n;g&&g(e,$i(d,this.history)),this.removeListeners=Wn(_n(this.contextWindow,"pointermove",this.handlePointerMove),_n(this.contextWindow,"pointerup",this.handlePointerUp),_n(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yt(this.updatePoint)}}function Ki(t,e){return e?{point:e(t.point)}:t}function Oo(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $i({point:t},e){return{point:t,delta:Oo(t,Gl(e)),offset:Oo(t,tg(e)),velocity:ng(e,.1)}}function tg(t){return t[0]}function Gl(t){return t[t.length-1]}function ng(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Gl(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>at(e)));)n--;if(!r)return{x:0,y:0};const o=ot(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const Yl=1e-4,rg=1-Yl,ig=1+Yl,Xl=.01,sg=0-Xl,ag=0+Xl;function Ke(t){return t.max-t.min}function og(t,e,n){return Math.abs(t-e)<=n}function Ro(t,e,n,r=.5){t.origin=r,t.originPoint=ye(e.min,e.max,t.origin),t.scale=Ke(n)/Ke(e),t.translate=ye(n.min,n.max,t.origin)-t.originPoint,(t.scale>=rg&&t.scale<=ig||isNaN(t.scale))&&(t.scale=1),(t.translate>=sg&&t.translate<=ag||isNaN(t.translate))&&(t.translate=0)}function Ln(t,e,n,r){Ro(t.x,e.x,n.x,r?r.originX:void 0),Ro(t.y,e.y,n.y,r?r.originY:void 0)}function jo(t,e,n){t.min=n.min+e.min,t.max=t.min+Ke(e)}function ug(t,e,n){jo(t.x,e.x,n.x),jo(t.y,e.y,n.y)}function _o(t,e,n){t.min=e.min-n.min,t.max=t.min+Ke(e)}function Nn(t,e,n){_o(t.x,e.x,n.x),_o(t.y,e.y,n.y)}function lg(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ye(n,t,r.max):Math.min(t,n)),t}function Lo(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function cg(t,{top:e,left:n,bottom:r,right:s}){return{x:Lo(t.x,n,s),y:Lo(t.y,e,r)}}function No(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function dg(t,e){return{x:No(t.x,e.x),y:No(t.y,e.y)}}function fg(t,e){let n=.5;const r=Ke(t),s=Ke(e);return s>r?n=on(e.min,e.max-r,t.min):r>s&&(n=on(t.min,t.max-s,e.min)),ut(0,1,n)}function hg(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const cs=.35;function pg(t=cs){return t===!1?t=0:t===!0&&(t=cs),{x:Mo(t,"left","right"),y:Mo(t,"top","bottom")}}function Mo(t,e,n){return{min:Vo(t,e),max:Vo(t,n)}}function Vo(t,e){return typeof t=="number"?t:t[e]||0}const Io=()=>({translate:0,scale:1,origin:0,originPoint:0}),nn=()=>({x:Io(),y:Io()}),Fo=()=>({min:0,max:0}),we=()=>({x:Fo(),y:Fo()});function Ue(t){return[t("x"),t("y")]}function Jl({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function mg({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gg(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function qi(t){return t===void 0||t===1}function ds({scale:t,scaleX:e,scaleY:n}){return!qi(t)||!qi(e)||!qi(n)}function jt(t){return ds(t)||Ql(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ql(t){return Bo(t.x)||Bo(t.y)}function Bo(t){return t&&t!=="0%"}function Kr(t,e,n){const r=t-n,s=e*r;return n+s}function Ko(t,e,n,r,s){return s!==void 0&&(t=Kr(t,s,r)),Kr(t,n,r)+e}function fs(t,e=0,n=1,r,s){t.min=Ko(t.min,e,n,r,s),t.max=Ko(t.max,e,n,r,s)}function Zl(t,{x:e,y:n}){fs(t.x,e.translate,e.scale,e.originPoint),fs(t.y,n.translate,n.scale,n.originPoint)}const $o=.999999999999,qo=1.0000000000001;function yg(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,u;for(let d=0;d<s;d++){o=n[d],u=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&sn(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,Zl(t,u)),r&&jt(o.latestValues)&&sn(t,o.latestValues))}e.x<qo&&e.x>$o&&(e.x=1),e.y<qo&&e.y>$o&&(e.y=1)}function rn(t,e){t.min=t.min+e,t.max=t.max+e}function Uo(t,e,n,r,s=.5){const o=ye(t.min,t.max,s);fs(t,e,n,o,r)}function sn(t,e){Uo(t.x,e.x,e.scaleX,e.scale,e.originX),Uo(t.y,e.y,e.scaleY,e.scale,e.originY)}function ec(t,e){return Jl(gg(t.getBoundingClientRect(),e))}function vg(t,e,n){const r=ec(t,n),{scroll:s}=e;return s&&(rn(r.x,s.offset.x),rn(r.y,s.offset.y)),r}const tc=({current:t})=>t?t.ownerDocument.defaultView:null,bg=new WeakMap;class xg{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=we(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Hn(g).point)},o=(g,v)=>{const{drag:y,dragPropagation:C,onDragStart:L}=this.getProps();if(y&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fp(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ue(M=>{let B=this.getAxisMotionValue(M).get()||0;if(et.test(B)){const{projection:j}=this.visualElement;if(j&&j.layout){const $=j.layout.layoutBox[M];$&&(B=Ke($)*(parseFloat(B)/100))}}this.originPoint[M]=B}),L&&me.postRender(()=>L(g,v)),ns(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},u=(g,v)=>{const{dragPropagation:y,dragDirectionLock:C,onDirectionLock:L,onDrag:N}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:M}=v;if(C&&this.currentDirection===null){this.currentDirection=wg(M),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",v.point,M),this.updateAxis("y",v.point,M),this.visualElement.render(),N&&N(g,v)},d=(g,v)=>this.stop(g,v),f=()=>Ue(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Hl(e,{onSessionStart:s,onStart:o,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:tc(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&me.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Cr(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=lg(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&en(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=cg(s.layoutBox,n):this.constraints=!1,this.elastic=pg(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ue(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=hg(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!en(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=vg(r,s.root,this.visualElement.getTransformPagePoint());let u=dg(s.layout.layoutBox,o);if(n){const d=n(mg(u));this.hasMutatedConstraints=!!d,d&&(u=Jl(d))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},p=Ue(g=>{if(!Cr(g,n,this.currentDirection))return;let v=f&&f[g]||{};u&&(v={min:0,max:0});const y=s?200:1e6,C=s?40:1e7,L={type:"inertia",velocity:r?e[g]:0,bounceStiffness:y,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,L)});return Promise.all(p).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ns(this.visualElement,e),r.start(Ys(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ue(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ue(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ue(n=>{const{drag:r}=this.getProps();if(!Cr(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:d}=s.layout.layoutBox[n];o.set(e[n]-ye(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!en(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ue(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const f=d.get();s[u]=fg({min:f,max:f},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ue(u=>{if(!Cr(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];d.set(ye(f,p,s[u]))})}addListeners(){if(!this.visualElement.current)return;bg.set(this.visualElement,this);const e=this.visualElement.current,n=_n(e,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();en(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),me.read(r);const u=$n(window,"resize",()=>this.scalePositionWithinConstraints()),d=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ue(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=f[g].translate,v.set(v.get()+f[g].translate))}),this.visualElement.render())});return()=>{u(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=cs,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:d}}}function Cr(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wg(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Sg extends bt{constructor(e){super(e),this.removeGroupControls=Be,this.removeListeners=Be,this.controls=new xg(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Be}unmount(){this.removeGroupControls(),this.removeListeners()}}const zo=t=>(e,n)=>{t&&me.postRender(()=>t(e,n))};class Ag extends bt{constructor(){super(...arguments),this.removePointerDownListener=Be}onPointerDown(e){this.session=new Hl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tc(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:zo(e),onStart:zo(n),onMove:r,onEnd:(o,u)=>{delete this.session,s&&me.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=_n(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Wo(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Dn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=Wo(t,e.target.x),r=Wo(t,e.target.y);return`${n}% ${r}%`}},Pg={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=vt.parse(t);if(s.length>5)return r;const o=vt.createTransformer(t),u=typeof s[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;s[0+u]/=d,s[1+u]/=f;const p=ye(d,f,.5);return typeof s[2+u]=="number"&&(s[2+u]/=p),typeof s[3+u]=="number"&&(s[3+u]/=p),o(s)}};class Cg extends J.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;zh(kg),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Tr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,s||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||me.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ps.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nc(t){const[e,n]=ah(),r=J.useContext(Iu);return V.jsx(Cg,{...t,layoutGroup:r,switchLayoutGroup:J.useContext(Wu),isPresent:e,safeToRemove:n})}const kg={borderRadius:{...Dn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dn,borderTopRightRadius:Dn,borderBottomLeftRadius:Dn,borderBottomRightRadius:Dn,boxShadow:Pg};function Dg(t,e,n){const r=Ne(t)?t:Bn(t);return r.start(Ys("",r,e,n)),r.animation}function Tg(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Eg=(t,e)=>t.depth-e.depth;class Og{constructor(){this.children=[],this.isDirty=!1}add(e){Is(this.children,e),this.isDirty=!0}remove(e){Fs(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Eg),this.isDirty=!1,this.children.forEach(e)}}function Rg(t,e){const n=tt.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(yt(r),t(o-e))};return me.read(r,!0),()=>yt(r)}const rc=["TopLeft","TopRight","BottomLeft","BottomRight"],jg=rc.length,Ho=t=>typeof t=="string"?parseFloat(t):t,Go=t=>typeof t=="number"||re.test(t);function _g(t,e,n,r,s,o){s?(t.opacity=ye(0,n.opacity!==void 0?n.opacity:1,Lg(r)),t.opacityExit=ye(e.opacity!==void 0?e.opacity:1,0,Ng(r))):o&&(t.opacity=ye(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<jg;u++){const d=`border${rc[u]}Radius`;let f=Yo(e,d),p=Yo(n,d);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||Go(f)===Go(p)?(t[d]=Math.max(ye(Ho(f),Ho(p),r),0),(et.test(p)||et.test(f))&&(t[d]+="%")):t[d]=p}(e.rotate||n.rotate)&&(t.rotate=ye(e.rotate||0,n.rotate||0,r))}function Yo(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Lg=ic(0,.5,Sl),Ng=ic(.5,.95,Be);function ic(t,e,n){return r=>r<t?0:r>e?1:n(on(t,e,r))}function Xo(t,e){t.min=e.min,t.max=e.max}function qe(t,e){Xo(t.x,e.x),Xo(t.y,e.y)}function Jo(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Qo(t,e,n,r,s){return t-=e,t=Kr(t,1/n,r),s!==void 0&&(t=Kr(t,1/s,r)),t}function Mg(t,e=0,n=1,r=.5,s,o=t,u=t){if(et.test(e)&&(e=parseFloat(e),e=ye(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=ye(o.min,o.max,r);t===o&&(d-=e),t.min=Qo(t.min,e,n,d,s),t.max=Qo(t.max,e,n,d,s)}function Zo(t,e,[n,r,s],o,u){Mg(t,e[n],e[r],e[s],e.scale,o,u)}const Vg=["x","scaleX","originX"],Ig=["y","scaleY","originY"];function eu(t,e,n,r){Zo(t.x,e,Vg,n?n.x:void 0,r?r.x:void 0),Zo(t.y,e,Ig,n?n.y:void 0,r?r.y:void 0)}function tu(t){return t.translate===0&&t.scale===1}function sc(t){return tu(t.x)&&tu(t.y)}function nu(t,e){return t.min===e.min&&t.max===e.max}function Fg(t,e){return nu(t.x,e.x)&&nu(t.y,e.y)}function ru(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ac(t,e){return ru(t.x,e.x)&&ru(t.y,e.y)}function iu(t){return Ke(t.x)/Ke(t.y)}function su(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Bg{constructor(){this.members=[]}add(e){Is(this.members,e),e.scheduleRender()}remove(e){if(Fs(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Kg(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((s||o||u)&&(r=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:v,rotateY:y,skewX:C,skewY:L}=n;p&&(r=`perspective(${p}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),y&&(r+=`rotateY(${y}deg) `),C&&(r+=`skewX(${C}deg) `),L&&(r+=`skewY(${L}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(r+=`scale(${d}, ${f})`),r||"none"}const _t={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},On=typeof window<"u"&&window.MotionDebug!==void 0,Ui=["","X","Y","Z"],$g={visibility:"hidden"},au=1e3;let qg=0;function zi(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function oc(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ml(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",me,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&oc(r)}function uc({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},d=e==null?void 0:e()){this.id=qg++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,On&&(_t.totalNodes=_t.resolvedTargetDeltas=_t.recalculatedProjection=0),this.nodes.forEach(Wg),this.nodes.forEach(Jg),this.nodes.forEach(Qg),this.nodes.forEach(Hg),On&&window.MotionDebug.record(_t)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new Og)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Bs),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Tg(u),this.instance=u;const{layoutId:f,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(p||f)&&(this.isLayoutDirty=!0),t){let v;const y=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=Rg(y,250),Tr.hasAnimatedSinceResize&&(Tr.hasAnimatedSinceResize=!1,this.nodes.forEach(uu))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||p)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y,hasRelativeTargetChanged:C,layout:L})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||g.getDefaultTransition()||ry,{onLayoutAnimationStart:M,onLayoutAnimationComplete:B}=g.getProps(),j=!this.targetLayout||!ac(this.targetLayout,L)||C,$=!y&&C;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||$||y&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,$);const G={...Ls(N,"layout"),onPlay:M,onComplete:B};(g.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else y||uu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=L})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zg),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ou);return}this.isUpdating||this.nodes.forEach(Yg),this.isUpdating=!1,this.nodes.forEach(Xg),this.nodes.forEach(Ug),this.nodes.forEach(zg),this.clearAllSnapshots();const d=tt.now();Ee.delta=ut(0,1e3/60,d-Ee.timestamp),Ee.timestamp=d,Ee.isProcessing=!0,Ni.update.process(Ee),Ni.preRender.process(Ee),Ni.render.process(Ee),Ee.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ps.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Gg),this.sharedNodes.forEach(ey)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=we(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!sc(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&(d||jt(this.latestValues)||g)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),iy(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:d}=this.options;if(!d)return we();const f=d.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(sy))){const{scroll:g}=this.root;g&&(rn(f.x,g.offset.x),rn(f.y,g.offset.y))}return f}removeElementScroll(u){var d;const f=we();if(qe(f,u),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return f;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:v,options:y}=g;g!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&qe(f,u),rn(f.x,v.offset.x),rn(f.y,v.offset.y))}return f}applyTransform(u,d=!1){const f=we();qe(f,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&sn(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),jt(g.latestValues)&&sn(f,g.latestValues)}return jt(this.latestValues)&&sn(f,this.latestValues),f}removeTransform(u){const d=we();qe(d,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!jt(p.latestValues))continue;ds(p.latestValues)&&p.updateSnapshot();const g=we(),v=p.measurePageBox();qe(g,v),eu(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return jt(this.latestValues)&&eu(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ee.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:y}=this.options;if(!(!this.layout||!(v||y))){if(this.resolvedRelativeTargetAt=Ee.timestamp,!this.targetDelta&&!this.relativeTarget){const C=this.getClosestProjectingParent();C&&C.layout&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),Nn(this.relativeTargetOrigin,this.layout.layoutBox,C.layout.layoutBox),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=we(),this.targetWithTransforms=we()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ug(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qe(this.target,this.layout.layoutBox),Zl(this.target,this.targetDelta)):qe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const C=this.getClosestProjectingParent();C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),Nn(this.relativeTargetOrigin,this.target,C.target),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}On&&_t.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ds(this.parent.latestValues)||Ql(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),f=!!this.resumingFrom||this!==d;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Ee.timestamp&&(p=!1),p)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;qe(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,C=this.treeScale.y;yg(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=we());const{target:L}=d;if(!L){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Jo(this.prevProjectionDelta.x,this.projectionDelta.x),Jo(this.prevProjectionDelta.y,this.projectionDelta.y)),Ln(this.projectionDelta,this.layoutCorrected,L,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==C||!su(this.projectionDelta.x,this.prevProjectionDelta.x)||!su(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",L)),On&&_t.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nn(),this.projectionDelta=nn(),this.projectionDeltaWithTransform=nn()}setAnimationOrigin(u,d=!1){const f=this.snapshot,p=f?f.latestValues:{},g={...this.latestValues},v=nn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const y=we(),C=f?f.source:void 0,L=this.layout?this.layout.source:void 0,N=C!==L,M=this.getStack(),B=!M||M.members.length<=1,j=!!(N&&!B&&this.options.crossfade===!0&&!this.path.some(ny));this.animationProgress=0;let $;this.mixTargetDelta=G=>{const U=G/1e3;lu(v.x,u.x,U),lu(v.y,u.y,U),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Nn(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ty(this.relativeTarget,this.relativeTargetOrigin,y,U),$&&Fg(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=we()),qe($,this.relativeTarget)),N&&(this.animationValues=g,_g(g,p,this.latestValues,U,j,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{Tr.hasAnimatedSinceResize=!0,this.currentAnimation=Dg(0,au,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(au),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:p,latestValues:g}=u;if(!(!d||!f||!p)){if(this!==u&&this.layout&&p&&lc(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||we();const v=Ke(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+v;const y=Ke(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+y}qe(d,f),sn(d,g),Ln(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new Bg),this.sharedNodes.get(u).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const p={};f.z&&zi("z",u,p,this.animationValues);for(let g=0;g<Ui.length;g++)zi(`rotate${Ui[g]}`,u,p,this.animationValues),zi(`skew${Ui[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}getProjectionStyles(u){var d,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $g;const p={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=kr(u==null?void 0:u.pointerEvents)||"",p.transform=g?g(this.latestValues,""):"none",p;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=kr(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!jt(this.latestValues)&&(N.transform=g?g({},""):"none",this.hasProjected=!1),N}const y=v.animationValues||v.latestValues;this.applyTransformsToTarget(),p.transform=Kg(this.projectionDeltaWithTransform,this.treeScale,y),g&&(p.transform=g(y,p.transform));const{x:C,y:L}=this.projectionDelta;p.transformOrigin=`${C.origin*100}% ${L.origin*100}% 0`,v.animationValues?p.opacity=v===this?(f=(d=y.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:p.opacity=v===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const N in Mr){if(y[N]===void 0)continue;const{correct:M,applyTo:B}=Mr[N],j=p.transform==="none"?y[N]:M(y[N],v);if(B){const $=B.length;for(let G=0;G<$;G++)p[B[G]]=j}else p[N]=j}return this.options.layoutId&&(p.pointerEvents=v===this?kr(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(ou),this.root.sharedNodes.clear()}}}function Ug(t){t.updateLayout()}function zg(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?Ue(v=>{const y=u?n.measuredBox[v]:n.layoutBox[v],C=Ke(y);y.min=r[v].min,y.max=y.min+C}):lc(o,n.layoutBox,r)&&Ue(v=>{const y=u?n.measuredBox[v]:n.layoutBox[v],C=Ke(r[v]);y.max=y.min+C,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+C)});const d=nn();Ln(d,r,n.layoutBox);const f=nn();u?Ln(f,t.applyTransform(s,!0),n.measuredBox):Ln(f,r,n.layoutBox);const p=!sc(d);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:C}=v;if(y&&C){const L=we();Nn(L,n.layoutBox,y.layoutBox);const N=we();Nn(N,r,C.layoutBox),ac(L,N)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=L,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:f,layoutDelta:d,hasLayoutChanged:p,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Wg(t){On&&_t.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Hg(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Gg(t){t.clearSnapshot()}function ou(t){t.clearMeasurements()}function Yg(t){t.isLayoutDirty=!1}function Xg(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uu(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Jg(t){t.resolveTargetDelta()}function Qg(t){t.calcProjection()}function Zg(t){t.resetSkewAndRotation()}function ey(t){t.removeLeadSnapshot()}function lu(t,e,n){t.translate=ye(e.translate,0,n),t.scale=ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function cu(t,e,n,r){t.min=ye(e.min,n.min,r),t.max=ye(e.max,n.max,r)}function ty(t,e,n,r){cu(t.x,e.x,n.x,r),cu(t.y,e.y,n.y,r)}function ny(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ry={duration:.45,ease:[.4,0,.1,1]},du=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),fu=du("applewebkit/")&&!du("chrome/")?Math.round:Be;function hu(t){t.min=fu(t.min),t.max=fu(t.max)}function iy(t){hu(t.x),hu(t.y)}function lc(t,e,n){return t==="position"||t==="preserve-aspect"&&!og(iu(e),iu(n),.2)}function sy(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const ay=uc({attachResizeListener:(t,e)=>$n(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wi={current:void 0},cc=uc({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wi.current){const t=new ay({});t.mount(window),t.setOptions({layoutScroll:!0}),Wi.current=t}return Wi.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oy={pan:{Feature:Ag},drag:{Feature:Sg,ProjectionNode:cc,MeasureLayout:nc}};function pu(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&me.postRender(()=>o(e,Hn(e)))}class uy extends bt{mount(){const{current:e}=this.node;e&&(this.unmount=op(e,n=>(pu(this.node,n,"Start"),r=>pu(this.node,r,"End"))))}unmount(){}}class ly extends bt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wn($n(this.node.current,"focus",()=>this.onFocus()),$n(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mu(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&me.postRender(()=>o(e,Hn(e)))}class cy extends bt{mount(){const{current:e}=this.node;e&&(this.unmount=dp(e,n=>(mu(this.node,n,"Start"),(r,{success:s})=>mu(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hs=new WeakMap,Hi=new WeakMap,dy=t=>{const e=hs.get(t.target);e&&e(t)},fy=t=>{t.forEach(dy)};function hy({root:t,...e}){const n=t||document;Hi.has(n)||Hi.set(n,{});const r=Hi.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(fy,{root:t,...e})),r[s]}function py(t,e,n){const r=hy(e);return hs.set(t,n),r.observe(t),()=>{hs.delete(t),r.unobserve(t)}}const my={some:0,all:1};class gy extends bt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:my[s]},d=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),y=p?g:v;y&&y(f)};return py(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(yy(e,n))&&this.startObserver()}unmount(){}}function yy({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const vy={inView:{Feature:gy},tap:{Feature:cy},focus:{Feature:ly},hover:{Feature:uy}},by={layout:{ProjectionNode:cc,MeasureLayout:nc}},ps={current:null},dc={current:!1};function xy(){if(dc.current=!0,!!bs)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ps.current=t.matches;t.addListener(e),e()}else ps.current=!1}const wy=[...Ml,Le,vt],Sy=t=>wy.find(Nl(t)),gu=new WeakMap;function Ay(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Ne(s))t.addValue(r,s);else if(Ne(o))t.addValue(r,Bn(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(r);t.addValue(r,Bn(u!==void 0?u:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const yu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Py{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ws,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const C=tt.now();this.renderScheduledAt<C&&(this.renderScheduledAt=C,me.render(this.render,!1,!0))};const{latestValues:f,renderState:p,onUpdate:g}=u;this.onUpdate=g,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=Hr(n),this.isVariantNode=Uu(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const C in y){const L=y[C];f[C]!==void 0&&Ne(L)&&L.set(f[C],!1)}}mount(e){this.current=e,gu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),dc.current||xy(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ps.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){gu.delete(this.current),this.projection&&this.projection.unmount(),yt(this.notifyUpdate),yt(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vt.has(e),s=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&me.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in un){const n=un[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):we()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<yu.length;r++){const s=yu[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=Ay(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bn(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(_l(s)||Pl(s))?s=parseFloat(s):!Sy(s)&&vt.test(n)&&(s=Ol(e,n)),this.setBaseTarget(e,Ne(s)?s.get():s)),Ne(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=ks(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ne(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Bs),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class fc extends Py{constructor(){super(...arguments),this.KeyframeResolver=Vl}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ne(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Cy(t){return window.getComputedStyle(t)}class ky extends fc{constructor(){super(...arguments),this.type="html",this.renderInstance=Zu}readValueFromInstance(e,n){if(Vt.has(n)){const r=zs(n);return r&&r.default||0}else{const r=Cy(e),s=(Xu(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ec(e,n)}build(e,n,r){Es(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return _s(e,n,r)}}class Dy extends fc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=we}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vt.has(n)){const r=zs(n);return r&&r.default||0}return n=el.has(n)?n:As(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return rl(e,n,r)}build(e,n,r){Os(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){tl(e,n,r,s)}mount(e){this.isSVGTag=js(e.tagName),super.mount(e)}}const Ty=(t,e)=>Cs(t)?new Dy(e):new ky(e,{allowProjection:t!==J.Fragment}),Ey=ep({...Qm,...vy,...oy,...by},Ty),ze=mh(Ey);function ms({card:t,isSelected:e=!1,onClick:n,onDragStart:r,draggable:s=!0}){const{i18n:o}=qn(),[u,d]=J.useState(!1),[f,p]=J.useState(!1),g=o.language==="he",v=g?t.title.he:t.title.en,y=g?t.description.he:t.description.en,C=()=>{switch(t.holder){case"partner-a":return"bg-partner-a";case"partner-b":return"bg-partner-b";default:return"bg-unassigned"}},L=()=>{switch(t.category){case"daily-grind":return"border-partner-a";case"kids":return"border-partner-b";case"home":return"border-concrete";case"magic":return"border-unassigned";case"wild":return"border-ink";default:return"border-concrete"}},N={initial:{opacity:0,y:20},animate:{opacity:1,y:0},hover:{y:-12,boxShadow:"0 12px 24px rgba(10, 9, 8, 0.15)"},selected:{boxShadow:"0 0 0 3px rgba(230, 57, 70, 0.5)"}};return V.jsx("div",{draggable:s,onDragStart:r,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:V.jsxs(ze.div,{className:`relative w-full h-64 cursor-grab active:cursor-grabbing ${s?"hover:shadow-brutal":""}`,variants:N,initial:"initial",animate:e?"selected":"animate",whileHover:s?"hover":{},onClick:()=>{s||d(!u),n==null||n()},children:[V.jsxs(ze.div,{className:"w-full h-full relative",animate:{rotateY:u?180:0},transition:{duration:.6,type:"spring",stiffness:100},style:{transformStyle:"preserve-3d"},children:[V.jsxs("div",{className:`absolute w-full h-full ${C()} border-4 ${L()} rounded-lg p-6 flex flex-col justify-between torn-paper grain`,style:{backfaceVisibility:"hidden"},children:[V.jsxs("div",{children:[V.jsx("div",{className:"text-xs font-display font-bold text-paper mb-2 opacity-80 uppercase tracking-wider",children:t.category}),V.jsx("h3",{className:`font-display text-xl font-bold text-paper mb-3 ${g?"text-right":"text-left"}`,children:v}),V.jsx("p",{className:`text-sm font-body text-paper/90 line-clamp-3 ${g?"text-right":"text-left"}`,children:y})]}),V.jsxs("div",{className:"flex justify-between items-center text-xs text-paper/70 mt-4",children:[V.jsxs("div",{className:"flex gap-2",children:[t.metadata.difficulty>0&&V.jsx("span",{className:"font-bold",children:"⚡".repeat(t.metadata.difficulty)}),V.jsxs("span",{className:"opacity-75",children:[t.metadata.timeEstimate,"m"]})]}),f&&s&&V.jsx("span",{className:"text-paper/50 text-xs italic",children:"drag"})]})]}),V.jsxs("div",{className:"absolute w-full h-full bg-paper border-4 border-ink rounded-lg p-6 flex flex-col justify-between torn-paper grain",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[V.jsxs("div",{children:[V.jsx("h4",{className:"font-display text-sm font-bold text-ink mb-3 uppercase",children:"Details"}),V.jsx("p",{className:`text-sm font-body text-ink/80 ${g?"text-right":"text-left"}`,children:g?t.details.he:t.details.en})]}),V.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[V.jsx("span",{className:"text-xs px-2 py-1 bg-unassigned text-ink rounded font-bold",children:t.status}),t.metadata.isCustom&&V.jsx("span",{className:"text-xs px-2 py-1 bg-concrete/20 text-ink rounded",children:"Custom"})]})]})]}),e&&V.jsx("div",{className:"absolute -inset-2 border-3 border-partner-a rounded-lg pointer-events-none animate-pulse"})]})})}function Oy({partner:t,cards:e,onCardDrop:n,isActive:r=!0,totalTime:s=0}){const[o,u]=J.useState(!1),d=y=>{y.preventDefault(),u(!0)},f=()=>{u(!1)},p=y=>{y.preventDefault(),u(!1);const C=y.dataTransfer.getData("cardId");n==null||n(C)},g=t.id==="partner-a"?"bg-partner-a":"bg-partner-b",v=t.id==="partner-a"?"border-partner-a":"border-partner-b";return V.jsxs(ze.div,{className:`flex-1 rounded-lg border-3 ${v} p-6 transition-all ${o?"ring-2 ring-offset-2 ring-ink shadow-brutal":"shadow-brutal-sm"} ${r?"opacity-100":"opacity-70"}`,onDragOver:d,onDragLeave:f,onDrop:p,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[V.jsxs("div",{className:"mb-6 pb-4 border-b-2 border-ink",children:[V.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[V.jsx("div",{className:`w-12 h-12 ${g} rounded-full flex items-center justify-center text-paper font-display font-bold text-lg shadow-brutal-sm`,children:t.name.charAt(0).toUpperCase()}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-display text-lg font-bold text-ink",children:t.name}),V.jsxs("p",{className:"text-xs font-body text-concrete",children:[e.length," card",e.length!==1?"s":""]})]})]}),s>0&&V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"text-xs font-bold font-display text-concrete",children:"Time Commitment:"}),V.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${g} text-paper`,children:[s," minutes/week"]})]})]}),V.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 min-h-64 p-4 rounded ${o?"bg-unassigned/10 border-2 border-dashed border-ink":"bg-paper/50"} transition-colors`,children:e.length>0?e.map((y,C)=>V.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.05},children:V.jsx(ms,{card:y,draggable:!0})},y.id)):V.jsx(ze.div,{className:"col-span-full flex items-center justify-center h-48 text-center",initial:{opacity:0},animate:{opacity:1},children:V.jsxs("div",{children:[V.jsx("p",{className:"text-sm font-display font-bold text-concrete mb-2",children:"Drop cards here"}),V.jsx("p",{className:"text-xs font-body text-concrete/70",children:"or drag from the card gallery"})]})})}),V.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-ink/20 flex gap-4 justify-between text-xs font-body",children:[V.jsxs("div",{children:[V.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Difficulty"}),V.jsxs("span",{className:"text-ink font-bold",children:[e.reduce((y,C)=>y+C.metadata.difficulty,0),"/",e.length*3]})]}),V.jsxs("div",{children:[V.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Completed"}),V.jsxs("span",{className:"text-ink font-bold",children:[e.filter(y=>y.status==="paused").length,"/",e.length]})]}),V.jsxs("div",{children:[V.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Status"}),V.jsx("span",{className:`${g} text-paper px-2 py-1 rounded font-bold`,children:r?"Active":"Paused"})]})]})]})}function Ry({onDeal:t}){const{t:e}=qn(),n=_r(j=>j.getCards()),{currentDealMode:r,setCurrentDealMode:s}=Jf(),[o,u]=J.useState([]),[d,f]=J.useState([]),[p,g]=J.useState([]),[v,y]=J.useState("deal"),[C]=J.useState([{id:"partner-a",name:e("partners.partnerA"),avatar:{type:"avatar-builder",data:"A"},preferences:{favoriteCards:[],avoidCards:[],strongSuits:["home"],availability:{}},stats:{currentCards:0,totalTimeCommitment:0,streaks:[],achievements:[]},theme:{color:"#E63946",pattern:{type:"solid",color:"#E63946"},icon:"A"}},{id:"partner-b",name:e("partners.partnerB"),avatar:{type:"avatar-builder",data:"B"},preferences:{favoriteCards:[],avoidCards:[],strongSuits:["kids"],availability:{}},stats:{currentCards:0,totalTimeCommitment:0,streaks:[],achievements:[]},theme:{color:"#06AED5",pattern:{type:"solid",color:"#06AED5"},icon:"B"}}]);J.useEffect(()=>{const j=n.filter(U=>!U.holder||U.holder===null),$=n.filter(U=>U.holder==="partner-a"),G=n.filter(U=>U.holder==="partner-b");u(j),f($),g(G)},[n]);const L=["random","weighted","draft","auction","quick"],N=j=>{s(j),t==null||t(j)},M=(j,$)=>{n.find(U=>U.id===j)&&_r.setState(U=>({cards:U.cards.map(Z=>Z.id===j?{...Z,holder:$}:Z)}))},B=j=>j.reduce(($,G)=>$+G.metadata.timeEstimate,0);return V.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 py-8",children:[V.jsxs("div",{className:"mb-8",children:[V.jsx("h2",{className:"text-display-md font-display font-bold text-ink mb-4",children:e("navigation.gameBoard")}),V.jsx("div",{className:"flex gap-3 flex-wrap mb-6",children:L.map(j=>V.jsx(ze.button,{onClick:()=>N(j),className:`px-4 py-2 rounded-lg font-display font-bold transition-all ${r===j?"bg-partner-a text-paper shadow-brutal":"bg-concrete/20 text-ink hover:bg-concrete/30"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e(`game.dealModes.${j}`)},j))}),V.jsx("div",{className:"flex gap-2 border-b-2 border-ink",children:["deal","gallery"].map(j=>V.jsx("button",{onClick:()=>y(j),className:`px-4 py-2 font-display font-bold transition-colors ${v===j?"text-partner-a border-b-2 border-partner-a":"text-concrete hover:text-ink"}`,children:j==="deal"?"Deal":"Gallery"},j))})]}),v==="deal"?V.jsxs("div",{className:"space-y-8",children:[V.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:C.map(j=>V.jsx(Oy,{partner:j,cards:j.id==="partner-a"?d:p,onCardDrop:$=>M($,j.id),isActive:!0,totalTime:B(j.id==="partner-a"?d:p)},j.id))}),V.jsxs(ze.div,{className:"bg-unassigned/10 border-3 border-unassigned rounded-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[V.jsxs("h3",{className:"font-display text-lg font-bold text-ink mb-4",children:[e("cards.unassigned")," (",o.length,")"]}),o.length>0?V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((j,$)=>V.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:$*.05},children:V.jsx(ms,{card:j,draggable:!0})},j.id))}):V.jsxs(ze.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[V.jsx("p",{className:"text-lg font-display font-bold text-concrete mb-2",children:"All cards assigned!"}),V.jsx("p",{className:"text-sm font-body text-concrete/70",children:"Great job distributing the workload."})]})]})]}):V.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map((j,$)=>V.jsx(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:$*.05},children:V.jsx(ms,{card:j,draggable:!0,onDragStart:G=>{G.dataTransfer.setData("cardId",j.id)}})},j.id)):V.jsx("div",{className:"col-span-full text-center py-20",children:V.jsx("p",{className:"text-lg font-display font-bold text-concrete mb-2",children:e("cards.noCards")})})}),V.jsxs(ze.div,{className:"mt-8 pt-6 border-t-2 border-ink grid grid-cols-3 gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[V.jsxs("div",{className:"text-center p-4 bg-partner-a/10 rounded-lg",children:[V.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Partner A"}),V.jsx("p",{className:"text-2xl font-display font-bold text-partner-a",children:d.length}),V.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[B(d),"m/week"]})]}),V.jsxs("div",{className:"text-center p-4 bg-unassigned/10 rounded-lg",children:[V.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Unassigned"}),V.jsx("p",{className:"text-2xl font-display font-bold text-unassigned",children:o.length}),V.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[B(o),"m"]})]}),V.jsxs("div",{className:"text-center p-4 bg-partner-b/10 rounded-lg",children:[V.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Partner B"}),V.jsx("p",{className:"text-2xl font-display font-bold text-partner-b",children:p.length}),V.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[B(p),"m/week"]})]})]})]})}function jy(){const{t}=qn(),e=_r(s=>s.getCards()),[n,r]=J.useState(!1);return J.useEffect(()=>{r(e.length>0)},[e]),n?V.jsx(Ry,{}):V.jsx("div",{className:"relative z-10 min-h-full flex items-center",children:V.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full",children:V.jsxs("div",{className:"text-center py-20",children:[V.jsx("h2",{className:"text-display-lg font-display font-bold text-ink mb-6",children:"Welcome to Fair Play Deck"}),V.jsx("p",{className:"text-lg font-body text-concrete mb-8 max-w-2xl mx-auto",children:t("common.appDescription")}),V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12 mb-12",children:[{title:"Deal Cards",description:"Distribute household tasks fairly",icon:"🎴"},{title:"Negotiate",description:"Swap and adjust assignments",icon:"🤝"},{title:"Track Time",description:"Monitor workload balance",icon:"⏱️"}].map((s,o)=>V.jsxs("div",{className:"bg-paper border-3 border-ink p-8 rounded-lg brutalist-border hover:shadow-brutal transition-all stagger-{i+1}",children:[V.jsx("div",{className:"text-4xl mb-4",children:s.icon}),V.jsx("h3",{className:"font-display text-lg font-bold text-ink mb-2",children:s.title}),V.jsx("p",{className:"text-sm font-body text-concrete",children:s.description})]},o))}),V.jsx("p",{className:"text-sm font-body text-concrete/70 mb-6",children:"The app is ready to use! Navigate to the Game Board tab to start."}),V.jsx("button",{className:"px-8 py-3 bg-partner-a text-paper font-display font-bold rounded-lg hover:shadow-brutal transition-all animate-pulse",children:"Get Started"})]})})})}function _y(){const{i18n:t}=qn(),{language:e,theme:n,animations:r}=Mu();return J.useEffect(()=>{th().catch(console.error);const s=_r.getState();s.getCards().length>0||s.bulkAddCards(nh)},[]),J.useEffect(()=>{t.language!==e&&t.changeLanguage(e);const s=document.documentElement;s.setAttribute("dir",e==="he"?"rtl":"ltr"),s.setAttribute("lang",e)},[e,t]),J.useEffect(()=>{const s=document.documentElement;if(n==="auto"){const o=window.matchMedia("(prefers-color-scheme: dark)").matches;s.classList.toggle("dark",o)}else s.classList.toggle("dark",n==="dark")},[n]),J.useEffect(()=>{r?document.documentElement.style.removeProperty("--animation-duration"):document.documentElement.style.setProperty("--animation-duration","0ms")},[r]),V.jsxs("div",{className:"min-h-screen bg-paper text-ink overflow-x-hidden",children:[V.jsx(ih,{}),V.jsxs("div",{className:"flex flex-col h-screen",children:[V.jsx(rh,{}),V.jsx("main",{className:"flex-1 overflow-y-auto",children:V.jsx(jy,{})})]})]})}Gi.createRoot(document.getElementById("root")).render(V.jsx(bu.StrictMode,{children:V.jsx(gd,{i18n:Oe,children:V.jsx(_y,{})})}));
//# sourceMappingURL=index-YqaQ8KyZ.js.map
