var Xc=Object.defineProperty;var Jc=(t,e,n)=>e in t?Xc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Yt=(t,e,n)=>Jc(t,typeof e!="symbol"?e+"":e,n);import{r as K,a as Qc,g as Al,R as Cl,c as Va}from"./vendor-KfUPlHYY.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var kl={exports:{}},qr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=K,ed=Symbol.for("react.element"),td=Symbol.for("react.fragment"),nd=Object.prototype.hasOwnProperty,rd=Zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,id={key:!0,ref:!0,__self:!0,__source:!0};function Pl(t,e,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)nd.call(e,r)&&!id.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ed,type:t,key:o,ref:l,props:s,_owner:rd.current}}qr.Fragment=td;qr.jsx=Pl;qr.jsxs=Pl;kl.exports=qr;var P=kl.exports,Xi={},Ia=Qc;Xi.createRoot=Ia.createRoot,Xi.hydrateRoot=Ia.hydrateRoot;function sd(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Lt(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Fa={};function Ji(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Lt(e[0])&&Fa[e[0]]||(Lt(e[0])&&(Fa[e[0]]=new Date),sd(...e))}const Dl=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Ba=(t,e,n)=>{t.loadNamespaces(e,Dl(t,n))},Ka=(t,e,n,r)=>{Lt(n)&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,Dl(t,r))},ad=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(c,f)=>{const h=e.services.backendConnector.state[`${c}|${f}`];return h===-1||h===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!l(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||l(r,t)&&(!s||l(o,t)))},od=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Ji("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,t))return!1}}):ad(t,e,n)},Lt=t=>typeof t=="string",ld=t=>typeof t=="object"&&t!==null,ud=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,cd={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},dd=t=>cd[t],fd=t=>t.replace(ud,dd);let Qi={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:fd};const hd=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Qi={...Qi,...t}},pd=()=>Qi;let El;const md=t=>{El=t},gd=()=>El,yd={type:"3rdParty",init(t){hd(t.options.react),md(t)}},Tl=K.createContext();class vd{constructor(){Yt(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}const bd=(t,e)=>{const n=K.useRef();return K.useEffect(()=>{n.current=t},[t,e]),n.current},jl=(t,e,n,r)=>t.getFixedT(e,n,r),xd=(t,e,n,r)=>K.useCallback(jl(t,e,n,r),[t,e,n,r]),Un=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=K.useContext(Tl)||{},o=n||r||gd();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new vd),!o){Ji("You will need to pass in an i18next instance by using initReactI18next");const H=(Q,ee)=>Lt(ee)?ee:ld(ee)&&Lt(ee.defaultValue)?ee.defaultValue:Array.isArray(Q)?Q[Q.length-1]:Q,q=[H,{},!1];return q.t=H,q.i18n={},q.ready=!1,q}o.options.react&&o.options.react.wait!==void 0&&Ji("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...pd(),...o.options.react,...e},{useSuspense:c,keyPrefix:f}=l;let h=s||o.options&&o.options.defaultNS;h=Lt(h)?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);const g=(o.isInitialized||o.initializedStoreOnce)&&h.every(H=>od(H,o,l)),v=xd(o,e.lng||null,l.nsMode==="fallback"?h:h[0],f),y=()=>v,A=()=>jl(o,e.lng||null,l.nsMode==="fallback"?h:h[0],f),[_,L]=K.useState(y);let T=h.join();e.lng&&(T=`${e.lng}${T}`);const F=bd(T),I=K.useRef(!0);K.useEffect(()=>{const{bindI18n:H,bindI18nStore:q}=l;I.current=!0,!g&&!c&&(e.lng?Ka(o,e.lng,h,()=>{I.current&&L(A)}):Ba(o,h,()=>{I.current&&L(A)})),g&&F&&F!==T&&I.current&&L(A);const Q=()=>{I.current&&L(A)};return H&&o&&o.on(H,Q),q&&o&&o.store.on(q,Q),()=>{I.current=!1,H&&o&&H.split(" ").forEach(ee=>o.off(ee,Q)),q&&o&&q.split(" ").forEach(ee=>o.store.off(ee,Q))}},[o,T]),K.useEffect(()=>{I.current&&g&&L(y)},[o,f,g]);const W=[_,o,g];if(W.t=_,W.i18n=o,W.ready=g,g||!g&&!c)return W;throw new Promise(H=>{e.lng?Ka(o,e.lng,h,()=>H()):Ba(o,h,()=>H())})};function wd(t){let{i18n:e,defaultNS:n,children:r}=t;const s=K.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return K.createElement(Tl.Provider,{value:s},r)}const ae=t=>typeof t=="string",Pn=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},$a=t=>t==null?"":""+t,Sd=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},Ad=/###/g,qa=t=>t&&t.indexOf("###")>-1?t.replace(Ad,"."):t,Ua=t=>!t||ae(t),On=(t,e,n)=>{const r=ae(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Ua(t))return{};const o=qa(r[s]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++s}return Ua(t)?{}:{obj:t,k:qa(r[s])}},Ha=(t,e,n)=>{const{obj:r,k:s}=On(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let o=e[e.length-1],l=e.slice(0,e.length-1),c=On(t,l,Object);for(;c.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),c=On(t,l,Object),c&&c.obj&&typeof c.obj[`${c.k}.${o}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${o}`]=n},Cd=(t,e,n,r)=>{const{obj:s,k:o}=On(t,e,Object);s[o]=s[o]||[],s[o].push(n)},Or=(t,e)=>{const{obj:n,k:r}=On(t,e);if(n)return n[r]},kd=(t,e,n)=>{const r=Or(t,n);return r!==void 0?r:Or(e,n)},Ol=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ae(t[r])||t[r]instanceof String||ae(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):Ol(t[r],e[r],n):t[r]=e[r]);return t},Xt=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Pd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Dd=t=>ae(t)?t.replace(/[&<>"'\/]/g,e=>Pd[e]):t;class Ed{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Td=[" ",",","?","!",";"],jd=new Ed(20),Od=(t,e,n)=>{e=e||"",n=n||"";const r=Td.filter(l=>e.indexOf(l)<0&&n.indexOf(l)<0);if(r.length===0)return!0;const s=jd.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!s.test(t);if(!o){const l=t.indexOf(n);l>0&&!s.test(t.substring(0,l))&&(o=!0)}return o},Zi=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let o=0;o<r.length;){if(!s||typeof s!="object")return;let l,c="";for(let f=o;f<r.length;++f)if(f!==o&&(c+=n),c+=r[f],l=s[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&f<r.length-1)continue;o+=f-o+1;break}s=l}return s},Rr=t=>t&&t.replace("_","-"),Rd={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Nr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Rd,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(ae(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Nr(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Nr(this.logger,e)}}var et=new Nr;class Ur{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(l=>{let[c,f]=l;for(let h=0;h<f;h++)c(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[c,f]=l;for(let h=0;h<f;h++)c.apply(c,[e,...r])})}}class za extends Ur{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],r&&(Array.isArray(r)?c.push(...r):ae(r)&&o?c.push(...r.split(o)):c.push(r)));const f=Or(this.data,c);return!f&&!n&&!r&&e.indexOf(".")>-1&&(e=c[0],n=c[1],r=c.slice(2).join(".")),f||!l||!ae(r)?f:Zi(this.data&&this.data[e]&&this.data[e][n],r,o)}addResource(e,n,r,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let c=[e,n];r&&(c=c.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(c=e.split("."),s=n,n=c[1]),this.addNamespaces(n),Ha(this.data,c,s),o.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(ae(r[o])||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,o){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),s=r,r=n,n=c[1]),this.addNamespaces(n);let f=Or(this.data,c)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?Ol(f,r,o):f={...f,...r},Ha(this.data,c,f),l.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var Rl={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,n,r,s))}),e}};const Wa={};class _r extends Ur{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Sd(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=et.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Od(e,r,s);if(l&&!c){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:ae(o)?[o]:o};const h=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),e=h.join(s)}return{key:e,namespaces:ae(o)?[o]:o}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],n),f=c[c.length-1],h=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&h.toLowerCase()==="cimode"){if(g){const H=n.nsSeparator||this.options.nsSeparator;return s?{res:`${f}${H}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:`${f}${H}${l}`}return s?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:l}const v=this.resolve(e,n);let y=v&&v.res;const A=v&&v.usedKey||l,_=v&&v.exactUsedKey||l,L=Object.prototype.toString.apply(y),T=["[object Number]","[object Function]","[object RegExp]"],F=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,I=!this.i18nFormat||this.i18nFormat.handleAsObject,W=!ae(y)&&typeof y!="boolean"&&typeof y!="number";if(I&&y&&W&&T.indexOf(L)<0&&!(ae(F)&&Array.isArray(y))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const H=this.options.returnedObjectHandler?this.options.returnedObjectHandler(A,y,{...n,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return s?(v.res=H,v.usedParams=this.getUsedParamsDetails(n),v):H}if(o){const H=Array.isArray(y),q=H?[]:{},Q=H?_:A;for(const ee in y)if(Object.prototype.hasOwnProperty.call(y,ee)){const ie=`${Q}${o}${ee}`;q[ee]=this.translate(ie,{...n,joinArrays:!1,ns:c}),q[ee]===ie&&(q[ee]=y[ee])}y=q}}else if(I&&ae(F)&&Array.isArray(y))y=y.join(F),y&&(y=this.extendTranslation(y,e,n,r));else{let H=!1,q=!1;const Q=n.count!==void 0&&!ae(n.count),ee=_r.hasDefaultValue(n),ie=Q?this.pluralResolver.getSuffix(h,n.count,n):"",te=n.ordinal&&Q?this.pluralResolver.getSuffix(h,n.count,{ordinal:!1}):"",pe=Q&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),xe=pe&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${ie}`]||n[`defaultValue${te}`]||n.defaultValue;!this.isValidLookup(y)&&ee&&(H=!0,y=xe),this.isValidLookup(y)||(q=!0,y=l);const Ie=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&q?void 0:y,Ye=ee&&xe!==y&&this.options.updateMissing;if(q||H||Ye){if(this.logger.log(Ye?"updateKey":"missingKey",h,f,l,Ye?xe:y),o){const he=this.resolve(l,{...n,keySeparator:!1});he&&he.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Xe=[];const rt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&rt&&rt[0])for(let he=0;he<rt.length;he++)Xe.push(rt[he]);else this.options.saveMissingTo==="all"?Xe=this.languageUtils.toResolveHierarchy(n.lng||this.language):Xe.push(n.lng||this.language);const Pe=(he,Ee,De)=>{const It=ee&&De!==y?De:Ie;this.options.missingKeyHandler?this.options.missingKeyHandler(he,f,Ee,It,Ye,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(he,f,Ee,It,Ye,n),this.emit("missingKey",he,f,Ee,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Q?Xe.forEach(he=>{const Ee=this.pluralResolver.getSuffixes(he,n);pe&&n[`defaultValue${this.options.pluralSeparator}zero`]&&Ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ee.push(`${this.options.pluralSeparator}zero`),Ee.forEach(De=>{Pe([he],l+De,n[`defaultValue${De}`]||xe)})}):Pe(Xe,l,xe))}y=this.extendTranslation(y,e,n,v,r),q&&y===l&&this.options.appendNamespaceToMissingKey&&(y=`${f}:${l}`),(q||H)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}:${l}`:l,H?y:void 0):y=this.options.parseMissingKeyHandler(y))}return s?(v.res=y,v.usedParams=this.getUsedParamsDetails(n),v):y}extendTranslation(e,n,r,s,o){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=ae(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(h){const y=e.match(this.interpolator.nestingRegexp);g=y&&y.length}let v=r.replace&&!ae(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||s.usedLng,r),h){const y=e.match(this.interpolator.nestingRegexp),A=y&&y.length;g<A&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,A=new Array(y),_=0;_<y;_++)A[_]=arguments[_];return o&&o[0]===A[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${A[0]} in key: ${n[0]}`),null):l.translate(...A,n)},r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,f=ae(c)?[c]:c;return e!=null&&f&&f.length&&r.applyPostProcessor!==!1&&(e=Rl.handle(f,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,o,l,c;return ae(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(f,n),g=h.key;s=g;let v=h.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const y=n.count!==void 0&&!ae(n.count),A=y&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),_=n.context!==void 0&&(ae(n.context)||typeof n.context=="number")&&n.context!=="",L=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);v.forEach(T=>{this.isValidLookup(r)||(c=T,!Wa[`${L[0]}-${T}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(c)&&(Wa[`${L[0]}-${T}`]=!0,this.logger.warn(`key "${s}" for languages "${L.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),L.forEach(F=>{if(this.isValidLookup(r))return;l=F;const I=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(I,g,F,T,n);else{let H;y&&(H=this.pluralResolver.getSuffix(F,n.count,n));const q=`${this.options.pluralSeparator}zero`,Q=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(I.push(g+H),n.ordinal&&H.indexOf(Q)===0&&I.push(g+H.replace(Q,this.options.pluralSeparator)),A&&I.push(g+q)),_){const ee=`${g}${this.options.contextSeparator}${n.context}`;I.push(ee),y&&(I.push(ee+H),n.ordinal&&H.indexOf(Q)===0&&I.push(ee+H.replace(Q,this.options.pluralSeparator)),A&&I.push(ee+q))}}let W;for(;W=I.pop();)this.isValidLookup(r)||(o=W,r=this.getResource(F,T,W,n))}))})}),{res:r,usedKey:s,exactUsedKey:o,usedLng:l,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ae(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const o of n)delete s[o]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const _i=t=>t.charAt(0).toUpperCase()+t.slice(1);class Ga{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=et.create("languageUtils")}getScriptPartFromCode(e){if(e=Rr(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Rr(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ae(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=_i(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=_i(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=_i(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ae(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],o=l=>{l&&(this.isSupportedCode(l)?s.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ae(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):ae(e)&&o(this.formatLanguageCode(e)),r.forEach(l=>{s.indexOf(l)<0&&o(this.formatLanguageCode(l))}),s}}let Nd=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_d={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Ld=["v1","v2","v3"],Md=["v4"],Ya={zero:0,one:1,two:2,few:3,many:4,other:5},Vd=()=>{const t={};return Nd.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:_d[e.fc]}})}),t};class Id{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=et.create("pluralResolver"),(!this.options.compatibilityJSON||Md.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Vd(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Rr(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let l;try{l=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const f=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(f,n)}return this.pluralRulesCache[o]=l,l}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,o)=>Ya[s]-Ya[o]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const o=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Ld.includes(this.options.compatibilityJSON)}}const Xa=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=kd(t,e,n);return!o&&s&&ae(n)&&(o=Zi(t,n,r),o===void 0&&(o=Zi(e,n,r))),o},Li=t=>t.replace(/\$/g,"$$$$");class Fd{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=et.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:o,prefixEscaped:l,suffix:c,suffixEscaped:f,formatSeparator:h,unescapeSuffix:g,unescapePrefix:v,nestingPrefix:y,nestingPrefixEscaped:A,nestingSuffix:_,nestingSuffixEscaped:L,nestingOptionsSeparator:T,maxReplaces:F,alwaysFormat:I}=e.interpolation;this.escape=n!==void 0?n:Dd,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Xt(o):l||"{{",this.suffix=c?Xt(c):f||"}}",this.formatSeparator=h||",",this.unescapePrefix=g?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=y?Xt(y):A||Xt("$t("),this.nestingSuffix=_?Xt(_):L||Xt(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=F||1e3,this.alwaysFormat=I!==void 0?I:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let o,l,c;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=A=>{if(A.indexOf(this.formatSeparator)<0){const F=Xa(n,f,A,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(F,void 0,r,{...s,...n,interpolationkey:A}):F}const _=A.split(this.formatSeparator),L=_.shift().trim(),T=_.join(this.formatSeparator).trim();return this.format(Xa(n,f,L,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...s,...n,interpolationkey:L})};this.resetRegExp();const g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,v=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:A=>Li(A)},{regex:this.regexp,safeValue:A=>this.escapeValue?Li(this.escape(A)):Li(A)}].forEach(A=>{for(c=0;o=A.regex.exec(e);){const _=o[1].trim();if(l=h(_),l===void 0)if(typeof g=="function"){const T=g(e,o,s);l=ae(T)?T:""}else if(s&&Object.prototype.hasOwnProperty.call(s,_))l="";else if(v){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${e}`),l="";else!ae(l)&&!this.useRawValueToEscape&&(l=$a(l));const L=A.safeValue(l);if(e=e.replace(o[0],L),v?(A.regex.lastIndex+=l.length,A.regex.lastIndex-=o[0].length):A.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,l;const c=(f,h)=>{const g=this.nestingOptionsSeparator;if(f.indexOf(g)<0)return f;const v=f.split(new RegExp(`${g}[ ]*{`));let y=`{${v[1]}`;f=v[0],y=this.interpolate(y,l);const A=y.match(/'/g),_=y.match(/"/g);(A&&A.length%2===0&&!_||_.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),h&&(l={...h,...l})}catch(L){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,L),`${f}${g}${y}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,f};for(;s=this.nestingRegexp.exec(e);){let f=[];l={...r},l=l.replace&&!ae(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let h=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const g=s[1].split(this.formatSeparator).map(v=>v.trim());s[1]=g.shift(),f=g,h=!0}if(o=n(c.call(this,s[1].trim(),l),l),o&&s[0]===e&&!ae(o))return o;ae(o)||(o=$a(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),h&&(o=f.reduce((g,v)=>this.format(g,v,r.lng,{...r,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const Bd=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(l=>{if(l){const[c,...f]=l.split(":"),h=f.join(":").trim().replace(/^'+|'+$/g,""),g=c.trim();n[g]||(n[g]=h),h==="false"&&(n[g]=!1),h==="true"&&(n[g]=!0),isNaN(h)||(n[g]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},Jt=t=>{const e={};return(n,r,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const l=r+JSON.stringify(o);let c=e[l];return c||(c=t(Rr(r),s),e[l]=c),c(n)}};class Kd{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=et.create("formatter"),this.options=e,this.formats={number:Jt((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return o=>s.format(o)}),currency:Jt((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return o=>s.format(o)}),datetime:Jt((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return o=>s.format(o)}),relativetime:Jt((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return o=>s.format(o,r.range||"day")}),list:Jt((n,r)=>{const s=new Intl.ListFormat(n,{...r});return o=>s.format(o)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Jt(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(c=>c.indexOf(")")>-1)){const c=o.findIndex(f=>f.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,c)].join(this.formatSeparator)}return o.reduce((c,f)=>{const{formatName:h,formatOptions:g}=Bd(f);if(this.formats[h]){let v=c;try{const y=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},A=y.locale||y.lng||s.locale||s.lng||r;v=this.formats[h](c,A,{...g,...s,...y})}catch(y){this.logger.warn(y)}return v}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const $d=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class qd extends Ur{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=et.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const o={},l={},c={},f={};return e.forEach(h=>{let g=!0;n.forEach(v=>{const y=`${h}|${v}`;!r.reload&&this.store.hasResourceBundle(h,v)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?l[y]===void 0&&(l[y]=!0):(this.state[y]=1,g=!1,l[y]===void 0&&(l[y]=!0),o[y]===void 0&&(o[y]=!0),f[v]===void 0&&(f[v]=!0)))}),g||(c[h]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(f)}}loaded(e,n,r){const s=e.split("|"),o=s[0],l=s[1];n&&this.emit("failedLoading",o,l,n),!n&&r&&this.store.addResourceBundle(o,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const c={};this.queue.forEach(f=>{Cd(f.loaded,[o],l),$d(f,e),n&&f.errors.push(n),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(h=>{c[h]||(c[h]={});const g=f.loaded[h];g.length&&g.forEach(v=>{c[h][v]===void 0&&(c[h][v]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(f=>!f.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:o,callback:l});return}this.readingCalls++;const c=(h,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(h&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,o*2,l)},o);return}l(h,g)},f=this.backend[r].bind(this.backend);if(f.length===2){try{const h=f(e,n);h&&typeof h.then=="function"?h.then(g=>c(null,g)).catch(c):c(null,h)}catch(h){c(h)}return}return f(e,n,c)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ae(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ae(n)&&(n=[n]);const o=this.queueLoad(e,n,r,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],o=r[1];this.read(s,o,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${n}loading namespace ${o} for language ${s} failed`,l),!l&&c&&this.logger.log(`${n}loaded namespace ${o} for language ${s}`,c),this.loaded(e,l,c)})}saveMissing(e,n,r,s,o){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const f={...l,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let g;h.length===5?g=h(e,n,r,s,f):g=h(e,n,r,s),g&&typeof g.then=="function"?g.then(v=>c(null,v)).catch(c):c(null,g)}catch(g){c(g)}else h(e,n,r,s,c,f)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const Ja=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ae(t[1])&&(e.defaultValue=t[1]),ae(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Qa=t=>(ae(t.ns)&&(t.ns=[t.ns]),ae(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ae(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Ar=()=>{},Ud=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Mn extends Ur{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Qa(e),this.services={},this.logger=et,this.modules={external:[]},Ud(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ae(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=Ja();this.options={...s,...this.options,...Qa(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const o=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?et.init(o(this.modules.logger),this.options):et.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=Kd);const v=new Ga(this.options);this.store=new za(this.options.resources,this.options);const y=this.services;y.logger=et,y.resourceStore=this.store,y.languageUtils=v,y.pluralResolver=new Id(v,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(y.formatter=o(g),y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Fd(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new qd(o(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",function(A){for(var _=arguments.length,L=new Array(_>1?_-1:0),T=1;T<_;T++)L[T-1]=arguments[T];e.emit(A,...L)}),this.modules.languageDetector&&(y.languageDetector=o(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=o(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new _r(this.services,this.options),this.translator.on("*",function(A){for(var _=arguments.length,L=new Array(_>1?_-1:0),T=1;T<_;T++)L[T-1]=arguments[T];e.emit(A,...L)}),this.modules.external.forEach(A=>{A.init&&A.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ar),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return e.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return e.store[g](...arguments),e}});const f=Pn(),h=()=>{const g=(v,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(y),r(v,y)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?h():setTimeout(h,0),f}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ar;const s=ae(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>l(f)),this.options.preload&&this.options.preload.forEach(c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(e,n,r){const s=Pn();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Ar),this.services.backendConnector.reload(e,n,o=>{s.resolve(),r(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Rl.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=Pn();this.emit("languageChanging",e);const o=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},l=(f,h)=>{h?(o(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(f,function(){return r.t(...arguments)})},c=f=>{!e&&!f&&this.services.languageDetector&&(f=[]);const h=ae(f)?f:this.services.languageUtils.getBestMatchFromCodes(f);h&&(this.language||o(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(h)),this.loadResources(h,g=>{l(g,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),s}getFixedT(e,n,r){var s=this;const o=function(l,c){let f;if(typeof c!="object"){for(var h=arguments.length,g=new Array(h>2?h-2:0),v=2;v<h;v++)g[v-2]=arguments[v];f=s.options.overloadTranslationOptionHandler([l,c].concat(g))}else f={...c};f.lng=f.lng||o.lng,f.lngs=f.lngs||o.lngs,f.ns=f.ns||o.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||r||o.keyPrefix);const y=s.options.keySeparator||".";let A;return f.keyPrefix&&Array.isArray(l)?A=l.map(_=>`${f.keyPrefix}${y}${_}`):A=f.keyPrefix?`${f.keyPrefix}${y}${l}`:l,s.t(A,f)};return ae(e)?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(c,f)=>{const h=this.services.backendConnector.state[`${c}|${f}`];return h===-1||h===0||h===2};if(n.precheck){const c=n.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!s||l(o,e)))}loadNamespaces(e,n){const r=Pn();return this.options.ns?(ae(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Pn();ae(e)&&(e=[e]);const s=this.options.preload||[],o=e.filter(l=>s.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=s.concat(o),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new Ga(Ja());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Mn(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ar;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Mn(s);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(c=>{o[c]=this[c]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new za(this.store.data,s),o.services.resourceStore=o.store),o.translator=new _r(o.services,s),o.translator.on("*",function(c){for(var f=arguments.length,h=new Array(f>1?f-1:0),g=1;g<f;g++)h[g-1]=arguments[g];o.emit(c,...h)}),o.init(s,n),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Re=Mn.createInstance();Re.createInstance=Mn.createInstance;Re.createInstance;Re.dir;Re.init;Re.loadResources;Re.reloadResources;Re.use;Re.changeLanguage;Re.getFixedT;Re.t;Re.exists;Re.setDefaultNamespace;Re.hasLoadedNamespace;Re.loadNamespaces;Re.loadLanguages;const{slice:Hd,forEach:zd}=[];function Wd(t){return zd.call(Hd.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function Gd(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const Za=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Yd=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let o=`${t}=${s}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!Za.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!Za.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},eo={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=Yd(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Xd={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return eo.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:o}=e;n&&typeof document<"u"&&eo.create(n,t,r,s,o)}},Jd={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const l=s.substring(1).split("&");for(let c=0;c<l.length;c++){const f=l[c].indexOf("=");f>0&&l[c].substring(0,f)===e&&(n=l[c].substring(f+1))}}return n}},Qd={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const l=o.substring(1);if(e){const c=l.split("&");for(let f=0;f<c.length;f++){const h=c[f].indexOf("=");h>0&&c[f].substring(0,h)===e&&(r=c[f].substring(h+1))}}if(r)return r;if(!r&&n>-1){const c=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(c)?(s=c[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let Qt=null;const to=()=>{if(Qt!==null)return Qt;try{if(Qt=typeof window<"u"&&window.localStorage!==null,!Qt)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Qt=!1}return Qt};var Zd={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&to())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&to()&&window.localStorage.setItem(n,t)}};let Zt=null;const no=()=>{if(Zt!==null)return Zt;try{if(Zt=typeof window<"u"&&window.sessionStorage!==null,!Zt)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Zt=!1}return Zt};var ef={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&no())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&no()&&window.sessionStorage.setItem(n,t)}},tf={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let o=0;o<n.length;o++)e.push(n[o]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},nf={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},rf={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},sf={name:"subdomain",lookup(t){var s,o;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((o=(s=window.location)==null?void 0:s.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let Nl=!1;try{document.cookie,Nl=!0}catch{}const _l=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Nl||_l.splice(1,1);const af=()=>({order:_l,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Ll{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Wd(n,this.options||{},af()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Xd),this.addDetector(Jd),this.addDetector(Zd),this.addDetector(ef),this.addDetector(tf),this.addDetector(nf),this.addDetector(rf),this.addDetector(sf),this.addDetector(Qd)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!Gd(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Ll.type="languageDetector";const of={appName:"Fair Play Deck",appDescription:"Manage household tasks with your partner",ok:"OK",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",add:"Add",close:"Close",back:"Back",next:"Next",prev:"Previous",loading:"Loading...",error:"Error",success:"Success"},lf={dashboard:"Dashboard",gameBoard:"Game Board",cardGallery:"Cards",insights:"Insights",settings:"Settings"},uf={title:"Cards",dailyGrind:"Daily Grind",kids:"Kids",home:"Home",magic:"Magic",wild:"Wild",custom:"Custom",unassigned:"Unassigned",assigned:"Assigned",completed:"Completed",noCards:"No cards yet. Create or import some to get started."},cf={partnerA:"Partner A",partnerB:"Partner B",createPartner:"Create Partner Profile",editPartner:"Edit Partner",name:"Name",avatar:"Avatar",theme:"Theme Color"},df={deal:"Deal Cards",dealModes:{random:"Random Deal",weighted:"Weighted",draft:"Draft Mode",auction:"Auction",quick:"Quick Deal"},negotiate:"Negotiate",propose:"Propose Trade",accept:"Accept",reject:"Reject",counter:"Counter Offer"},ff={welcome:"Welcome to Fair Play Deck",step1:"Manage household tasks together",step2:"Fair distribution of responsibilities",step3:"Negotiate and balance workload",getStarted:"Get Started"},hf={title:"Settings",language:"Language",theme:"Theme",notifications:"Notifications",sound:"Sound Effects",animations:"Animations",backup:"Backup & Export",about:"About"},pf={common:of,navigation:lf,cards:uf,partners:cf,game:df,onboarding:ff,settings:hf},mf={appName:"פייר פליי דק",appDescription:"ניהול מטלות בית עם בן/בת הזוג",ok:"אישור",cancel:"ביטול",save:"שמור",delete:"מחק",edit:"ערוך",add:"הוסף",close:"סגור",back:"חזור",next:"הבא",prev:"הקודם",loading:"טוען...",error:"שגיאה",success:"הצלחה"},gf={dashboard:"לוח בקרה",gameBoard:"לוח המשחק",cardGallery:"כרטיסים",insights:"תובנות",settings:"הגדרות"},yf={title:"כרטיסים",dailyGrind:"השגרה היומית",kids:"ילדים",home:"הבית",magic:"קסם",wild:"פרא",custom:"מותאם אישית",unassigned:"לא משוייך",assigned:"משוייך",completed:"הושלם",noCards:"אין כרטיסים עדיין. צור או ייבא כרטיסים כדי להתחיל."},vf={partnerA:"שותף א",partnerB:"שותף ב",createPartner:"יצור פרופיל שותף",editPartner:"ערוך שותף",name:"שם",avatar:"אווטר",theme:"צבע ערכת הנושא"},bf={deal:"חלק כרטיסים",dealModes:{random:"חלוקה אקראית",weighted:"משוקלל",draft:"מצב ערסול",auction:"מכירה פומבית",quick:"חלוקה מהירה"},negotiate:"משא ומתן",propose:"הצע החלפה",accept:"קבל",reject:"דחה",counter:"הצע נגדית"},xf={welcome:"ברוכים הבאים ל-Fair Play Deck",step1:"נהל מטלות בית יחד",step2:"חלוקה הוגנת של אחריות",step3:"משא ומתן והאזנת עומסי עבודה",getStarted:"בואו נתחיל"},wf={title:"הגדרות",language:"שפה",theme:"ערכת נושא",notifications:"התראות",sound:"אפקטי קול",animations:"אנימציות",backup:"גיבוי וייצוא",about:"אודות"},Sf={common:mf,navigation:gf,cards:yf,partners:vf,game:bf,onboarding:xf,settings:wf},Af={en:{translation:pf},he:{translation:Sf}};Re.use(Ll).use(yd).init({resources:Af,fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},react:{useSuspense:!0}});const Cf={},ro=t=>{let e;const n=new Set,r=(g,v)=>{const y=typeof g=="function"?g(e):g;if(!Object.is(y,e)){const A=e;e=v??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(_=>_(e,A))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>h,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(Cf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,s,f);return f},kf=t=>t?ro(t):ro;var Ml={exports:{}},Vl={},Il={exports:{}},Fl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var an=K;function Pf(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Df=typeof Object.is=="function"?Object.is:Pf,Ef=an.useState,Tf=an.useEffect,jf=an.useLayoutEffect,Of=an.useDebugValue;function Rf(t,e){var n=e(),r=Ef({inst:{value:n,getSnapshot:e}}),s=r[0].inst,o=r[1];return jf(function(){s.value=n,s.getSnapshot=e,Mi(s)&&o({inst:s})},[t,n,e]),Tf(function(){return Mi(s)&&o({inst:s}),t(function(){Mi(s)&&o({inst:s})})},[t]),Of(n),n}function Mi(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Df(t,n)}catch{return!0}}function Nf(t,e){return e()}var _f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Nf:Rf;Fl.useSyncExternalStore=an.useSyncExternalStore!==void 0?an.useSyncExternalStore:_f;Il.exports=Fl;var Lf=Il.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hr=K,Mf=Lf;function Vf(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var If=typeof Object.is=="function"?Object.is:Vf,Ff=Mf.useSyncExternalStore,Bf=Hr.useRef,Kf=Hr.useEffect,$f=Hr.useMemo,qf=Hr.useDebugValue;Vl.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var o=Bf(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=$f(function(){function f(A){if(!h){if(h=!0,g=A,A=r(A),s!==void 0&&l.hasValue){var _=l.value;if(s(_,A))return v=_}return v=A}if(_=v,If(g,A))return _;var L=r(A);return s!==void 0&&s(_,L)?(g=A,_):(g=A,v=L)}var h=!1,g,v,y=n===void 0?null:n;return[function(){return f(e())},y===null?void 0:function(){return f(y())}]},[e,n,r,s]);var c=Ff(t,o[0],o[1]);return Kf(function(){l.hasValue=!0,l.value=c},[c]),qf(c),c};Ml.exports=Vl;var Uf=Ml.exports;const Hf=Al(Uf),Bl={},{useDebugValue:zf}=Cl,{useSyncExternalStoreWithSelector:Wf}=Hf;let io=!1;const Gf=t=>t;function Yf(t,e=Gf,n){(Bl?"production":void 0)!=="production"&&n&&!io&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),io=!0);const r=Wf(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return zf(r),r}const Xf=t=>{(Bl?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?kf(t):t,n=(r,s)=>Yf(e,r,s);return Object.assign(n,e),n},vs=t=>Xf,Jf={};function Qf(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const l=f=>f===null?null:JSON.parse(f,void 0),c=(o=n.getItem(s))!=null?o:null;return c instanceof Promise?c.then(l):l(c)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const Vn=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Vn(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Vn(r)(n)}}}},Zf=(t,e)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:T=>T,version:0,merge:(T,F)=>({...F,...T}),...e},l=!1;const c=new Set,f=new Set;let h;try{h=o.getStorage()}catch{}if(!h)return t((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...T)},r,s);const g=Vn(o.serialize),v=()=>{const T=o.partialize({...r()});let F;const I=g({state:T,version:o.version}).then(W=>h.setItem(o.name,W)).catch(W=>{F=W});if(F)throw F;return I},y=s.setState;s.setState=(T,F)=>{y(T,F),v()};const A=t((...T)=>{n(...T),v()},r,s);let _;const L=()=>{var T;if(!h)return;l=!1,c.forEach(I=>I(r()));const F=((T=o.onRehydrateStorage)==null?void 0:T.call(o,r()))||void 0;return Vn(h.getItem.bind(h))(o.name).then(I=>{if(I)return o.deserialize(I)}).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==o.version){if(o.migrate)return o.migrate(I.state,I.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return I.state}).then(I=>{var W;return _=o.merge(I,(W=r())!=null?W:A),n(_,!0),v()}).then(()=>{F==null||F(_,void 0),l=!0,f.forEach(I=>I(_))}).catch(I=>{F==null||F(void 0,I)})};return s.persist={setOptions:T=>{o={...o,...T},T.getStorage&&(h=T.getStorage())},clearStorage:()=>{h==null||h.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>L(),hasHydrated:()=>l,onHydrate:T=>(c.add(T),()=>{c.delete(T)}),onFinishHydration:T=>(f.add(T),()=>{f.delete(T)})},L(),_||A},eh=(t,e)=>(n,r,s)=>{let o={storage:Qf(()=>localStorage),partialize:L=>L,version:0,merge:(L,T)=>({...T,...L}),...e},l=!1;const c=new Set,f=new Set;let h=o.storage;if(!h)return t((...L)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...L)},r,s);const g=()=>{const L=o.partialize({...r()});return h.setItem(o.name,{state:L,version:o.version})},v=s.setState;s.setState=(L,T)=>{v(L,T),g()};const y=t((...L)=>{n(...L),g()},r,s);s.getInitialState=()=>y;let A;const _=()=>{var L,T;if(!h)return;l=!1,c.forEach(I=>{var W;return I((W=r())!=null?W:y)});const F=((T=o.onRehydrateStorage)==null?void 0:T.call(o,(L=r())!=null?L:y))||void 0;return Vn(h.getItem.bind(h))(o.name).then(I=>{if(I)if(typeof I.version=="number"&&I.version!==o.version){if(o.migrate)return[!0,o.migrate(I.state,I.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,I.state];return[!1,void 0]}).then(I=>{var W;const[H,q]=I;if(A=o.merge(q,(W=r())!=null?W:y),n(A,!0),H)return g()}).then(()=>{F==null||F(A,void 0),A=r(),l=!0,f.forEach(I=>I(A))}).catch(I=>{F==null||F(void 0,I)})};return s.persist={setOptions:L=>{o={...o,...L},L.storage&&(h=L.storage)},clearStorage:()=>{h==null||h.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>_(),hasHydrated:()=>l,onHydrate:L=>(c.add(L),()=>{c.delete(L)}),onFinishHydration:L=>(f.add(L),()=>{f.delete(L)})},o.skipHydration||_(),A||y},th=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Jf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Zf(t,e)):eh(t,e),bs=th,In=vs()(bs((t,e)=>({cards:[],selectedCards:[],searchQuery:"",filterCategory:null,filterStatus:null,addCard:n=>t(r=>({cards:[...r.cards,n]})),removeCard:n=>t(r=>({cards:r.cards.filter(s=>s.id!==n),selectedCards:r.selectedCards.filter(s=>s!==n)})),updateCard:n=>t(r=>({cards:r.cards.map(s=>s.id===n.id?n:s)})),getCard:n=>e().cards.find(s=>s.id===n),getCards:()=>e().cards,getCardsByCategory:n=>e().cards.filter(s=>s.category===n),getCardsByStatus:n=>e().cards.filter(s=>s.status===n),getCardsByHolder:n=>e().cards.filter(s=>s.holder===n),selectCard:n=>t(r=>({selectedCards:[...new Set([...r.selectedCards,n])]})),deselectCard:n=>t(r=>({selectedCards:r.selectedCards.filter(s=>s!==n)})),toggleCard:n=>t(r=>({selectedCards:r.selectedCards.includes(n)?r.selectedCards.filter(o=>o!==n):[...r.selectedCards,n]})),clearSelection:()=>t(()=>({selectedCards:[]})),getSelectedCards:()=>{const n=e();return n.cards.filter(r=>n.selectedCards.includes(r.id))},setSearchQuery:n=>t(()=>({searchQuery:n})),setFilterCategory:n=>t(()=>({filterCategory:n})),setFilterStatus:n=>t(()=>({filterStatus:n})),getFilteredCards:()=>{const n=e();let r=n.cards;if(n.searchQuery){const s=n.searchQuery.toLowerCase();r=r.filter(o=>o.title.en.toLowerCase().includes(s)||o.title.he.toLowerCase().includes(s)||o.description.en.toLowerCase().includes(s)||o.description.he.toLowerCase().includes(s))}return n.filterCategory&&(r=r.filter(s=>s.category===n.filterCategory)),n.filterStatus&&(r=r.filter(s=>s.status===n.filterStatus)),r},bulkAddCards:n=>t(r=>({cards:[...r.cards,...n]})),bulkRemoveCards:n=>t(r=>({cards:r.cards.filter(s=>!n.includes(s.id)),selectedCards:r.selectedCards.filter(s=>!n.includes(s))})),clearAll:()=>t(()=>({cards:[],selectedCards:[],searchQuery:"",filterCategory:null,filterStatus:null}))}),{name:"card-store",version:1})),nh=vs()(bs((t,e)=>({gameState:null,currentDealMode:"random",isDealing:!1,dealHistory:[],initializeGame:n=>t(()=>({gameState:n,isDealing:!1})),setGameState:n=>t(()=>({gameState:n})),getGameState:()=>e().gameState,setCurrentDealMode:n=>t(()=>({currentDealMode:n})),setIsDealing:n=>t(()=>({isDealing:n})),addToDealHistory:n=>t(r=>({dealHistory:[...r.dealHistory,n]})),clearDealHistory:()=>t(()=>({dealHistory:[]})),endGame:()=>t(n=>n.gameState?{gameState:{...n.gameState,isActive:!1}}:{}),resetGame:()=>t(()=>({gameState:null,currentDealMode:"random",isDealing:!1,dealHistory:[]}))}),{name:"game-store",version:1})),so={language:"en",theme:"auto",animations:!0,soundEnabled:!0,notifications:!0,defaultDealMode:"random"},Kl=vs()(bs((t,e)=>({...so,setLanguage:n=>t(()=>({language:n})),setTheme:n=>t(()=>({theme:n})),toggleAnimations:()=>t(n=>({animations:!n.animations})),toggleSound:()=>t(n=>({soundEnabled:!n.soundEnabled})),toggleNotifications:()=>t(n=>({notifications:!n.notifications})),setDefaultDealMode:n=>t(()=>({defaultDealMode:n})),getSettings:()=>{const n=e();return{language:n.language,theme:n.theme,animations:n.animations,soundEnabled:n.soundEnabled,notifications:n.notifications,defaultDealMode:n.defaultDealMode}},resetSettings:()=>t(()=>so)}),{name:"settings-store",version:1}));var $l={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Va,function(){var n=function(i,a){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(u[p]=d[p])})(i,a)},r=function(){return(r=Object.assign||function(i){for(var a,u=1,d=arguments.length;u<d;u++)for(var p in a=arguments[u])Object.prototype.hasOwnProperty.call(a,p)&&(i[p]=a[p]);return i}).apply(this,arguments)};function s(i,a,u){for(var d,p=0,m=a.length;p<m;p++)!d&&p in a||((d=d||Array.prototype.slice.call(a,0,p))[p]=a[p]);return i.concat(d||Array.prototype.slice.call(a))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Va,l=Object.keys,c=Array.isArray;function f(i,a){return typeof a!="object"||l(a).forEach(function(u){i[u]=a[u]}),i}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var h=Object.getPrototypeOf,g={}.hasOwnProperty;function v(i,a){return g.call(i,a)}function y(i,a){typeof a=="function"&&(a=a(h(i))),(typeof Reflect>"u"?l:Reflect.ownKeys)(a).forEach(function(u){_(i,u,a[u])})}var A=Object.defineProperty;function _(i,a,u,d){A(i,a,f(u&&v(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},d))}function L(i){return{from:function(a){return i.prototype=Object.create(a.prototype),_(i.prototype,"constructor",i),{extend:y.bind(null,i.prototype)}}}}var T=Object.getOwnPropertyDescriptor,F=[].slice;function I(i,a,u){return F.call(i,a,u)}function W(i,a){return a(i)}function H(i){if(!i)throw new Error("Assertion Failed")}function q(i){o.setImmediate?setImmediate(i):setTimeout(i,0)}function Q(i,a){if(typeof a=="string"&&v(i,a))return i[a];if(!a)return i;if(typeof a!="string"){for(var u=[],d=0,p=a.length;d<p;++d){var m=Q(i,a[d]);u.push(m)}return u}var b=a.indexOf(".");if(b!==-1){var x=i[a.substr(0,b)];return x==null?void 0:Q(x,a.substr(b+1))}}function ee(i,a,u){if(i&&a!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof a!="string"&&"length"in a){H(typeof u!="string"&&"length"in u);for(var d=0,p=a.length;d<p;++d)ee(i,a[d],u[d])}else{var m,b,x=a.indexOf(".");x!==-1?(m=a.substr(0,x),(b=a.substr(x+1))===""?u===void 0?c(i)&&!isNaN(parseInt(m))?i.splice(m,1):delete i[m]:i[m]=u:ee(x=!(x=i[m])||!v(i,m)?i[m]={}:x,b,u)):u===void 0?c(i)&&!isNaN(parseInt(a))?i.splice(a,1):delete i[a]:i[a]=u}}function ie(i){var a,u={};for(a in i)v(i,a)&&(u[a]=i[a]);return u}var te=[].concat;function pe(i){return te.apply([],i)}var wt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(pe([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(a){return a+i+"Array"})}))).filter(function(i){return o[i]}),xe=new Set(wt.map(function(i){return o[i]})),ke=null;function Ie(i){return ke=new WeakMap,i=function a(u){if(!u||typeof u!="object")return u;var d=ke.get(u);if(d)return d;if(c(u)){d=[],ke.set(u,d);for(var p=0,m=u.length;p<m;++p)d.push(a(u[p]))}else if(xe.has(u.constructor))d=u;else{var b,x=h(u);for(b in d=x===Object.prototype?{}:Object.create(x),ke.set(u,d),u)v(u,b)&&(d[b]=a(u[b]))}return d}(i),ke=null,i}var Ye={}.toString;function Xe(i){return Ye.call(i).slice(8,-1)}var rt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pe=typeof rt=="symbol"?function(i){var a;return i!=null&&(a=i[rt])&&a.apply(i)}:function(){return null};function he(i,a){return a=i.indexOf(a),0<=a&&i.splice(a,1),0<=a}var Ee={};function De(i){var a,u,d,p;if(arguments.length===1){if(c(i))return i.slice();if(this===Ee&&typeof i=="string")return[i];if(p=Pe(i)){for(u=[];!(d=p.next()).done;)u.push(d.value);return u}if(i==null)return[i];if(typeof(a=i.length)!="number")return[i];for(u=new Array(a);a--;)u[a]=i[a];return u}for(a=arguments.length,u=new Array(a);a--;)u[a]=arguments[a];return u}var It=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},pn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],He=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(pn),vc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ft(i,a){this.name=i,this.message=a}function ea(i,a){return i+". Errors: "+Object.keys(a).map(function(u){return a[u].toString()}).filter(function(u,d,p){return p.indexOf(u)===d}).join(`
`)}function Yn(i,a,u,d){this.failures=a,this.failedKeys=d,this.successCount=u,this.message=ea(i,a)}function Bt(i,a){this.name="BulkError",this.failures=Object.keys(a).map(function(u){return a[u]}),this.failuresByPos=a,this.message=ea(i,this.failures)}L(Ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),L(Yn).from(Ft),L(Bt).from(Ft);var Qr=He.reduce(function(i,a){return i[a]=a+"Error",i},{}),bc=Ft,re=He.reduce(function(i,a){var u=a+"Error";function d(p,m){this.name=u,p?typeof p=="string"?(this.message="".concat(p).concat(m?`
 `+m:""),this.inner=m||null):typeof p=="object"&&(this.message="".concat(p.name," ").concat(p.message),this.inner=p):(this.message=vc[a]||u,this.inner=null)}return L(d).from(bc),i[a]=d,i},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var ta=pn.reduce(function(i,a){return i[a+"Error"]=re[a],i},{}),Xn=He.reduce(function(i,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(i[a+"Error"]=re[a]),i},{});function me(){}function fn(i){return i}function xc(i,a){return i==null||i===fn?a:function(u){return a(i(u))}}function xt(i,a){return function(){i.apply(this,arguments),a.apply(this,arguments)}}function wc(i,a){return i===me?a:function(){var u=i.apply(this,arguments);u!==void 0&&(arguments[0]=u);var d=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var m=a.apply(this,arguments);return d&&(this.onsuccess=this.onsuccess?xt(d,this.onsuccess):d),p&&(this.onerror=this.onerror?xt(p,this.onerror):p),m!==void 0?m:u}}function Sc(i,a){return i===me?a:function(){i.apply(this,arguments);var u=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?xt(u,this.onsuccess):u),d&&(this.onerror=this.onerror?xt(d,this.onerror):d)}}function Ac(i,a){return i===me?a:function(u){var d=i.apply(this,arguments);f(u,d);var p=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,u=a.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?xt(p,this.onsuccess):p),m&&(this.onerror=this.onerror?xt(m,this.onerror):m),d===void 0?u===void 0?void 0:u:f(d,u)}}function Cc(i,a){return i===me?a:function(){return a.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function Zr(i,a){return i===me?a:function(){var u=i.apply(this,arguments);if(u&&typeof u.then=="function"){for(var d=this,p=arguments.length,m=new Array(p);p--;)m[p]=arguments[p];return u.then(function(){return a.apply(d,m)})}return a.apply(this,arguments)}}Xn.ModifyError=Yn,Xn.DexieError=Ft,Xn.BulkError=Bt;var Je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function na(i){Je=i}var hn={},ra=100,wt=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,h(i),i];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,h(a),i]}(),pn=wt[0],He=wt[1],wt=wt[2],He=He&&He.then,St=pn&&pn.constructor,ei=!!wt,mn=function(i,a){gn.push([i,a]),Jn&&(queueMicrotask(Pc),Jn=!1)},ti=!0,Jn=!0,At=[],Qn=[],ni=fn,ut={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},ne=ut,gn=[],Ct=0,Zn=[];function J(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=ne;if(typeof i!="function"){if(i!==hn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ii(this,this._value))}this._state=null,this._value=null,++a.ref,function u(d,p){try{p(function(m){if(d._state===null){if(m===d)throw new TypeError("A promise cannot be resolved with itself.");var b=d._lib&&Kt();m&&typeof m.then=="function"?u(d,function(x,S){m instanceof J?m._then(x,S):m.then(x,S)}):(d._state=!0,d._value=m,sa(d)),b&&$t()}},ii.bind(null,d))}catch(m){ii(d,m)}}(this,i)}var ri={get:function(){var i=ne,a=rr;function u(d,p){var m=this,b=!i.global&&(i!==ne||a!==rr),x=b&&!dt(),S=new J(function(C,j){si(m,new ia(oa(d,i,b,x),oa(p,i,b,x),C,j,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return u.prototype=hn,u},set:function(i){_(this,"then",i&&i.prototype===hn?ri:{get:function(){return i},set:ri.set})}};function ia(i,a,u,d,p){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof a=="function"?a:null,this.resolve=u,this.reject=d,this.psd=p}function ii(i,a){var u,d;Qn.push(a),i._state===null&&(u=i._lib&&Kt(),a=ni(a),i._state=!1,i._value=a,d=i,At.some(function(p){return p._value===d._value})||At.push(d),sa(i),u&&$t())}function sa(i){var a=i._listeners;i._listeners=[];for(var u=0,d=a.length;u<d;++u)si(i,a[u]);var p=i._PSD;--p.ref||p.finalize(),Ct===0&&(++Ct,mn(function(){--Ct==0&&ai()},[]))}function si(i,a){if(i._state!==null){var u=i._state?a.onFulfilled:a.onRejected;if(u===null)return(i._state?a.resolve:a.reject)(i._value);++a.psd.ref,++Ct,mn(kc,[u,i,a])}else i._listeners.push(a)}function kc(i,a,u){try{var d,p=a._value;!a._state&&Qn.length&&(Qn=[]),d=Je&&a._consoleTask?a._consoleTask.run(function(){return i(p)}):i(p),a._state||Qn.indexOf(p)!==-1||function(m){for(var b=At.length;b;)if(At[--b]._value===m._value)return At.splice(b,1)}(a),u.resolve(d)}catch(m){u.reject(m)}finally{--Ct==0&&ai(),--u.psd.ref||u.psd.finalize()}}function Pc(){kt(ut,function(){Kt()&&$t()})}function Kt(){var i=ti;return Jn=ti=!1,i}function $t(){var i,a,u;do for(;0<gn.length;)for(i=gn,gn=[],u=i.length,a=0;a<u;++a){var d=i[a];d[0].apply(null,d[1])}while(0<gn.length);Jn=ti=!0}function ai(){var i=At;At=[],i.forEach(function(d){d._PSD.onunhandled.call(null,d._value,d)});for(var a=Zn.slice(0),u=a.length;u;)a[--u]()}function er(i){return new J(hn,!1,i)}function ve(i,a){var u=ne;return function(){var d=Kt(),p=ne;try{return ft(u,!0),i.apply(this,arguments)}catch(m){a&&a(m)}finally{ft(p,!1),d&&$t()}}}y(J.prototype,{then:ri,_then:function(i,a){si(this,new ia(null,null,i,a,ne))},catch:function(i){if(arguments.length===1)return this.then(null,i);var a=i,u=arguments[1];return typeof a=="function"?this.then(null,function(d){return(d instanceof a?u:er)(d)}):this.then(null,function(d){return(d&&d.name===a?u:er)(d)})},finally:function(i){return this.then(function(a){return J.resolve(i()).then(function(){return a})},function(a){return J.resolve(i()).then(function(){return er(a)})})},timeout:function(i,a){var u=this;return i<1/0?new J(function(d,p){var m=setTimeout(function(){return p(new re.Timeout(a))},i);u.then(d,p).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&_(J.prototype,Symbol.toStringTag,"Dexie.Promise"),ut.env=aa(),y(J,{all:function(){var i=De.apply(null,arguments).map(ir);return new J(function(a,u){i.length===0&&a([]);var d=i.length;i.forEach(function(p,m){return J.resolve(p).then(function(b){i[m]=b,--d||a(i)},u)})})},resolve:function(i){return i instanceof J?i:i&&typeof i.then=="function"?new J(function(a,u){i.then(a,u)}):new J(hn,!0,i)},reject:er,race:function(){var i=De.apply(null,arguments).map(ir);return new J(function(a,u){i.map(function(d){return J.resolve(d).then(a,u)})})},PSD:{get:function(){return ne},set:function(i){return ne=i}},totalEchoes:{get:function(){return rr}},newPSD:ct,usePSD:kt,scheduler:{get:function(){return mn},set:function(i){mn=i}},rejectionMapper:{get:function(){return ni},set:function(i){ni=i}},follow:function(i,a){return new J(function(u,d){return ct(function(p,m){var b=ne;b.unhandleds=[],b.onunhandled=m,b.finalize=xt(function(){var x,S=this;x=function(){S.unhandleds.length===0?p():m(S.unhandleds[0])},Zn.push(function C(){x(),Zn.splice(Zn.indexOf(C),1)}),++Ct,mn(function(){--Ct==0&&ai()},[])},b.finalize),i()},a,u,d)})}}),St&&(St.allSettled&&_(J,"allSettled",function(){var i=De.apply(null,arguments).map(ir);return new J(function(a){i.length===0&&a([]);var u=i.length,d=new Array(u);i.forEach(function(p,m){return J.resolve(p).then(function(b){return d[m]={status:"fulfilled",value:b}},function(b){return d[m]={status:"rejected",reason:b}}).then(function(){return--u||a(d)})})})}),St.any&&typeof AggregateError<"u"&&_(J,"any",function(){var i=De.apply(null,arguments).map(ir);return new J(function(a,u){i.length===0&&u(new AggregateError([]));var d=i.length,p=new Array(d);i.forEach(function(m,b){return J.resolve(m).then(function(x){return a(x)},function(x){p[b]=x,--d||u(new AggregateError(p))})})})}),St.withResolvers&&(J.withResolvers=St.withResolvers));var Te={awaits:0,echoes:0,id:0},Dc=0,tr=[],nr=0,rr=0,Ec=0;function ct(i,a,u,d){var p=ne,m=Object.create(p);return m.parent=p,m.ref=0,m.global=!1,m.id=++Ec,ut.env,m.env=ei?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject}:{},a&&f(m,a),++p.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},d=kt(m,i,u,d),m.ref===0&&m.finalize(),d}function qt(){return Te.id||(Te.id=++Dc),++Te.awaits,Te.echoes+=ra,Te.id}function dt(){return!!Te.awaits&&(--Te.awaits==0&&(Te.id=0),Te.echoes=Te.awaits*ra,!0)}function ir(i){return Te.echoes&&i&&i.constructor===St?(qt(),i.then(function(a){return dt(),a},function(a){return dt(),Se(a)})):i}function Tc(){var i=tr[tr.length-1];tr.pop(),ft(i,!1)}function ft(i,a){var u,d=ne;(a?!Te.echoes||nr++&&i===ne:!nr||--nr&&i===ne)||queueMicrotask(a?(function(p){++rr,Te.echoes&&--Te.echoes!=0||(Te.echoes=Te.awaits=Te.id=0),tr.push(ne),ft(p,!0)}).bind(null,i):Tc),i!==ne&&(ne=i,d===ut&&(ut.env=aa()),ei&&(u=ut.env.Promise,a=i.env,(d.global||i.global)&&(Object.defineProperty(o,"Promise",a.PromiseProp),u.all=a.all,u.race=a.race,u.resolve=a.resolve,u.reject=a.reject,a.allSettled&&(u.allSettled=a.allSettled),a.any&&(u.any=a.any))))}function aa(){var i=o.Promise;return ei?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function kt(i,a,u,d,p){var m=ne;try{return ft(i,!0),a(u,d,p)}finally{ft(m,!1)}}function oa(i,a,u,d){return typeof i!="function"?i:function(){var p=ne;u&&qt(),ft(a,!0);try{return i.apply(this,arguments)}finally{ft(p,!1),d&&queueMicrotask(dt)}}}function oi(i){Promise===St&&Te.echoes===0?nr===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+He).indexOf("[native code]")===-1&&(qt=dt=me);var Se=J.reject,Pt="￿",it="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",la="String expected.",Ut=[],sr="__dbnames",li="readonly",ui="readwrite";function Dt(i,a){return i?a?function(){return i.apply(this,arguments)&&a.apply(this,arguments)}:i:a}var ua={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ar(i){return typeof i!="string"||/\./.test(i)?function(a){return a}:function(a){return a[i]===void 0&&i in a&&delete(a=Ie(a))[i],a}}function ca(){throw re.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function de(i,a){try{var u=da(i),d=da(a);if(u!==d)return u==="Array"?1:d==="Array"?-1:u==="binary"?1:d==="binary"?-1:u==="string"?1:d==="string"?-1:u==="Date"?1:d!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return a<i?1:i<a?-1:0;case"binary":return function(p,m){for(var b=p.length,x=m.length,S=b<x?b:x,C=0;C<S;++C)if(p[C]!==m[C])return p[C]<m[C]?-1:1;return b===x?0:b<x?-1:1}(fa(i),fa(a));case"Array":return function(p,m){for(var b=p.length,x=m.length,S=b<x?b:x,C=0;C<S;++C){var j=de(p[C],m[C]);if(j!==0)return j}return b===x?0:b<x?-1:1}(i,a)}}catch{}return NaN}function da(i){var a=typeof i;return a!="object"?a:ArrayBuffer.isView(i)?"binary":(i=Xe(i),i==="ArrayBuffer"?"binary":i)}function fa(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}function or(i,a,u){var d=i.schema.yProps;return d?(a&&0<u.numFailures&&(a=a.filter(function(p,m){return!u.failures[m]})),Promise.all(d.map(function(p){return p=p.updatesTable,a?i.db.table(p).where("k").anyOf(a).delete():i.db.table(p).clear()})).then(function(){return u})):u}var yn=(ha.prototype.execute=function(i){var a=this["@@propmod"];if(a.add!==void 0){var u=a.add;if(c(u))return s(s([],c(i)?i:[],!0),u).sort();if(typeof u=="number")return(Number(i)||0)+u;if(typeof u=="bigint")try{return BigInt(i)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(a.remove!==void 0){var d=a.remove;if(c(d))return c(i)?i.filter(function(p){return!d.includes(p)}).sort():[];if(typeof d=="number")return Number(i)-d;if(typeof d=="bigint")try{return BigInt(i)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}return u=(u=a.replacePrefix)===null||u===void 0?void 0:u[0],u&&typeof i=="string"&&i.startsWith(u)?a.replacePrefix[1]+i.substring(u.length):i},ha);function ha(i){this["@@propmod"]=i}function pa(i,a){for(var u=l(a),d=u.length,p=!1,m=0;m<d;++m){var b=u[m],x=a[b],S=Q(i,b);x instanceof yn?(ee(i,b,x.execute(S)),p=!0):S!==x&&(ee(i,b,x),p=!0)}return p}var ma=(ge.prototype._trans=function(i,a,u){var d=this._tx||ne.trans,p=this.name,m=Je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function b(C,j,w){if(!w.schema[p])throw new re.NotFound("Table "+p+" not part of transaction");return a(w.idbtrans,w)}var x=Kt();try{var S=d&&d.db._novip===this.db._novip?d===ne.trans?d._promise(i,b,u):ct(function(){return d._promise(i,b,u)},{trans:d,transless:ne.transless||ne}):function C(j,w,R,k){if(j.idbdb&&(j._state.openComplete||ne.letThrough||j._vip)){var D=j._createTransaction(w,R,j._dbSchema);try{D.create(),j._state.PR1398_maxLoop=3}catch(E){return E.name===Qr.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return C(j,w,R,k)})):Se(E)}return D._promise(w,function(E,O){return ct(function(){return ne.trans=D,k(E,O,D)})}).then(function(E){if(w==="readwrite")try{D.idbtrans.commit()}catch{}return w==="readonly"?E:D._completion.then(function(){return E})})}if(j._state.openComplete)return Se(new re.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return Se(new re.DatabaseClosed);j.open().catch(me)}return j._state.dbReadyPromise.then(function(){return C(j,w,R,k)})}(this.db,i,[this.name],b);return m&&(S._consoleTask=m,S=S.catch(function(C){return console.trace(C),Se(C)})),S}finally{x&&$t()}},ge.prototype.get=function(i,a){var u=this;return i&&i.constructor===Object?this.where(i).first(a):i==null?Se(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(d){return u.core.get({trans:d,key:i}).then(function(p){return u.hook.reading.fire(p)})}).then(a)},ge.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(c(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var a=l(i);if(a.length===1)return this.where(a[0]).equals(i[a[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&a.every(function(C){return 0<=x.keyPath.indexOf(C)})){for(var S=0;S<a.length;++S)if(a.indexOf(x.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(x,S){return x.keyPath.length-S.keyPath.length})[0];if(u&&this.db._maxKey!==Pt){var m=u.keyPath.slice(0,a.length);return this.where(m).equals(m.map(function(S){return i[S]}))}!u&&Je&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(a.join("+"),"]"));var d=this.schema.idxByName;function p(x,S){return de(x,S)===0}var b=a.reduce(function(w,S){var C=w[0],j=w[1],w=d[S],R=i[S];return[C||w,C||!w?Dt(j,w&&w.multi?function(k){return k=Q(k,S),c(k)&&k.some(function(D){return p(R,D)})}:function(k){return p(R,Q(k,S))}):j]},[null,null]),m=b[0],b=b[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(b):u?this.filter(b):this.where(a).equals("")},ge.prototype.filter=function(i){return this.toCollection().and(i)},ge.prototype.count=function(i){return this.toCollection().count(i)},ge.prototype.offset=function(i){return this.toCollection().offset(i)},ge.prototype.limit=function(i){return this.toCollection().limit(i)},ge.prototype.each=function(i){return this.toCollection().each(i)},ge.prototype.toArray=function(i){return this.toCollection().toArray(i)},ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ge.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,c(i)?"[".concat(i.join("+"),"]"):i))},ge.prototype.reverse=function(){return this.toCollection().reverse()},ge.prototype.mapToClass=function(i){var a,u=this.db,d=this.name;function p(){return a!==null&&a.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof ca&&(function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function j(){this.constructor=S}n(S,C),S.prototype=C===null?Object.create(C):(j.prototype=C.prototype,new j)}(p,a=i),Object.defineProperty(p.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),p.prototype.table=function(){return d},i=p);for(var m=new Set,b=i.prototype;b;b=h(b))Object.getOwnPropertyNames(b).forEach(function(S){return m.add(S)});function x(S){if(!S)return S;var C,j=Object.create(i.prototype);for(C in S)if(!m.has(C))try{j[C]=S[C]}catch{}return j}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),i},ge.prototype.defineClass=function(){return this.mapToClass(function(i){f(this,i)})},ge.prototype.add=function(i,a){var u=this,d=this.schema.primKey,p=d.auto,m=d.keyPath,b=i;return m&&p&&(b=ar(m)(i)),this._trans("readwrite",function(x){return u.core.mutate({trans:x,type:"add",keys:a!=null?[a]:null,values:[b]})}).then(function(x){return x.numFailures?J.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{ee(i,m,x)}catch{}return x})},ge.prototype.upsert=function(i,a){var u=this,d=this.schema.primKey.keyPath;return this._trans("readwrite",function(p){return u.core.get({trans:p,key:i}).then(function(m){var b=m??{};return pa(b,a),d&&ee(b,d,i),u.core.mutate({trans:p,type:"put",values:[b],keys:[i],upsert:!0,updates:{keys:[i],changeSpecs:[a]}}).then(function(x){return x.numFailures?J.reject(x.failures[0]):!!m})})})},ge.prototype.update=function(i,a){return typeof i!="object"||c(i)?this.where(":id").equals(i).modify(a):(i=Q(i,this.schema.primKey.keyPath),i===void 0?Se(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(a))},ge.prototype.put=function(i,a){var u=this,d=this.schema.primKey,p=d.auto,m=d.keyPath,b=i;return m&&p&&(b=ar(m)(i)),this._trans("readwrite",function(x){return u.core.mutate({trans:x,type:"put",values:[b],keys:a!=null?[a]:null})}).then(function(x){return x.numFailures?J.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{ee(i,m,x)}catch{}return x})},ge.prototype.delete=function(i){var a=this;return this._trans("readwrite",function(u){return a.core.mutate({trans:u,type:"delete",keys:[i]}).then(function(d){return or(a,[i],d)}).then(function(d){return d.numFailures?J.reject(d.failures[0]):void 0})})},ge.prototype.clear=function(){var i=this;return this._trans("readwrite",function(a){return i.core.mutate({trans:a,type:"deleteRange",range:ua}).then(function(u){return or(i,null,u)})}).then(function(a){return a.numFailures?J.reject(a.failures[0]):void 0})},ge.prototype.bulkGet=function(i){var a=this;return this._trans("readonly",function(u){return a.core.getMany({keys:i,trans:u}).then(function(d){return d.map(function(p){return a.hook.reading.fire(p)})})})},ge.prototype.bulkAdd=function(i,a,u){var d=this,p=Array.isArray(a)?a:void 0,m=(u=u||(p?void 0:a))?u.allKeys:void 0;return this._trans("readwrite",function(b){var C=d.schema.primKey,x=C.auto,C=C.keyPath;if(C&&p)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==i.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,C=C&&x?i.map(ar(C)):i;return d.core.mutate({trans:b,type:"add",keys:p,values:C,wantResults:m}).then(function(D){var w=D.numFailures,R=D.results,k=D.lastResult,D=D.failures;if(w===0)return m?R:k;throw new Bt("".concat(d.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),D)})})},ge.prototype.bulkPut=function(i,a,u){var d=this,p=Array.isArray(a)?a:void 0,m=(u=u||(p?void 0:a))?u.allKeys:void 0;return this._trans("readwrite",function(b){var C=d.schema.primKey,x=C.auto,C=C.keyPath;if(C&&p)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==i.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,C=C&&x?i.map(ar(C)):i;return d.core.mutate({trans:b,type:"put",keys:p,values:C,wantResults:m}).then(function(D){var w=D.numFailures,R=D.results,k=D.lastResult,D=D.failures;if(w===0)return m?R:k;throw new Bt("".concat(d.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),D)})})},ge.prototype.bulkUpdate=function(i){var a=this,u=this.core,d=i.map(function(b){return b.key}),p=i.map(function(b){return b.changes}),m=[];return this._trans("readwrite",function(b){return u.getMany({trans:b,keys:d,cache:"clone"}).then(function(x){var S=[],C=[];i.forEach(function(w,R){var k=w.key,D=w.changes,E=x[R];if(E){for(var O=0,N=Object.keys(D);O<N.length;O++){var M=N[O],V=D[M];if(M===a.schema.primKey.keyPath){if(de(V,k)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else ee(E,M,V)}m.push(R),S.push(k),C.push(E)}});var j=S.length;return u.mutate({trans:b,type:"put",keys:S,values:C,updates:{keys:d,changeSpecs:p}}).then(function(w){var R=w.numFailures,k=w.failures;if(R===0)return j;for(var D=0,E=Object.keys(k);D<E.length;D++){var O,N=E[D],M=m[Number(N)];M!=null&&(O=k[N],delete k[N],k[M]=O)}throw new Bt("".concat(a.name,".bulkUpdate(): ").concat(R," of ").concat(j," operations failed"),k)})})})},ge.prototype.bulkDelete=function(i){var a=this,u=i.length;return this._trans("readwrite",function(d){return a.core.mutate({trans:d,type:"delete",keys:i}).then(function(p){return or(a,i,p)})}).then(function(b){var p=b.numFailures,m=b.lastResult,b=b.failures;if(p===0)return m;throw new Bt("".concat(a.name,".bulkDelete(): ").concat(p," of ").concat(u," operations failed"),b)})},ge);function ge(){}function vn(i){function a(b,x){if(x){for(var S=arguments.length,C=new Array(S-1);--S;)C[S-1]=arguments[S];return u[b].subscribe.apply(null,C),i}if(typeof b=="string")return u[b]}var u={};a.addEventType=m;for(var d=1,p=arguments.length;d<p;++d)m(arguments[d]);return a;function m(b,x,S){if(typeof b!="object"){var C;x=x||Cc;var j={subscribers:[],fire:S=S||me,subscribe:function(w){j.subscribers.indexOf(w)===-1&&(j.subscribers.push(w),j.fire=x(j.fire,w))},unsubscribe:function(w){j.subscribers=j.subscribers.filter(function(R){return R!==w}),j.fire=j.subscribers.reduce(x,S)}};return u[b]=a[b]=j}l(C=b).forEach(function(w){var R=C[w];if(c(R))m(w,C[w][0],C[w][1]);else{if(R!=="asap")throw new re.InvalidArgument("Invalid event config");var k=m(w,fn,function(){for(var D=arguments.length,E=new Array(D);D--;)E[D]=arguments[D];k.subscribers.forEach(function(O){q(function(){O.apply(null,E)})})})}})}}function bn(i,a){return L(a).from({prototype:i}),a}function Ht(i,a){return!(i.filter||i.algorithm||i.or)&&(a?i.justLimit:!i.replayFilter)}function ci(i,a){i.filter=Dt(i.filter,a)}function di(i,a,u){var d=i.replayFilter;i.replayFilter=d?function(){return Dt(d(),a())}:a,i.justLimit=u&&!d}function lr(i,a){if(i.isPrimKey)return a.primaryKey;var u=a.getIndexByKeyPath(i.index);if(!u)throw new re.Schema("KeyPath "+i.index+" on object store "+a.name+" is not indexed");return u}function ga(i,a,u){var d=lr(i,a.schema);return a.openCursor({trans:u,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:d,range:i.range}})}function ur(i,a,u,d){var p=i.replayFilter?Dt(i.filter,i.replayFilter()):i.filter;if(i.or){var m={},b=function(x,S,C){var j,w;p&&!p(S,C,function(R){return S.stop(R)},function(R){return S.fail(R)})||((w=""+(j=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(j)),v(m,w)||(m[w]=!0,a(x,S,C)))};return Promise.all([i.or._iterate(b,u),ya(ga(i,d,u),i.algorithm,b,!i.keysOnly&&i.valueMapper)])}return ya(ga(i,d,u),Dt(i.algorithm,p),a,!i.keysOnly&&i.valueMapper)}function ya(i,a,u,d){var p=ve(d?function(m,b,x){return u(d(m),b,x)}:u);return i.then(function(m){if(m)return m.start(function(){var b=function(){return m.continue()};a&&!a(m,function(x){return b=x},function(x){m.stop(x),b=me},function(x){m.fail(x),b=me})||p(m.value,m,function(x){return b=x}),b()})})}var jc=(fe.prototype._read=function(i,a){var u=this._ctx;return u.error?u.table._trans(null,Se.bind(null,u.error)):u.table._trans("readonly",i).then(a)},fe.prototype._write=function(i){var a=this._ctx;return a.error?a.table._trans(null,Se.bind(null,a.error)):a.table._trans("readwrite",i,"locked")},fe.prototype._addAlgorithm=function(i){var a=this._ctx;a.algorithm=Dt(a.algorithm,i)},fe.prototype._iterate=function(i,a){return ur(this._ctx,i,a,this._ctx.table.core)},fe.prototype.clone=function(i){var a=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return i&&f(u,i),a._ctx=u,a},fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},fe.prototype.each=function(i){var a=this._ctx;return this._read(function(u){return ur(a,i,u,a.table.core)})},fe.prototype.count=function(i){var a=this;return this._read(function(u){var d=a._ctx,p=d.table.core;if(Ht(d,!0))return p.count({trans:u,query:{index:lr(d,p.schema),range:d.range}}).then(function(b){return Math.min(b,d.limit)});var m=0;return ur(d,function(){return++m,!1},u,p).then(function(){return m})}).then(i)},fe.prototype.sortBy=function(i,a){var u=i.split(".").reverse(),d=u[0],p=u.length-1;function m(S,C){return C?m(S[u[C]],C-1):S[d]}var b=this._ctx.dir==="next"?1:-1;function x(S,C){return de(m(S,p),m(C,p))*b}return this.toArray(function(S){return S.sort(x)}).then(a)},fe.prototype.toArray=function(i){var a=this;return this._read(function(u){var d=a._ctx;if(d.dir==="next"&&Ht(d,!0)&&0<d.limit){var p=d.valueMapper,m=lr(d,d.table.core.schema);return d.table.core.query({trans:u,limit:d.limit,values:!0,query:{index:m,range:d.range}}).then(function(x){return x=x.result,p?x.map(p):x})}var b=[];return ur(d,function(x){return b.push(x)},u,d.table.core).then(function(){return b})},i)},fe.prototype.offset=function(i){var a=this._ctx;return i<=0||(a.offset+=i,Ht(a)?di(a,function(){var u=i;return function(d,p){return u===0||(u===1?--u:p(function(){d.advance(u),u=0}),!1)}}):di(a,function(){var u=i;return function(){return--u<0}})),this},fe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),di(this._ctx,function(){var a=i;return function(u,d,p){return--a<=0&&d(p),0<=a}},!0),this},fe.prototype.until=function(i,a){return ci(this._ctx,function(u,d,p){return!i(u.value)||(d(p),a)}),this},fe.prototype.first=function(i){return this.limit(1).toArray(function(a){return a[0]}).then(i)},fe.prototype.last=function(i){return this.reverse().first(i)},fe.prototype.filter=function(i){var a;return ci(this._ctx,function(u){return i(u.value)}),(a=this._ctx).isMatch=Dt(a.isMatch,i),this},fe.prototype.and=function(i){return this.filter(i)},fe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},fe.prototype.desc=function(){return this.reverse()},fe.prototype.eachKey=function(i){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(u,d){i(d.key,d)})},fe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},fe.prototype.eachPrimaryKey=function(i){var a=this._ctx;return a.keysOnly=!a.isMatch,this.each(function(u,d){i(d.primaryKey,d)})},fe.prototype.keys=function(i){var a=this._ctx;a.keysOnly=!a.isMatch;var u=[];return this.each(function(d,p){u.push(p.key)}).then(function(){return u}).then(i)},fe.prototype.primaryKeys=function(i){var a=this._ctx;if(a.dir==="next"&&Ht(a,!0)&&0<a.limit)return this._read(function(d){var p=lr(a,a.table.core.schema);return a.table.core.query({trans:d,values:!1,limit:a.limit,query:{index:p,range:a.range}})}).then(function(d){return d.result}).then(i);a.keysOnly=!a.isMatch;var u=[];return this.each(function(d,p){u.push(p.primaryKey)}).then(function(){return u}).then(i)},fe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},fe.prototype.firstKey=function(i){return this.limit(1).keys(function(a){return a[0]}).then(i)},fe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},fe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var a={};return ci(this._ctx,function(p){var d=p.primaryKey.toString(),p=v(a,d);return a[d]=!0,!p}),this},fe.prototype.modify=function(i){var a=this,u=this._ctx;return this._write(function(d){var p=typeof i=="function"?i:function(E){return pa(E,i)},m=u.table.core,C=m.schema.primaryKey,b=C.outbound,x=C.extractKey,S=200,C=a.db._options.modifyChunkSize;C&&(S=typeof C=="object"?C[m.name]||C["*"]||200:C);function j(E,M){var N=M.failures,M=M.numFailures;R+=E-M;for(var V=0,B=l(N);V<B.length;V++){var U=B[V];w.push(N[U])}}var w=[],R=0,k=[],D=i===va;return a.clone().primaryKeys().then(function(E){function O(M){var V=Math.min(S,E.length-M),B=E.slice(M,M+V);return(D?Promise.resolve([]):m.getMany({trans:d,keys:B,cache:"immutable"})).then(function(U){var Y=[],$=[],z=b?[]:null,X=D?B:[];if(!D)for(var G=0;G<V;++G){var Z=U[G],le={value:Ie(Z),primKey:E[M+G]};p.call(le,le.value,le)!==!1&&(le.value==null?X.push(E[M+G]):b||de(x(Z),x(le.value))===0?($.push(le.value),b&&z.push(E[M+G])):(X.push(E[M+G]),Y.push(le.value)))}return Promise.resolve(0<Y.length&&m.mutate({trans:d,type:"add",values:Y}).then(function(ue){for(var ce in ue.failures)X.splice(parseInt(ce),1);j(Y.length,ue)})).then(function(){return(0<$.length||N&&typeof i=="object")&&m.mutate({trans:d,type:"put",keys:z,values:$,criteria:N,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<M}).then(function(ue){return j($.length,ue)})}).then(function(){return(0<X.length||N&&D)&&m.mutate({trans:d,type:"delete",keys:X,criteria:N,isAdditionalChunk:0<M}).then(function(ue){return or(u.table,X,ue)}).then(function(ue){return j(X.length,ue)})}).then(function(){return E.length>M+V&&O(M+S)})})}var N=Ht(u)&&u.limit===1/0&&(typeof i!="function"||D)&&{index:u.index,range:u.range};return O(0).then(function(){if(0<w.length)throw new Yn("Error modifying one or more objects",w,R,k);return E.length})})})},fe.prototype.delete=function(){var i=this._ctx,a=i.range;return!Ht(i)||i.table.schema.yProps||!i.isPrimKey&&a.type!==3?this.modify(va):this._write(function(u){var d=i.table.core.schema.primaryKey,p=a;return i.table.core.count({trans:u,query:{index:d,range:p}}).then(function(m){return i.table.core.mutate({trans:u,type:"deleteRange",range:p}).then(function(S){var x=S.failures,S=S.numFailures;if(S)throw new Yn("Could not delete some values",Object.keys(x).map(function(C){return x[C]}),m-S);return m-S})})})},fe);function fe(){}var va=function(i,a){return a.value=null};function Oc(i,a){return i<a?-1:i===a?0:1}function Rc(i,a){return a<i?-1:i===a?0:1}function Ke(i,a,u){return i=i instanceof xa?new i.Collection(i):i,i._ctx.error=new(u||TypeError)(a),i}function zt(i){return new i.Collection(i,function(){return ba("")}).limit(0)}function cr(i,a,u,d){var p,m,b,x,S,C,j,w=u.length;if(!u.every(function(D){return typeof D=="string"}))return Ke(i,la);function R(D){p=D==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},m=D==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},b=D==="next"?Oc:Rc;var E=u.map(function(O){return{lower:m(O),upper:p(O)}}).sort(function(O,N){return b(O.lower,N.lower)});x=E.map(function(O){return O.upper}),S=E.map(function(O){return O.lower}),j=(C=D)==="next"?"":d}R("next"),i=new i.Collection(i,function(){return ht(x[0],S[w-1]+d)}),i._ondirectionchange=function(D){R(D)};var k=0;return i._addAlgorithm(function(D,E,O){var N=D.key;if(typeof N!="string")return!1;var M=m(N);if(a(M,S,k))return!0;for(var V=null,B=k;B<w;++B){var U=function(Y,$,z,X,G,Z){for(var le=Math.min(Y.length,X.length),ue=-1,ce=0;ce<le;++ce){var $e=$[ce];if($e!==X[ce])return G(Y[ce],z[ce])<0?Y.substr(0,ce)+z[ce]+z.substr(ce+1):G(Y[ce],X[ce])<0?Y.substr(0,ce)+X[ce]+z.substr(ce+1):0<=ue?Y.substr(0,ue)+$[ue]+z.substr(ue+1):null;G(Y[ce],$e)<0&&(ue=ce)}return le<X.length&&Z==="next"?Y+z.substr(Y.length):le<Y.length&&Z==="prev"?Y.substr(0,z.length):ue<0?null:Y.substr(0,ue)+X[ue]+z.substr(ue+1)}(N,M,x[B],S[B],b,C);U===null&&V===null?k=B+1:(V===null||0<b(V,U))&&(V=U)}return E(V!==null?function(){D.continue(V+j)}:O),!1}),i}function ht(i,a,u,d){return{type:2,lower:i,upper:a,lowerOpen:u,upperOpen:d}}function ba(i){return{type:1,lower:i,upper:i}}var xa=(Object.defineProperty(je.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),je.prototype.between=function(i,a,u,d){u=u!==!1,d=d===!0;try{return 0<this._cmp(i,a)||this._cmp(i,a)===0&&(u||d)&&(!u||!d)?zt(this):new this.Collection(this,function(){return ht(i,a,!u,!d)})}catch{return Ke(this,it)}},je.prototype.equals=function(i){return i==null?Ke(this,it):new this.Collection(this,function(){return ba(i)})},je.prototype.above=function(i){return i==null?Ke(this,it):new this.Collection(this,function(){return ht(i,void 0,!0)})},je.prototype.aboveOrEqual=function(i){return i==null?Ke(this,it):new this.Collection(this,function(){return ht(i,void 0,!1)})},je.prototype.below=function(i){return i==null?Ke(this,it):new this.Collection(this,function(){return ht(void 0,i,!1,!0)})},je.prototype.belowOrEqual=function(i){return i==null?Ke(this,it):new this.Collection(this,function(){return ht(void 0,i)})},je.prototype.startsWith=function(i){return typeof i!="string"?Ke(this,la):this.between(i,i+Pt,!0,!0)},je.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):cr(this,function(a,u){return a.indexOf(u[0])===0},[i],Pt)},je.prototype.equalsIgnoreCase=function(i){return cr(this,function(a,u){return a===u[0]},[i],"")},je.prototype.anyOfIgnoreCase=function(){var i=De.apply(Ee,arguments);return i.length===0?zt(this):cr(this,function(a,u){return u.indexOf(a)!==-1},i,"")},je.prototype.startsWithAnyOfIgnoreCase=function(){var i=De.apply(Ee,arguments);return i.length===0?zt(this):cr(this,function(a,u){return u.some(function(d){return a.indexOf(d)===0})},i,Pt)},je.prototype.anyOf=function(){var i=this,a=De.apply(Ee,arguments),u=this._cmp;try{a.sort(u)}catch{return Ke(this,it)}if(a.length===0)return zt(this);var d=new this.Collection(this,function(){return ht(a[0],a[a.length-1])});d._ondirectionchange=function(m){u=m==="next"?i._ascending:i._descending,a.sort(u)};var p=0;return d._addAlgorithm(function(m,b,x){for(var S=m.key;0<u(S,a[p]);)if(++p===a.length)return b(x),!1;return u(S,a[p])===0||(b(function(){m.continue(a[p])}),!1)}),d},je.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},je.prototype.noneOf=function(){var i=De.apply(Ee,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Ke(this,it)}var a=i.reduce(function(u,d){return u?u.concat([[u[u.length-1][1],d]]):[[-1/0,d]]},null);return a.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(a,{includeLowers:!1,includeUppers:!1})},je.prototype.inAnyRange=function(N,a){var u=this,d=this._cmp,p=this._ascending,m=this._descending,b=this._min,x=this._max;if(N.length===0)return zt(this);if(!N.every(function(M){return M[0]!==void 0&&M[1]!==void 0&&p(M[0],M[1])<=0}))return Ke(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var S=!a||a.includeLowers!==!1,C=a&&a.includeUppers===!0,j,w=p;function R(M,V){return w(M[0],V[0])}try{(j=N.reduce(function(M,V){for(var B=0,U=M.length;B<U;++B){var Y=M[B];if(d(V[0],Y[1])<0&&0<d(V[1],Y[0])){Y[0]=b(Y[0],V[0]),Y[1]=x(Y[1],V[1]);break}}return B===U&&M.push(V),M},[])).sort(R)}catch{return Ke(this,it)}var k=0,D=C?function(M){return 0<p(M,j[k][1])}:function(M){return 0<=p(M,j[k][1])},E=S?function(M){return 0<m(M,j[k][0])}:function(M){return 0<=m(M,j[k][0])},O=D,N=new this.Collection(this,function(){return ht(j[0][0],j[j.length-1][1],!S,!C)});return N._ondirectionchange=function(M){w=M==="next"?(O=D,p):(O=E,m),j.sort(R)},N._addAlgorithm(function(M,V,B){for(var U,Y=M.key;O(Y);)if(++k===j.length)return V(B),!1;return!D(U=Y)&&!E(U)||(u._cmp(Y,j[k][1])===0||u._cmp(Y,j[k][0])===0||V(function(){w===p?M.continue(j[k][0]):M.continue(j[k][1])}),!1)}),N},je.prototype.startsWithAnyOf=function(){var i=De.apply(Ee,arguments);return i.every(function(a){return typeof a=="string"})?i.length===0?zt(this):this.inAnyRange(i.map(function(a){return[a,a+Pt]})):Ke(this,"startsWithAnyOf() only works with strings")},je);function je(){}function Qe(i){return ve(function(a){return xn(a),i(a.target.error),!1})}function xn(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var wn="storagemutated",fi="x-storagemutated-1",pt=vn(null,wn),Nc=(Ze.prototype._lock=function(){return H(!ne.global),++this._reculock,this._reculock!==1||ne.global||(ne.lockOwnerFor=this),this},Ze.prototype._unlock=function(){if(H(!ne.global),--this._reculock==0)for(ne.global||(ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{kt(i[1],i[0])}catch{}}return this},Ze.prototype._locked=function(){return this._reculock&&ne.lockOwnerFor!==this},Ze.prototype.create=function(i){var a=this;if(!this.mode)return this;var u=this.db.idbdb,d=this.db._state.dbOpenError;if(H(!this.idbtrans),!i&&!u)switch(d&&d.name){case"DatabaseClosedError":throw new re.DatabaseClosed(d);case"MissingAPIError":throw new re.MissingAPI(d.message,d);default:throw new re.OpenFailed(d)}if(!this.active)throw new re.TransactionInactive;return H(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ve(function(p){xn(p),a._reject(i.error)}),i.onabort=ve(function(p){xn(p),a.active&&a._reject(new re.Abort(i.error)),a.active=!1,a.on("abort").fire(p)}),i.oncomplete=ve(function(){a.active=!1,a._resolve(),"mutatedParts"in i&&pt.storagemutated.fire(i.mutatedParts)}),this},Ze.prototype._promise=function(i,a,u){var d=this;if(i==="readwrite"&&this.mode!=="readwrite")return Se(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Se(new re.TransactionInactive);if(this._locked())return new J(function(m,b){d._blockedFuncs.push([function(){d._promise(i,a,u).then(m,b)},ne])});if(u)return ct(function(){var m=new J(function(b,x){d._lock();var S=a(b,x,d);S&&S.then&&S.then(b,x)});return m.finally(function(){return d._unlock()}),m._lib=!0,m});var p=new J(function(m,b){var x=a(m,b,d);x&&x.then&&x.then(m,b)});return p._lib=!0,p},Ze.prototype._root=function(){return this.parent?this.parent._root():this},Ze.prototype.waitFor=function(i){var a,u=this._root(),d=J.resolve(i);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return d}):(u._waitingFor=d,u._waitingQueue=[],a=u.idbtrans.objectStore(u.storeNames[0]),function m(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(a.get(-1/0).onsuccess=m)}());var p=u._waitingFor;return new J(function(m,b){d.then(function(x){return u._waitingQueue.push(ve(m.bind(null,x)))},function(x){return u._waitingQueue.push(ve(b.bind(null,x)))}).finally(function(){u._waitingFor===p&&(u._waitingFor=null)})})},Ze.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},Ze.prototype.table=function(i){var a=this._memoizedTables||(this._memoizedTables={});if(v(a,i))return a[i];var u=this.schema[i];if(!u)throw new re.NotFound("Table "+i+" not part of transaction");return u=new this.db.Table(i,u,this),u.core=this.db.core.table(i),a[i]=u},Ze);function Ze(){}function hi(i,a,u,d,p,m,b,x){return{name:i,keyPath:a,unique:u,multi:d,auto:p,compound:m,src:(u&&!b?"&":"")+(d?"*":"")+(p?"++":"")+wa(a),type:x}}function wa(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function pi(i,a,u){return{name:i,primKey:a,indexes:u,mappedClass:null,idxByName:(d=function(p){return[p.name,p]},u.reduce(function(p,m,b){return b=d(m,b),b&&(p[b[0]]=b[1]),p},{}))};var d}var Sn=function(i){try{return i.only([[]]),Sn=function(){return[[]]},[[]]}catch{return Sn=function(){return Pt},Pt}};function mi(i){return i==null?function(){}:typeof i=="string"?(a=i).split(".").length===1?function(u){return u[a]}:function(u){return Q(u,a)}:function(u){return Q(u,i)};var a}function Sa(i){return[].slice.call(i)}var _c=0;function An(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function Lc(i,a,S){function d(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var k=O.lower,D=O.upper,E=O.lowerOpen,O=O.upperOpen;return k===void 0?D===void 0?null:a.upperBound(D,!!O):D===void 0?a.lowerBound(k,!!E):a.bound(k,D,!!E,!!O)}function p(R){var k,D=R.name;return{name:D,schema:R,mutate:function(E){var O=E.trans,N=E.type,M=E.keys,V=E.values,B=E.range;return new Promise(function(U,Y){U=ve(U);var $=O.objectStore(D),z=$.keyPath==null,X=N==="put"||N==="add";if(!X&&N!=="delete"&&N!=="deleteRange")throw new Error("Invalid operation type: "+N);var G,Z=(M||V||{length:1}).length;if(M&&V&&M.length!==V.length)throw new Error("Given keys array must have same length as given values array.");if(Z===0)return U({numFailures:0,failures:{},results:[],lastResult:void 0});function le(Fe){++$e,xn(Fe)}var ue=[],ce=[],$e=0;if(N==="deleteRange"){if(B.type===4)return U({numFailures:$e,failures:ce,results:[],lastResult:void 0});B.type===3?ue.push(G=$.clear()):ue.push(G=$.delete(d(B)))}else{var z=X?z?[V,M]:[V,null]:[M,null],oe=z[0],_e=z[1];if(X)for(var Le=0;Le<Z;++Le)ue.push(G=_e&&_e[Le]!==void 0?$[N](oe[Le],_e[Le]):$[N](oe[Le])),G.onerror=le;else for(Le=0;Le<Z;++Le)ue.push(G=$[N](oe[Le])),G.onerror=le}function Sr(Fe){Fe=Fe.target.result,ue.forEach(function(jt,Ni){return jt.error!=null&&(ce[Ni]=jt.error)}),U({numFailures:$e,failures:ce,results:N==="delete"?M:ue.map(function(jt){return jt.result}),lastResult:Fe})}G.onerror=function(Fe){le(Fe),Sr(Fe)},G.onsuccess=Sr})},getMany:function(E){var O=E.trans,N=E.keys;return new Promise(function(M,V){M=ve(M);for(var B,U=O.objectStore(D),Y=N.length,$=new Array(Y),z=0,X=0,G=function(ue){ue=ue.target,$[ue._pos]=ue.result,++X===z&&M($)},Z=Qe(V),le=0;le<Y;++le)N[le]!=null&&((B=U.get(N[le]))._pos=le,B.onsuccess=G,B.onerror=Z,++z);z===0&&M($)})},get:function(E){var O=E.trans,N=E.key;return new Promise(function(M,V){M=ve(M);var B=O.objectStore(D).get(N);B.onsuccess=function(U){return M(U.target.result)},B.onerror=Qe(V)})},query:(k=C,function(E){return new Promise(function(O,N){O=ve(O);var M,V,B,z=E.trans,U=E.values,Y=E.limit,G=E.query,$=Y===1/0?void 0:Y,X=G.index,G=G.range,z=z.objectStore(D),X=X.isPrimaryKey?z:z.index(X.name),G=d(G);if(Y===0)return O({result:[]});k?(($=U?X.getAll(G,$):X.getAllKeys(G,$)).onsuccess=function(Z){return O({result:Z.target.result})},$.onerror=Qe(N)):(M=0,V=!U&&"openKeyCursor"in X?X.openKeyCursor(G):X.openCursor(G),B=[],V.onsuccess=function(Z){var le=V.result;return le?(B.push(U?le.value:le.primaryKey),++M===Y?O({result:B}):void le.continue()):O({result:B})},V.onerror=Qe(N))})}),openCursor:function(E){var O=E.trans,N=E.values,M=E.query,V=E.reverse,B=E.unique;return new Promise(function(U,Y){U=ve(U);var X=M.index,$=M.range,z=O.objectStore(D),z=X.isPrimaryKey?z:z.index(X.name),X=V?B?"prevunique":"prev":B?"nextunique":"next",G=!N&&"openKeyCursor"in z?z.openKeyCursor(d($),X):z.openCursor(d($),X);G.onerror=Qe(Y),G.onsuccess=ve(function(Z){var le,ue,ce,$e,oe=G.result;oe?(oe.___id=++_c,oe.done=!1,le=oe.continue.bind(oe),ue=(ue=oe.continuePrimaryKey)&&ue.bind(oe),ce=oe.advance.bind(oe),$e=function(){throw new Error("Cursor not stopped")},oe.trans=O,oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=function(){throw new Error("Cursor not started")},oe.fail=ve(Y),oe.next=function(){var _e=this,Le=1;return this.start(function(){return Le--?_e.continue():_e.stop()}).then(function(){return _e})},oe.start=function(_e){function Le(){if(G.result)try{_e()}catch(Fe){oe.fail(Fe)}else oe.done=!0,oe.start=function(){throw new Error("Cursor behind last entry")},oe.stop()}var Sr=new Promise(function(Fe,jt){Fe=ve(Fe),G.onerror=Qe(jt),oe.fail=jt,oe.stop=function(Ni){oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=$e,Fe(Ni)}});return G.onsuccess=ve(function(Fe){G.onsuccess=Le,Le()}),oe.continue=le,oe.continuePrimaryKey=ue,oe.advance=ce,Le(),Sr},U(oe)):U(null)},Y)})},count:function(E){var O=E.query,N=E.trans,M=O.index,V=O.range;return new Promise(function(B,U){var Y=N.objectStore(D),$=M.isPrimaryKey?Y:Y.index(M.name),Y=d(V),$=Y?$.count(Y):$.count();$.onsuccess=ve(function(z){return B(z.target.result)}),$.onerror=Qe(U)})}}}var m,b,x,j=(b=S,x=Sa((m=i).objectStoreNames),{schema:{name:m.name,tables:x.map(function(R){return b.objectStore(R)}).map(function(R){var k=R.keyPath,O=R.autoIncrement,D=c(k),E={},O={name:R.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:k==null,compound:D,keyPath:k,autoIncrement:O,unique:!0,extractKey:mi(k)},indexes:Sa(R.indexNames).map(function(N){return R.index(N)}).map(function(B){var M=B.name,V=B.unique,U=B.multiEntry,B=B.keyPath,U={name:M,compound:c(B),keyPath:B,unique:V,multiEntry:U,extractKey:mi(B)};return E[An(B)]=U}),getIndexByKeyPath:function(N){return E[An(N)]}};return E[":id"]=O.primaryKey,k!=null&&(E[An(k)]=O.primaryKey),O})},hasGetAll:0<x.length&&"getAll"in b.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=j.schema,C=j.hasGetAll,j=S.tables.map(p),w={};return j.forEach(function(R){return w[R.name]=R}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(R){if(!w[R])throw new Error("Table '".concat(R,"' not found"));return w[R]},MIN_KEY:-1/0,MAX_KEY:Sn(a),schema:S}}function Mc(i,a,u,d){var p=u.IDBKeyRange;return u.indexedDB,{dbcore:(d=Lc(a,p,d),i.dbcore.reduce(function(m,b){return b=b.create,r(r({},m),b(m))},d))}}function dr(i,d){var u=d.db,d=Mc(i._middlewares,u,i._deps,d);i.core=d.dbcore,i.tables.forEach(function(p){var m=p.name;i.core.schema.tables.some(function(b){return b.name===m})&&(p.core=i.core.table(m),i[m]instanceof i.Table&&(i[m].core=p.core))})}function fr(i,a,u,d){u.forEach(function(p){var m=d[p];a.forEach(function(b){var x=function S(C,j){return T(C,j)||(C=h(C))&&S(C,j)}(b,p);(!x||"value"in x&&x.value===void 0)&&(b===i.Transaction.prototype||b instanceof i.Transaction?_(b,p,{get:function(){return this.table(p)},set:function(S){A(this,p,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):b[p]=new i.Table(p,m))})})}function gi(i,a){a.forEach(function(u){for(var d in u)u[d]instanceof i.Table&&delete u[d]})}function Vc(i,a){return i._cfg.version-a._cfg.version}function Ic(i,a,u,d){var p=i._dbSchema;u.objectStoreNames.contains("$meta")&&!p.$meta&&(p.$meta=pi("$meta",Ca("")[0],[]),i._storeNames.push("$meta"));var m=i._createTransaction("readwrite",i._storeNames,p);m.create(u),m._completion.catch(d);var b=m._reject.bind(m),x=ne.transless||ne;ct(function(){return ne.trans=m,ne.transless=x,a!==0?(dr(i,u),C=a,((S=m).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(j){return j??C}):J.resolve(C)).then(function(j){return R=j,k=m,D=u,E=[],j=(w=i)._versions,O=w._dbSchema=pr(0,w.idbdb,D),(j=j.filter(function(N){return N._cfg.version>=R})).length!==0?(j.forEach(function(N){E.push(function(){var M=O,V=N._cfg.dbschema;mr(w,M,D),mr(w,V,D),O=w._dbSchema=V;var B=yi(M,V);B.add.forEach(function(X){vi(D,X[0],X[1].primKey,X[1].indexes)}),B.change.forEach(function(X){if(X.recreate)throw new re.Upgrade("Not yet support for changing primary key");var G=D.objectStore(X.name);X.add.forEach(function(Z){return hr(G,Z)}),X.change.forEach(function(Z){G.deleteIndex(Z.name),hr(G,Z)}),X.del.forEach(function(Z){return G.deleteIndex(Z)})});var U=N._cfg.contentUpgrade;if(U&&N._cfg.version>R){dr(w,D),k._memoizedTables={};var Y=ie(V);B.del.forEach(function(X){Y[X]=M[X]}),gi(w,[w.Transaction.prototype]),fr(w,[w.Transaction.prototype],l(Y),Y),k.schema=Y;var $,z=It(U);return z&&qt(),B=J.follow(function(){var X;($=U(k))&&z&&(X=dt.bind(null,null),$.then(X,X))}),$&&typeof $.then=="function"?J.resolve($):B.then(function(){return $})}}),E.push(function(M){var V,B,U=N._cfg.dbschema;V=U,B=M,[].slice.call(B.db.objectStoreNames).forEach(function(Y){return V[Y]==null&&B.db.deleteObjectStore(Y)}),gi(w,[w.Transaction.prototype]),fr(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),k.schema=w._dbSchema}),E.push(function(M){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===N._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(V){return V!=="$meta"})):M.objectStore("$meta").put(N._cfg.version,"version"))})}),function N(){return E.length?J.resolve(E.shift()(k.idbtrans)).then(N):J.resolve()}().then(function(){Aa(O,D)})):J.resolve();var w,R,k,D,E,O}).catch(b)):(l(p).forEach(function(j){vi(u,j,p[j].primKey,p[j].indexes)}),dr(i,u),void J.follow(function(){return i.on.populate.fire(m)}).catch(b));var S,C})}function Fc(i,a){Aa(i._dbSchema,a),a.db.version%10!=0||a.objectStoreNames.contains("$meta")||a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var u=pr(0,i.idbdb,a);mr(i,i._dbSchema,a);for(var d=0,p=yi(u,i._dbSchema).change;d<p.length;d++){var m=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=a.objectStore(b.name);b.add.forEach(function(S){Je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(S.src)),hr(x,S)})}(p[d]);if(typeof m=="object")return m.value}}function yi(i,a){var u,d={del:[],add:[],change:[]};for(u in i)a[u]||d.del.push(u);for(u in a){var p=i[u],m=a[u];if(p){var b={name:u,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(p.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||p.primKey.auto!==m.primKey.auto)b.recreate=!0,d.change.push(b);else{var x=p.idxByName,S=m.idxByName,C=void 0;for(C in x)S[C]||b.del.push(C);for(C in S){var j=x[C],w=S[C];j?j.src!==w.src&&b.change.push(w):b.add.push(w)}(0<b.del.length||0<b.add.length||0<b.change.length)&&d.change.push(b)}}else d.add.push([u,m])}return d}function vi(i,a,u,d){var p=i.db.createObjectStore(a,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return d.forEach(function(m){return hr(p,m)}),p}function Aa(i,a){l(i).forEach(function(u){a.db.objectStoreNames.contains(u)||(Je&&console.debug("Dexie: Creating missing table",u),vi(a,u,i[u].primKey,i[u].indexes))})}function hr(i,a){i.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function pr(i,a,u){var d={};return I(a.objectStoreNames,0).forEach(function(p){for(var m=u.objectStore(p),b=hi(wa(C=m.keyPath),C||"",!0,!1,!!m.autoIncrement,C&&typeof C!="string",!0),x=[],S=0;S<m.indexNames.length;++S){var j=m.index(m.indexNames[S]),C=j.keyPath,j=hi(j.name,C,!!j.unique,!!j.multiEntry,!1,C&&typeof C!="string",!1);x.push(j)}d[p]=pi(p,b,x)}),d}function mr(i,a,u){for(var d=u.db.objectStoreNames,p=0;p<d.length;++p){var m=d[p],b=u.objectStore(m);i._hasGetAll="getAll"in b;for(var x=0;x<b.indexNames.length;++x){var S=b.indexNames[x],C=b.index(S).keyPath,j=typeof C=="string"?C:"["+I(C).join("+")+"]";!a[m]||(C=a[m].idxByName[j])&&(C.name=S,delete a[m].idxByName[j],a[m].idxByName[S]=C)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function Ca(i){return i.split(",").map(function(a,u){var m=a.split(":"),d=(p=m[1])===null||p===void 0?void 0:p.trim(),p=(a=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return hi(p,m||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),c(m),u===0,d)})}var Bc=(Wt.prototype._createTableSchema=pi,Wt.prototype._parseIndexSyntax=Ca,Wt.prototype._parseStoresSpec=function(i,a){var u=this;l(i).forEach(function(d){if(i[d]!==null){var p=u._parseIndexSyntax(i[d]),m=p.shift();if(!m)throw new re.Schema("Invalid schema for table "+d+": "+i[d]);if(m.unique=!0,m.multi)throw new re.Schema("Primary key cannot be multiEntry*");p.forEach(function(b){if(b.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),p=u._createTableSchema(d,m,p),a[d]=p}})},Wt.prototype.stores=function(u){var a=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,u):u;var u=a._versions,d={},p={};return u.forEach(function(m){f(d,m._cfg.storesSource),p=m._cfg.dbschema={},m._parseStoresSpec(d,p)}),a._dbSchema=p,gi(a,[a._allTables,a,a.Transaction.prototype]),fr(a,[a._allTables,a,a.Transaction.prototype,this._cfg.tables],l(p),p),a._storeNames=l(p),this},Wt.prototype.upgrade=function(i){return this._cfg.contentUpgrade=Zr(this._cfg.contentUpgrade||me,i),this},Wt);function Wt(){}function bi(i,a){var u=i._dbNamesDB;return u||(u=i._dbNamesDB=new st(sr,{addons:[],indexedDB:i,IDBKeyRange:a})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function xi(i){return i&&typeof i.databases=="function"}function wi(i){return ct(function(){return ne.letThrough=!0,i()})}function Si(i){return!("from"in i)}var Ne=function(i,a){if(!this){var u=new Ne;return i&&"d"in i&&f(u,i),u}f(this,arguments.length?{d:1,from:i,to:1<arguments.length?a:i}:{d:0})};function Cn(i,a,u){var d=de(a,u);if(!isNaN(d)){if(0<d)throw RangeError();if(Si(i))return f(i,{from:a,to:u,d:1});var p=i.l,d=i.r;if(de(u,i.from)<0)return p?Cn(p,a,u):i.l={from:a,to:u,d:1,l:null,r:null},Pa(i);if(0<de(a,i.to))return d?Cn(d,a,u):i.r={from:a,to:u,d:1,l:null,r:null},Pa(i);de(a,i.from)<0&&(i.from=a,i.l=null,i.d=d?d.d+1:1),0<de(u,i.to)&&(i.to=u,i.r=null,i.d=i.l?i.l.d+1:1),u=!i.r,p&&!i.l&&kn(i,p),d&&u&&kn(i,d)}}function kn(i,a){Si(a)||function u(d,S){var m=S.from,b=S.to,x=S.l,S=S.r;Cn(d,m,b),x&&u(d,x),S&&u(d,S)}(i,a)}function ka(i,a){var u=gr(a),d=u.next();if(d.done)return!1;for(var p=d.value,m=gr(i),b=m.next(p.from),x=b.value;!d.done&&!b.done;){if(de(x.from,p.to)<=0&&0<=de(x.to,p.from))return!0;de(p.from,x.from)<0?p=(d=u.next(x.from)).value:x=(b=m.next(p.from)).value}return!1}function gr(i){var a=Si(i)?null:{s:0,n:i};return{next:function(u){for(var d=0<arguments.length;a;)switch(a.s){case 0:if(a.s=1,d)for(;a.n.l&&de(u,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!d||de(u,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function Pa(i){var a,u,d=(((a=i.r)===null||a===void 0?void 0:a.d)||0)-(((u=i.l)===null||u===void 0?void 0:u.d)||0),p=1<d?"r":d<-1?"l":"";p&&(a=p=="r"?"l":"r",u=r({},i),d=i[p],i.from=d.from,i.to=d.to,i[p]=d[p],u[p]=d[a],(i[a]=u).d=Da(u)),i.d=Da(i)}function Da(u){var a=u.r,u=u.l;return(a?u?Math.max(a.d,u.d):a.d:u?u.d:0)+1}function yr(i,a){return l(a).forEach(function(u){i[u]?kn(i[u],a[u]):i[u]=function d(p){var m,b,x={};for(m in p)v(p,m)&&(b=p[m],x[m]=!b||typeof b!="object"||xe.has(b.constructor)?b:d(b));return x}(a[u])}),i}function Ai(i,a){return i.all||a.all||Object.keys(i).some(function(u){return a[u]&&ka(a[u],i[u])})}y(Ne.prototype,((He={add:function(i){return kn(this,i),this},addKey:function(i){return Cn(this,i,i),this},addKeys:function(i){var a=this;return i.forEach(function(u){return Cn(a,u,u)}),this},hasKey:function(i){var a=gr(this).next(i).value;return a&&de(a.from,i)<=0&&0<=de(a.to,i)}})[rt]=function(){return gr(this)},He));var Et={},Ci={},ki=!1;function vr(i){yr(Ci,i),ki||(ki=!0,setTimeout(function(){ki=!1,Pi(Ci,!(Ci={}))},0))}function Pi(i,a){a===void 0&&(a=!1);var u=new Set;if(i.all)for(var d=0,p=Object.values(Et);d<p.length;d++)Ea(b=p[d],i,u,a);else for(var m in i){var b,x=/^idb\:\/\/(.*)\/(.*)\//.exec(m);x&&(m=x[1],x=x[2],(b=Et["idb://".concat(m,"/").concat(x)])&&Ea(b,i,u,a))}u.forEach(function(S){return S()})}function Ea(i,a,u,d){for(var p=[],m=0,b=Object.entries(i.queries.query);m<b.length;m++){for(var x=b[m],S=x[0],C=[],j=0,w=x[1];j<w.length;j++){var R=w[j];Ai(a,R.obsSet)?R.subscribers.forEach(function(O){return u.add(O)}):d&&C.push(R)}d&&p.push([S,C])}if(d)for(var k=0,D=p;k<D.length;k++){var E=D[k],S=E[0],C=E[1];i.queries.query[S]=C}}function Kc(i){var a=i._state,u=i._deps.indexedDB;if(a.isBeingOpened||i.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?Se(a.dbOpenError):i});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var d=a.openCanceller,p=Math.round(10*i.verno),m=!1;function b(){if(a.openCanceller!==d)throw new re.DatabaseClosed("db.open() was cancelled")}function x(){return new J(function(R,k){if(b(),!u)throw new re.MissingAPI;var D=i.name,E=a.autoSchema||!p?u.open(D):u.open(D,p);if(!E)throw new re.MissingAPI;E.onerror=Qe(k),E.onblocked=ve(i._fireOnBlocked),E.onupgradeneeded=ve(function(O){var N;j=E.transaction,a.autoSchema&&!i._options.allowEmptyDB?(E.onerror=xn,j.abort(),E.result.close(),(N=u.deleteDatabase(D)).onsuccess=N.onerror=ve(function(){k(new re.NoSuchDatabase("Database ".concat(D," doesnt exist")))})):(j.onerror=Qe(k),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,w=O<1,i.idbdb=E.result,m&&Fc(i,j),Ic(i,O/10,j,k))},k),E.onsuccess=ve(function(){j=null;var O,N,M,V,B,U=i.idbdb=E.result,Y=I(U.objectStoreNames);if(0<Y.length)try{var $=U.transaction((V=Y).length===1?V[0]:V,"readonly");if(a.autoSchema)N=U,M=$,(O=i).verno=N.version/10,M=O._dbSchema=pr(0,N,M),O._storeNames=I(N.objectStoreNames,0),fr(O,[O._allTables],l(M),M);else if(mr(i,i._dbSchema,$),((B=yi(pr(0,(B=i).idbdb,$),B._dbSchema)).add.length||B.change.some(function(z){return z.add.length||z.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),U.close(),p=U.version+1,m=!0,R(x());dr(i,$)}catch{}Ut.push(i),U.onversionchange=ve(function(z){a.vcFired=!0,i.on("versionchange").fire(z)}),U.onclose=ve(function(){i.close({disableAutoOpen:!1})}),w&&(B=i._deps,$=D,U=B.indexedDB,B=B.IDBKeyRange,xi(U)||$===sr||bi(U,B).put({name:$}).catch(me)),R()},k)}).catch(function(R){switch(R==null?void 0:R.name){case"UnknownError":if(0<a.PR1398_maxLoop)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<p)return p=0,x()}return J.reject(R)})}var S,C=a.dbReadyResolve,j=null,w=!1;return J.race([d,(typeof navigator>"u"?J.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(R){function k(){return indexedDB.databases().finally(R)}S=setInterval(k,100),k()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(x)]).then(function(){return b(),a.onReadyBeingFired=[],J.resolve(wi(function(){return i.on.ready.fire(i.vip)})).then(function R(){if(0<a.onReadyBeingFired.length){var k=a.onReadyBeingFired.reduce(Zr,me);return a.onReadyBeingFired=[],J.resolve(wi(function(){return k(i.vip)})).then(R)}})}).finally(function(){a.openCanceller===d&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(R){a.dbOpenError=R;try{j&&j.abort()}catch{}return d===a.openCanceller&&i._close(),Se(R)}).finally(function(){a.openComplete=!0,C()}).then(function(){var R;return w&&(R={},i.tables.forEach(function(k){k.schema.indexes.forEach(function(D){D.name&&(R["idb://".concat(i.name,"/").concat(k.name,"/").concat(D.name)]=new Ne(-1/0,[[[]]]))}),R["idb://".concat(i.name,"/").concat(k.name,"/")]=R["idb://".concat(i.name,"/").concat(k.name,"/:dels")]=new Ne(-1/0,[[[]]])}),pt(wn).fire(R),Pi(R,!0)),i})}function Di(i){function a(m){return i.next(m)}var u=p(a),d=p(function(m){return i.throw(m)});function p(m){return function(S){var x=m(S),S=x.value;return x.done?S:S&&typeof S.then=="function"?S.then(u,d):c(S)?Promise.all(S).then(u,d):u(S)}}return p(a)()}function br(i,a,u){for(var d=c(i)?i.slice():[i],p=0;p<u;++p)d.push(a);return d}var $c={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(a){var u=i.table(a),d=u.schema,p={},m=[];function b(w,R,k){var D=An(w),E=p[D]=p[D]||[],O=w==null?0:typeof w=="string"?1:w.length,N=0<R,N=r(r({},k),{name:N?"".concat(D,"(virtual-from:").concat(k.name,")"):k.name,lowLevelIndex:k,isVirtual:N,keyTail:R,keyLength:O,extractKey:mi(w),unique:!N&&k.unique});return E.push(N),N.isPrimaryKey||m.push(N),1<O&&b(O===2?w[0]:w.slice(0,O-1),R+1,k),E.sort(function(M,V){return M.keyTail-V.keyTail}),N}a=b(d.primaryKey.keyPath,0,d.primaryKey),p[":id"]=[a];for(var x=0,S=d.indexes;x<S.length;x++){var C=S[x];b(C.keyPath,0,C)}function j(w){var R,k=w.query.index;return k.isVirtual?r(r({},w),{query:{index:k.lowLevelIndex,range:(R=w.query.range,k=k.keyTail,{type:R.type===1?2:R.type,lower:br(R.lower,R.lowerOpen?i.MAX_KEY:i.MIN_KEY,k),lowerOpen:!0,upper:br(R.upper,R.upperOpen?i.MIN_KEY:i.MAX_KEY,k),upperOpen:!0})}}):w}return r(r({},u),{schema:r(r({},d),{primaryKey:a,indexes:m,getIndexByKeyPath:function(w){return(w=p[An(w)])&&w[0]}}),count:function(w){return u.count(j(w))},query:function(w){return u.query(j(w))},openCursor:function(w){var R=w.query.index,k=R.keyTail,D=R.isVirtual,E=R.keyLength;return D?u.openCursor(j(w)).then(function(N){return N&&O(N)}):u.openCursor(w);function O(N){return Object.create(N,{continue:{value:function(M){M!=null?N.continue(br(M,w.reverse?i.MAX_KEY:i.MIN_KEY,k)):w.unique?N.continue(N.key.slice(0,E).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,k)):N.continue()}},continuePrimaryKey:{value:function(M,V){N.continuePrimaryKey(br(M,i.MAX_KEY,k),V)}},primaryKey:{get:function(){return N.primaryKey}},key:{get:function(){var M=N.key;return E===1?M[0]:M.slice(0,E)}},value:{get:function(){return N.value}}})}}})}})}};function Ei(i,a,u,d){return u=u||{},d=d||"",l(i).forEach(function(p){var m,b,x;v(a,p)?(m=i[p],b=a[p],typeof m=="object"&&typeof b=="object"&&m&&b?(x=Xe(m))!==Xe(b)?u[d+p]=a[p]:x==="Object"?Ei(m,b,u,d+p+"."):m!==b&&(u[d+p]=a[p]):m!==b&&(u[d+p]=a[p])):u[d+p]=void 0}),l(a).forEach(function(p){v(i,p)||(u[d+p]=a[p])}),u}function Ti(i,a){return a.type==="delete"?a.keys:a.keys||a.values.map(i.extractKey)}var qc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(a){var u=i.table(a),d=u.schema.primaryKey;return r(r({},u),{mutate:function(p){var m=ne.trans,b=m.table(a).hook,x=b.deleting,S=b.creating,C=b.updating;switch(p.type){case"add":if(S.fire===me)break;return m._promise("readwrite",function(){return j(p)},!0);case"put":if(S.fire===me&&C.fire===me)break;return m._promise("readwrite",function(){return j(p)},!0);case"delete":if(x.fire===me)break;return m._promise("readwrite",function(){return j(p)},!0);case"deleteRange":if(x.fire===me)break;return m._promise("readwrite",function(){return function w(R,k,D){return u.query({trans:R,values:!1,query:{index:d,range:k},limit:D}).then(function(E){var O=E.result;return j({type:"delete",keys:O,trans:R}).then(function(N){return 0<N.numFailures?Promise.reject(N.failures[0]):O.length<D?{failures:[],numFailures:0,lastResult:void 0}:w(R,r(r({},k),{lower:O[O.length-1],lowerOpen:!0}),D)})})}(p.trans,p.range,1e4)},!0)}return u.mutate(p);function j(w){var R,k,D,E=ne.trans,O=w.keys||Ti(d,w);if(!O)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?r(r({},w),{keys:O}):r({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),R=u,D=O,((k=w).type==="add"?Promise.resolve([]):R.getMany({trans:k.trans,keys:D,cache:"immutable"})).then(function(N){var M=O.map(function(V,B){var U,Y,$,z=N[B],X={onerror:null,onsuccess:null};return w.type==="delete"?x.fire.call(X,V,z,E):w.type==="add"||z===void 0?(U=S.fire.call(X,V,w.values[B],E),V==null&&U!=null&&(w.keys[B]=V=U,d.outbound||ee(w.values[B],d.keyPath,V))):(U=Ei(z,w.values[B]),(Y=C.fire.call(X,U,V,z,E))&&($=w.values[B],Object.keys(Y).forEach(function(G){v($,G)?$[G]=Y[G]:ee($,G,Y[G])}))),X});return u.mutate(w).then(function(V){for(var B=V.failures,U=V.results,Y=V.numFailures,V=V.lastResult,$=0;$<O.length;++$){var z=(U||O)[$],X=M[$];z==null?X.onerror&&X.onerror(B[$]):X.onsuccess&&X.onsuccess(w.type==="put"&&N[$]?w.values[$]:z)}return{failures:B,results:U,numFailures:Y,lastResult:V}}).catch(function(V){return M.forEach(function(B){return B.onerror&&B.onerror(V)}),Promise.reject(V)})})}}})}})}};function Ta(i,a,u){try{if(!a||a.keys.length<i.length)return null;for(var d=[],p=0,m=0;p<a.keys.length&&m<i.length;++p)de(a.keys[p],i[m])===0&&(d.push(u?Ie(a.values[p]):a.values[p]),++m);return d.length===i.length?d:null}catch{return null}}var Uc={stack:"dbcore",level:-1,create:function(i){return{table:function(a){var u=i.table(a);return r(r({},u),{getMany:function(d){if(!d.cache)return u.getMany(d);var p=Ta(d.keys,d.trans._cache,d.cache==="clone");return p?J.resolve(p):u.getMany(d).then(function(m){return d.trans._cache={keys:d.keys,values:d.cache==="clone"?Ie(m):m},m})},mutate:function(d){return d.type!=="add"&&(d.trans._cache=null),u.mutate(d)}})}}}};function ja(i,a){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function Oa(i,a){switch(i){case"query":return a.values&&!a.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Hc={stack:"dbcore",level:0,name:"Observability",create:function(i){var a=i.schema.name,u=new Ne(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(d,p,m){if(ne.subscr&&p!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ne.querier));return i.transaction(d,p,m)},table:function(d){var p=i.table(d),m=p.schema,b=m.primaryKey,w=m.indexes,x=b.extractKey,S=b.outbound,C=b.autoIncrement&&w.filter(function(k){return k.compound&&k.keyPath.includes(b.keyPath)}),j=r(r({},p),{mutate:function(k){function D(G){return G="idb://".concat(a,"/").concat(d,"/").concat(G),V[G]||(V[G]=new Ne)}var E,O,N,M=k.trans,V=k.mutatedParts||(k.mutatedParts={}),B=D(""),U=D(":dels"),Y=k.type,X=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[Ti(b,k).filter(function(G){return G}),k.values]:[],$=X[0],z=X[1],X=k.trans._cache;return c($)?(B.addKeys($),(X=Y==="delete"||$.length===z.length?Ta($,X):null)||U.addKeys($),(X||z)&&(E=D,O=X,N=z,m.indexes.forEach(function(G){var Z=E(G.name||"");function le(ce){return ce!=null?G.extractKey(ce):null}function ue(ce){return G.multiEntry&&c(ce)?ce.forEach(function($e){return Z.addKey($e)}):Z.addKey(ce)}(O||N).forEach(function(ce,_e){var oe=O&&le(O[_e]),_e=N&&le(N[_e]);de(oe,_e)!==0&&(oe!=null&&ue(oe),_e!=null&&ue(_e))})}))):$?(z={from:(z=$.lower)!==null&&z!==void 0?z:i.MIN_KEY,to:(z=$.upper)!==null&&z!==void 0?z:i.MAX_KEY},U.add(z),B.add(z)):(B.add(u),U.add(u),m.indexes.forEach(function(G){return D(G.name).add(u)})),p.mutate(k).then(function(G){return!$||k.type!=="add"&&k.type!=="put"||(B.addKeys(G.results),C&&C.forEach(function(Z){for(var le=k.values.map(function(oe){return Z.extractKey(oe)}),ue=Z.keyPath.findIndex(function(oe){return oe===b.keyPath}),ce=0,$e=G.results.length;ce<$e;++ce)le[ce][ue]=G.results[ce];D(Z.name).addKeys(le)})),M.mutatedParts=yr(M.mutatedParts||{},V),G})}}),w=function(D){var E=D.query,D=E.index,E=E.range;return[D,new Ne((D=E.lower)!==null&&D!==void 0?D:i.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:i.MAX_KEY)]},R={get:function(k){return[b,new Ne(k.key)]},getMany:function(k){return[b,new Ne().addKeys(k.keys)]},count:w,query:w,openCursor:w};return l(R).forEach(function(k){j[k]=function(D){var E=ne.subscr,O=!!E,N=ja(ne,p)&&Oa(k,D)?D.obsSet={}:E;if(O){var M=function(z){return z="idb://".concat(a,"/").concat(d,"/").concat(z),N[z]||(N[z]=new Ne)},V=M(""),B=M(":dels"),E=R[k](D),O=E[0],E=E[1];if((k==="query"&&O.isPrimaryKey&&!D.values?B:M(O.name||"")).add(E),!O.isPrimaryKey){if(k!=="count"){var U=k==="query"&&S&&D.values&&p.query(r(r({},D),{values:!1}));return p[k].apply(this,arguments).then(function(z){if(k==="query"){if(S&&D.values)return U.then(function(le){return le=le.result,V.addKeys(le),z});var X=D.values?z.result.map(x):z.result;(D.values?V:B).addKeys(X)}else if(k==="openCursor"){var G=z,Z=D.values;return G&&Object.create(G,{key:{get:function(){return B.addKey(G.primaryKey),G.key}},primaryKey:{get:function(){var le=G.primaryKey;return B.addKey(le),le}},value:{get:function(){return Z&&V.addKey(G.primaryKey),G.value}}})}return z})}B.add(u)}}return p[k].apply(this,arguments)}}),j}})}};function Ra(i,a,u){if(u.numFailures===0)return a;if(a.type==="deleteRange")return null;var d=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;return u.numFailures===d?null:(a=r({},a),c(a.keys)&&(a.keys=a.keys.filter(function(p,m){return!(m in u.failures)})),"values"in a&&c(a.values)&&(a.values=a.values.filter(function(p,m){return!(m in u.failures)})),a)}function ji(i,a){return u=i,((d=a).lower===void 0||(d.lowerOpen?0<de(u,d.lower):0<=de(u,d.lower)))&&(i=i,(a=a).upper===void 0||(a.upperOpen?de(i,a.upper)<0:de(i,a.upper)<=0));var u,d}function Na(i,a,R,d,p,m){if(!R||R.length===0)return i;var b=a.query.index,x=b.multiEntry,S=a.query.range,C=d.schema.primaryKey.extractKey,j=b.extractKey,w=(b.lowLevelIndex||b).extractKey,R=R.reduce(function(k,D){var E=k,O=[];if(D.type==="add"||D.type==="put")for(var N=new Ne,M=D.values.length-1;0<=M;--M){var V,B=D.values[M],U=C(B);N.hasKey(U)||(V=j(B),(x&&c(V)?V.some(function(G){return ji(G,S)}):ji(V,S))&&(N.addKey(U),O.push(B)))}switch(D.type){case"add":var Y=new Ne().addKeys(a.values?k.map(function(Z){return C(Z)}):k),E=k.concat(a.values?O.filter(function(Z){return Z=C(Z),!Y.hasKey(Z)&&(Y.addKey(Z),!0)}):O.map(function(Z){return C(Z)}).filter(function(Z){return!Y.hasKey(Z)&&(Y.addKey(Z),!0)}));break;case"put":var $=new Ne().addKeys(D.values.map(function(Z){return C(Z)}));E=k.filter(function(Z){return!$.hasKey(a.values?C(Z):Z)}).concat(a.values?O:O.map(function(Z){return C(Z)}));break;case"delete":var z=new Ne().addKeys(D.keys);E=k.filter(function(Z){return!z.hasKey(a.values?C(Z):Z)});break;case"deleteRange":var X=D.range;E=k.filter(function(Z){return!ji(C(Z),X)})}return E},i);return R===i?i:(R.sort(function(k,D){return de(w(k),w(D))||de(C(k),C(D))}),a.limit&&a.limit<1/0&&(R.length>a.limit?R.length=a.limit:i.length===a.limit&&R.length<a.limit&&(p.dirty=!0)),m?Object.freeze(R):R)}function _a(i,a){return de(i.lower,a.lower)===0&&de(i.upper,a.upper)===0&&!!i.lowerOpen==!!a.lowerOpen&&!!i.upperOpen==!!a.upperOpen}function zc(i,a){return function(u,d,p,m){if(u===void 0)return d!==void 0?-1:0;if(d===void 0)return 1;if((d=de(u,d))===0){if(p&&m)return 0;if(p)return 1;if(m)return-1}return d}(i.lower,a.lower,i.lowerOpen,a.lowerOpen)<=0&&0<=function(u,d,p,m){if(u===void 0)return d!==void 0?1:0;if(d===void 0)return-1;if((d=de(u,d))===0){if(p&&m)return 0;if(p)return-1;if(m)return 1}return d}(i.upper,a.upper,i.upperOpen,a.upperOpen)}function Wc(i,a,u,d){i.subscribers.add(u),d.addEventListener("abort",function(){var p,m;i.subscribers.delete(u),i.subscribers.size===0&&(p=i,m=a,setTimeout(function(){p.subscribers.size===0&&he(m,p)},3e3))})}var Gc={stack:"dbcore",level:0,name:"Cache",create:function(i){var a=i.schema.name;return r(r({},i),{transaction:function(u,d,p){var m,b,x=i.transaction(u,d,p);return d==="readwrite"&&(b=(m=new AbortController).signal,p=function(S){return function(){if(m.abort(),d==="readwrite"){for(var C=new Set,j=0,w=u;j<w.length;j++){var R=w[j],k=Et["idb://".concat(a,"/").concat(R)];if(k){var D=i.table(R),E=k.optimisticOps.filter(function(Z){return Z.trans===x});if(x._explicit&&S&&x.mutatedParts)for(var O=0,N=Object.values(k.queries.query);O<N.length;O++)for(var M=0,V=(Y=N[O]).slice();M<V.length;M++)Ai(($=V[M]).obsSet,x.mutatedParts)&&(he(Y,$),$.subscribers.forEach(function(Z){return C.add(Z)}));else if(0<E.length){k.optimisticOps=k.optimisticOps.filter(function(Z){return Z.trans!==x});for(var B=0,U=Object.values(k.queries.query);B<U.length;B++)for(var Y,$,z,X=0,G=(Y=U[B]).slice();X<G.length;X++)($=G[X]).res!=null&&x.mutatedParts&&(S&&!$.dirty?(z=Object.isFrozen($.res),z=Na($.res,$.req,E,D,$,z),$.dirty?(he(Y,$),$.subscribers.forEach(function(Z){return C.add(Z)})):z!==$.res&&($.res=z,$.promise=J.resolve({result:z}))):($.dirty&&he(Y,$),$.subscribers.forEach(function(Z){return C.add(Z)})))}}}C.forEach(function(Z){return Z()})}}},x.addEventListener("abort",p(!1),{signal:b}),x.addEventListener("error",p(!1),{signal:b}),x.addEventListener("complete",p(!0),{signal:b})),x},table:function(u){var d=i.table(u),p=d.schema.primaryKey;return r(r({},d),{mutate:function(m){var b=ne.trans;if(p.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return d.mutate(m);var x=Et["idb://".concat(a,"/").concat(u)];return x?(b=d.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Ti(p,m).some(function(S){return S==null}))?(x.optimisticOps.push(m),m.mutatedParts&&vr(m.mutatedParts),b.then(function(S){0<S.numFailures&&(he(x.optimisticOps,m),(S=Ra(0,m,S))&&x.optimisticOps.push(S),m.mutatedParts&&vr(m.mutatedParts))}),b.catch(function(){he(x.optimisticOps,m),m.mutatedParts&&vr(m.mutatedParts)})):b.then(function(S){var C=Ra(0,r(r({},m),{values:m.values.map(function(j,w){var R;return S.failures[w]?j:(j=(R=p.keyPath)!==null&&R!==void 0&&R.includes(".")?Ie(j):r({},j),ee(j,p.keyPath,S.results[w]),j)})}),S);x.optimisticOps.push(C),queueMicrotask(function(){return m.mutatedParts&&vr(m.mutatedParts)})}),b):d.mutate(m)},query:function(m){if(!ja(ne,d)||!Oa("query",m))return d.query(m);var b=((C=ne.trans)===null||C===void 0?void 0:C.db._options.cache)==="immutable",w=ne,x=w.requery,S=w.signal,C=function(D,E,O,N){var M=Et["idb://".concat(D,"/").concat(E)];if(!M)return[];if(!(E=M.queries[O]))return[null,!1,M,null];var V=E[(N.query?N.query.index.name:null)||""];if(!V)return[null,!1,M,null];switch(O){case"query":var B=V.find(function(U){return U.req.limit===N.limit&&U.req.values===N.values&&_a(U.req.query.range,N.query.range)});return B?[B,!0,M,V]:[V.find(function(U){return("limit"in U.req?U.req.limit:1/0)>=N.limit&&(!N.values||U.req.values)&&zc(U.req.query.range,N.query.range)}),!1,M,V];case"count":return B=V.find(function(U){return _a(U.req.query.range,N.query.range)}),[B,!!B,M,V]}}(a,u,"query",m),j=C[0],w=C[1],R=C[2],k=C[3];return j&&w?j.obsSet=m.obsSet:(w=d.query(m).then(function(D){var E=D.result;if(j&&(j.res=E),b){for(var O=0,N=E.length;O<N;++O)Object.freeze(E[O]);Object.freeze(E)}else D.result=Ie(E);return D}).catch(function(D){return k&&j&&he(k,j),Promise.reject(D)}),j={obsSet:m.obsSet,promise:w,subscribers:new Set,type:"query",req:m,dirty:!1},k?k.push(j):(k=[j],(R=R||(Et["idb://".concat(a,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=k)),Wc(j,k,x,S),j.promise.then(function(D){return{result:Na(D.result,m,R==null?void 0:R.optimisticOps,d,j,b)}})}})}})}};function xr(i,a){return new Proxy(i,{get:function(u,d,p){return d==="db"?a:Reflect.get(u,d,p)}})}var st=(Ae.prototype.version=function(i){if(isNaN(i)||i<.1)throw new re.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var a=this._versions,u=a.filter(function(d){return d._cfg.version===i})[0];return u||(u=new this.Version(i),a.push(u),a.sort(Vc),u.stores({}),this._state.autoSchema=!1,u)},Ae.prototype._whenReady=function(i){var a=this;return this.idbdb&&(this._state.openComplete||ne.letThrough||this._vip)?i():new J(function(u,d){if(a._state.openComplete)return d(new re.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._state.autoOpen)return void d(new re.DatabaseClosed);a.open().catch(me)}a._state.dbReadyPromise.then(u,d)}).then(i)},Ae.prototype.use=function(i){var a=i.stack,u=i.create,d=i.level,p=i.name;return p&&this.unuse({stack:a,name:p}),i=this._middlewares[a]||(this._middlewares[a]=[]),i.push({stack:a,create:u,level:d??10,name:p}),i.sort(function(m,b){return m.level-b.level}),this},Ae.prototype.unuse=function(i){var a=i.stack,u=i.name,d=i.create;return a&&this._middlewares[a]&&(this._middlewares[a]=this._middlewares[a].filter(function(p){return d?p.create!==d:!!u&&p.name!==u})),this},Ae.prototype.open=function(){var i=this;return kt(ut,function(){return Kc(i)})},Ae.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var i=this._state,a=Ut.indexOf(this);if(0<=a&&Ut.splice(a,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new J(function(u){i.dbReadyResolve=u}),i.openCanceller=new J(function(u,d){i.cancelOpen=d}))},Ae.prototype.close=function(u){var a=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;a?(u.isBeingOpened&&u.cancelOpen(new re.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new re.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},Ae.prototype.delete=function(i){var a=this;i===void 0&&(i={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",d=this._state;return new J(function(p,m){function b(){a.close(i);var x=a._deps.indexedDB.deleteDatabase(a.name);x.onsuccess=ve(function(){var S,C,j;S=a._deps,C=a.name,j=S.indexedDB,S=S.IDBKeyRange,xi(j)||C===sr||bi(j,S).delete(C).catch(me),p()}),x.onerror=Qe(m),x.onblocked=a._fireOnBlocked}if(u)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(b):b()})},Ae.prototype.backendDB=function(){return this.idbdb},Ae.prototype.isOpen=function(){return this.idbdb!==null},Ae.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},Ae.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ae.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ae.prototype,"tables",{get:function(){var i=this;return l(this._allTables).map(function(a){return i._allTables[a]})},enumerable:!1,configurable:!0}),Ae.prototype.transaction=function(){var i=(function(a,u,d){var p=arguments.length;if(p<2)throw new re.InvalidArgument("Too few arguments");for(var m=new Array(p-1);--p;)m[p-1]=arguments[p];return d=m.pop(),[a,pe(m),d]}).apply(this,arguments);return this._transaction.apply(this,i)},Ae.prototype._transaction=function(i,a,u){var d=this,p=ne.trans;p&&p.db===this&&i.indexOf("!")===-1||(p=null);var m,b,x=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(b=a.map(function(C){if(C=C instanceof d.Table?C.name:C,typeof C!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return C}),i=="r"||i===li)m=li;else{if(i!="rw"&&i!=ui)throw new re.InvalidArgument("Invalid transaction mode: "+i);m=ui}if(p){if(p.mode===li&&m===ui){if(!x)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p=null}p&&b.forEach(function(C){if(p&&p.storeNames.indexOf(C)===-1){if(!x)throw new re.SubTransaction("Table "+C+" not included in parent transaction.");p=null}}),x&&p&&!p.active&&(p=null)}}catch(C){return p?p._promise(null,function(j,w){w(C)}):Se(C)}var S=(function C(j,w,R,k,D){return J.resolve().then(function(){var E=ne.transless||ne,O=j._createTransaction(w,R,j._dbSchema,k);if(O.explicit=!0,E={trans:O,transless:E},k)O.idbtrans=k.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,j._state.PR1398_maxLoop=3}catch(V){return V.name===Qr.InvalidState&&j.isOpen()&&0<--j._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),j.close({disableAutoOpen:!1}),j.open().then(function(){return C(j,w,R,null,D)})):Se(V)}var N,M=It(D);return M&&qt(),E=J.follow(function(){var V;(N=D.call(O,O))&&(M?(V=dt.bind(null,null),N.then(V,V)):typeof N.next=="function"&&typeof N.throw=="function"&&(N=Di(N)))},E),(N&&typeof N.then=="function"?J.resolve(N).then(function(V){return O.active?V:Se(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return N})).then(function(V){return k&&O._resolve(),O._completion.then(function(){return V})}).catch(function(V){return O._reject(V),Se(V)})})}).bind(null,this,m,b,p,u);return p?p._promise(m,S,"lock"):ne.trans?kt(ne.transless,function(){return d._whenReady(S)}):this._whenReady(S)},Ae.prototype.table=function(i){if(!v(this._allTables,i))throw new re.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},Ae);function Ae(i,a){var u=this;this._middlewares={},this.verno=0;var d=Ae.dependencies;this._options=a=r({addons:Ae.addons,autoOpen:!0,indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},d=a.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var p,m,b,x,S,C={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};C.dbReadyPromise=new J(function(w){C.dbReadyResolve=w}),C.openCanceller=new J(function(w,R){C.cancelOpen=R}),this._state=C,this.name=i,this.on=vn(this,"populate","blocked","versionchange","close",{ready:[Zr,me]}),this.once=function(w,R){var k=function(){for(var D=[],E=0;E<arguments.length;E++)D[E]=arguments[E];u.on(w).unsubscribe(k),R.apply(u,D)};return u.on(w,k)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(w){return function(R,k){Ae.vip(function(){var D,E=u._state;E.openComplete?(E.dbOpenError||J.resolve().then(R),k&&w(R)):E.onReadyBeingFired?(E.onReadyBeingFired.push(R),k&&w(R)):(w(R),D=u,k||w(function O(){D.on.ready.unsubscribe(R),D.on.ready.unsubscribe(O)}))})}}),this.Collection=(p=this,bn(jc.prototype,function(N,O){this.db=p;var k=ua,D=null;if(O)try{k=O()}catch(M){D=M}var E=N._ctx,O=E.table,N=O.hook.reading.fire;this._ctx={table:O,index:E.index,isPrimKey:!E.index||O.schema.primKey.keyPath&&E.index===O.schema.primKey.name,range:k,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:D,or:E.or,valueMapper:N!==fn?N:null}})),this.Table=(m=this,bn(ma.prototype,function(w,R,k){this.db=m,this._tx=k,this.name=w,this.schema=R,this.hook=m._allTables[w]?m._allTables[w].hook:vn(null,{creating:[wc,me],reading:[xc,fn],updating:[Ac,me],deleting:[Sc,me]})})),this.Transaction=(b=this,bn(Nc.prototype,function(w,R,k,D,E){var O=this;w!=="readonly"&&R.forEach(function(N){N=(N=k[N])===null||N===void 0?void 0:N.yProps,N&&(R=R.concat(N.map(function(M){return M.updatesTable})))}),this.db=b,this.mode=w,this.storeNames=R,this.schema=k,this.chromeTransactionDurability=D,this.idbtrans=null,this.on=vn(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new J(function(N,M){O._resolve=N,O._reject=M}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function(N){var M=O.active;return O.active=!1,O.on.error.fire(N),O.parent?O.parent._reject(N):M&&O.idbtrans&&O.idbtrans.abort(),Se(N)})})),this.Version=(x=this,bn(Bc.prototype,function(w){this.db=x,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,bn(xa.prototype,function(w,R,k){if(this.db=S,this._ctx={table:w,index:R===":id"?null:R,or:k},this._cmp=this._ascending=de,this._descending=function(D,E){return de(E,D)},this._max=function(D,E){return 0<de(D,E)?D:E},this._min=function(D,E){return de(D,E)<0?D:E},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=Sn(a.IDBKeyRange),this._createTransaction=function(w,R,k,D){return new u.Transaction(w,R,k,u._options.chromeTransactionDurability,D)},this._fireOnBlocked=function(w){u.on("blocked").fire(w),Ut.filter(function(R){return R.name===u.name&&R!==u&&!R._state.vcFired}).map(function(R){return R.on("versionchange").fire(w)})},this.use(Uc),this.use(Gc),this.use(Hc),this.use($c),this.use(qc);var j=new Proxy(this,{get:function(w,R,k){if(R==="_vip")return!0;if(R==="table")return function(E){return xr(u.table(E),j)};var D=Reflect.get(w,R,k);return D instanceof ma?xr(D,j):R==="tables"?D.map(function(E){return xr(E,j)}):R==="_createTransaction"?function(){return xr(D.apply(this,arguments),j)}:D}});this.vip=j,d.forEach(function(w){return w(u)})}var wr,He=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yc=(Oi.prototype.subscribe=function(i,a,u){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:a,complete:u})},Oi.prototype[He]=function(){return this},Oi);function Oi(i){this._subscribe=i}try{wr={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{wr={indexedDB:null,IDBKeyRange:null}}function La(i){var a,u=!1,d=new Yc(function(p){var m=It(i),b,x=!1,S={},C={},j={get closed(){return x},unsubscribe:function(){x||(x=!0,b&&b.abort(),w&&pt.storagemutated.unsubscribe(k))}};p.start&&p.start(j);var w=!1,R=function(){return oi(D)},k=function(E){yr(S,E),Ai(C,S)&&R()},D=function(){var E,O,N;!x&&wr.indexedDB&&(S={},E={},b&&b.abort(),b=new AbortController,N=function(M){var V=Kt();try{m&&qt();var B=ct(i,M);return B=m?B.finally(dt):B}finally{V&&$t()}}(O={subscr:E,signal:b.signal,requery:R,querier:i,trans:null}),Promise.resolve(N).then(function(M){u=!0,a=M,x||O.signal.aborted||(S={},function(V){for(var B in V)if(v(V,B))return;return 1}(C=E)||w||(pt(wn,k),w=!0),oi(function(){return!x&&p.next&&p.next(M)}))},function(M){u=!1,["DatabaseClosedError","AbortError"].includes(M==null?void 0:M.name)||x||oi(function(){x||p.error&&p.error(M)})}))};return setTimeout(R,0),j});return d.hasValue=function(){return u},d.getValue=function(){return a},d}var Tt=st;function Ri(i){var a=mt;try{mt=!0,pt.storagemutated.fire(i),Pi(i,!0)}finally{mt=a}}y(Tt,r(r({},Xn),{delete:function(i){return new Tt(i,{addons:[]}).delete()},exists:function(i){return new Tt(i,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return a=Tt.dependencies,u=a.indexedDB,a=a.IDBKeyRange,(xi(u)?Promise.resolve(u.databases()).then(function(d){return d.map(function(p){return p.name}).filter(function(p){return p!==sr})}):bi(u,a).toCollection().primaryKeys()).then(i)}catch{return Se(new re.MissingAPI)}var a,u},defineClass:function(){return function(i){f(this,i)}},ignoreTransaction:function(i){return ne.trans?kt(ne.transless,i):i()},vip:wi,async:function(i){return function(){try{var a=Di(i.apply(this,arguments));return a&&typeof a.then=="function"?a:J.resolve(a)}catch(u){return Se(u)}}},spawn:function(i,a,u){try{var d=Di(i.apply(u,a||[]));return d&&typeof d.then=="function"?d:J.resolve(d)}catch(p){return Se(p)}},currentTransaction:{get:function(){return ne.trans||null}},waitFor:function(i,a){return a=J.resolve(typeof i=="function"?Tt.ignoreTransaction(i):i).timeout(a||6e4),ne.trans?ne.trans.waitFor(a):a},Promise:J,debug:{get:function(){return Je},set:function(i){na(i)}},derive:L,extend:f,props:y,override:W,Events:vn,on:pt,liveQuery:La,extendObservabilitySet:yr,getByKeyPath:Q,setByKeyPath:ee,delByKeyPath:function(i,a){typeof a=="string"?ee(i,a,void 0):"length"in a&&[].map.call(a,function(u){ee(i,u,void 0)})},shallowClone:ie,deepClone:Ie,getObjectDiff:Ei,cmp:de,asap:q,minKey:-1/0,addons:[],connections:Ut,errnames:Qr,dependencies:wr,cache:Et,semVer:"4.2.1",version:"4.2.1".split(".").map(function(i){return parseInt(i)}).reduce(function(i,a,u){return i+a/Math.pow(10,2*u)})})),Tt.maxKey=Sn(Tt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pt(wn,function(i){mt||(i=new CustomEvent(fi,{detail:i}),mt=!0,dispatchEvent(i),mt=!1)}),addEventListener(fi,function(i){i=i.detail,mt||Ri(i)}));var Gt,mt=!1,Ma=function(){};return typeof BroadcastChannel<"u"&&((Ma=function(){(Gt=new BroadcastChannel(fi)).onmessage=function(i){return i.data&&Ri(i.data)}})(),typeof Gt.unref=="function"&&Gt.unref(),pt(wn,function(i){mt||Gt.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!st.disableBfCache&&i.persisted){Je&&console.debug("Dexie: handling persisted pagehide"),Gt!=null&&Gt.close();for(var a=0,u=Ut;a<u.length;a++)u[a].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!st.disableBfCache&&i.persisted&&(Je&&console.debug("Dexie: handling persisted pageshow"),Ma(),Ri({all:new Ne(-1/0,[[]])}))})),J.rejectionMapper=function(i,a){return!i||i instanceof Ft||i instanceof TypeError||i instanceof SyntaxError||!i.name||!ta[i.name]?i:(a=new ta[i.name](a||i.message,i),"stack"in i&&_(a,"stack",{get:function(){return this.inner.stack}}),a)},na(Je),r(st,Object.freeze({__proto__:null,Dexie:st,liveQuery:La,Entity:ca,cmp:de,PropModification:yn,replacePrefix:function(i,a){return new yn({replacePrefix:[i,a]})},add:function(i){return new yn({add:i})},remove:function(i){return new yn({remove:i})},default:st,RangeSet:Ne,mergeRanges:kn,rangesOverlap:ka}),{default:st}),st})})($l);var rh=$l.exports;const es=Al(rh),ao=Symbol.for("Dexie"),Lr=globalThis[ao]||(globalThis[ao]=es);if(es.semVer!==Lr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${es.semVer} and ${Lr.semVer}`);const{liveQuery:Wy,mergeRanges:Gy,rangesOverlap:Yy,RangeSet:Xy,cmp:Jy,Entity:Qy,PropModification:Zy,replacePrefix:ev,add:tv,remove:nv,DexieYProvider:rv}=Lr;class ih extends Lr{constructor(){super("FairPlayDB");Yt(this,"cards");Yt(this,"partners");Yt(this,"gameStates");Yt(this,"negotiations");this.version(1).stores({cards:"++id, category, holder, status, &metadata.createdAt",partners:"&id, name, &theme.color",gameStates:"++id, &createdAt",negotiations:"++id, initiator, status, &createdAt"})}}const sh=new ih;async function ah(){(await sh.cards.toArray()).length===0&&console.log("Database initialized and ready for data")}const oh=[{id:"card-001",category:"daily-grind",title:{en:"Morning Dishes",he:"כלים בבוקר"},description:{en:"Wash breakfast dishes",he:"לשטוף כלים של ארוחת בוקר"},details:{en:"Every morning after breakfast",he:"כל בוקר אחרי ארוחה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","morning","kitchen"],difficulty:1,frequency:"daily",timeEstimate:15},history:[]},{id:"card-002",category:"daily-grind",title:{en:"Dinner Prep",he:"הכנת ארוחת ערב"},description:{en:"Plan and prepare dinner",he:"לתכנן ולהכין ארוחת ערב"},details:{en:"5 days per week",he:"5 ימים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","cooking","evening"],difficulty:2,frequency:"daily",timeEstimate:45},history:[]},{id:"card-003",category:"daily-grind",title:{en:"Kitchen Cleanup",he:"ניקוי המטבח"},description:{en:"Wipe counters and sweep floor",he:"לנגב קאונטרים ולסחוף רצפה"},details:{en:"After meals",he:"אחרי ארוחות"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","cleaning","kitchen"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-004",category:"daily-grind",title:{en:"Evening Dishes",he:"כלים בערב"},description:{en:"Load dishwasher or hand wash",he:"לטעון מדיח או לשטוף ביד"},details:{en:"After dinner",he:"אחרי ארוחת ערב"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","evening","kitchen"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-005",category:"daily-grind",title:{en:"Laundry Run",he:"כביסה"},description:{en:"Wash, dry, and fold clothes",he:"לכבס, להשיק ולקפל ביגוד"},details:{en:"2-3 times per week",he:"2-3 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","laundry","housework"],difficulty:2,frequency:"weekly",timeEstimate:120},history:[]},{id:"card-006",category:"daily-grind",title:{en:"Trash & Recycling",he:"אשפה והקטנת פסולת"},description:{en:"Take out trash and recycling",he:"להוציא אשפה והקטנת פסולת"},details:{en:"2 times per week",he:"2 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning","maintenance"],difficulty:1,frequency:"weekly",timeEstimate:15},history:[]},{id:"card-007",category:"daily-grind",title:{en:"Bathroom Cleaning",he:"ניקוי חדר האמבטיה"},description:{en:"Clean toilet, sink, and floor",he:"לנקות שירותים, כיור ורצפה"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning"],difficulty:2,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-008",category:"daily-grind",title:{en:"Grocery Shopping",he:"קניות מכולת"},description:{en:"Weekly grocery run",he:"קניות מכולת שבועיות"},details:{en:"Once per week",he:"פעם בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","shopping","planning"],difficulty:2,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-009",category:"daily-grind",title:{en:"Meal Planning",he:"תכנון ארוחות"},description:{en:"Plan weekly meals",he:"לתכנן ארוחות לשבוע"},details:{en:"Sunday evening",he:"יום ראשון בערב"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","planning","cooking"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-010",category:"daily-grind",title:{en:"Vaccum Living Room",he:"שאיבת הסלון"},description:{en:"Vacuum and tidy living room",he:"לשאוב ולסדר את הסלון"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning","tidying"],difficulty:1,frequency:"weekly",timeEstimate:25},history:[]},{id:"card-011",category:"daily-grind",title:{en:"Bedsheet Change",he:"החלפת סדינים"},description:{en:"Change all bed sheets",he:"להחליף סדינים בכל המיטות"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cleaning","bedrooms"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-012",category:"daily-grind",title:{en:"Inventory Check",he:"בדיקת מלאי"},description:{en:"Check pantry and fridge",he:"לבדוק את הסידור וההיגייה"},details:{en:"Weekly before shopping",he:"שבועי לפני קניות"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","planning","kitchen"],difficulty:1,frequency:"weekly",timeEstimate:15},history:[]},{id:"card-013",category:"daily-grind",title:{en:"Pay Bills",he:"תשלום חשבונות"},description:{en:"Pay monthly bills online",he:"לשלם חשבונות חודשיים"},details:{en:"Once per month",he:"פעם בחודש"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","finance","admin"],difficulty:1,frequency:"monthly",timeEstimate:30},history:[]},{id:"card-014",category:"daily-grind",title:{en:"Deep Clean Kitchen",he:"ניקוי עמוק של המטבח"},description:{en:"Clean appliances and deep clean",he:"לנקות מכשירים וניקוי עמוק"},details:{en:"Monthly",he:"חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","cleaning","kitchen"],difficulty:3,frequency:"monthly",timeEstimate:90},history:[]},{id:"card-015",category:"daily-grind",title:{en:"Organize Pantry",he:"ארגון המטבח"},description:{en:"Organize and reorganize pantry",he:"לארגן ולהסדר את המטבח"},details:{en:"Monthly",he:"חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","organizing","kitchen"],difficulty:2,frequency:"monthly",timeEstimate:60},history:[]},{id:"card-016",category:"kids",title:{en:"Morning Routine Help",he:"עזרה בשגרת הבוקר"},description:{en:"Help kids get ready for school",he:"לעזור לילדים להתכונן לבית ספר"},details:{en:"School days 6:30-8:00am",he:"ימי בית ספר 6:30-8:00"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","morning"],difficulty:2,frequency:"daily",timeEstimate:45},history:[]},{id:"card-017",category:"kids",title:{en:"Pack Lunches",he:"הכנת קופסות אוכל"},description:{en:"Pack school lunches",he:"לארוז קופסות אוכל לבית ספר"},details:{en:"Daily before school",he:"כל יום לפני בית ספר"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","cooking"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-018",category:"kids",title:{en:"School Pickup/Dropoff",he:"הבאה והסעה לבית ספר"},description:{en:"Drive to/from school",he:"לנהוג לבית ספר ממנו"},details:{en:"Daily 8am and 2:45pm",he:"כל יום 8:00 ו 14:45"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","transport"],difficulty:1,frequency:"daily",timeEstimate:60},history:[]},{id:"card-019",category:"kids",title:{en:"Homework Help",he:"עזרה בעבודות בית"},description:{en:"Help with homework and reading",he:"לעזור עם עבודות בית וקריאה"},details:{en:"3-4 times per week",he:"3-4 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","education"],difficulty:2,frequency:"daily",timeEstimate:45},history:[]},{id:"card-020",category:"kids",title:{en:"Kids Bath Time",he:"אמבטיה לילדים"},description:{en:"Bath and nighttime routine",he:"אמבטיה ושגרת לילה"},details:{en:"Weeknight evenings",he:"ערבי שישי - שלישי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","evening"],difficulty:1,frequency:"daily",timeEstimate:30},history:[]},{id:"card-021",category:"kids",title:{en:"Bedtime Stories",he:"סיפורים לפני שינה"},description:{en:"Read bedtime stories",he:"לקרוא סיפורים לפני שינה"},details:{en:"Weeknights 8pm",he:"ערבי שישי - שלישי 20:00"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","bonding"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-022",category:"kids",title:{en:"Dentist/Doctor Appointments",he:"תורים לרופא וציטור"},description:{en:"Schedule and attend appointments",he:"לתאם ולהביא לתורים"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","admin"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-023",category:"kids",title:{en:"Extracurricular Activities",he:"פעילויות חוצ-כיתתיות"},description:{en:"Drive to sports/music lessons",he:"הסעה לספורט והצגות"},details:{en:"2-3 times per week",he:"2-3 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","kids","activities"],difficulty:1,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-024",category:"kids",title:{en:"Buy School Supplies",he:"קנייה של ציוד בית ספר"},description:{en:"Purchase supplies for school",he:"לקנות ציוד בית ספר"},details:{en:"As needed, mostly Sept",he:"לפי הצורך, בעיקר בספטמבר"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","shopping"],difficulty:1,frequency:"occasional",timeEstimate:45},history:[]},{id:"card-025",category:"kids",title:{en:"Organize Closets",he:"ארגון של ארונות"},description:{en:"Organize seasonal clothes",he:"לארגן ביגוד עונתי"},details:{en:"Twice yearly",he:"פעמיים בשנה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","kids","organizing"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-026",category:"kids",title:{en:"Parent-Teacher Conferences",he:"פגישות אחרי כתה"},description:{en:"Attend school meetings",he:"להשתתף בפגישות בית ספר"},details:{en:"Twice per year",he:"פעמיים בשנה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","school"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-027",category:"kids",title:{en:"Birthday Party Planning",he:"תכנון יום הולדת"},description:{en:"Plan and organize birthday party",he:"לתכנן ולארגן מסיבת יום הולדת"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","kids","celebration"],difficulty:3,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-028",category:"kids",title:{en:"Kids Chores Supervision",he:"פיקוח על חובות הילדים"},description:{en:"Oversee kids do their chores",he:"לפקח שהילדים עושים חובות"},details:{en:"3-4 times per week",he:"3-4 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","kids","responsibility"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-029",category:"kids",title:{en:"Child Medical Care",he:"טיפול רפואי לילדים"},description:{en:"Manage meds and health needs",he:"לנהל תרופות וצרכים בריאותיים"},details:{en:"Daily as needed",he:"כל יום לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","kids","health"],difficulty:1,frequency:"daily",timeEstimate:15},history:[]},{id:"card-030",category:"kids",title:{en:"Weekend Adventure",he:"הרפתקה בסופי שבוע"},description:{en:"Plan fun activity with kids",he:"לתכנן פעילות כיפיות עם ילדים"},details:{en:"Weekend",he:"סוף שבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","kids","bonding"],difficulty:2,frequency:"weekly",timeEstimate:120},history:[]},{id:"card-031",category:"home",title:{en:"Yard Work",he:"עבודה בחצר"},description:{en:"Mow lawn and edge",he:"לכסוח את הדשא ולהדק קצוות"},details:{en:"Every 1-2 weeks",he:"כל שבועיים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","yard","maintenance"],difficulty:2,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-032",category:"home",title:{en:"Garden Watering",he:"השקיית הגן"},description:{en:"Water plants and garden",he:"להשקות צמחים וגן"},details:{en:"2-3 times per week",he:"2-3 פעמים בשבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","garden","plants"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-033",category:"home",title:{en:"Car Maintenance",he:"תחזוקת הרכב"},description:{en:"Gas, oil changes, inspections",he:"דלק, שינוי שמן, בדיקות"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","car","maintenance"],difficulty:2,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-034",category:"home",title:{en:"Fix Broken Items",he:"תיקון דברים שבורים"},description:{en:"Repair household items",he:"לתקן פריטים ביתיים"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","repairs","maintenance"],difficulty:2,frequency:"occasional",timeEstimate:90},history:[]},{id:"card-035",category:"home",title:{en:"Gutter Cleaning",he:"ניקוי גופיות"},description:{en:"Clean gutters and downspouts",he:"לנקות גופיות וצינורות ניקוז"},details:{en:"Twice yearly",he:"פעמיים בשנה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","maintenance","exterior"],difficulty:2,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-036",category:"home",title:{en:"HVAC Filter Change",he:"החלפת מסנן אוויר"},description:{en:"Replace HVAC filters",he:"להחליף מסננים"},details:{en:"Every 3 months",he:"כל 3 חודשים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","maintenance","hvac"],difficulty:1,frequency:"monthly",timeEstimate:15},history:[]},{id:"card-037",category:"home",title:{en:"Pest Control",he:"בקרת מזיקים"},description:{en:"Manage pest control service",he:"לנהל שירות בקרת מזיקים"},details:{en:"Quarterly",he:"רבעוני"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["quarterly","maintenance","outside"],difficulty:1,frequency:"occasional",timeEstimate:30},history:[]},{id:"card-038",category:"home",title:{en:"House Deep Clean",he:"ניקוי עמוק של הבית"},description:{en:"Deep clean entire house",he:"ניקוי עמוק של כל הבית"},details:{en:"Every 2-3 months",he:"כל 2-3 חודשים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","cleaning","deep-clean"],difficulty:3,frequency:"occasional",timeEstimate:240},history:[]},{id:"card-039",category:"home",title:{en:"Windows & Mirrors",he:"חלונות ומראות"},description:{en:"Clean all windows and mirrors",he:"לנקות כל חלונות ומראות"},details:{en:"Monthly",he:"חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","cleaning"],difficulty:1,frequency:"monthly",timeEstimate:45},history:[]},{id:"card-040",category:"home",title:{en:"Organize Storage",he:"ארגון אחסון"},description:{en:"Organize closets and storage",he:"לארגן ארונות ואחסון"},details:{en:"Quarterly",he:"רבעוני"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["quarterly","organizing"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-041",category:"home",title:{en:"Paint Touch-ups",he:"תיקון צבע"},description:{en:"Touch up paint on walls",he:"לתיקן צבע על קירות"},details:{en:"As needed",he:"לפי הצורך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","maintenance","decor"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-042",category:"home",title:{en:"Pool/Spa Care",he:"טיפול בבריכה"},description:{en:"Maintain pool water and chemicals",he:"לתחזוק בריכה וכימיקלים"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","pool","maintenance"],difficulty:2,frequency:"weekly",timeEstimate:45},history:[]},{id:"card-043",category:"home",title:{en:"Home Inspection",he:"בדיקת בית"},description:{en:"Check home systems",he:"לבדוק מערכות הבית"},details:{en:"Annually",he:"שנתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["annual","maintenance"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-044",category:"home",title:{en:"Seasonal Decorating",he:"קישוט עונתי"},description:{en:"Decorate for holidays",he:"לקשט לחגים"},details:{en:"Seasonal",he:"עונתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","decorating"],difficulty:2,frequency:"occasional",timeEstimate:90},history:[]},{id:"card-045",category:"home",title:{en:"Furniture Rearrange",he:"סידור ריהוט"},description:{en:"Move and rearrange furniture",he:"להזיז ולסדר ריהוט"},details:{en:"As desired",he:"לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["occasional","organizing","decor"],difficulty:2,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-046",category:"magic",title:{en:"Date Night",he:"ערב בחוץ עם בן/בת הזוג"},description:{en:"Plan and execute date night",he:"לתכנן וליצור ערב רומנטי"},details:{en:"Monthly or as desired",he:"חודשי או לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","romance","couple-time"],difficulty:2,frequency:"monthly",timeEstimate:180},history:[]},{id:"card-047",category:"magic",title:{en:"Breakfast in Bed",he:"ארוחת בוקר במיטה"},description:{en:"Prepare special breakfast",he:"להכין ארוחת בוקר מיוחדת"},details:{en:"Surprise gift of love",he:"מתנה הפתעה של אהבה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","cooking"],difficulty:2,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-048",category:"magic",title:{en:"Massage Night",he:"ערב עיסוי"},description:{en:"Give a relaxing massage",he:"לתת עיסוי מרגיע"},details:{en:"Whenever needed",he:"בכל עת שצוריך"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","relaxation"],difficulty:1,frequency:"occasional",timeEstimate:45},history:[]},{id:"card-049",category:"magic",title:{en:"Love Notes",he:"פתקי אהבה"},description:{en:"Leave love notes around house",he:"להשאיר פתקי אהבה בבית"},details:{en:"Small gestures daily",he:"תנועות קטנות כל יום"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","romance","small-gestures"],difficulty:1,frequency:"daily",timeEstimate:5},history:[]},{id:"card-050",category:"magic",title:{en:"Movie Night",he:"ערב סרטים"},description:{en:"Cuddle movie night at home",he:"ערב סרטים עם התקרבות"},details:{en:"Weekly",he:"שבועי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","romance","couple-time"],difficulty:1,frequency:"weekly",timeEstimate:120},history:[]},{id:"card-051",category:"magic",title:{en:"Candle Dinner",he:"ארוחה באור נרות"},description:{en:"Cook special candlelit dinner",he:"לבשל ארוחה רומנטית באור נרות"},details:{en:"Special occasions or surprise",he:"אירועים מיוחדים או הפתעה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","cooking"],difficulty:3,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-052",category:"magic",title:{en:"Flowers Surprise",he:"הפתעת פרחים"},description:{en:"Surprise with flowers",he:"לתן הפתעה עם פרחים"},details:{en:"Surprise gift",he:"מתנת הפתעה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","gift"],difficulty:1,frequency:"occasional",timeEstimate:30},history:[]},{id:"card-053",category:"magic",title:{en:"Anniversary Celebration",he:"חגיגת יום נישואין"},description:{en:"Plan special anniversary",he:"לתכנן ולחגוג שנה"},details:{en:"Annual",he:"שנתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["annual","romance","celebration"],difficulty:2,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-054",category:"magic",title:{en:"Weekend Getaway",he:"טיול סוף שבוע"},description:{en:"Plan romantic weekend trip",he:"לתכנן טיול זוגי"},details:{en:"As desired",he:"לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","romance","travel"],difficulty:3,frequency:"occasional",timeEstimate:240},history:[]},{id:"card-055",category:"magic",title:{en:"Morning Coffee Together",he:"קפה בוקר ביחד"},description:{en:"Share quiet coffee time",he:"לשתות קפה שקט ביחד"},details:{en:"Daily morning ritual",he:"טקס בוקר יומי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["daily","romance","ritual"],difficulty:1,frequency:"daily",timeEstimate:20},history:[]},{id:"card-056",category:"magic",title:{en:"Plan Date Ideas",he:"תכנון רעיונות לדייט"},description:{en:"Research and plan fun dates",he:"לתכנן רעיונות דייט כיפיים"},details:{en:"Monthly planning",he:"תכנון חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","romance","planning"],difficulty:1,frequency:"monthly",timeEstimate:30},history:[]},{id:"card-057",category:"magic",title:{en:"Love Language Act",he:"פעולת שפת אהבה"},description:{en:"Express love in partner's language",he:"להביע אהבה בדרך המועדפת"},details:{en:"Weekly or more",he:"שבועי או יותר"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","romance","connection"],difficulty:1,frequency:"weekly",timeEstimate:30},history:[]},{id:"card-058",category:"wild",title:{en:"Adventure Day",he:"יום הרפתקאות"},description:{en:"Plan spontaneous adventure",he:"לתכנן הרפתקה ספונטנית"},details:{en:"Surprise adventure",he:"הרפתקה בהפתעה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","adventure","spontaneous"],difficulty:2,frequency:"occasional",timeEstimate:240},history:[]},{id:"card-059",category:"wild",title:{en:"Karaoke Night",he:"ערב קריוקי"},description:{en:"Have fun singing together",he:"לשיר וליהנות ביחד"},details:{en:"Monthly or as desired",he:"חודשי או לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","fun","social"],difficulty:1,frequency:"occasional",timeEstimate:120},history:[]},{id:"card-060",category:"wild",title:{en:"Road Trip",he:"טיול כביש"},description:{en:"Plan a fun road trip",he:"לתכנן טיול כביש כיפי"},details:{en:"Adventure getaway",he:"טיול הרפתקה"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","adventure","travel"],difficulty:3,frequency:"occasional",timeEstimate:360},history:[]},{id:"card-061",category:"wild",title:{en:"Dance Party",he:"מסיבת ריקוד"},description:{en:"Have spontaneous dance party",he:"לעשות מסיבת ריקוד ספונטנית"},details:{en:"Whenever the mood strikes",he:"בכל עת שהמצב מתאים"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["spontaneous","fun","activity"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-062",category:"wild",title:{en:"Outdoor Adventure",he:"הרפתקה בחוץ"},description:{en:"Hike or explore nature",he:"לטייל או לחקור טבע"},details:{en:"Weekend adventure",he:"הרפתקת סוף שבוע"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekend","outdoor","adventure"],difficulty:2,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-063",category:"wild",title:{en:"New Recipe Challenge",he:"אתגר מתכון חדש"},description:{en:"Try cooking something new",he:"לנסות לבשל משהו חדש"},details:{en:"Weekly or monthly",he:"שבועי או חודשי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["weekly","cooking","experiment"],difficulty:2,frequency:"weekly",timeEstimate:90},history:[]},{id:"card-064",category:"wild",title:{en:"Concert or Festival",he:"קונצרט או פסטיבל"},description:{en:"Attend live music event",he:"ללכת להופעה חיה"},details:{en:"As opportunities arise",he:"כשיש הזדמנויות"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["special","entertainment","social"],difficulty:2,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-065",category:"wild",title:{en:"Sport Game Day",he:"יום משחק ספורט"},description:{en:"Attend or play sports together",he:"להשתתף או לשחק ספורט ביחד"},details:{en:"Seasonal",he:"עונתי"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["seasonal","sports","activity"],difficulty:1,frequency:"occasional",timeEstimate:180},history:[]},{id:"card-066",category:"wild",title:{en:"Late Night Snack Run",he:"טיול לחטיף בלילה"},description:{en:"Midnight snack adventure",he:"טיול לחטיפים בחצות הלילה"},details:{en:"Spontaneous fun",he:"כיף ספונטני"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["spontaneous","fun","food"],difficulty:1,frequency:"occasional",timeEstimate:60},history:[]},{id:"card-067",category:"wild",title:{en:"Try New Restaurant",he:"נסיון במסעדה חדשה"},description:{en:"Explore new dining spot",he:"לחקור מסעדה חדשה"},details:{en:"Monthly or as desired",he:"חודשי או לפי הרצון"},holder:null,status:"unassigned",metadata:{createdAt:new Date,modifiedAt:new Date,isCustom:!1,isActive:!0,tags:["monthly","food","exploration"],difficulty:1,frequency:"monthly",timeEstimate:120},history:[]}];function lh(){const{t}=Un(),{setLanguage:e,language:n}=Kl(),[r,s]=K.useState("dashboard"),o=[{id:"dashboard",label:t("navigation.dashboard")},{id:"gameBoard",label:t("navigation.gameBoard")},{id:"cardGallery",label:t("navigation.cardGallery")},{id:"insights",label:t("navigation.insights")},{id:"settings",label:t("navigation.settings")}];return P.jsx("nav",{className:"bg-paper border-b-2 border-ink shadow-brutal-sm",children:P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[P.jsxs("div",{className:"flex justify-between items-center h-16",children:[P.jsx("div",{className:"flex items-center",children:P.jsx("h1",{className:"font-display text-xl sm:text-2xl font-bold text-ink",children:t("common.appName")})}),P.jsx("div",{className:"hidden md:flex gap-8",children:o.map(l=>P.jsx("button",{onClick:()=>s(l.id),className:`text-sm font-body transition-all ${r===l.id?"text-partner-a font-bold":"text-ink hover:text-partner-b"}`,children:l.label},l.id))}),P.jsx("div",{className:"flex gap-4 items-center",children:P.jsx("button",{onClick:()=>e(n==="en"?"he":"en"),className:"px-3 py-1 bg-unassigned text-ink rounded-md font-body text-sm font-bold hover:shadow-brutal-sm transition-all",children:n==="en"?"עברית":"English"})})]}),P.jsx("div",{className:"md:hidden pb-4 flex gap-2 overflow-x-auto",children:o.map(l=>P.jsx("button",{onClick:()=>s(l.id),className:`px-3 py-1 rounded text-xs whitespace-nowrap transition-all ${r===l.id?"bg-partner-a text-paper font-bold":"bg-concrete text-paper hover:bg-ink"}`,children:l.label},l.id))})]})})}function uh(){return P.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[P.jsx("div",{className:"absolute inset-0 grain opacity-30"}),P.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-paper via-paper to-paper opacity-100"}),P.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-unassigned opacity-5 rounded-full blur-3xl"}),P.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-partner-a opacity-3 rounded-full blur-3xl"}),P.jsx("div",{className:"absolute top-1/2 left-1/4 w-64 h-64 bg-partner-b opacity-3 rounded-full blur-3xl"}),P.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-concrete rounded-full opacity-20"}),P.jsx("div",{className:"absolute top-1/3 right-1/4 w-3 h-3 bg-concrete rounded-full opacity-15"}),P.jsx("div",{className:"absolute bottom-1/4 right-20 w-2 h-2 bg-concrete rounded-full opacity-20"})]})}const xs=K.createContext({});function ws(t){const e=K.useRef(null);return e.current===null&&(e.current=t()),e.current}const zr=K.createContext(null),Ss=K.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class ch extends K.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function dh({children:t,isPresent:e}){const n=K.useId(),r=K.useRef(null),s=K.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=K.useContext(Ss);return K.useInsertionEffect(()=>{const{width:l,height:c,top:f,left:h}=s.current;if(e||!r.current||!l||!c)return;r.current.dataset.motionPopId=n;const g=document.createElement("style");return o&&(g.nonce=o),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${f}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[e]),P.jsx(ch,{isPresent:e,childRef:r,sizeRef:s,children:K.cloneElement(t,{ref:r})})}const fh=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l})=>{const c=ws(hh),f=K.useId(),h=K.useCallback(v=>{c.set(v,!0);for(const y of c.values())if(!y)return;r&&r()},[c,r]),g=K.useMemo(()=>({id:f,initial:e,isPresent:n,custom:s,onExitComplete:h,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),h]:[n,h]);return K.useMemo(()=>{c.forEach((v,y)=>c.set(y,!1))},[n]),K.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),l==="popLayout"&&(t=P.jsx(dh,{isPresent:n,children:t})),P.jsx(zr.Provider,{value:g,children:t})};function hh(){return new Map}function ql(t=!0){const e=K.useContext(zr);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=K.useId();K.useEffect(()=>{t&&s(o)},[t]);const l=K.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const Cr=t=>t.key||"";function oo(t){const e=[];return K.Children.forEach(t,n=>{K.isValidElement(n)&&e.push(n)}),e}const As=typeof window<"u",Ul=As?K.useLayoutEffect:K.useEffect,ph=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1})=>{const[c,f]=ql(l),h=K.useMemo(()=>oo(t),[t]),g=l&&!c?[]:h.map(Cr),v=K.useRef(!0),y=K.useRef(h),A=ws(()=>new Map),[_,L]=K.useState(h),[T,F]=K.useState(h);Ul(()=>{v.current=!1,y.current=h;for(let H=0;H<T.length;H++){const q=Cr(T[H]);g.includes(q)?A.delete(q):A.get(q)!==!0&&A.set(q,!1)}},[T,g.length,g.join("-")]);const I=[];if(h!==_){let H=[...h];for(let q=0;q<T.length;q++){const Q=T[q],ee=Cr(Q);g.includes(ee)||(H.splice(q,0,Q),I.push(Q))}o==="wait"&&I.length&&(H=I),F(oo(H)),L(h);return}const{forceRender:W}=K.useContext(xs);return P.jsx(P.Fragment,{children:T.map(H=>{const q=Cr(H),Q=l&&!c?!1:h===T||g.includes(q),ee=()=>{if(A.has(q))A.set(q,!0);else return;let ie=!0;A.forEach(te=>{te||(ie=!1)}),ie&&(W==null||W(),F(y.current),l&&(f==null||f()),r&&r())};return P.jsx(fh,{isPresent:Q,initial:!v.current||n?void 0:!1,custom:Q?void 0:e,presenceAffectsLayout:s,mode:o,onExitComplete:Q?void 0:ee,children:H},q)})})},qe=t=>t;let Hl=qe;function Cs(t){let e;return()=>(e===void 0&&(e=t()),e)}const on=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},at=t=>t*1e3,ot=t=>t/1e3,mh={useManualTiming:!1};function gh(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(f.schedule(h),t()),h(l)}const f={schedule:(h,g=!1,v=!1)=>{const A=v&&r?e:n;return g&&o.add(h),A.has(h)||A.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(l=h,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(c),e.clear(),r=!1,s&&(s=!1,f.process(h))}};return f}const kr=["read","resolveKeyframes","update","preRender","render","postRender"],yh=40;function zl(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=kr.reduce((F,I)=>(F[I]=gh(o),F),{}),{read:c,resolveKeyframes:f,update:h,preRender:g,render:v,postRender:y}=l,A=()=>{const F=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(F-s.timestamp,yh),1),s.timestamp=F,s.isProcessing=!0,c.process(s),f.process(s),h.process(s),g.process(s),v.process(s),y.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(A))},_=()=>{n=!0,r=!0,s.isProcessing||t(A)};return{schedule:kr.reduce((F,I)=>{const W=l[I];return F[I]=(H,q=!1,Q=!1)=>(n||_(),W.schedule(H,q,Q)),F},{}),cancel:F=>{for(let I=0;I<kr.length;I++)l[kr[I]].cancel(F)},state:s,steps:l}}const{schedule:ye,cancel:yt,state:Oe,steps:Vi}=zl(typeof requestAnimationFrame<"u"?requestAnimationFrame:qe,!0),Wl=K.createContext({strict:!1}),lo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ln={};for(const t in lo)ln[t]={isEnabled:e=>lo[t].some(n=>!!e[n])};function vh(t){for(const e in t)ln[e]={...ln[e],...t[e]}}const bh=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||bh.has(t)}let Gl=t=>!Mr(t);function xh(t){t&&(Gl=e=>e.startsWith("on")?!Mr(e):t(e))}try{xh(require("@emotion/is-prop-valid").default)}catch{}function wh(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Gl(s)||n===!0&&Mr(s)||!e&&!Mr(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function Sh(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Wr=K.createContext({});function Fn(t){return typeof t=="string"||Array.isArray(t)}function Gr(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ks=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ps=["initial",...ks];function Yr(t){return Gr(t.animate)||Ps.some(e=>Fn(t[e]))}function Yl(t){return!!(Yr(t)||t.variants)}function Ah(t,e){if(Yr(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fn(n)?n:void 0,animate:Fn(r)?r:void 0}}return t.inherit!==!1?e:{}}function Ch(t){const{initial:e,animate:n}=Ah(t,K.useContext(Wr));return K.useMemo(()=>({initial:e,animate:n}),[uo(e),uo(n)])}function uo(t){return Array.isArray(t)?t.join(" "):t}const kh=Symbol.for("motionComponentSymbol");function en(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ph(t,e,n){return K.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):en(n)&&(n.current=r))},[e])}const Ds=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Dh="framerAppearId",Xl="data-"+Ds(Dh),{schedule:Es}=zl(queueMicrotask,!1),Jl=K.createContext({});function Eh(t,e,n,r,s){var o,l;const{visualElement:c}=K.useContext(Wr),f=K.useContext(Wl),h=K.useContext(zr),g=K.useContext(Ss).reducedMotion,v=K.useRef(null);r=r||f.renderer,!v.current&&r&&(v.current=r(t,{visualState:e,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:g}));const y=v.current,A=K.useContext(Jl);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&Th(v.current,n,s,A);const _=K.useRef(!1);K.useInsertionEffect(()=>{y&&_.current&&y.update(n,h)});const L=n[Xl],T=K.useRef(!!L&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,L))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,L)));return Ul(()=>{y&&(_.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),Es.render(y.render),T.current&&y.animationState&&y.animationState.animateChanges())}),K.useEffect(()=>{y&&(!T.current&&y.animationState&&y.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var F;(F=window.MotionHandoffMarkAsComplete)===null||F===void 0||F.call(window,L)}),T.current=!1))}),y}function Th(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Ql(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&en(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:h})}function Ql(t){if(t)return t.options.allowProjection!==!1?t.projection:Ql(t.parent)}function jh({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var o,l;t&&vh(t);function c(h,g){let v;const y={...K.useContext(Ss),...h,layoutId:Oh(h)},{isStatic:A}=y,_=Ch(h),L=r(h,A);if(!A&&As){Rh();const T=Nh(y);v=T.MeasureLayout,_.visualElement=Eh(s,L,y,e,T.ProjectionNode)}return P.jsxs(Wr.Provider,{value:_,children:[v&&_.visualElement?P.jsx(v,{visualElement:_.visualElement,...y}):null,n(s,h,Ph(L,_.visualElement,g),L,A,_.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${(l=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&l!==void 0?l:""})`}`;const f=K.forwardRef(c);return f[kh]=s,f}function Oh({layoutId:t}){const e=K.useContext(xs).id;return e&&t!==void 0?e+"-"+t:t}function Rh(t,e){K.useContext(Wl).strict}function Nh(t){const{drag:e,layout:n}=ln;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const _h=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ts(t){return typeof t!="string"||t.includes("-")?!1:!!(_h.indexOf(t)>-1||/[A-Z]/u.test(t))}function co(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function js(t,e,n,r){if(typeof e=="function"){const[s,o]=co(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=co(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const ts=t=>Array.isArray(t),Lh=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Mh=t=>ts(t)?t[t.length-1]||0:t,Ve=t=>!!(t&&t.getVelocity);function Er(t){const e=Ve(t)?t.get():t;return Lh(e)?e.toValue():e}function Vh({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const l={latestValues:Ih(r,s,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:r,current:c,...l}),l.onUpdate=c=>n(c)),l}const Zl=t=>(e,n)=>{const r=K.useContext(Wr),s=K.useContext(zr),o=()=>Vh(t,e,r,s);return n?o():ws(o)};function Ih(t,e,n,r){const s={},o=r(t,{});for(const y in o)s[y]=Er(o[y]);let{initial:l,animate:c}=t;const f=Yr(t),h=Yl(t);e&&h&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const v=g?c:l;if(v&&typeof v!="boolean"&&!Gr(v)){const y=Array.isArray(v)?v:[v];for(let A=0;A<y.length;A++){const _=js(t,y[A]);if(_){const{transitionEnd:L,transition:T,...F}=_;for(const I in F){let W=F[I];if(Array.isArray(W)){const H=g?W.length-1:0;W=W[H]}W!==null&&(s[I]=W)}for(const I in L)s[I]=L[I]}}}return s}const cn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vt=new Set(cn),eu=t=>e=>typeof e=="string"&&e.startsWith(t),tu=eu("--"),Fh=eu("var(--"),Os=t=>Fh(t)?Bh.test(t.split("/*")[0].trim()):!1,Bh=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nu=(t,e)=>e&&typeof t=="number"?e.transform(t):t,lt=(t,e,n)=>n>e?e:n<t?t:n,dn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bn={...dn,transform:t=>lt(0,1,t)},Pr={...dn,default:1},Hn=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),gt=Hn("deg"),tt=Hn("%"),se=Hn("px"),Kh=Hn("vh"),$h=Hn("vw"),fo={...tt,parse:t=>tt.parse(t)/100,transform:t=>tt.transform(t*100)},qh={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,backgroundPositionX:se,backgroundPositionY:se},Uh={rotate:gt,rotateX:gt,rotateY:gt,rotateZ:gt,scale:Pr,scaleX:Pr,scaleY:Pr,scaleZ:Pr,skew:gt,skewX:gt,skewY:gt,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:Bn,originX:fo,originY:fo,originZ:se},ho={...dn,transform:Math.round},Rs={...qh,...Uh,zIndex:ho,size:se,fillOpacity:Bn,strokeOpacity:Bn,numOctaves:ho},Hh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zh=cn.length;function Wh(t,e,n){let r="",s=!0;for(let o=0;o<zh;o++){const l=cn[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const h=nu(c,Rs[l]);if(!f){s=!1;const g=Hh[l]||l;r+=`${g}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Ns(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const h=e[f];if(Vt.has(f)){l=!0;continue}else if(tu(f)){s[f]=h;continue}else{const g=nu(h,Rs[f]);f.startsWith("origin")?(c=!0,o[f]=g):r[f]=g}}if(e.transform||(l||n?r.transform=Wh(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:h="50%",originZ:g=0}=o;r.transformOrigin=`${f} ${h} ${g}`}}const Gh={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yh={offset:"strokeDashoffset",array:"strokeDasharray"};function Xh(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?Gh:Yh;t[o.offset]=se.transform(-r);const l=se.transform(e),c=se.transform(n);t[o.array]=`${l} ${c}`}function po(t,e,n){return typeof t=="string"?t:se.transform(e+n*t)}function Jh(t,e,n){const r=po(e,t.x,t.width),s=po(n,t.y,t.height);return`${r} ${s}`}function _s(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:f=0,...h},g,v){if(Ns(t,h,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:A,dimensions:_}=t;y.transform&&(_&&(A.transform=y.transform),delete y.transform),_&&(s!==void 0||o!==void 0||A.transform)&&(A.transformOrigin=Jh(_,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),l!==void 0&&Xh(y,l,c,f,!1)}const Ls=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ru=()=>({...Ls(),attrs:{}}),Ms=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iu(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const su=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function au(t,e,n,r){iu(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(su.has(s)?s:Ds(s),e.attrs[s])}const Vr={};function Qh(t){Object.assign(Vr,t)}function ou(t,{layout:e,layoutId:n}){return Vt.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Vr[t]||t==="opacity")}function Vs(t,e,n){var r;const{style:s}=t,o={};for(const l in s)(Ve(s[l])||e.style&&Ve(e.style[l])||ou(l,t)||((r=n==null?void 0:n.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[l]=s[l]);return o}function lu(t,e,n){const r=Vs(t,e,n);for(const s in t)if(Ve(t[s])||Ve(e[s])){const o=cn.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function Zh(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const mo=["x","y","width","height","cx","cy","r"],ep={useVisualState:Zl({scrapeMotionValuesFromProps:lu,createRenderState:ru,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in s)if(Vt.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<mo.length;c++){const f=mo[c];t[f]!==e[f]&&(l=!0)}l&&ye.read(()=>{Zh(n,r),ye.render(()=>{_s(r,s,Ms(n.tagName),t.transformTemplate),au(n,r)})})}})},tp={useVisualState:Zl({scrapeMotionValuesFromProps:Vs,createRenderState:Ls})};function uu(t,e,n){for(const r in e)!Ve(e[r])&&!ou(r,n)&&(t[r]=e[r])}function np({transformTemplate:t},e){return K.useMemo(()=>{const n=Ls();return Ns(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rp(t,e){const n=t.style||{},r={};return uu(r,n,t),Object.assign(r,np(t,e)),r}function ip(t,e){const n={},r=rp(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function sp(t,e,n,r){const s=K.useMemo(()=>{const o=ru();return _s(o,e,Ms(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};uu(o,t.style,t),s.style={...o,...s.style}}return s}function ap(t=!1){return(n,r,s,{latestValues:o},l)=>{const f=(Ts(n)?sp:ip)(r,o,l,n),h=wh(r,typeof n=="string",t),g=n!==K.Fragment?{...h,...f,ref:s}:{},{children:v}=r,y=K.useMemo(()=>Ve(v)?v.get():v,[v]);return K.createElement(n,{...g,children:y})}}function op(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Ts(r)?ep:tp,preloadedFeatures:t,useRender:ap(s),createVisualElement:e,Component:r};return jh(l)}}function cu(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Xr(t,e,n){const r=t.getProps();return js(r,e,n!==void 0?n:r.custom,t)}const lp=Cs(()=>window.ScrollTimeline!==void 0);class up{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(lp()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class cp extends up{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Is(t,e){return t?t[e]||t.default||t:void 0}const ns=2e4;function du(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ns;)e+=n,r=t.next(e);return e>=ns?1/0:e}function Fs(t){return typeof t=="function"}function go(t,e){t.timeline=e,t.onfinish=null}const Bs=t=>Array.isArray(t)&&typeof t[0]=="number",dp={linearEasing:void 0};function fp(t,e){const n=Cs(t);return()=>{var r;return(r=dp[e])!==null&&r!==void 0?r:n()}}const Ir=fp(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fu=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(on(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function hu(t){return!!(typeof t=="function"&&Ir()||!t||typeof t=="string"&&(t in rs||Ir())||Bs(t)||Array.isArray(t)&&t.every(hu))}const En=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,rs={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:En([0,.65,.55,1]),circOut:En([.55,0,1,.45]),backIn:En([.31,.01,.66,-.59]),backOut:En([.33,1.53,.69,.99])};function pu(t,e){if(t)return typeof t=="function"&&Ir()?fu(t,e):Bs(t)?En(t):Array.isArray(t)?t.map(n=>pu(n,e)||rs.easeOut):rs[t]}const Ge={x:!1,y:!1};function mu(){return Ge.x||Ge.y}function hp(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function gu(t,e){const n=hp(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function yo(t){return e=>{e.pointerType==="touch"||mu()||t(e)}}function pp(t,e,n={}){const[r,s,o]=gu(t,n),l=yo(c=>{const{target:f}=c,h=e(c);if(typeof h!="function"||!f)return;const g=yo(v=>{h(v),f.removeEventListener("pointerleave",g)});f.addEventListener("pointerleave",g,s)});return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const yu=(t,e)=>e?t===e?!0:yu(t,e.parentElement):!1,Ks=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,mp=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gp(t){return mp.has(t.tagName)||t.tabIndex!==-1}const Tn=new WeakSet;function vo(t){return e=>{e.key==="Enter"&&t(e)}}function Ii(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yp=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=vo(()=>{if(Tn.has(n))return;Ii(n,"down");const s=vo(()=>{Ii(n,"up")}),o=()=>Ii(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function bo(t){return Ks(t)&&!mu()}function vp(t,e,n={}){const[r,s,o]=gu(t,n),l=c=>{const f=c.currentTarget;if(!bo(c)||Tn.has(f))return;Tn.add(f);const h=e(c),g=(A,_)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),!(!bo(A)||!Tn.has(f))&&(Tn.delete(f),typeof h=="function"&&h(A,{success:_}))},v=A=>{g(A,n.useGlobalTarget||yu(f,A.target))},y=A=>{g(A,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",y,s)};return r.forEach(c=>{!gp(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),c.addEventListener("focus",h=>yp(h,s),s)}),o}function bp(t){return t==="x"||t==="y"?Ge[t]?null:(Ge[t]=!0,()=>{Ge[t]=!1}):Ge.x||Ge.y?null:(Ge.x=Ge.y=!0,()=>{Ge.x=Ge.y=!1})}const vu=new Set(["width","height","top","left","right","bottom",...cn]);let Tr;function xp(){Tr=void 0}const nt={now:()=>(Tr===void 0&&nt.set(Oe.isProcessing||mh.useManualTiming?Oe.timestamp:performance.now()),Tr),set:t=>{Tr=t,queueMicrotask(xp)}};function $s(t,e){t.indexOf(e)===-1&&t.push(e)}function qs(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Us{constructor(){this.subscriptions=[]}add(e){return $s(this.subscriptions,e),()=>qs(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function bu(t,e){return e?t*(1e3/e):0}const xo=30,wp=t=>!isNaN(parseFloat(t));class Sp{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=nt.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=nt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=wp(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Us);const r=this.events[e].add(n);return e==="change"?()=>{r(),ye.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xo)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,xo);return bu(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kn(t,e){return new Sp(t,e)}function Ap(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Kn(n))}function Cp(t,e){const n=Xr(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const c=Mh(o[l]);Ap(t,l,c)}}function kp(t){return!!(Ve(t)&&t.add)}function is(t,e){const n=t.getValue("willChange");if(kp(n))return n.add(e)}function xu(t){return t.props[Xl]}const wu=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Pp=1e-7,Dp=12;function Ep(t,e,n,r,s){let o,l,c=0;do l=e+(n-e)/2,o=wu(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>Pp&&++c<Dp);return l}function zn(t,e,n,r){if(t===e&&n===r)return qe;const s=o=>Ep(o,0,1,t,n);return o=>o===0||o===1?o:wu(s(o),e,r)}const Su=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Au=t=>e=>1-t(1-e),Cu=zn(.33,1.53,.69,.99),Hs=Au(Cu),ku=Su(Hs),Pu=t=>(t*=2)<1?.5*Hs(t):.5*(2-Math.pow(2,-10*(t-1))),zs=t=>1-Math.sin(Math.acos(t)),Du=Au(zs),Eu=Su(zs),Tu=t=>/^0[^.\s]+$/u.test(t);function Tp(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Tu(t):!0}const Rn=t=>Math.round(t*1e5)/1e5,Ws=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jp(t){return t==null}const Op=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gs=(t,e)=>n=>!!(typeof n=="string"&&Op.test(n)&&n.startsWith(t)||e&&!jp(n)&&Object.prototype.hasOwnProperty.call(n,e)),ju=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(Ws);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},Rp=t=>lt(0,255,t),Fi={...dn,transform:t=>Math.round(Rp(t))},_t={test:Gs("rgb","red"),parse:ju("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Fi.transform(t)+", "+Fi.transform(e)+", "+Fi.transform(n)+", "+Rn(Bn.transform(r))+")"};function Np(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ss={test:Gs("#"),parse:Np,transform:_t.transform},tn={test:Gs("hsl","hue"),parse:ju("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+tt.transform(Rn(e))+", "+tt.transform(Rn(n))+", "+Rn(Bn.transform(r))+")"},Me={test:t=>_t.test(t)||ss.test(t)||tn.test(t),parse:t=>_t.test(t)?_t.parse(t):tn.test(t)?tn.parse(t):ss.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_t.transform(t):tn.transform(t)},_p=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lp(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ws))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(_p))===null||n===void 0?void 0:n.length)||0)>0}const Ou="number",Ru="color",Mp="var",Vp="var(",wo="${}",Ip=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $n(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(Ip,f=>(Me.test(f)?(r.color.push(o),s.push(Ru),n.push(Me.parse(f))):f.startsWith(Vp)?(r.var.push(o),s.push(Mp),n.push(f)):(r.number.push(o),s.push(Ou),n.push(parseFloat(f))),++o,wo)).split(wo);return{values:n,split:c,indexes:r,types:s}}function Nu(t){return $n(t).values}function _u(t){const{split:e,types:n}=$n(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=n[l];c===Ou?o+=Rn(s[l]):c===Ru?o+=Me.transform(s[l]):o+=s[l]}return o}}const Fp=t=>typeof t=="number"?0:t;function Bp(t){const e=Nu(t);return _u(t)(e.map(Fp))}const vt={test:Lp,parse:Nu,createTransformer:_u,getAnimatableNone:Bp},Kp=new Set(["brightness","contrast","saturate","opacity"]);function $p(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ws)||[];if(!r)return t;const s=n.replace(r,"");let o=Kp.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const qp=/\b([a-z-]*)\(.*?\)/gu,as={...vt,getAnimatableNone:t=>{const e=t.match(qp);return e?e.map($p).join(" "):t}},Up={...Rs,color:Me,backgroundColor:Me,outlineColor:Me,fill:Me,stroke:Me,borderColor:Me,borderTopColor:Me,borderRightColor:Me,borderBottomColor:Me,borderLeftColor:Me,filter:as,WebkitFilter:as},Ys=t=>Up[t];function Lu(t,e){let n=Ys(t);return n!==as&&(n=vt),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Hp=new Set(["auto","none","0"]);function zp(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!Hp.has(o)&&$n(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=Lu(n,s)}const So=t=>t===dn||t===se,Ao=(t,e)=>parseFloat(t.split(", ")[e]),Co=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Ao(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?Ao(o[1],t):0}},Wp=new Set(["x","y","z"]),Gp=cn.filter(t=>!Wp.has(t));function Yp(t){const e=[];return Gp.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const un={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Co(4,13),y:Co(5,14)};un.translateX=un.x;un.translateY=un.y;const Mt=new Set;let os=!1,ls=!1;function Mu(){if(ls){const t=Array.from(Mt).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=Yp(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{var c;(c=r.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ls=!1,os=!1,Mt.forEach(t=>t.complete()),Mt.clear()}function Vu(){Mt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ls=!0)})}function Xp(){Vu(),Mu()}class Xs{constructor(e,n,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mt.add(this),os||(os=!0,ye.read(Vu),ye.resolveKeyframes(Mu))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const f=r.readValue(n,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Iu=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Jp=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Qp(t){const e=Jp.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Fu(t,e,n=1){const[r,s]=Qp(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return Iu(l)?parseFloat(l):l}return Os(s)?Fu(s,e,n+1):s}const Bu=t=>e=>e.test(t),Zp={test:t=>t==="auto",parse:t=>t},Ku=[dn,se,tt,gt,$h,Kh,Zp],ko=t=>Ku.find(Bu(t));class $u extends Xs{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),Os(h))){const g=Fu(h,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!vu.has(r)||e.length!==2)return;const[s,o]=e,l=ko(s),c=ko(o);if(l!==c)if(So(l)&&So(c))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)Tp(e[s])&&r.push(s);r.length&&zp(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=un[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=un[r](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,h])=>{n.getValue(f).set(h)}),this.resolveNoneKeyframes()}}const Po=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vt.test(t)||t==="0")&&!t.startsWith("url("));function em(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tm(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=Po(s,e),c=Po(o,e);return!l||!c?!1:em(t)||(n==="spring"||Fs(n))&&r}const nm=t=>t!==null;function Jr(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(nm),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const rm=40;class qu{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=nt.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>rm?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Xp(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=nt.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:c,onUpdate:f,isGenerator:h}=this.options;if(!h&&!tm(e,r,s,o))if(l)this.options.duration=0;else{f&&f(Jr(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const be=(t,e,n)=>t+(e-t)*n;function Bi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function im({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=Bi(f,c,t+1/3),o=Bi(f,c,t),l=Bi(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Fr(t,e){return n=>n>0?e:t}const Ki=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},sm=[ss,_t,tn],am=t=>sm.find(e=>e.test(t));function Do(t){const e=am(t);if(!e)return!1;let n=e.parse(t);return e===tn&&(n=im(n)),n}const Eo=(t,e)=>{const n=Do(t),r=Do(e);if(!n||!r)return Fr(t,e);const s={...n};return o=>(s.red=Ki(n.red,r.red,o),s.green=Ki(n.green,r.green,o),s.blue=Ki(n.blue,r.blue,o),s.alpha=be(n.alpha,r.alpha,o),_t.transform(s))},om=(t,e)=>n=>e(t(n)),Wn=(...t)=>t.reduce(om),us=new Set(["none","hidden"]);function lm(t,e){return us.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function um(t,e){return n=>be(t,e,n)}function Js(t){return typeof t=="number"?um:typeof t=="string"?Os(t)?Fr:Me.test(t)?Eo:fm:Array.isArray(t)?Uu:typeof t=="object"?Me.test(t)?Eo:cm:Fr}function Uu(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Js(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function cm(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Js(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function dm(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][s[l]],f=(n=t.values[c])!==null&&n!==void 0?n:0;r[o]=f,s[l]++}return r}const fm=(t,e)=>{const n=vt.createTransformer(e),r=$n(t),s=$n(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?us.has(t)&&!s.values.length||us.has(e)&&!r.values.length?lm(t,e):Wn(Uu(dm(r,s),s.values),n):Fr(t,e)};function Hu(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?be(t,e,n):Js(t)(t,e)}const hm=5;function zu(t,e,n){const r=Math.max(e-hm,0);return bu(n-t(r),e-r)}const we={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$i=.001;function pm({duration:t=we.duration,bounce:e=we.bounce,velocity:n=we.velocity,mass:r=we.mass}){let s,o,l=1-e;l=lt(we.minDamping,we.maxDamping,l),t=lt(we.minDuration,we.maxDuration,ot(t)),l<1?(s=h=>{const g=h*l,v=g*t,y=g-n,A=cs(h,l),_=Math.exp(-v);return $i-y/A*_},o=h=>{const v=h*l*t,y=v*n+n,A=Math.pow(l,2)*Math.pow(h,2)*t,_=Math.exp(-v),L=cs(Math.pow(h,2),l);return(-s(h)+$i>0?-1:1)*((y-A)*_)/L}):(s=h=>{const g=Math.exp(-h*t),v=(h-n)*t+1;return-$i+g*v},o=h=>{const g=Math.exp(-h*t),v=(n-h)*(t*t);return g*v});const c=5/t,f=gm(s,o,c);if(t=at(t),isNaN(f))return{stiffness:we.stiffness,damping:we.damping,duration:t};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const mm=12;function gm(t,e,n){let r=n;for(let s=1;s<mm;s++)r=r-t(r)/e(r);return r}function cs(t,e){return t*Math.sqrt(1-e*e)}const ym=["duration","bounce"],vm=["stiffness","damping","mass"];function To(t,e){return e.some(n=>t[n]!==void 0)}function bm(t){let e={velocity:we.velocity,stiffness:we.stiffness,damping:we.damping,mass:we.mass,isResolvedFromDuration:!1,...t};if(!To(t,vm)&&To(t,ym))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*lt(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:we.mass,stiffness:s,damping:o}}else{const n=pm(t);e={...e,...n,mass:we.mass},e.isResolvedFromDuration=!0}return e}function Wu(t=we.visualDuration,e=we.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:h,mass:g,duration:v,velocity:y,isResolvedFromDuration:A}=bm({...n,velocity:-ot(n.velocity||0)}),_=y||0,L=h/(2*Math.sqrt(f*g)),T=l-o,F=ot(Math.sqrt(f/g)),I=Math.abs(T)<5;r||(r=I?we.restSpeed.granular:we.restSpeed.default),s||(s=I?we.restDelta.granular:we.restDelta.default);let W;if(L<1){const q=cs(F,L);W=Q=>{const ee=Math.exp(-L*F*Q);return l-ee*((_+L*F*T)/q*Math.sin(q*Q)+T*Math.cos(q*Q))}}else if(L===1)W=q=>l-Math.exp(-F*q)*(T+(_+F*T)*q);else{const q=F*Math.sqrt(L*L-1);W=Q=>{const ee=Math.exp(-L*F*Q),ie=Math.min(q*Q,300);return l-ee*((_+L*F*T)*Math.sinh(ie)+q*T*Math.cosh(ie))/q}}const H={calculatedDuration:A&&v||null,next:q=>{const Q=W(q);if(A)c.done=q>=v;else{let ee=0;L<1&&(ee=q===0?at(_):zu(W,q,Q));const ie=Math.abs(ee)<=r,te=Math.abs(l-Q)<=s;c.done=ie&&te}return c.value=c.done?l:Q,c},toString:()=>{const q=Math.min(du(H),ns),Q=fu(ee=>H.next(q*ee).value,q,30);return q+"ms "+Q}};return H}function jo({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:h=.5,restSpeed:g}){const v=t[0],y={done:!1,value:v},A=ie=>c!==void 0&&ie<c||f!==void 0&&ie>f,_=ie=>c===void 0?f:f===void 0||Math.abs(c-ie)<Math.abs(f-ie)?c:f;let L=n*e;const T=v+L,F=l===void 0?T:l(T);F!==T&&(L=F-v);const I=ie=>-L*Math.exp(-ie/r),W=ie=>F+I(ie),H=ie=>{const te=I(ie),pe=W(ie);y.done=Math.abs(te)<=h,y.value=y.done?F:pe};let q,Q;const ee=ie=>{A(y.value)&&(q=ie,Q=Wu({keyframes:[y.value,_(y.value)],velocity:zu(W,ie,y.value),damping:s,stiffness:o,restDelta:h,restSpeed:g}))};return ee(0),{calculatedDuration:null,next:ie=>{let te=!1;return!Q&&q===void 0&&(te=!0,H(ie),ee(ie)),q!==void 0&&ie>=q?Q.next(ie-q):(!te&&H(ie),y)}}}const xm=zn(.42,0,1,1),wm=zn(0,0,.58,1),Gu=zn(.42,0,.58,1),Sm=t=>Array.isArray(t)&&typeof t[0]!="number",Am={linear:qe,easeIn:xm,easeInOut:Gu,easeOut:wm,circIn:zs,circInOut:Eu,circOut:Du,backIn:Hs,backInOut:ku,backOut:Cu,anticipate:Pu},Oo=t=>{if(Bs(t)){Hl(t.length===4);const[e,n,r,s]=t;return zn(e,n,r,s)}else if(typeof t=="string")return Am[t];return t};function Cm(t,e,n){const r=[],s=n||Hu,o=t.length-1;for(let l=0;l<o;l++){let c=s(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||qe:e;c=Wn(f,c)}r.push(c)}return r}function km(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(Hl(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Cm(e,r,s),f=c.length,h=g=>{if(l&&g<t[0])return e[0];let v=0;if(f>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const y=on(t[v],t[v+1],g);return c[v](y)};return n?g=>h(lt(t[0],t[o-1],g)):h}function Pm(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=on(0,e,r);t.push(be(n,1,s))}}function Dm(t){const e=[0];return Pm(e,t.length-1),e}function Em(t,e){return t.map(n=>n*e)}function Tm(t,e){return t.map(()=>e||Gu).splice(0,t.length-1)}function Br({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Sm(r)?r.map(Oo):Oo(r),o={done:!1,value:e[0]},l=Em(n&&n.length===e.length?n:Dm(e),t),c=km(l,e,{ease:Array.isArray(s)?s:Tm(e,s)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const jm=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ye.update(e,!0),stop:()=>yt(e),now:()=>Oe.isProcessing?Oe.timestamp:nt.now()}},Om={decay:jo,inertia:jo,tween:Br,keyframes:Br,spring:Wu},Rm=t=>t/100;class Qs extends qu{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||Xs,c=(f,h)=>this.onKeyframesResolved(f,h);this.resolver=new l(o,c,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,c=Fs(n)?n:Om[n]||Br;let f,h;c!==Br&&typeof e[0]!="number"&&(f=Wn(Rm,Hu(e[0],e[1])),e=[0,100]);const g=c({...this.options,keyframes:e});o==="mirror"&&(h=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=du(g));const{calculatedDuration:v}=g,y=v+s,A=y*(r+1)-s;return{generator:g,mirroredGenerator:h,mapPercentToKeyframes:f,calculatedDuration:v,resolvedDuration:y,totalDuration:A}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:ie}=this.options;return{done:!0,value:ie[ie.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:f,calculatedDuration:h,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:y,repeat:A,repeatType:_,repeatDelay:L,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const F=this.currentTime-y*(this.speed>=0?1:-1),I=this.speed>=0?F<0:F>g;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let W=this.currentTime,H=o;if(A){const ie=Math.min(this.currentTime,g)/v;let te=Math.floor(ie),pe=ie%1;!pe&&ie>=1&&(pe=1),pe===1&&te--,te=Math.min(te,A+1),!!(te%2)&&(_==="reverse"?(pe=1-pe,L&&(pe-=L/v)):_==="mirror"&&(H=l)),W=lt(0,1,pe)*v}const q=I?{done:!1,value:f[0]}:H.next(W);c&&(q.value=c(q.value));let{done:Q}=q;!I&&h!==null&&(Q=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const ee=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Q);return ee&&s!==void 0&&(q.value=Jr(f,this.options,s)),T&&T(q.value),ee&&this.finish(),q}get duration(){const{resolved:e}=this;return e?ot(e.calculatedDuration):0}get time(){return ot(this.currentTime)}set time(e){e=at(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ot(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=jm,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Nm=new Set(["opacity","clipPath","filter","transform"]);function _m(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:f}={}){const h={[e]:n};f&&(h.offset=f);const g=pu(c,s);return Array.isArray(g)&&(h.easing=g),t.animate(h,{delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const Lm=Cs(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Kr=10,Mm=2e4;function Vm(t){return Fs(t.type)||t.type==="spring"||!hu(t.ease)}function Im(t,e){const n=new Qs({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<Mm;)r=n.sample(o),s.push(r.value),o+=Kr;return{times:void 0,keyframes:s,duration:o-Kr,ease:"linear"}}const Yu={anticipate:Pu,backInOut:ku,circInOut:Eu};function Fm(t){return t in Yu}class Ro extends qu{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new $u(o,(l,c)=>this.onKeyframesResolved(l,c),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:l,motionValue:c,name:f,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&Ir()&&Fm(o)&&(o=Yu[o]),Vm(this.options)){const{onComplete:v,onUpdate:y,motionValue:A,element:_,...L}=this.options,T=Im(e,L);e=T.keyframes,e.length===1&&(e[1]=e[0]),r=T.duration,s=T.times,o=T.ease,l="keyframes"}const g=_m(c.owner.current,f,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=h??this.calcStartTime(),this.pendingTimeline?(go(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;c.set(Jr(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ot(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ot(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=at(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return qe;const{animation:r}=n;go(r,e)}return qe}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:g,onComplete:v,element:y,...A}=this.options,_=new Qs({...A,keyframes:r,duration:s,type:o,ease:l,times:c,isGenerator:!0}),L=at(this.time);h.setWithVelocity(_.sample(L-Kr).value,_.sample(L).value,Kr)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=n.owner.getProps();return Lm()&&r&&Nm.has(r)&&!f&&!h&&!s&&o!=="mirror"&&l!==0&&c!=="inertia"}}const Bm={type:"spring",stiffness:500,damping:25,restSpeed:10},Km=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$m={type:"keyframes",duration:.8},qm={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Um=(t,{keyframes:e})=>e.length>2?$m:Vt.has(t)?t.startsWith("scale")?Km(e[1]):Bm:qm;function Hm({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:h,...g}){return!!Object.keys(g).length}const Zs=(t,e,n,r={},s,o)=>l=>{const c=Is(r,t)||{},f=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-at(f);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};Hm(c)||(g={...g,...Um(t,g)}),g.duration&&(g.duration=at(g.duration)),g.repeatDelay&&(g.repeatDelay=at(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const y=Jr(g.keyframes,c);if(y!==void 0)return ye.update(()=>{g.onUpdate(y),g.onComplete()}),new cp([])}return!o&&Ro.supports(g)?new Ro(g):new Qs(g)};function zm({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Xu(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...f}=e;r&&(l=r);const h=[],g=s&&t.animationState&&t.animationState.getState()[s];for(const v in f){const y=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),A=f[v];if(A===void 0||g&&zm(g,v))continue;const _={delay:n,...Is(l||{},v)};let L=!1;if(window.MotionHandoffAnimation){const F=xu(t);if(F){const I=window.MotionHandoffAnimation(F,v,ye);I!==null&&(_.startTime=I,L=!0)}}is(t,v),y.start(Zs(v,y,A,t.shouldReduceMotion&&vu.has(v)?{type:!1}:_,t,L));const T=y.animation;T&&h.push(T)}return c&&Promise.all(h).then(()=>{ye.update(()=>{c&&Cp(t,c)})}),h}function ds(t,e,n={}){var r;const s=Xr(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const l=s?()=>Promise.all(Xu(t,s,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:y}=o;return Wm(t,e,g+h,v,y,n)}:()=>Promise.resolve(),{when:f}=o;if(f){const[h,g]=f==="beforeChildren"?[l,c]:[c,l];return h().then(()=>g())}else return Promise.all([l(),c(n.delay)])}function Wm(t,e,n=0,r=0,s=1,o){const l=[],c=(t.variantChildren.size-1)*r,f=s===1?(h=0)=>h*r:(h=0)=>c-h*r;return Array.from(t.variantChildren).sort(Gm).forEach((h,g)=>{h.notify("AnimationStart",e),l.push(ds(h,e,{...o,delay:n+f(g)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function Gm(t,e){return t.sortNodePosition(e)}function Ym(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>ds(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=ds(t,e,n);else{const s=typeof e=="function"?Xr(t,e,n.custom):e;r=Promise.all(Xu(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Xm=Ps.length;function Ju(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ju(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Xm;n++){const r=Ps[n],s=t.props[r];(Fn(s)||s===!1)&&(e[r]=s)}return e}const Jm=[...ks].reverse(),Qm=ks.length;function Zm(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Ym(t,n,r)))}function eg(t){let e=Zm(t),n=No(),r=!0;const s=f=>(h,g)=>{var v;const y=Xr(t,g,f==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(y){const{transition:A,transitionEnd:_,...L}=y;h={...h,...L,..._}}return h};function o(f){e=f(t)}function l(f){const{props:h}=t,g=Ju(t.parent)||{},v=[],y=new Set;let A={},_=1/0;for(let T=0;T<Qm;T++){const F=Jm[T],I=n[F],W=h[F]!==void 0?h[F]:g[F],H=Fn(W),q=F===f?I.isActive:null;q===!1&&(_=T);let Q=W===g[F]&&W!==h[F]&&H;if(Q&&r&&t.manuallyAnimateOnMount&&(Q=!1),I.protectedKeys={...A},!I.isActive&&q===null||!W&&!I.prevProp||Gr(W)||typeof W=="boolean")continue;const ee=tg(I.prevProp,W);let ie=ee||F===f&&I.isActive&&!Q&&H||T>_&&H,te=!1;const pe=Array.isArray(W)?W:[W];let xe=pe.reduce(s(F),{});q===!1&&(xe={});const{prevResolvedValues:ke={}}=I,Ie={...ke,...xe},Ye=Pe=>{ie=!0,y.has(Pe)&&(te=!0,y.delete(Pe)),I.needsAnimating[Pe]=!0;const he=t.getValue(Pe);he&&(he.liveStyle=!1)};for(const Pe in Ie){const he=xe[Pe],Ee=ke[Pe];if(A.hasOwnProperty(Pe))continue;let De=!1;ts(he)&&ts(Ee)?De=!cu(he,Ee):De=he!==Ee,De?he!=null?Ye(Pe):y.add(Pe):he!==void 0&&y.has(Pe)?Ye(Pe):I.protectedKeys[Pe]=!0}I.prevProp=W,I.prevResolvedValues=xe,I.isActive&&(A={...A,...xe}),r&&t.blockInitialAnimation&&(ie=!1),ie&&(!(Q&&ee)||te)&&v.push(...pe.map(Pe=>({animation:Pe,options:{type:F}})))}if(y.size){const T={};y.forEach(F=>{const I=t.getBaseTarget(F),W=t.getValue(F);W&&(W.liveStyle=!0),T[F]=I??null}),v.push({animation:T})}let L=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(L=!1),r=!1,L?e(v):Promise.resolve()}function c(f,h){var g;if(n[f].isActive===h)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(y=>{var A;return(A=y.animationState)===null||A===void 0?void 0:A.setActive(f,h)}),n[f].isActive=h;const v=l(f);for(const y in n)n[y].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=No(),r=!0}}}function tg(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!cu(e,t):!1}function Ot(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function No(){return{animate:Ot(!0),whileInView:Ot(),whileHover:Ot(),whileTap:Ot(),whileDrag:Ot(),whileFocus:Ot(),exit:Ot()}}class bt{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ng extends bt{constructor(e){super(e),e.animationState||(e.animationState=eg(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gr(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let rg=0;class ig extends bt{constructor(){super(...arguments),this.id=rg++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const sg={animation:{Feature:ng},exit:{Feature:ig}};function qn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Gn(t){return{point:{x:t.pageX,y:t.pageY}}}const ag=t=>e=>Ks(e)&&t(e,Gn(e));function Nn(t,e,n,r){return qn(t,e,ag(n),r)}const _o=(t,e)=>Math.abs(t-e);function og(t,e){const n=_o(t.x,e.x),r=_o(t.y,e.y);return Math.sqrt(n**2+r**2)}class Qu{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Ui(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,A=og(v.offset,{x:0,y:0})>=3;if(!y&&!A)return;const{point:_}=v,{timestamp:L}=Oe;this.history.push({..._,timestamp:L});const{onStart:T,onMove:F}=this.handlers;y||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=qi(y,this.transformPagePoint),ye.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:A,onSessionEnd:_,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Ui(v.type==="pointercancel"?this.lastMoveEventInfo:qi(y,this.transformPagePoint),this.history);this.startEvent&&A&&A(v,T),_&&_(v,T)},!Ks(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const l=Gn(e),c=qi(l,this.transformPagePoint),{point:f}=c,{timestamp:h}=Oe;this.history=[{...f,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,Ui(c,this.history)),this.removeListeners=Wn(Nn(this.contextWindow,"pointermove",this.handlePointerMove),Nn(this.contextWindow,"pointerup",this.handlePointerUp),Nn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yt(this.updatePoint)}}function qi(t,e){return e?{point:e(t.point)}:t}function Lo(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ui({point:t},e){return{point:t,delta:Lo(t,Zu(e)),offset:Lo(t,lg(e)),velocity:ug(e,.1)}}function lg(t){return t[0]}function Zu(t){return t[t.length-1]}function ug(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Zu(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>at(e)));)n--;if(!r)return{x:0,y:0};const o=ot(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const ec=1e-4,cg=1-ec,dg=1+ec,tc=.01,fg=0-tc,hg=0+tc;function Ue(t){return t.max-t.min}function pg(t,e,n){return Math.abs(t-e)<=n}function Mo(t,e,n,r=.5){t.origin=r,t.originPoint=be(e.min,e.max,t.origin),t.scale=Ue(n)/Ue(e),t.translate=be(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cg&&t.scale<=dg||isNaN(t.scale))&&(t.scale=1),(t.translate>=fg&&t.translate<=hg||isNaN(t.translate))&&(t.translate=0)}function _n(t,e,n,r){Mo(t.x,e.x,n.x,r?r.originX:void 0),Mo(t.y,e.y,n.y,r?r.originY:void 0)}function Vo(t,e,n){t.min=n.min+e.min,t.max=t.min+Ue(e)}function mg(t,e,n){Vo(t.x,e.x,n.x),Vo(t.y,e.y,n.y)}function Io(t,e,n){t.min=e.min-n.min,t.max=t.min+Ue(e)}function Ln(t,e,n){Io(t.x,e.x,n.x),Io(t.y,e.y,n.y)}function gg(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?be(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?be(n,t,r.max):Math.min(t,n)),t}function Fo(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function yg(t,{top:e,left:n,bottom:r,right:s}){return{x:Fo(t.x,n,s),y:Fo(t.y,e,r)}}function Bo(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function vg(t,e){return{x:Bo(t.x,e.x),y:Bo(t.y,e.y)}}function bg(t,e){let n=.5;const r=Ue(t),s=Ue(e);return s>r?n=on(e.min,e.max-r,t.min):r>s&&(n=on(t.min,t.max-s,e.min)),lt(0,1,n)}function xg(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const fs=.35;function wg(t=fs){return t===!1?t=0:t===!0&&(t=fs),{x:Ko(t,"left","right"),y:Ko(t,"top","bottom")}}function Ko(t,e,n){return{min:$o(t,e),max:$o(t,n)}}function $o(t,e){return typeof t=="number"?t:t[e]||0}const qo=()=>({translate:0,scale:1,origin:0,originPoint:0}),nn=()=>({x:qo(),y:qo()}),Uo=()=>({min:0,max:0}),Ce=()=>({x:Uo(),y:Uo()});function We(t){return[t("x"),t("y")]}function nc({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Sg({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ag(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Hi(t){return t===void 0||t===1}function hs({scale:t,scaleX:e,scaleY:n}){return!Hi(t)||!Hi(e)||!Hi(n)}function Rt(t){return hs(t)||rc(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rc(t){return Ho(t.x)||Ho(t.y)}function Ho(t){return t&&t!=="0%"}function $r(t,e,n){const r=t-n,s=e*r;return n+s}function zo(t,e,n,r,s){return s!==void 0&&(t=$r(t,s,r)),$r(t,n,r)+e}function ps(t,e=0,n=1,r,s){t.min=zo(t.min,e,n,r,s),t.max=zo(t.max,e,n,r,s)}function ic(t,{x:e,y:n}){ps(t.x,e.translate,e.scale,e.originPoint),ps(t.y,n.translate,n.scale,n.originPoint)}const Wo=.999999999999,Go=1.0000000000001;function Cg(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&sn(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,ic(t,l)),r&&Rt(o.latestValues)&&sn(t,o.latestValues))}e.x<Go&&e.x>Wo&&(e.x=1),e.y<Go&&e.y>Wo&&(e.y=1)}function rn(t,e){t.min=t.min+e,t.max=t.max+e}function Yo(t,e,n,r,s=.5){const o=be(t.min,t.max,s);ps(t,e,n,o,r)}function sn(t,e){Yo(t.x,e.x,e.scaleX,e.scale,e.originX),Yo(t.y,e.y,e.scaleY,e.scale,e.originY)}function sc(t,e){return nc(Ag(t.getBoundingClientRect(),e))}function kg(t,e,n){const r=sc(t,n),{scroll:s}=e;return s&&(rn(r.x,s.offset.x),rn(r.y,s.offset.y)),r}const ac=({current:t})=>t?t.ownerDocument.defaultView:null,Pg=new WeakMap;class Dg{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ce(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gn(g).point)},o=(g,v)=>{const{drag:y,dragPropagation:A,onDragStart:_}=this.getProps();if(y&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bp(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),We(T=>{let F=this.getAxisMotionValue(T).get()||0;if(tt.test(F)){const{projection:I}=this.visualElement;if(I&&I.layout){const W=I.layout.layoutBox[T];W&&(F=Ue(W)*(parseFloat(F)/100))}}this.originPoint[T]=F}),_&&ye.postRender(()=>_(g,v)),is(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:y,dragDirectionLock:A,onDirectionLock:_,onDrag:L}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:T}=v;if(A&&this.currentDirection===null){this.currentDirection=Eg(T),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),L&&L(g,v)},c=(g,v)=>this.stop(g,v),f=()=>We(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Qu(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:ac(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ye.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Dr(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=gg(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&en(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=yg(s.layoutBox,n):this.constraints=!1,this.elastic=wg(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&We(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=xg(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!en(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=kg(r,s.root,this.visualElement.getTransformPagePoint());let l=vg(s.layout.layoutBox,o);if(n){const c=n(Sg(l));this.hasMutatedConstraints=!!c,c&&(l=nc(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},h=We(g=>{if(!Dr(g,n,this.currentDirection))return;let v=f&&f[g]||{};l&&(v={min:0,max:0});const y=s?200:1e6,A=s?40:1e7,_={type:"inertia",velocity:r?e[g]:0,bounceStiffness:y,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,_)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return is(this.visualElement,e),r.start(Zs(e,r,0,n,this.visualElement,!1))}stopAnimation(){We(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){We(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){We(n=>{const{drag:r}=this.getProps();if(!Dr(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[n];o.set(e[n]-be(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!en(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};We(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();s[l]=bg({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),We(l=>{if(!Dr(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:h}=this.constraints[l];c.set(be(f,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;Pg.set(this.visualElement,this);const e=this.visualElement.current,n=Nn(e,"pointerdown",f=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();en(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ye.read(r);const l=qn(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(We(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=f[g].translate,v.set(v.get()+f[g].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=fs,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Dr(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Eg(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Tg extends bt{constructor(e){super(e),this.removeGroupControls=qe,this.removeListeners=qe,this.controls=new Dg(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Xo=t=>(e,n)=>{t&&ye.postRender(()=>t(e,n))};class jg extends bt{constructor(){super(...arguments),this.removePointerDownListener=qe}onPointerDown(e){this.session=new Qu(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ac(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Xo(e),onStart:Xo(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&ye.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Nn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Jo(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Dn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(se.test(t))t=parseFloat(t);else return t;const n=Jo(t,e.target.x),r=Jo(t,e.target.y);return`${n}% ${r}%`}},Og={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=vt.parse(t);if(s.length>5)return r;const o=vt.createTransformer(t),l=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=f;const h=be(c,f,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};class Rg extends K.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;Qh(Ng),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),jr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||ye.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Es.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oc(t){const[e,n]=ql(),r=K.useContext(xs);return P.jsx(Rg,{...t,layoutGroup:r,switchLayoutGroup:K.useContext(Jl),isPresent:e,safeToRemove:n})}const Ng={borderRadius:{...Dn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dn,borderTopRightRadius:Dn,borderBottomLeftRadius:Dn,borderBottomRightRadius:Dn,boxShadow:Og};function _g(t,e,n){const r=Ve(t)?t:Kn(t);return r.start(Zs("",r,e,n)),r.animation}function Lg(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Mg=(t,e)=>t.depth-e.depth;class Vg{constructor(){this.children=[],this.isDirty=!1}add(e){$s(this.children,e),this.isDirty=!0}remove(e){qs(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Mg),this.isDirty=!1,this.children.forEach(e)}}function Ig(t,e){const n=nt.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(yt(r),t(o-e))};return ye.read(r,!0),()=>yt(r)}const lc=["TopLeft","TopRight","BottomLeft","BottomRight"],Fg=lc.length,Qo=t=>typeof t=="string"?parseFloat(t):t,Zo=t=>typeof t=="number"||se.test(t);function Bg(t,e,n,r,s,o){s?(t.opacity=be(0,n.opacity!==void 0?n.opacity:1,Kg(r)),t.opacityExit=be(e.opacity!==void 0?e.opacity:1,0,$g(r))):o&&(t.opacity=be(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let l=0;l<Fg;l++){const c=`border${lc[l]}Radius`;let f=el(e,c),h=el(n,c);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||Zo(f)===Zo(h)?(t[c]=Math.max(be(Qo(f),Qo(h),r),0),(tt.test(h)||tt.test(f))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=be(e.rotate||0,n.rotate||0,r))}function el(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Kg=uc(0,.5,Du),$g=uc(.5,.95,qe);function uc(t,e,n){return r=>r<t?0:r>e?1:n(on(t,e,r))}function tl(t,e){t.min=e.min,t.max=e.max}function ze(t,e){tl(t.x,e.x),tl(t.y,e.y)}function nl(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function rl(t,e,n,r,s){return t-=e,t=$r(t,1/n,r),s!==void 0&&(t=$r(t,1/s,r)),t}function qg(t,e=0,n=1,r=.5,s,o=t,l=t){if(tt.test(e)&&(e=parseFloat(e),e=be(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=be(o.min,o.max,r);t===o&&(c-=e),t.min=rl(t.min,e,n,c,s),t.max=rl(t.max,e,n,c,s)}function il(t,e,[n,r,s],o,l){qg(t,e[n],e[r],e[s],e.scale,o,l)}const Ug=["x","scaleX","originX"],Hg=["y","scaleY","originY"];function sl(t,e,n,r){il(t.x,e,Ug,n?n.x:void 0,r?r.x:void 0),il(t.y,e,Hg,n?n.y:void 0,r?r.y:void 0)}function al(t){return t.translate===0&&t.scale===1}function cc(t){return al(t.x)&&al(t.y)}function ol(t,e){return t.min===e.min&&t.max===e.max}function zg(t,e){return ol(t.x,e.x)&&ol(t.y,e.y)}function ll(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function dc(t,e){return ll(t.x,e.x)&&ll(t.y,e.y)}function ul(t){return Ue(t.x)/Ue(t.y)}function cl(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Wg{constructor(){this.members=[]}add(e){$s(this.members,e),e.scheduleRender()}remove(e){if(qs(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Gg(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:g,rotateX:v,rotateY:y,skewX:A,skewY:_}=n;h&&(r=`perspective(${h}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),y&&(r+=`rotateY(${y}deg) `),A&&(r+=`skewX(${A}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const Nt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},jn=typeof window<"u"&&window.MotionDebug!==void 0,zi=["","X","Y","Z"],Yg={visibility:"hidden"},dl=1e3;let Xg=0;function Wi(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function fc(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xu(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ye,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&fc(r)}function hc({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=Xg++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jn&&(Nt.totalNodes=Nt.resolvedTargetDeltas=Nt.recalculatedProjection=0),this.nodes.forEach(Zg),this.nodes.forEach(iy),this.nodes.forEach(sy),this.nodes.forEach(ey),jn&&window.MotionDebug.record(Nt)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new Vg)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Us),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Lg(l),this.instance=l;const{layoutId:f,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||f)&&(this.isLayoutDirty=!0),t){let v;const y=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=Ig(y,250),jr.hasAnimatedSinceResize&&(jr.hasAnimatedSinceResize=!1,this.nodes.forEach(hl))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y,hasRelativeTargetChanged:A,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||g.getDefaultTransition()||cy,{onLayoutAnimationStart:T,onLayoutAnimationComplete:F}=g.getProps(),I=!this.targetLayout||!dc(this.targetLayout,_)||A,W=!y&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||W||y&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,W);const H={...Is(L,"layout"),onPlay:T,onComplete:F};(g.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H)}else y||hl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ay),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fl);return}this.isUpdating||this.nodes.forEach(ny),this.isUpdating=!1,this.nodes.forEach(ry),this.nodes.forEach(Jg),this.nodes.forEach(Qg),this.clearAllSnapshots();const c=nt.now();Oe.delta=lt(0,1e3/60,c-Oe.timestamp),Oe.timestamp=c,Oe.isProcessing=!0,Vi.update.process(Oe),Vi.preRender.process(Oe),Vi.render.process(Oe),Oe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Es.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ty),this.sharedNodes.forEach(oy)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ce(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!cc(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&(c||Rt(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),dy(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return Ce();const f=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(fy))){const{scroll:g}=this.root;g&&(rn(f.x,g.offset.x),rn(f.y,g.offset.y))}return f}removeElementScroll(l){var c;const f=Ce();if(ze(f,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return f;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:v,options:y}=g;g!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&ze(f,l),rn(f.x,v.offset.x),rn(f.y,v.offset.y))}return f}applyTransform(l,c=!1){const f=Ce();ze(f,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&sn(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Rt(g.latestValues)&&sn(f,g.latestValues)}return Rt(this.latestValues)&&sn(f,this.latestValues),f}removeTransform(l){const c=Ce();ze(c,l);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!Rt(h.latestValues))continue;hs(h.latestValues)&&h.updateSnapshot();const g=Ce(),v=h.measurePageBox();ze(g,v),sl(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return Rt(this.latestValues)&&sl(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Oe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==f;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:y}=this.options;if(!(!this.layout||!(v||y))){if(this.resolvedRelativeTargetAt=Oe.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),Ln(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ze(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ce(),this.targetWithTransforms=Ce()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mg(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ze(this.target,this.layout.layoutBox),ic(this.target,this.targetDelta)):ze(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),Ln(this.relativeTargetOrigin,this.target,A.target),ze(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jn&&Nt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hs(this.parent.latestValues)||rc(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),f=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Oe.timestamp&&(h=!1),h)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;ze(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,A=this.treeScale.y;Cg(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ce());const{target:_}=c;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nl(this.prevProjectionDelta.x,this.projectionDelta.x),nl(this.prevProjectionDelta.y,this.projectionDelta.y)),_n(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==A||!cl(this.projectionDelta.x,this.prevProjectionDelta.x)||!cl(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),jn&&Nt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nn(),this.projectionDelta=nn(),this.projectionDeltaWithTransform=nn()}setAnimationOrigin(l,c=!1){const f=this.snapshot,h=f?f.latestValues:{},g={...this.latestValues},v=nn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=Ce(),A=f?f.source:void 0,_=this.layout?this.layout.source:void 0,L=A!==_,T=this.getStack(),F=!T||T.members.length<=1,I=!!(L&&!F&&this.options.crossfade===!0&&!this.path.some(uy));this.animationProgress=0;let W;this.mixTargetDelta=H=>{const q=H/1e3;pl(v.x,l.x,q),pl(v.y,l.y,q),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ln(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ly(this.relativeTarget,this.relativeTargetOrigin,y,q),W&&zg(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=Ce()),ze(W,this.relativeTarget)),L&&(this.animationValues=g,Bg(g,h,this.latestValues,q,I,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ye.update(()=>{jr.hasAnimatedSinceResize=!0,this.currentAnimation=_g(0,dl,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dl),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:h,latestValues:g}=l;if(!(!c||!f||!h)){if(this!==l&&this.layout&&h&&pc(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||Ce();const v=Ue(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+v;const y=Ue(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+y}ze(c,f),sn(c,g),_n(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Wg),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const h={};f.z&&Wi("z",l,h,this.animationValues);for(let g=0;g<zi.length;g++)Wi(`rotate${zi[g]}`,l,h,this.animationValues),Wi(`skew${zi[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}getProjectionStyles(l){var c,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Yg;const h={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Er(l==null?void 0:l.pointerEvents)||"",h.transform=g?g(this.latestValues,""):"none",h;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const L={};return this.options.layoutId&&(L.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,L.pointerEvents=Er(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Rt(this.latestValues)&&(L.transform=g?g({},""):"none",this.hasProjected=!1),L}const y=v.animationValues||v.latestValues;this.applyTransformsToTarget(),h.transform=Gg(this.projectionDeltaWithTransform,this.treeScale,y),g&&(h.transform=g(y,h.transform));const{x:A,y:_}=this.projectionDelta;h.transformOrigin=`${A.origin*100}% ${_.origin*100}% 0`,v.animationValues?h.opacity=v===this?(f=(c=y.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=v===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const L in Vr){if(y[L]===void 0)continue;const{correct:T,applyTo:F}=Vr[L],I=h.transform==="none"?y[L]:T(y[L],v);if(F){const W=F.length;for(let H=0;H<W;H++)h[F[H]]=I}else h[L]=I}return this.options.layoutId&&(h.pointerEvents=v===this?Er(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(fl),this.root.sharedNodes.clear()}}}function Jg(t){t.updateLayout()}function Qg(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?We(v=>{const y=l?n.measuredBox[v]:n.layoutBox[v],A=Ue(y);y.min=r[v].min,y.max=y.min+A}):pc(o,n.layoutBox,r)&&We(v=>{const y=l?n.measuredBox[v]:n.layoutBox[v],A=Ue(r[v]);y.max=y.min+A,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+A)});const c=nn();_n(c,r,n.layoutBox);const f=nn();l?_n(f,t.applyTransform(s,!0),n.measuredBox):_n(f,r,n.layoutBox);const h=!cc(c);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:A}=v;if(y&&A){const _=Ce();Ln(_,n.layoutBox,y.layoutBox);const L=Ce();Ln(L,r,A.layoutBox),dc(_,L)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=L,t.relativeTargetOrigin=_,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:f,layoutDelta:c,hasLayoutChanged:h,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Zg(t){jn&&Nt.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ey(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ty(t){t.clearSnapshot()}function fl(t){t.clearMeasurements()}function ny(t){t.isLayoutDirty=!1}function ry(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hl(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iy(t){t.resolveTargetDelta()}function sy(t){t.calcProjection()}function ay(t){t.resetSkewAndRotation()}function oy(t){t.removeLeadSnapshot()}function pl(t,e,n){t.translate=be(e.translate,0,n),t.scale=be(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ml(t,e,n,r){t.min=be(e.min,n.min,r),t.max=be(e.max,n.max,r)}function ly(t,e,n,r){ml(t.x,e.x,n.x,r),ml(t.y,e.y,n.y,r)}function uy(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const cy={duration:.45,ease:[.4,0,.1,1]},gl=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),yl=gl("applewebkit/")&&!gl("chrome/")?Math.round:qe;function vl(t){t.min=yl(t.min),t.max=yl(t.max)}function dy(t){vl(t.x),vl(t.y)}function pc(t,e,n){return t==="position"||t==="preserve-aspect"&&!pg(ul(e),ul(n),.2)}function fy(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const hy=hc({attachResizeListener:(t,e)=>qn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gi={current:void 0},mc=hc({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gi.current){const t=new hy({});t.mount(window),t.setOptions({layoutScroll:!0}),Gi.current=t}return Gi.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),py={pan:{Feature:jg},drag:{Feature:Tg,ProjectionNode:mc,MeasureLayout:oc}};function bl(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&ye.postRender(()=>o(e,Gn(e)))}class my extends bt{mount(){const{current:e}=this.node;e&&(this.unmount=pp(e,n=>(bl(this.node,n,"Start"),r=>bl(this.node,r,"End"))))}unmount(){}}class gy extends bt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wn(qn(this.node.current,"focus",()=>this.onFocus()),qn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function xl(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&ye.postRender(()=>o(e,Gn(e)))}class yy extends bt{mount(){const{current:e}=this.node;e&&(this.unmount=vp(e,n=>(xl(this.node,n,"Start"),(r,{success:s})=>xl(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ms=new WeakMap,Yi=new WeakMap,vy=t=>{const e=ms.get(t.target);e&&e(t)},by=t=>{t.forEach(vy)};function xy({root:t,...e}){const n=t||document;Yi.has(n)||Yi.set(n,{});const r=Yi.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(by,{root:t,...e})),r[s]}function wy(t,e,n){const r=xy(e);return ms.set(t,n),r.observe(t),()=>{ms.delete(t),r.unobserve(t)}}const Sy={some:0,all:1};class Ay extends bt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Sy[s]},c=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),y=h?g:v;y&&y(f)};return wy(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Cy(e,n))&&this.startObserver()}unmount(){}}function Cy({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ky={inView:{Feature:Ay},tap:{Feature:yy},focus:{Feature:gy},hover:{Feature:my}},Py={layout:{ProjectionNode:mc,MeasureLayout:oc}},gs={current:null},gc={current:!1};function Dy(){if(gc.current=!0,!!As)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>gs.current=t.matches;t.addListener(e),e()}else gs.current=!1}const Ey=[...Ku,Me,vt],Ty=t=>Ey.find(Bu(t)),wl=new WeakMap;function jy(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Ve(s))t.addValue(r,s);else if(Ve(o))t.addValue(r,Kn(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Kn(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Sl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Oy{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xs,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=nt.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,ye.render(this.render,!1,!0))};const{latestValues:f,renderState:h,onUpdate:g}=l;this.onUpdate=g,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Yr(n),this.isVariantNode=Yl(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in y){const _=y[A];f[A]!==void 0&&Ve(_)&&_.set(f[A],!1)}}mount(e){this.current=e,wl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),gc.current||Dy(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gs.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){wl.delete(this.current),this.projection&&this.projection.unmount(),yt(this.notifyUpdate),yt(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vt.has(e),s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ye.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ln){const n=ln[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ce()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Sl.length;r++){const s=Sl[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=jy(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Kn(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Iu(s)||Tu(s))?s=parseFloat(s):!Ty(s)&&vt.test(n)&&(s=Lu(e,n)),this.setBaseTarget(e,Ve(s)?s.get():s)),Ve(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=js(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(s=l[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ve(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Us),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class yc extends Oy{constructor(){super(...arguments),this.KeyframeResolver=$u}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ve(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ry(t){return window.getComputedStyle(t)}class Ny extends yc{constructor(){super(...arguments),this.type="html",this.renderInstance=iu}readValueFromInstance(e,n){if(Vt.has(n)){const r=Ys(n);return r&&r.default||0}else{const r=Ry(e),s=(tu(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sc(e,n)}build(e,n,r){Ns(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Vs(e,n,r)}}class _y extends yc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ce}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vt.has(n)){const r=Ys(n);return r&&r.default||0}return n=su.has(n)?n:Ds(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return lu(e,n,r)}build(e,n,r){_s(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){au(e,n,r,s)}mount(e){this.isSVGTag=Ms(e.tagName),super.mount(e)}}const Ly=(t,e)=>Ts(t)?new _y(e):new Ny(e,{allowProjection:t!==K.Fragment}),My=op({...sg,...ky,...py,...Py},Ly),Be=Sh(My);function ys({card:t,isSelected:e=!1,onClick:n,onDragStart:r,draggable:s=!0}){const{i18n:o}=Un(),[l,c]=K.useState(!1),[f,h]=K.useState(!1),g=o.language==="he",v=g?t.title.he:t.title.en,y=g?t.description.he:t.description.en,A=()=>{switch(t.holder){case"partner-a":return"bg-partner-a";case"partner-b":return"bg-partner-b";default:return"bg-unassigned"}},_=()=>{switch(t.category){case"daily-grind":return"border-partner-a";case"kids":return"border-partner-b";case"home":return"border-concrete";case"magic":return"border-unassigned";case"wild":return"border-ink";default:return"border-concrete"}},L={initial:{opacity:0,y:20},animate:{opacity:1,y:0},hover:{y:-12,boxShadow:"0 12px 24px rgba(10, 9, 8, 0.15)"},selected:{boxShadow:"0 0 0 3px rgba(230, 57, 70, 0.5)"}};return P.jsx("div",{draggable:s,onDragStart:r,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:P.jsxs(Be.div,{className:`relative w-full h-64 cursor-grab active:cursor-grabbing ${s?"hover:shadow-brutal":""}`,variants:L,initial:"initial",animate:e?"selected":"animate",whileHover:s?"hover":{},onClick:()=>{s||c(!l),n==null||n()},children:[P.jsxs(Be.div,{className:"w-full h-full relative",animate:{rotateY:l?180:0},transition:{duration:.6,type:"spring",stiffness:100},style:{transformStyle:"preserve-3d"},children:[P.jsxs("div",{className:`absolute w-full h-full ${A()} border-4 ${_()} rounded-lg p-6 flex flex-col justify-between torn-paper grain`,style:{backfaceVisibility:"hidden"},children:[P.jsxs("div",{children:[P.jsx("div",{className:"text-xs font-display font-bold text-paper mb-2 opacity-80 uppercase tracking-wider",children:t.category}),P.jsx("h3",{className:`font-display text-xl font-bold text-paper mb-3 ${g?"text-right":"text-left"}`,children:v}),P.jsx("p",{className:`text-sm font-body text-paper/90 line-clamp-3 ${g?"text-right":"text-left"}`,children:y})]}),P.jsxs("div",{className:"flex justify-between items-center text-xs text-paper/70 mt-4",children:[P.jsxs("div",{className:"flex gap-2",children:[t.metadata.difficulty>0&&P.jsx("span",{className:"font-bold",children:"⚡".repeat(t.metadata.difficulty)}),P.jsxs("span",{className:"opacity-75",children:[t.metadata.timeEstimate,"m"]})]}),f&&s&&P.jsx("span",{className:"text-paper/50 text-xs italic",children:"drag"})]})]}),P.jsxs("div",{className:"absolute w-full h-full bg-paper border-4 border-ink rounded-lg p-6 flex flex-col justify-between torn-paper grain",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[P.jsxs("div",{children:[P.jsx("h4",{className:"font-display text-sm font-bold text-ink mb-3 uppercase",children:"Details"}),P.jsx("p",{className:`text-sm font-body text-ink/80 ${g?"text-right":"text-left"}`,children:g?t.details.he:t.details.en})]}),P.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[P.jsx("span",{className:"text-xs px-2 py-1 bg-unassigned text-ink rounded font-bold",children:t.status}),t.metadata.isCustom&&P.jsx("span",{className:"text-xs px-2 py-1 bg-concrete/20 text-ink rounded",children:"Custom"})]})]})]}),e&&P.jsx("div",{className:"absolute -inset-2 border-3 border-partner-a rounded-lg pointer-events-none animate-pulse"})]})})}const Vy=["daily-grind","kids","home","magic","wild"],Iy=["daily","weekly","monthly","occasional"],Fy=[1,2,3];function By({isOpen:t,card:e,onClose:n,onSuccess:r}){const{addCard:s,updateCard:o,removeCard:l}=In(),[c,f]=K.useState({titleEn:"",titleHe:"",descEn:"",descHe:"",detailsEn:"",detailsHe:"",category:"daily-grind",frequency:"weekly",difficulty:1,timeEstimate:30}),[h,g]=K.useState({}),[v,y]=K.useState(!1);K.useEffect(()=>{e?(f({titleEn:e.title.en,titleHe:e.title.he,descEn:e.description.en,descHe:e.description.he,detailsEn:e.details.en,detailsHe:e.details.he,category:e.category,frequency:e.metadata.frequency,difficulty:e.metadata.difficulty,timeEstimate:e.metadata.timeEstimate}),g({})):f({titleEn:"",titleHe:"",descEn:"",descHe:"",detailsEn:"",detailsHe:"",category:"daily-grind",frequency:"weekly",difficulty:1,timeEstimate:30})},[e,t]);const A=()=>{const T={};return c.titleEn.trim()||(T.titleEn="English title required"),c.titleHe.trim()||(T.titleHe="Hebrew title required"),c.descEn.trim()||(T.descEn="English description required"),c.descHe.trim()||(T.descHe="Hebrew description required"),c.detailsEn.trim()||(T.detailsEn="English details required"),c.detailsHe.trim()||(T.detailsHe="Hebrew details required"),(c.timeEstimate<5||c.timeEstimate>480)&&(T.timeEstimate="Time estimate must be between 5-480 minutes"),g(T),Object.keys(T).length===0},_=T=>{if(T.preventDefault(),!A())return;const F={id:(e==null?void 0:e.id)||`card-${Date.now()}`,category:c.category,title:{en:c.titleEn,he:c.titleHe},description:{en:c.descEn,he:c.descHe},details:{en:c.detailsEn,he:c.detailsHe},holder:(e==null?void 0:e.holder)||null,status:(e==null?void 0:e.status)||"unassigned",metadata:{createdAt:(e==null?void 0:e.metadata.createdAt)||new Date,modifiedAt:new Date,isCustom:!0,isActive:!0,tags:(e==null?void 0:e.metadata.tags)||[],difficulty:c.difficulty,frequency:c.frequency,timeEstimate:c.timeEstimate},history:(e==null?void 0:e.history)||[]};e?o(F):s(F),r==null||r(),n()},L=async()=>{e&&window.confirm(`Are you sure you want to delete "${c.titleEn}"? This cannot be undone.`)&&(y(!0),l(e.id),r==null||r(),n())};return P.jsx(ph,{children:t&&P.jsxs(P.Fragment,{children:[P.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-ink/50 z-40"}),P.jsxs(Be.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-4 md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-2xl bg-paper border-4 border-ink rounded-lg z-50 shadow-brutal overflow-y-auto max-h-[90vh]",children:[P.jsxs("div",{className:"sticky top-0 bg-paper border-b-4 border-ink p-6 flex justify-between items-center",children:[P.jsx("h2",{className:"font-display text-2xl font-bold text-ink",children:e?"Edit Card":"Create New Card"}),P.jsx("button",{onClick:n,className:"text-2xl font-bold text-ink hover:text-partner-a transition-colors","aria-label":"Close modal",children:"✕"})]}),P.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2",children:"Category"}),P.jsx("select",{value:c.category,onChange:T=>f({...c,category:T.target.value}),className:"w-full px-4 py-2 border-2 border-concrete rounded-lg font-body focus:outline-none focus:border-partner-a",children:Vy.map(T=>P.jsx("option",{value:T,children:T},T))})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2",children:"English Title *"}),P.jsx("input",{type:"text",value:c.titleEn,onChange:T=>f({...c,titleEn:T.target.value}),placeholder:"e.g., Morning Dishes",className:`w-full px-4 py-2 border-2 rounded-lg font-body focus:outline-none ${h.titleEn?"border-partner-a focus:border-partner-a":"border-concrete focus:border-partner-a"}`}),h.titleEn&&P.jsx("p",{className:"text-partner-a text-sm mt-1",children:h.titleEn})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2",children:"Hebrew Title *"}),P.jsx("input",{type:"text",value:c.titleHe,onChange:T=>f({...c,titleHe:T.target.value}),placeholder:"כותרת בעברית",className:`w-full px-4 py-2 border-2 rounded-lg font-body focus:outline-none text-right ${h.titleHe?"border-partner-a focus:border-partner-a":"border-concrete focus:border-partner-a"}`,dir:"rtl"}),h.titleHe&&P.jsx("p",{className:"text-partner-a text-sm mt-1",children:h.titleHe})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2",children:"English Description *"}),P.jsx("textarea",{value:c.descEn,onChange:T=>f({...c,descEn:T.target.value}),placeholder:"Brief description of the task",rows:3,className:`w-full px-4 py-2 border-2 rounded-lg font-body focus:outline-none resize-none ${h.descEn?"border-partner-a focus:border-partner-a":"border-concrete focus:border-partner-a"}`}),h.descEn&&P.jsx("p",{className:"text-partner-a text-sm mt-1",children:h.descEn})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2",children:"Hebrew Description *"}),P.jsx("textarea",{value:c.descHe,onChange:T=>f({...c,descHe:T.target.value}),placeholder:"תיאור קצר של המשימה",rows:3,dir:"rtl",className:`w-full px-4 py-2 border-2 rounded-lg font-body focus:outline-none resize-none text-right ${h.descHe?"border-partner-a focus:border-partner-a":"border-concrete focus:border-partner-a"}`}),h.descHe&&P.jsx("p",{className:"text-partner-a text-sm mt-1",children:h.descHe})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2",children:"English Details *"}),P.jsx("textarea",{value:c.detailsEn,onChange:T=>f({...c,detailsEn:T.target.value}),placeholder:"Additional details (frequency, notes, etc.)",rows:2,className:`w-full px-4 py-2 border-2 rounded-lg font-body focus:outline-none resize-none ${h.detailsEn?"border-partner-a focus:border-partner-a":"border-concrete focus:border-partner-a"}`}),h.detailsEn&&P.jsx("p",{className:"text-partner-a text-sm mt-1",children:h.detailsEn})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2",children:"Hebrew Details *"}),P.jsx("textarea",{value:c.detailsHe,onChange:T=>f({...c,detailsHe:T.target.value}),placeholder:"פרטים נוספים",rows:2,dir:"rtl",className:`w-full px-4 py-2 border-2 rounded-lg font-body focus:outline-none resize-none text-right ${h.detailsHe?"border-partner-a focus:border-partner-a":"border-concrete focus:border-partner-a"}`}),h.detailsHe&&P.jsx("p",{className:"text-partner-a text-sm mt-1",children:h.detailsHe})]}),P.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2 text-sm",children:"Frequency"}),P.jsx("select",{value:c.frequency,onChange:T=>f({...c,frequency:T.target.value}),className:"w-full px-3 py-2 border-2 border-concrete rounded-lg font-body text-sm focus:outline-none focus:border-partner-a",children:Iy.map(T=>P.jsx("option",{value:T,children:T},T))})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2 text-sm",children:"Difficulty"}),P.jsx("select",{value:c.difficulty,onChange:T=>f({...c,difficulty:parseInt(T.target.value)}),className:"w-full px-3 py-2 border-2 border-concrete rounded-lg font-body text-sm focus:outline-none focus:border-partner-a",children:Fy.map(T=>P.jsx("option",{value:T,children:"⚡".repeat(T)},T))})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block font-display font-bold text-ink mb-2 text-sm",children:"Time (min) *"}),P.jsx("input",{type:"number",value:c.timeEstimate,onChange:T=>f({...c,timeEstimate:parseInt(T.target.value)||0}),min:"5",max:"480",className:`w-full px-3 py-2 border-2 rounded-lg font-body text-sm focus:outline-none ${h.timeEstimate?"border-partner-a focus:border-partner-a":"border-concrete focus:border-partner-a"}`}),h.timeEstimate&&P.jsx("p",{className:"text-partner-a text-xs mt-1",children:h.timeEstimate})]})]}),P.jsxs("div",{className:"flex gap-3 pt-6 border-t-2 border-concrete",children:[P.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-partner-a text-paper font-display font-bold rounded-lg hover:shadow-brutal transition-all",children:e?"Update Card":"Create Card"}),P.jsx("button",{type:"button",onClick:n,className:"flex-1 px-6 py-3 bg-concrete/20 text-ink font-display font-bold rounded-lg hover:bg-concrete/30 transition-all",children:"Cancel"}),e&&P.jsx("button",{type:"button",onClick:L,disabled:v,className:"px-6 py-3 bg-partner-a/30 text-partner-a font-display font-bold rounded-lg hover:bg-partner-a/50 disabled:opacity-50 transition-all",title:"Delete this card",children:"🗑️"})]})]})]})]})})}function Ky({partner:t,cards:e,onCardDrop:n,isActive:r=!0,totalTime:s=0}){const[o,l]=K.useState(!1),c=y=>{y.preventDefault(),l(!0)},f=()=>{l(!1)},h=y=>{y.preventDefault(),l(!1);const A=y.dataTransfer.getData("cardId");n==null||n(A)},g=t.id==="partner-a"?"bg-partner-a":"bg-partner-b",v=t.id==="partner-a"?"border-partner-a":"border-partner-b";return P.jsxs(Be.div,{className:`flex-1 rounded-lg border-3 ${v} p-6 transition-all ${o?"ring-2 ring-offset-2 ring-ink shadow-brutal":"shadow-brutal-sm"} ${r?"opacity-100":"opacity-70"}`,onDragOver:c,onDragLeave:f,onDrop:h,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[P.jsxs("div",{className:"mb-6 pb-4 border-b-2 border-ink",children:[P.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[P.jsx("div",{className:`w-12 h-12 ${g} rounded-full flex items-center justify-center text-paper font-display font-bold text-lg shadow-brutal-sm`,children:t.name.charAt(0).toUpperCase()}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-display text-lg font-bold text-ink",children:t.name}),P.jsxs("p",{className:"text-xs font-body text-concrete",children:[e.length," card",e.length!==1?"s":""]})]})]}),s>0&&P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("span",{className:"text-xs font-bold font-display text-concrete",children:"Time Commitment:"}),P.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${g} text-paper`,children:[s," minutes/week"]})]})]}),P.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 min-h-64 p-4 rounded ${o?"bg-unassigned/10 border-2 border-dashed border-ink":"bg-paper/50"} transition-colors`,children:e.length>0?e.map((y,A)=>P.jsx(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.05},children:P.jsx(ys,{card:y,draggable:!0})},y.id)):P.jsx(Be.div,{className:"col-span-full flex items-center justify-center h-48 text-center",initial:{opacity:0},animate:{opacity:1},children:P.jsxs("div",{children:[P.jsx("p",{className:"text-sm font-display font-bold text-concrete mb-2",children:"Drop cards here"}),P.jsx("p",{className:"text-xs font-body text-concrete/70",children:"or drag from the card gallery"})]})})}),P.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-ink/20 flex gap-4 justify-between text-xs font-body",children:[P.jsxs("div",{children:[P.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Difficulty"}),P.jsxs("span",{className:"text-ink font-bold",children:[e.reduce((y,A)=>y+A.metadata.difficulty,0),"/",e.length*3]})]}),P.jsxs("div",{children:[P.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Completed"}),P.jsxs("span",{className:"text-ink font-bold",children:[e.filter(y=>y.status==="paused").length,"/",e.length]})]}),P.jsxs("div",{children:[P.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Status"}),P.jsx("span",{className:`${g} text-paper px-2 py-1 rounded font-bold`,children:r?"Active":"Paused"})]})]})]})}function $y({onDeal:t}){const{t:e}=Un(),n=In(te=>te.getCards()),{currentDealMode:r,setCurrentDealMode:s}=nh(),[o,l]=K.useState([]),[c,f]=K.useState([]),[h,g]=K.useState([]),[v,y]=K.useState("deal"),[A,_]=K.useState(!1),[L,T]=K.useState(),[F]=K.useState([{id:"partner-a",name:e("partners.partnerA"),avatar:{type:"avatar-builder",data:"A"},preferences:{favoriteCards:[],avoidCards:[],strongSuits:["home"],availability:{}},stats:{currentCards:0,totalTimeCommitment:0,streaks:[],achievements:[]},theme:{color:"#E63946",pattern:{type:"solid",color:"#E63946"},icon:"A"}},{id:"partner-b",name:e("partners.partnerB"),avatar:{type:"avatar-builder",data:"B"},preferences:{favoriteCards:[],avoidCards:[],strongSuits:["kids"],availability:{}},stats:{currentCards:0,totalTimeCommitment:0,streaks:[],achievements:[]},theme:{color:"#06AED5",pattern:{type:"solid",color:"#06AED5"},icon:"B"}}]);K.useEffect(()=>{const te=n.filter(ke=>!ke.holder||ke.holder===null),pe=n.filter(ke=>ke.holder==="partner-a"),xe=n.filter(ke=>ke.holder==="partner-b");l(te),f(pe),g(xe)},[n]);const I=["random","weighted","draft","auction","quick"],W=te=>{s(te),t==null||t(te)},H=(te,pe)=>{n.find(ke=>ke.id===te)&&In.setState(ke=>({cards:ke.cards.map(Ie=>Ie.id===te?{...Ie,holder:pe}:Ie)}))},q=()=>{T(void 0),_(!0)},Q=te=>{T(te),_(!0)},ee=()=>{_(!1),T(void 0)},ie=te=>te.reduce((pe,xe)=>pe+xe.metadata.timeEstimate,0);return P.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 py-8",children:[P.jsxs("div",{className:"mb-8",children:[P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsx("h2",{className:"text-display-md font-display font-bold text-ink",children:e("navigation.gameBoard")}),P.jsx(Be.button,{onClick:q,className:"px-4 py-2 bg-partner-a text-paper font-display font-bold rounded-lg hover:shadow-brutal transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Add a new card",children:"+ New Card"})]}),P.jsx("div",{className:"flex gap-3 flex-wrap mb-6",children:I.map(te=>P.jsx(Be.button,{onClick:()=>W(te),className:`px-4 py-2 rounded-lg font-display font-bold transition-all ${r===te?"bg-partner-a text-paper shadow-brutal":"bg-concrete/20 text-ink hover:bg-concrete/30"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e(`game.dealModes.${te}`)},te))}),P.jsx("div",{className:"flex gap-2 border-b-2 border-ink",children:["deal","gallery"].map(te=>P.jsx("button",{onClick:()=>y(te),className:`px-4 py-2 font-display font-bold transition-colors ${v===te?"text-partner-a border-b-2 border-partner-a":"text-concrete hover:text-ink"}`,children:te==="deal"?"Deal":"Gallery"},te))})]}),v==="deal"?P.jsxs("div",{className:"space-y-8",children:[P.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:F.map(te=>P.jsx(Ky,{partner:te,cards:te.id==="partner-a"?c:h,onCardDrop:pe=>H(pe,te.id),isActive:!0,totalTime:ie(te.id==="partner-a"?c:h)},te.id))}),P.jsxs(Be.div,{className:"bg-unassigned/10 border-3 border-unassigned rounded-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[P.jsxs("h3",{className:"font-display text-lg font-bold text-ink mb-4",children:[e("cards.unassigned")," (",o.length,")"]}),o.length>0?P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((te,pe)=>P.jsxs(Be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:pe*.05},className:"group relative",children:[P.jsx(ys,{card:te,draggable:!0}),P.jsx("button",{onClick:()=>Q(te),className:"absolute top-2 right-2 p-1 bg-white/90 text-ink rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Edit card",children:"✏️"})]},te.id))}):P.jsxs(Be.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[P.jsx("p",{className:"text-lg font-display font-bold text-concrete mb-2",children:"All cards assigned!"}),P.jsx("p",{className:"text-sm font-body text-concrete/70",children:"Great job distributing the workload."})]})]})]}):P.jsx(Be.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map((te,pe)=>P.jsxs(Be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:pe*.05},className:"group relative",children:[P.jsx(ys,{card:te,draggable:!0,onDragStart:xe=>{xe.dataTransfer.setData("cardId",te.id)}}),P.jsx("button",{onClick:()=>Q(te),className:"absolute top-2 right-2 p-1 bg-white/90 text-ink rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Edit card",children:"✏️"})]},te.id)):P.jsx("div",{className:"col-span-full text-center py-20",children:P.jsx("p",{className:"text-lg font-display font-bold text-concrete mb-2",children:e("cards.noCards")})})}),P.jsx(By,{isOpen:A,card:L,onClose:ee,onSuccess:()=>{}}),P.jsxs(Be.div,{className:"mt-8 pt-6 border-t-2 border-ink grid grid-cols-3 gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[P.jsxs("div",{className:"text-center p-4 bg-partner-a/10 rounded-lg",children:[P.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Partner A"}),P.jsx("p",{className:"text-2xl font-display font-bold text-partner-a",children:c.length}),P.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[ie(c),"m/week"]})]}),P.jsxs("div",{className:"text-center p-4 bg-unassigned/10 rounded-lg",children:[P.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Unassigned"}),P.jsx("p",{className:"text-2xl font-display font-bold text-unassigned",children:o.length}),P.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[ie(o),"m"]})]}),P.jsxs("div",{className:"text-center p-4 bg-partner-b/10 rounded-lg",children:[P.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Partner B"}),P.jsx("p",{className:"text-2xl font-display font-bold text-partner-b",children:h.length}),P.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[ie(h),"m/week"]})]})]})]})}function qy(){const{t}=Un(),e=In(s=>s.getCards()),[n,r]=K.useState(!1);return K.useEffect(()=>{r(e.length>0)},[e]),n?P.jsx($y,{}):P.jsx("div",{className:"relative z-10 min-h-full flex items-center",children:P.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full",children:P.jsxs("div",{className:"text-center py-20",children:[P.jsx("h2",{className:"text-display-lg font-display font-bold text-ink mb-6",children:"Welcome to Fair Play Deck"}),P.jsx("p",{className:"text-lg font-body text-concrete mb-8 max-w-2xl mx-auto",children:t("common.appDescription")}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12 mb-12",children:[{title:"Deal Cards",description:"Distribute household tasks fairly",icon:"🎴"},{title:"Negotiate",description:"Swap and adjust assignments",icon:"🤝"},{title:"Track Time",description:"Monitor workload balance",icon:"⏱️"}].map((s,o)=>P.jsxs("div",{className:"bg-paper border-3 border-ink p-8 rounded-lg brutalist-border hover:shadow-brutal transition-all stagger-{i+1}",children:[P.jsx("div",{className:"text-4xl mb-4",children:s.icon}),P.jsx("h3",{className:"font-display text-lg font-bold text-ink mb-2",children:s.title}),P.jsx("p",{className:"text-sm font-body text-concrete",children:s.description})]},o))}),P.jsx("p",{className:"text-sm font-body text-concrete/70 mb-6",children:"The app is ready to use! Navigate to the Game Board tab to start."}),P.jsx("button",{className:"px-8 py-3 bg-partner-a text-paper font-display font-bold rounded-lg hover:shadow-brutal transition-all animate-pulse",children:"Get Started"})]})})})}function Uy(){const{i18n:t}=Un(),{language:e,theme:n,animations:r}=Kl();return K.useEffect(()=>{ah().catch(console.error);const s=In.getState();s.getCards().length>0||s.bulkAddCards(oh)},[]),K.useEffect(()=>{t.language!==e&&t.changeLanguage(e);const s=document.documentElement;s.setAttribute("dir",e==="he"?"rtl":"ltr"),s.setAttribute("lang",e)},[e,t]),K.useEffect(()=>{const s=document.documentElement;if(n==="auto"){const o=window.matchMedia("(prefers-color-scheme: dark)").matches;s.classList.toggle("dark",o)}else s.classList.toggle("dark",n==="dark")},[n]),K.useEffect(()=>{r?document.documentElement.style.removeProperty("--animation-duration"):document.documentElement.style.setProperty("--animation-duration","0ms")},[r]),P.jsxs("div",{className:"min-h-screen bg-paper text-ink overflow-x-hidden",children:[P.jsx(uh,{}),P.jsxs("div",{className:"flex flex-col h-screen",children:[P.jsx(lh,{}),P.jsx("main",{className:"flex-1 overflow-y-auto",children:P.jsx(qy,{})})]})]})}Xi.createRoot(document.getElementById("root")).render(P.jsx(Cl.StrictMode,{children:P.jsx(wd,{i18n:Re,children:P.jsx(Uy,{})})}));
//# sourceMappingURL=index-DIRRFsSV.js.map
