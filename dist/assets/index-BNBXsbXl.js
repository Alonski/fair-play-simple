var zc=Object.defineProperty;var Hc=(t,e,n)=>e in t?zc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Yt=(t,e,n)=>Hc(t,typeof e!="symbol"?e+"":e,n);import{r as J,a as Wc,g as vu,R as bu,c as Lo}from"./vendor-KfUPlHYY.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var xu={exports:{}},Kr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=J,Yc=Symbol.for("react.element"),Xc=Symbol.for("react.fragment"),Jc=Object.prototype.hasOwnProperty,Qc=Gc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zc={key:!0,ref:!0,__self:!0,__source:!0};function wu(t,e,n){var r,s={},a=null,u=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)Jc.call(e,r)&&!Zc.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Yc,type:t,key:a,ref:u,props:s,_owner:Qc.current}}Kr.Fragment=Xc;Kr.jsx=wu;Kr.jsxs=wu;xu.exports=Kr;var V=xu.exports,Wi={},No=Wc;Wi.createRoot=No.createRoot,Wi.hydrateRoot=No.hydrateRoot;function ef(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Nt(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Mo={};function Gi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Nt(e[0])&&Mo[e[0]]||(Nt(e[0])&&(Mo[e[0]]=new Date),ef(...e))}const Su=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Vo=(t,e,n)=>{t.loadNamespaces(e,Su(t,n))},Io=(t,e,n,r)=>{Nt(n)&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,Su(t,r))},tf=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,a=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const u=(f,d)=>{const p=e.services.backendConnector.state[`${f}|${d}`];return p===-1||p===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!u(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||u(r,t)&&(!s||u(a,t)))},nf=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Gi("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!a(s.isLanguageChangingTo,t))return!1}}):tf(t,e,n)},Nt=t=>typeof t=="string",rf=t=>typeof t=="object"&&t!==null,sf=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,of={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},af=t=>of[t],uf=t=>t.replace(sf,af);let Yi={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:uf};const lf=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Yi={...Yi,...t}},cf=()=>Yi;let Pu;const ff=t=>{Pu=t},df=()=>Pu,hf={type:"3rdParty",init(t){lf(t.options.react),ff(t)}},Cu=J.createContext();class pf{constructor(){Yt(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}const mf=(t,e)=>{const n=J.useRef();return J.useEffect(()=>{n.current=t},[t,e]),n.current},Tu=(t,e,n,r)=>t.getFixedT(e,n,r),gf=(t,e,n,r)=>J.useCallback(Tu(t,e,n,r),[t,e,n,r]),Un=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=J.useContext(Cu)||{},a=n||r||df();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new pf),!a){Gi("You will need to pass in an i18next instance by using initReactI18next");const G=(Z,ee)=>Nt(ee)?ee:rf(ee)&&Nt(ee.defaultValue)?ee.defaultValue:Array.isArray(Z)?Z[Z.length-1]:Z,q=[G,{},!1];return q.t=G,q.i18n={},q.ready=!1,q}a.options.react&&a.options.react.wait!==void 0&&Gi("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...cf(),...a.options.react,...e},{useSuspense:f,keyPrefix:d}=u;let p=s||a.options&&a.options.defaultNS;p=Nt(p)?[p]:p||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(p);const g=(a.isInitialized||a.initializedStoreOnce)&&p.every(G=>nf(G,a,u)),v=gf(a,e.lng||null,u.nsMode==="fallback"?p:p[0],d),y=()=>v,T=()=>Tu(a,e.lng||null,u.nsMode==="fallback"?p:p[0],d),[L,N]=J.useState(y);let M=p.join();e.lng&&(M=`${e.lng}${M}`);const B=mf(M),j=J.useRef(!0);J.useEffect(()=>{const{bindI18n:G,bindI18nStore:q}=u;j.current=!0,!g&&!f&&(e.lng?Io(a,e.lng,p,()=>{j.current&&N(T)}):Vo(a,p,()=>{j.current&&N(T)})),g&&B&&B!==M&&j.current&&N(T);const Z=()=>{j.current&&N(T)};return G&&a&&a.on(G,Z),q&&a&&a.store.on(q,Z),()=>{j.current=!1,G&&a&&G.split(" ").forEach(ee=>a.off(ee,Z)),q&&a&&q.split(" ").forEach(ee=>a.store.off(ee,Z))}},[a,M]),J.useEffect(()=>{j.current&&g&&N(y)},[a,d,g]);const $=[L,a,g];if($.t=L,$.i18n=a,$.ready=g,g||!g&&!f)return $;throw new Promise(G=>{e.lng?Io(a,e.lng,p,()=>G()):Vo(a,p,()=>G())})};function yf(t){let{i18n:e,defaultNS:n,children:r}=t;const s=J.useMemo(()=>({i18n:e,defaultNS:n}),[e,n]);return J.createElement(Cu.Provider,{value:s},r)}const se=t=>typeof t=="string",kn=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},Fo=t=>t==null?"":""+t,vf=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},bf=/###/g,Bo=t=>t&&t.indexOf("###")>-1?t.replace(bf,"."):t,Ko=t=>!t||se(t),Rn=(t,e,n)=>{const r=se(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Ko(t))return{};const a=Bo(r[s]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++s}return Ko(t)?{}:{obj:t,k:Bo(r[s])}},$o=(t,e,n)=>{const{obj:r,k:s}=Rn(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let a=e[e.length-1],u=e.slice(0,e.length-1),f=Rn(t,u,Object);for(;f.obj===void 0&&u.length;)a=`${u[u.length-1]}.${a}`,u=u.slice(0,u.length-1),f=Rn(t,u,Object),f&&f.obj&&typeof f.obj[`${f.k}.${a}`]<"u"&&(f.obj=void 0);f.obj[`${f.k}.${a}`]=n},xf=(t,e,n,r)=>{const{obj:s,k:a}=Rn(t,e,Object);s[a]=s[a]||[],s[a].push(n)},Dr=(t,e)=>{const{obj:n,k:r}=Rn(t,e);if(n)return n[r]},wf=(t,e,n)=>{const r=Dr(t,n);return r!==void 0?r:Dr(e,n)},ku=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?se(t[r])||t[r]instanceof String||se(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):ku(t[r],e[r],n):t[r]=e[r]);return t},Xt=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Pf=t=>se(t)?t.replace(/[&<>"'\/]/g,e=>Sf[e]):t;class Cf{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Tf=[" ",",","?","!",";"],kf=new Cf(20),Af=(t,e,n)=>{e=e||"",n=n||"";const r=Tf.filter(u=>e.indexOf(u)<0&&n.indexOf(u)<0);if(r.length===0)return!0;const s=kf.getRegExp(`(${r.map(u=>u==="?"?"\\?":u).join("|")})`);let a=!s.test(t);if(!a){const u=t.indexOf(n);u>0&&!s.test(t.substring(0,u))&&(a=!0)}return a},Xi=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let a=0;a<r.length;){if(!s||typeof s!="object")return;let u,f="";for(let d=a;d<r.length;++d)if(d!==a&&(f+=n),f+=r[d],u=s[f],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&d<r.length-1)continue;a+=d-a+1;break}s=u}return s},Or=t=>t&&t.replace("_","-"),Ef={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Rr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Ef,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(se(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Rr(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Rr(this.logger,e)}}var Ze=new Rr;class $r{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(u=>{let[f,d]=u;for(let p=0;p<d;p++)f(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(u=>{let[f,d]=u;for(let p=0;p<d;p++)f.apply(f,[e,...r])})}}class Uo extends $r{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let f;e.indexOf(".")>-1?f=e.split("."):(f=[e,n],r&&(Array.isArray(r)?f.push(...r):se(r)&&a?f.push(...r.split(a)):f.push(r)));const d=Dr(this.data,f);return!d&&!n&&!r&&e.indexOf(".")>-1&&(e=f[0],n=f[1],r=f.slice(2).join(".")),d||!u||!se(r)?d:Xi(this.data&&this.data[e]&&this.data[e][n],r,a)}addResource(e,n,r,s){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let f=[e,n];r&&(f=f.concat(u?r.split(u):r)),e.indexOf(".")>-1&&(f=e.split("."),s=n,n=f[1]),this.addNamespaces(n),$o(this.data,f,s),a.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in r)(se(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,a){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},f=[e,n];e.indexOf(".")>-1&&(f=e.split("."),s=r,r=n,n=f[1]),this.addNamespaces(n);let d=Dr(this.data,f)||{};u.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?ku(d,r,a):d={...d,...r},$o(this.data,f,d),u.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var Au={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(a=>{this.processors[a]&&(e=this.processors[a].process(e,n,r,s))}),e}};const qo={};class jr extends $r{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),vf(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ze.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const u=r&&e.indexOf(r)>-1,f=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Af(e,r,s);if(u&&!f){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:se(a)?[a]:a};const p=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(p[0])>-1)&&(a=p.shift()),e=p.join(s)}return{key:e,namespaces:se(a)?[a]:a}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:u,namespaces:f}=this.extractFromKey(e[e.length-1],n),d=f[f.length-1],p=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(g){const G=n.nsSeparator||this.options.nsSeparator;return s?{res:`${d}${G}${u}`,usedKey:u,exactUsedKey:u,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:`${d}${G}${u}`}return s?{res:u,usedKey:u,exactUsedKey:u,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:u}const v=this.resolve(e,n);let y=v&&v.res;const T=v&&v.usedKey||u,L=v&&v.exactUsedKey||u,N=Object.prototype.toString.apply(y),M=["[object Number]","[object Function]","[object RegExp]"],B=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,$=!se(y)&&typeof y!="boolean"&&typeof y!="number";if(j&&y&&$&&M.indexOf(N)<0&&!(se(B)&&Array.isArray(y))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const G=this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,y,{...n,ns:f}):`key '${u} (${this.language})' returned an object instead of string.`;return s?(v.res=G,v.usedParams=this.getUsedParamsDetails(n),v):G}if(a){const G=Array.isArray(y),q=G?[]:{},Z=G?L:T;for(const ee in y)if(Object.prototype.hasOwnProperty.call(y,ee)){const ie=`${Z}${a}${ee}`;q[ee]=this.translate(ie,{...n,joinArrays:!1,ns:f}),q[ee]===ie&&(q[ee]=y[ee])}y=q}}else if(j&&se(B)&&Array.isArray(y))y=y.join(B),y&&(y=this.extendTranslation(y,e,n,r));else{let G=!1,q=!1;const Z=n.count!==void 0&&!se(n.count),ee=jr.hasDefaultValue(n),ie=Z?this.pluralResolver.getSuffix(p,n.count,n):"",Ce=n.ordinal&&Z?this.pluralResolver.getSuffix(p,n.count,{ordinal:!1}):"",Te=Z&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),Me=Te&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${ie}`]||n[`defaultValue${Ce}`]||n.defaultValue;!this.isValidLookup(y)&&ee&&(G=!0,y=Me),this.isValidLookup(y)||(q=!0,y=u);const He=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&q?void 0:y,Ge=ee&&Me!==y&&this.options.updateMissing;if(q||G||Ge){if(this.logger.log(Ge?"updateKey":"missingKey",p,d,u,Ge?Me:y),a){const de=this.resolve(u,{...n,keySeparator:!1});de&&de.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ye=[];const rt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&rt&&rt[0])for(let de=0;de<rt.length;de++)Ye.push(rt[de]);else this.options.saveMissingTo==="all"?Ye=this.languageUtils.toResolveHierarchy(n.lng||this.language):Ye.push(n.lng||this.language);const Se=(de,ke,Pe)=>{const It=ee&&Pe!==y?Pe:He;this.options.missingKeyHandler?this.options.missingKeyHandler(de,d,ke,It,Ge,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(de,d,ke,It,Ge,n),this.emit("missingKey",de,d,ke,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Z?Ye.forEach(de=>{const ke=this.pluralResolver.getSuffixes(de,n);Te&&n[`defaultValue${this.options.pluralSeparator}zero`]&&ke.indexOf(`${this.options.pluralSeparator}zero`)<0&&ke.push(`${this.options.pluralSeparator}zero`),ke.forEach(Pe=>{Se([de],u+Pe,n[`defaultValue${Pe}`]||Me)})}):Se(Ye,u,Me))}y=this.extendTranslation(y,e,n,v,r),q&&y===u&&this.options.appendNamespaceToMissingKey&&(y=`${d}:${u}`),(q||G)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${u}`:u,G?y:void 0):y=this.options.parseMissingKeyHandler(y))}return s?(v.res=y,v.usedParams=this.getUsedParamsDetails(n),v):y}extendTranslation(e,n,r,s,a){var u=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=se(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const y=e.match(this.interpolator.nestingRegexp);g=y&&y.length}let v=r.replace&&!se(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||s.usedLng,r),p){const y=e.match(this.interpolator.nestingRegexp),T=y&&y.length;g<T&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,T=new Array(y),L=0;L<y;L++)T[L]=arguments[L];return a&&a[0]===T[0]&&!r.context?(u.logger.warn(`It seems you are nesting recursively key: ${T[0]} in key: ${n[0]}`),null):u.translate(...T,n)},r)),r.interpolation&&this.interpolator.reset()}const f=r.postProcess||this.options.postProcess,d=se(f)?[f]:f;return e!=null&&d&&d.length&&r.applyPostProcessor!==!1&&(e=Au.handle(d,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,a,u,f;return se(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(r))return;const p=this.extractFromKey(d,n),g=p.key;s=g;let v=p.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const y=n.count!==void 0&&!se(n.count),T=y&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),L=n.context!==void 0&&(se(n.context)||typeof n.context=="number")&&n.context!=="",N=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);v.forEach(M=>{this.isValidLookup(r)||(f=M,!qo[`${N[0]}-${M}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(f)&&(qo[`${N[0]}-${M}`]=!0,this.logger.warn(`key "${s}" for languages "${N.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),N.forEach(B=>{if(this.isValidLookup(r))return;u=B;const j=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(j,g,B,M,n);else{let G;y&&(G=this.pluralResolver.getSuffix(B,n.count,n));const q=`${this.options.pluralSeparator}zero`,Z=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(j.push(g+G),n.ordinal&&G.indexOf(Z)===0&&j.push(g+G.replace(Z,this.options.pluralSeparator)),T&&j.push(g+q)),L){const ee=`${g}${this.options.contextSeparator}${n.context}`;j.push(ee),y&&(j.push(ee+G),n.ordinal&&G.indexOf(Z)===0&&j.push(ee+G.replace(Z,this.options.pluralSeparator)),T&&j.push(ee+q))}}let $;for(;$=j.pop();)this.isValidLookup(r)||(a=$,r=this.getResource(B,M,$,n))}))})}),{res:r,usedKey:s,exactUsedKey:a,usedLng:u,usedNS:f}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!se(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const a of n)delete s[a]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Ri=t=>t.charAt(0).toUpperCase()+t.slice(1);class zo{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ze.create("languageUtils")}getScriptPartFromCode(e){if(e=Or(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Or(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(se(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ri(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ri(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Ri(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),se(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],a=u=>{u&&(this.isSupportedCode(u)?s.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return se(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):se(e)&&a(this.formatLanguageCode(e)),r.forEach(u=>{s.indexOf(u)<0&&a(this.formatLanguageCode(u))}),s}}let Df=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Of={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Rf=["v1","v2","v3"],jf=["v4"],Ho={zero:0,one:1,two:2,few:3,many:4,other:5},_f=()=>{const t={};return Df.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:Of[e.fc]}})}),t};class Lf{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Ze.create("pluralResolver"),(!this.options.compatibilityJSON||jf.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=_f(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Or(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:s});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let u;try{u=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const d=this.languageUtils.getLanguagePartFromCode(e);u=this.getRule(d,n)}return this.pluralRulesCache[a]=u,u}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,a)=>Ho[s]-Ho[a]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const a=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?a():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Rf.includes(this.options.compatibilityJSON)}}const Wo=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=wf(t,e,n);return!a&&s&&se(n)&&(a=Xi(t,n,r),a===void 0&&(a=Xi(e,n,r))),a},ji=t=>t.replace(/\$/g,"$$$$");class Nf{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ze.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:a,prefixEscaped:u,suffix:f,suffixEscaped:d,formatSeparator:p,unescapeSuffix:g,unescapePrefix:v,nestingPrefix:y,nestingPrefixEscaped:T,nestingSuffix:L,nestingSuffixEscaped:N,nestingOptionsSeparator:M,maxReplaces:B,alwaysFormat:j}=e.interpolation;this.escape=n!==void 0?n:Pf,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=a?Xt(a):u||"{{",this.suffix=f?Xt(f):d||"}}",this.formatSeparator=p||",",this.unescapePrefix=g?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=y?Xt(y):T||Xt("$t("),this.nestingSuffix=L?Xt(L):N||Xt(")"),this.nestingOptionsSeparator=M||",",this.maxReplaces=B||1e3,this.alwaysFormat=j!==void 0?j:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let a,u,f;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=T=>{if(T.indexOf(this.formatSeparator)<0){const B=Wo(n,d,T,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(B,void 0,r,{...s,...n,interpolationkey:T}):B}const L=T.split(this.formatSeparator),N=L.shift().trim(),M=L.join(this.formatSeparator).trim();return this.format(Wo(n,d,N,this.options.keySeparator,this.options.ignoreJSONStructure),M,r,{...s,...n,interpolationkey:N})};this.resetRegExp();const g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,v=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:T=>ji(T)},{regex:this.regexp,safeValue:T=>this.escapeValue?ji(this.escape(T)):ji(T)}].forEach(T=>{for(f=0;a=T.regex.exec(e);){const L=a[1].trim();if(u=p(L),u===void 0)if(typeof g=="function"){const M=g(e,a,s);u=se(M)?M:""}else if(s&&Object.prototype.hasOwnProperty.call(s,L))u="";else if(v){u=a[0];continue}else this.logger.warn(`missed to pass in variable ${L} for interpolating ${e}`),u="";else!se(u)&&!this.useRawValueToEscape&&(u=Fo(u));const N=T.safeValue(u);if(e=e.replace(a[0],N),v?(T.regex.lastIndex+=u.length,T.regex.lastIndex-=a[0].length):T.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,a,u;const f=(d,p)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const v=d.split(new RegExp(`${g}[ ]*{`));let y=`{${v[1]}`;d=v[0],y=this.interpolate(y,u);const T=y.match(/'/g),L=y.match(/"/g);(T&&T.length%2===0&&!L||L.length%2!==0)&&(y=y.replace(/'/g,'"'));try{u=JSON.parse(y),p&&(u={...p,...u})}catch(N){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,N),`${d}${g}${y}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];u={...r},u=u.replace&&!se(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;let p=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const g=s[1].split(this.formatSeparator).map(v=>v.trim());s[1]=g.shift(),d=g,p=!0}if(a=n(f.call(this,s[1].trim(),u),u),a&&s[0]===e&&!se(a))return a;se(a)||(a=Fo(a)),a||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),a=""),p&&(a=d.reduce((g,v)=>this.format(g,v,r.lng,{...r,interpolationkey:s[1].trim()}),a.trim())),e=e.replace(s[0],a),this.regexp.lastIndex=0}return e}}const Mf=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(u=>{if(u){const[f,...d]=u.split(":"),p=d.join(":").trim().replace(/^'+|'+$/g,""),g=f.trim();n[g]||(n[g]=p),p==="false"&&(n[g]=!1),p==="true"&&(n[g]=!0),isNaN(p)||(n[g]=parseInt(p,10))}})}return{formatName:e,formatOptions:n}},Jt=t=>{const e={};return(n,r,s)=>{let a=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(a={...a,[s.interpolationkey]:void 0});const u=r+JSON.stringify(a);let f=e[u];return f||(f=t(Or(r),s),e[u]=f),f(n)}};class Vf{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ze.create("formatter"),this.options=e,this.formats={number:Jt((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return a=>s.format(a)}),currency:Jt((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return a=>s.format(a)}),datetime:Jt((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return a=>s.format(a)}),relativetime:Jt((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return a=>s.format(a,r.range||"day")}),list:Jt((n,r)=>{const s=new Intl.ListFormat(n,{...r});return a=>s.format(a)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Jt(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(f=>f.indexOf(")")>-1)){const f=a.findIndex(d=>d.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,f)].join(this.formatSeparator)}return a.reduce((f,d)=>{const{formatName:p,formatOptions:g}=Mf(d);if(this.formats[p]){let v=f;try{const y=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},T=y.locale||y.lng||s.locale||s.lng||r;v=this.formats[p](f,T,{...g,...s,...y})}catch(y){this.logger.warn(y)}return v}else this.logger.warn(`there was no format function for ${p}`);return f},e)}}const If=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Ff extends $r{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Ze.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const a={},u={},f={},d={};return e.forEach(p=>{let g=!0;n.forEach(v=>{const y=`${p}|${v}`;!r.reload&&this.store.hasResourceBundle(p,v)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?u[y]===void 0&&(u[y]=!0):(this.state[y]=1,g=!1,u[y]===void 0&&(u[y]=!0),a[y]===void 0&&(a[y]=!0),d[v]===void 0&&(d[v]=!0)))}),g||(f[p]=!0)}),(Object.keys(a).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(a),pending:Object.keys(u),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(d)}}loaded(e,n,r){const s=e.split("|"),a=s[0],u=s[1];n&&this.emit("failedLoading",a,u,n),!n&&r&&this.store.addResourceBundle(a,u,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const f={};this.queue.forEach(d=>{xf(d.loaded,[a],u),If(d,e),n&&d.errors.push(n),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(p=>{f[p]||(f[p]={});const g=d.loaded[p];g.length&&g.forEach(v=>{f[p][v]===void 0&&(f[p][v]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(d=>!d.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!e.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:a,callback:u});return}this.readingCalls++;const f=(p,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(p&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,a*2,u)},a);return}u(p,g)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const p=d(e,n);p&&typeof p.then=="function"?p.then(g=>f(null,g)).catch(f):f(null,p)}catch(p){f(p)}return}return d(e,n,f)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();se(e)&&(e=this.languageUtils.toResolveHierarchy(e)),se(n)&&(n=[n]);const a=this.queueLoad(e,n,r,s);if(!a.toLoad.length)return a.pending.length||s(),null;a.toLoad.forEach(u=>{this.loadOne(u)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],a=r[1];this.read(s,a,"read",void 0,void 0,(u,f)=>{u&&this.logger.warn(`${n}loading namespace ${a} for language ${s} failed`,u),!u&&f&&this.logger.log(`${n}loaded namespace ${a} for language ${s}`,f),this.loaded(e,u,f)})}saveMissing(e,n,r,s,a){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const d={...u,isUpdate:a},p=this.backend.create.bind(this.backend);if(p.length<6)try{let g;p.length===5?g=p(e,n,r,s,d):g=p(e,n,r,s),g&&typeof g.then=="function"?g.then(v=>f(null,v)).catch(f):f(null,g)}catch(g){f(g)}else p(e,n,r,s,f,d)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const Go=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),se(t[1])&&(e.defaultValue=t[1]),se(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Yo=t=>(se(t.ns)&&(t.ns=[t.ns]),se(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),se(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Sr=()=>{},Bf=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Mn extends $r{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Yo(e),this.services={},this.logger=Ze,this.modules={external:[]},Bf(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(se(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=Go();this.options={...s,...this.options,...Yo(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const a=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?Ze.init(a(this.modules.logger),this.options):Ze.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=Vf);const v=new zo(this.options);this.store=new Uo(this.options.resources,this.options);const y=this.services;y.logger=Ze,y.resourceStore=this.store,y.languageUtils=v,y.pluralResolver=new Lf(v,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(y.formatter=a(g),y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new Nf(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new Ff(a(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",function(T){for(var L=arguments.length,N=new Array(L>1?L-1:0),M=1;M<L;M++)N[M-1]=arguments[M];e.emit(T,...N)}),this.modules.languageDetector&&(y.languageDetector=a(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=a(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new jr(this.services,this.options),this.translator.on("*",function(T){for(var L=arguments.length,N=new Array(L>1?L-1:0),M=1;M<L;M++)N[M-1]=arguments[M];e.emit(T,...N)}),this.modules.external.forEach(T=>{T.init&&T.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Sr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return e.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return e.store[g](...arguments),e}});const d=kn(),p=()=>{const g=(v,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(y),r(v,y)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?p():setTimeout(p,0),d}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sr;const s=se(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],u=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(p=>{p!=="cimode"&&a.indexOf(p)<0&&a.push(p)})};s?u(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>u(d)),this.options.preload&&this.options.preload.forEach(f=>u(f)),this.services.backendConnector.load(a,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(f)})}else r(null)}reloadResources(e,n,r){const s=kn();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Sr),this.services.backendConnector.reload(e,n,a=>{s.resolve(),r(a)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Au.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=kn();this.emit("languageChanging",e);const a=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},u=(d,p)=>{p?(a(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(d,function(){return r.t(...arguments)})},f=d=>{!e&&!d&&this.services.languageDetector&&(d=[]);const p=se(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);p&&(this.language||a(p),this.translator.language||this.translator.changeLanguage(p),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(p)),this.loadResources(p,g=>{u(g,p)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(f):this.services.languageDetector.detect(f):f(e),s}getFixedT(e,n,r){var s=this;const a=function(u,f){let d;if(typeof f!="object"){for(var p=arguments.length,g=new Array(p>2?p-2:0),v=2;v<p;v++)g[v-2]=arguments[v];d=s.options.overloadTranslationOptionHandler([u,f].concat(g))}else d={...f};d.lng=d.lng||a.lng,d.lngs=d.lngs||a.lngs,d.ns=d.ns||a.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||a.keyPrefix);const y=s.options.keySeparator||".";let T;return d.keyPrefix&&Array.isArray(u)?T=u.map(L=>`${d.keyPrefix}${y}${L}`):T=d.keyPrefix?`${d.keyPrefix}${y}${u}`:u,s.t(T,d)};return se(e)?a.lng=e:a.lngs=e,a.ns=n,a.keyPrefix=r,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const u=(f,d)=>{const p=this.services.backendConnector.state[`${f}|${d}`];return p===-1||p===0||p===2};if(n.precheck){const f=n.precheck(this,u);if(f!==void 0)return f}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(r,e)&&(!s||u(a,e)))}loadNamespaces(e,n){const r=kn();return this.options.ns?(se(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=kn();se(e)&&(e=[e]);const s=this.options.preload||[],a=e.filter(u=>s.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return a.length?(this.options.preload=s.concat(a),this.loadResources(u=>{r.resolve(),n&&n(u)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new zo(Go());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Mn(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sr;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},a=new Mn(s);return(e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(f=>{a[f]=this[f]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r&&(a.store=new Uo(this.store.data,s),a.services.resourceStore=a.store),a.translator=new jr(a.services,s),a.translator.on("*",function(f){for(var d=arguments.length,p=new Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];a.emit(f,...p)}),a.init(s,n),a.translator.options=s,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Oe=Mn.createInstance();Oe.createInstance=Mn.createInstance;Oe.createInstance;Oe.dir;Oe.init;Oe.loadResources;Oe.reloadResources;Oe.use;Oe.changeLanguage;Oe.getFixedT;Oe.t;Oe.exists;Oe.setDefaultNamespace;Oe.hasLoadedNamespace;Oe.loadNamespaces;Oe.loadLanguages;const{slice:Kf,forEach:$f}=[];function Uf(t){return $f.call(Kf.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function qf(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const Xo=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,zf=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let a=`${t}=${s}`;if(r.maxAge>0){const u=r.maxAge-0;if(Number.isNaN(u))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(u)}`}if(r.domain){if(!Xo.test(r.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${r.domain}`}if(r.path){if(!Xo.test(r.path))throw new TypeError("option path is invalid");a+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(a+="; Partitioned"),a},Jo={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=zf(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Hf={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Jo.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:a}=e;n&&typeof document<"u"&&Jo.create(n,t,r,s,a)}},Wf={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const u=s.substring(1).split("&");for(let f=0;f<u.length;f++){const d=u[f].indexOf("=");d>0&&u[f].substring(0,d)===e&&(n=u[f].substring(d+1))}}return n}},Gf={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const u=a.substring(1);if(e){const f=u.split("&");for(let d=0;d<f.length;d++){const p=f[d].indexOf("=");p>0&&f[d].substring(0,p)===e&&(r=f[d].substring(p+1))}}if(r)return r;if(!r&&n>-1){const f=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(f)?(s=f[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let Qt=null;const Qo=()=>{if(Qt!==null)return Qt;try{if(Qt=typeof window<"u"&&window.localStorage!==null,!Qt)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Qt=!1}return Qt};var Yf={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Qo())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&Qo()&&window.localStorage.setItem(n,t)}};let Zt=null;const Zo=()=>{if(Zt!==null)return Zt;try{if(Zt=typeof window<"u"&&window.sessionStorage!==null,!Zt)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Zt=!1}return Zt};var Xf={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Zo())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&Zo()&&window.sessionStorage.setItem(n,t)}},Jf={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let a=0;a<n.length;a++)e.push(n[a]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},Qf={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Zf={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},ed={name:"subdomain",lookup(t){var s,a;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((a=(s=window.location)==null?void 0:s.hostname)==null?void 0:a.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let Eu=!1;try{document.cookie,Eu=!0}catch{}const Du=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Eu||Du.splice(1,1);const td=()=>({order:Du,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Ou{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Uf(n,this.options||{},td()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Hf),this.addDetector(Wf),this.addDetector(Yf),this.addDetector(Xf),this.addDetector(Jf),this.addDetector(Qf),this.addDetector(Zf),this.addDetector(ed),this.addDetector(Gf)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!qf(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Ou.type="languageDetector";const nd={appName:"Fair Play Deck",appDescription:"Manage household tasks with your partner",ok:"OK",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",add:"Add",close:"Close",back:"Back",next:"Next",prev:"Previous",loading:"Loading...",error:"Error",success:"Success"},rd={dashboard:"Dashboard",gameBoard:"Game Board",cardGallery:"Cards",insights:"Insights",settings:"Settings"},id={title:"Cards",dailyGrind:"Daily Grind",kids:"Kids",home:"Home",magic:"Magic",wild:"Wild",custom:"Custom",unassigned:"Unassigned",assigned:"Assigned",completed:"Completed",noCards:"No cards yet. Create or import some to get started."},sd={partnerA:"Partner A",partnerB:"Partner B",createPartner:"Create Partner Profile",editPartner:"Edit Partner",name:"Name",avatar:"Avatar",theme:"Theme Color"},od={deal:"Deal Cards",dealModes:{random:"Random Deal",weighted:"Weighted",draft:"Draft Mode",auction:"Auction",quick:"Quick Deal"},negotiate:"Negotiate",propose:"Propose Trade",accept:"Accept",reject:"Reject",counter:"Counter Offer"},ad={welcome:"Welcome to Fair Play Deck",step1:"Manage household tasks together",step2:"Fair distribution of responsibilities",step3:"Negotiate and balance workload",getStarted:"Get Started"},ud={title:"Settings",language:"Language",theme:"Theme",notifications:"Notifications",sound:"Sound Effects",animations:"Animations",backup:"Backup & Export",about:"About"},ld={common:nd,navigation:rd,cards:id,partners:sd,game:od,onboarding:ad,settings:ud},cd={appName:"פייר פליי דק",appDescription:"ניהול מטלות בית עם בן/בת הזוג",ok:"אישור",cancel:"ביטול",save:"שמור",delete:"מחק",edit:"ערוך",add:"הוסף",close:"סגור",back:"חזור",next:"הבא",prev:"הקודם",loading:"טוען...",error:"שגיאה",success:"הצלחה"},fd={dashboard:"לוח בקרה",gameBoard:"לוח המשחק",cardGallery:"כרטיסים",insights:"תובנות",settings:"הגדרות"},dd={title:"כרטיסים",dailyGrind:"השגרה היומית",kids:"ילדים",home:"הבית",magic:"קסם",wild:"פרא",custom:"מותאם אישית",unassigned:"לא משוייך",assigned:"משוייך",completed:"הושלם",noCards:"אין כרטיסים עדיין. צור או ייבא כרטיסים כדי להתחיל."},hd={partnerA:"שותף א",partnerB:"שותף ב",createPartner:"יצור פרופיל שותף",editPartner:"ערוך שותף",name:"שם",avatar:"אווטר",theme:"צבע ערכת הנושא"},pd={deal:"חלק כרטיסים",dealModes:{random:"חלוקה אקראית",weighted:"משוקלל",draft:"מצב ערסול",auction:"מכירה פומבית",quick:"חלוקה מהירה"},negotiate:"משא ומתן",propose:"הצע החלפה",accept:"קבל",reject:"דחה",counter:"הצע נגדית"},md={welcome:"ברוכים הבאים ל-Fair Play Deck",step1:"נהל מטלות בית יחד",step2:"חלוקה הוגנת של אחריות",step3:"משא ומתן והאזנת עומסי עבודה",getStarted:"בואו נתחיל"},gd={title:"הגדרות",language:"שפה",theme:"ערכת נושא",notifications:"התראות",sound:"אפקטי קול",animations:"אנימציות",backup:"גיבוי וייצוא",about:"אודות"},yd={common:cd,navigation:fd,cards:dd,partners:hd,game:pd,onboarding:md,settings:gd},vd={en:{translation:ld},he:{translation:yd}};Oe.use(Ou).use(hf).init({resources:vd,fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},react:{useSuspense:!0}});const bd={},ea=t=>{let e;const n=new Set,r=(g,v)=>{const y=typeof g=="function"?g(e):g;if(!Object.is(y,e)){const T=e;e=v??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(L=>L(e,T))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(bd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(r,s,d);return d},xd=t=>t?ea(t):ea;var Ru={exports:{}},ju={},_u={exports:{}},Lu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var on=J;function wd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sd=typeof Object.is=="function"?Object.is:wd,Pd=on.useState,Cd=on.useEffect,Td=on.useLayoutEffect,kd=on.useDebugValue;function Ad(t,e){var n=e(),r=Pd({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return Td(function(){s.value=n,s.getSnapshot=e,_i(s)&&a({inst:s})},[t,n,e]),Cd(function(){return _i(s)&&a({inst:s}),t(function(){_i(s)&&a({inst:s})})},[t]),kd(n),n}function _i(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sd(t,n)}catch{return!0}}function Ed(t,e){return e()}var Dd=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ed:Ad;Lu.useSyncExternalStore=on.useSyncExternalStore!==void 0?on.useSyncExternalStore:Dd;_u.exports=Lu;var Od=_u.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur=J,Rd=Od;function jd(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _d=typeof Object.is=="function"?Object.is:jd,Ld=Rd.useSyncExternalStore,Nd=Ur.useRef,Md=Ur.useEffect,Vd=Ur.useMemo,Id=Ur.useDebugValue;ju.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=Nd(null);if(a.current===null){var u={hasValue:!1,value:null};a.current=u}else u=a.current;a=Vd(function(){function d(T){if(!p){if(p=!0,g=T,T=r(T),s!==void 0&&u.hasValue){var L=u.value;if(s(L,T))return v=L}return v=T}if(L=v,_d(g,T))return L;var N=r(T);return s!==void 0&&s(L,N)?(g=T,L):(g=T,v=N)}var p=!1,g,v,y=n===void 0?null:n;return[function(){return d(e())},y===null?void 0:function(){return d(y())}]},[e,n,r,s]);var f=Ld(t,a[0],a[1]);return Md(function(){u.hasValue=!0,u.value=f},[f]),Id(f),f};Ru.exports=ju;var Fd=Ru.exports;const Bd=vu(Fd),Nu={},{useDebugValue:Kd}=bu,{useSyncExternalStoreWithSelector:$d}=Bd;let ta=!1;const Ud=t=>t;function qd(t,e=Ud,n){(Nu?"production":void 0)!=="production"&&n&&!ta&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ta=!0);const r=$d(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Kd(r),r}const zd=t=>{(Nu?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?xd(t):t,n=(r,s)=>qd(e,r,s);return Object.assign(n,e),n},gs=t=>zd,Hd={};function Wd(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const u=d=>d===null?null:JSON.parse(d,void 0),f=(a=n.getItem(s))!=null?a:null;return f instanceof Promise?f.then(u):u(f)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const Vn=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Vn(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Vn(r)(n)}}}},Gd=(t,e)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:M=>M,version:0,merge:(M,B)=>({...B,...M}),...e},u=!1;const f=new Set,d=new Set;let p;try{p=a.getStorage()}catch{}if(!p)return t((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...M)},r,s);const g=Vn(a.serialize),v=()=>{const M=a.partialize({...r()});let B;const j=g({state:M,version:a.version}).then($=>p.setItem(a.name,$)).catch($=>{B=$});if(B)throw B;return j},y=s.setState;s.setState=(M,B)=>{y(M,B),v()};const T=t((...M)=>{n(...M),v()},r,s);let L;const N=()=>{var M;if(!p)return;u=!1,f.forEach(j=>j(r()));const B=((M=a.onRehydrateStorage)==null?void 0:M.call(a,r()))||void 0;return Vn(p.getItem.bind(p))(a.name).then(j=>{if(j)return a.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==a.version){if(a.migrate)return a.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var $;return L=a.merge(j,($=r())!=null?$:T),n(L,!0),v()}).then(()=>{B==null||B(L,void 0),u=!0,d.forEach(j=>j(L))}).catch(j=>{B==null||B(void 0,j)})};return s.persist={setOptions:M=>{a={...a,...M},M.getStorage&&(p=M.getStorage())},clearStorage:()=>{p==null||p.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>N(),hasHydrated:()=>u,onHydrate:M=>(f.add(M),()=>{f.delete(M)}),onFinishHydration:M=>(d.add(M),()=>{d.delete(M)})},N(),L||T},Yd=(t,e)=>(n,r,s)=>{let a={storage:Wd(()=>localStorage),partialize:N=>N,version:0,merge:(N,M)=>({...M,...N}),...e},u=!1;const f=new Set,d=new Set;let p=a.storage;if(!p)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...N)},r,s);const g=()=>{const N=a.partialize({...r()});return p.setItem(a.name,{state:N,version:a.version})},v=s.setState;s.setState=(N,M)=>{v(N,M),g()};const y=t((...N)=>{n(...N),g()},r,s);s.getInitialState=()=>y;let T;const L=()=>{var N,M;if(!p)return;u=!1,f.forEach(j=>{var $;return j(($=r())!=null?$:y)});const B=((M=a.onRehydrateStorage)==null?void 0:M.call(a,(N=r())!=null?N:y))||void 0;return Vn(p.getItem.bind(p))(a.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==a.version){if(a.migrate)return[!0,a.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var $;const[G,q]=j;if(T=a.merge(q,($=r())!=null?$:y),n(T,!0),G)return g()}).then(()=>{B==null||B(T,void 0),T=r(),u=!0,d.forEach(j=>j(T))}).catch(j=>{B==null||B(void 0,j)})};return s.persist={setOptions:N=>{a={...a,...N},N.storage&&(p=N.storage)},clearStorage:()=>{p==null||p.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>L(),hasHydrated:()=>u,onHydrate:N=>(f.add(N),()=>{f.delete(N)}),onFinishHydration:N=>(d.add(N),()=>{d.delete(N)})},a.skipHydration||L(),T||y},Xd=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Hd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Gd(t,e)):Yd(t,e),ys=Xd,Ji=gs()(ys((t,e)=>({cards:[],selectedCards:[],searchQuery:"",filterCategory:null,filterStatus:null,addCard:n=>t(r=>({cards:[...r.cards,n]})),removeCard:n=>t(r=>({cards:r.cards.filter(s=>s.id!==n),selectedCards:r.selectedCards.filter(s=>s!==n)})),updateCard:n=>t(r=>({cards:r.cards.map(s=>s.id===n.id?n:s)})),getCard:n=>e().cards.find(s=>s.id===n),getCards:()=>e().cards,getCardsByCategory:n=>e().cards.filter(s=>s.category===n),getCardsByStatus:n=>e().cards.filter(s=>s.status===n),getCardsByHolder:n=>e().cards.filter(s=>s.holder===n),selectCard:n=>t(r=>({selectedCards:[...new Set([...r.selectedCards,n])]})),deselectCard:n=>t(r=>({selectedCards:r.selectedCards.filter(s=>s!==n)})),toggleCard:n=>t(r=>({selectedCards:r.selectedCards.includes(n)?r.selectedCards.filter(a=>a!==n):[...r.selectedCards,n]})),clearSelection:()=>t(()=>({selectedCards:[]})),getSelectedCards:()=>{const n=e();return n.cards.filter(r=>n.selectedCards.includes(r.id))},setSearchQuery:n=>t(()=>({searchQuery:n})),setFilterCategory:n=>t(()=>({filterCategory:n})),setFilterStatus:n=>t(()=>({filterStatus:n})),getFilteredCards:()=>{const n=e();let r=n.cards;if(n.searchQuery){const s=n.searchQuery.toLowerCase();r=r.filter(a=>a.title.en.toLowerCase().includes(s)||a.title.he.toLowerCase().includes(s)||a.description.en.toLowerCase().includes(s)||a.description.he.toLowerCase().includes(s))}return n.filterCategory&&(r=r.filter(s=>s.category===n.filterCategory)),n.filterStatus&&(r=r.filter(s=>s.status===n.filterStatus)),r},bulkAddCards:n=>t(r=>({cards:[...r.cards,...n]})),bulkRemoveCards:n=>t(r=>({cards:r.cards.filter(s=>!n.includes(s.id)),selectedCards:r.selectedCards.filter(s=>!n.includes(s))})),clearAll:()=>t(()=>({cards:[],selectedCards:[],searchQuery:"",filterCategory:null,filterStatus:null}))}),{name:"card-store",version:1})),Jd=gs()(ys((t,e)=>({gameState:null,currentDealMode:"random",isDealing:!1,dealHistory:[],initializeGame:n=>t(()=>({gameState:n,isDealing:!1})),setGameState:n=>t(()=>({gameState:n})),getGameState:()=>e().gameState,setCurrentDealMode:n=>t(()=>({currentDealMode:n})),setIsDealing:n=>t(()=>({isDealing:n})),addToDealHistory:n=>t(r=>({dealHistory:[...r.dealHistory,n]})),clearDealHistory:()=>t(()=>({dealHistory:[]})),endGame:()=>t(n=>n.gameState?{gameState:{...n.gameState,isActive:!1}}:{}),resetGame:()=>t(()=>({gameState:null,currentDealMode:"random",isDealing:!1,dealHistory:[]}))}),{name:"game-store",version:1})),na={language:"en",theme:"auto",animations:!0,soundEnabled:!0,notifications:!0,defaultDealMode:"random"},Mu=gs()(ys((t,e)=>({...na,setLanguage:n=>t(()=>({language:n})),setTheme:n=>t(()=>({theme:n})),toggleAnimations:()=>t(n=>({animations:!n.animations})),toggleSound:()=>t(n=>({soundEnabled:!n.soundEnabled})),toggleNotifications:()=>t(n=>({notifications:!n.notifications})),setDefaultDealMode:n=>t(()=>({defaultDealMode:n})),getSettings:()=>{const n=e();return{language:n.language,theme:n.theme,animations:n.animations,soundEnabled:n.soundEnabled,notifications:n.notifications,defaultDealMode:n.defaultDealMode}},resetSettings:()=>t(()=>na)}),{name:"settings-store",version:1}));var Vu={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Lo,function(){var n=function(i,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])})(i,o)},r=function(){return(r=Object.assign||function(i){for(var o,l=1,c=arguments.length;l<c;l++)for(var h in o=arguments[l])Object.prototype.hasOwnProperty.call(o,h)&&(i[h]=o[h]);return i}).apply(this,arguments)};function s(i,o,l){for(var c,h=0,m=o.length;h<m;h++)!c&&h in o||((c=c||Array.prototype.slice.call(o,0,h))[h]=o[h]);return i.concat(c||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lo,u=Object.keys,f=Array.isArray;function d(i,o){return typeof o!="object"||u(o).forEach(function(l){i[l]=o[l]}),i}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var p=Object.getPrototypeOf,g={}.hasOwnProperty;function v(i,o){return g.call(i,o)}function y(i,o){typeof o=="function"&&(o=o(p(i))),(typeof Reflect>"u"?u:Reflect.ownKeys)(o).forEach(function(l){L(i,l,o[l])})}var T=Object.defineProperty;function L(i,o,l,c){T(i,o,d(l&&v(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},c))}function N(i){return{from:function(o){return i.prototype=Object.create(o.prototype),L(i.prototype,"constructor",i),{extend:y.bind(null,i.prototype)}}}}var M=Object.getOwnPropertyDescriptor,B=[].slice;function j(i,o,l){return B.call(i,o,l)}function $(i,o){return o(i)}function G(i){if(!i)throw new Error("Assertion Failed")}function q(i){a.setImmediate?setImmediate(i):setTimeout(i,0)}function Z(i,o){if(typeof o=="string"&&v(i,o))return i[o];if(!o)return i;if(typeof o!="string"){for(var l=[],c=0,h=o.length;c<h;++c){var m=Z(i,o[c]);l.push(m)}return l}var b=o.indexOf(".");if(b!==-1){var x=i[o.substr(0,b)];return x==null?void 0:Z(x,o.substr(b+1))}}function ee(i,o,l){if(i&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof o!="string"&&"length"in o){G(typeof l!="string"&&"length"in l);for(var c=0,h=o.length;c<h;++c)ee(i,o[c],l[c])}else{var m,b,x=o.indexOf(".");x!==-1?(m=o.substr(0,x),(b=o.substr(x+1))===""?l===void 0?f(i)&&!isNaN(parseInt(m))?i.splice(m,1):delete i[m]:i[m]=l:ee(x=!(x=i[m])||!v(i,m)?i[m]={}:x,b,l)):l===void 0?f(i)&&!isNaN(parseInt(o))?i.splice(o,1):delete i[o]:i[o]=l}}function ie(i){var o,l={};for(o in i)v(i,o)&&(l[o]=i[o]);return l}var Ce=[].concat;function Te(i){return Ce.apply([],i)}var wt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Te([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(o){return o+i+"Array"})}))).filter(function(i){return a[i]}),Me=new Set(wt.map(function(i){return a[i]})),nt=null;function He(i){return nt=new WeakMap,i=function o(l){if(!l||typeof l!="object")return l;var c=nt.get(l);if(c)return c;if(f(l)){c=[],nt.set(l,c);for(var h=0,m=l.length;h<m;++h)c.push(o(l[h]))}else if(Me.has(l.constructor))c=l;else{var b,x=p(l);for(b in c=x===Object.prototype?{}:Object.create(x),nt.set(l,c),l)v(l,b)&&(c[b]=o(l[b]))}return c}(i),nt=null,i}var Ge={}.toString;function Ye(i){return Ge.call(i).slice(8,-1)}var rt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Se=typeof rt=="symbol"?function(i){var o;return i!=null&&(o=i[rt])&&o.apply(i)}:function(){return null};function de(i,o){return o=i.indexOf(o),0<=o&&i.splice(o,1),0<=o}var ke={};function Pe(i){var o,l,c,h;if(arguments.length===1){if(f(i))return i.slice();if(this===ke&&typeof i=="string")return[i];if(h=Se(i)){for(l=[];!(c=h.next()).done;)l.push(c.value);return l}if(i==null)return[i];if(typeof(o=i.length)!="number")return[i];for(l=new Array(o);o--;)l[o]=i[o];return l}for(o=arguments.length,l=new Array(o);o--;)l[o]=arguments[o];return l}var It=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},pn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$e=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(pn),hc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ft(i,o){this.name=i,this.message=o}function Xs(i,o){return i+". Errors: "+Object.keys(o).map(function(l){return o[l].toString()}).filter(function(l,c,h){return h.indexOf(l)===c}).join(`
`)}function Gn(i,o,l,c){this.failures=o,this.failedKeys=c,this.successCount=l,this.message=Xs(i,o)}function Bt(i,o){this.name="BulkError",this.failures=Object.keys(o).map(function(l){return o[l]}),this.failuresByPos=o,this.message=Xs(i,this.failures)}N(Ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(Gn).from(Ft),N(Bt).from(Ft);var Yr=$e.reduce(function(i,o){return i[o]=o+"Error",i},{}),pc=Ft,ne=$e.reduce(function(i,o){var l=o+"Error";function c(h,m){this.name=l,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=hc[o]||l,this.inner=null)}return N(c).from(pc),i[o]=c,i},{});ne.Syntax=SyntaxError,ne.Type=TypeError,ne.Range=RangeError;var Js=pn.reduce(function(i,o){return i[o+"Error"]=ne[o],i},{}),Yn=$e.reduce(function(i,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(i[o+"Error"]=ne[o]),i},{});function he(){}function dn(i){return i}function mc(i,o){return i==null||i===dn?o:function(l){return o(i(l))}}function xt(i,o){return function(){i.apply(this,arguments),o.apply(this,arguments)}}function gc(i,o){return i===he?o:function(){var l=i.apply(this,arguments);l!==void 0&&(arguments[0]=l);var c=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=o.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?xt(c,this.onsuccess):c),h&&(this.onerror=this.onerror?xt(h,this.onerror):h),m!==void 0?m:l}}function yc(i,o){return i===he?o:function(){i.apply(this,arguments);var l=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?xt(l,this.onsuccess):l),c&&(this.onerror=this.onerror?xt(c,this.onerror):c)}}function vc(i,o){return i===he?o:function(l){var c=i.apply(this,arguments);d(l,c);var h=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,l=o.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?xt(h,this.onsuccess):h),m&&(this.onerror=this.onerror?xt(m,this.onerror):m),c===void 0?l===void 0?void 0:l:d(c,l)}}function bc(i,o){return i===he?o:function(){return o.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function Xr(i,o){return i===he?o:function(){var l=i.apply(this,arguments);if(l&&typeof l.then=="function"){for(var c=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return l.then(function(){return o.apply(c,m)})}return o.apply(this,arguments)}}Yn.ModifyError=Gn,Yn.DexieError=Ft,Yn.BulkError=Bt;var Xe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Qs(i){Xe=i}var hn={},Zs=100,wt=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,p(i),i];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,p(o),i]}(),pn=wt[0],$e=wt[1],wt=wt[2],$e=$e&&$e.then,St=pn&&pn.constructor,Jr=!!wt,mn=function(i,o){gn.push([i,o]),Xn&&(queueMicrotask(wc),Xn=!1)},Qr=!0,Xn=!0,Pt=[],Jn=[],Zr=dn,lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:he,pgp:!1,env:{},finalize:he},te=lt,gn=[],Ct=0,Qn=[];function X(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=te;if(typeof i!="function"){if(i!==hn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ti(this,this._value))}this._state=null,this._value=null,++o.ref,function l(c,h){try{h(function(m){if(c._state===null){if(m===c)throw new TypeError("A promise cannot be resolved with itself.");var b=c._lib&&Kt();m&&typeof m.then=="function"?l(c,function(x,S){m instanceof X?m._then(x,S):m.then(x,S)}):(c._state=!0,c._value=m,to(c)),b&&$t()}},ti.bind(null,c))}catch(m){ti(c,m)}}(this,i)}var ei={get:function(){var i=te,o=nr;function l(c,h){var m=this,b=!i.global&&(i!==te||o!==nr),x=b&&!ft(),S=new X(function(P,E){ni(m,new eo(ro(c,i,b,x),ro(h,i,b,x),P,E,i))});return this._consoleTask&&(S._consoleTask=this._consoleTask),S}return l.prototype=hn,l},set:function(i){L(this,"then",i&&i.prototype===hn?ei:{get:function(){return i},set:ei.set})}};function eo(i,o,l,c,h){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof o=="function"?o:null,this.resolve=l,this.reject=c,this.psd=h}function ti(i,o){var l,c;Jn.push(o),i._state===null&&(l=i._lib&&Kt(),o=Zr(o),i._state=!1,i._value=o,c=i,Pt.some(function(h){return h._value===c._value})||Pt.push(c),to(i),l&&$t())}function to(i){var o=i._listeners;i._listeners=[];for(var l=0,c=o.length;l<c;++l)ni(i,o[l]);var h=i._PSD;--h.ref||h.finalize(),Ct===0&&(++Ct,mn(function(){--Ct==0&&ri()},[]))}function ni(i,o){if(i._state!==null){var l=i._state?o.onFulfilled:o.onRejected;if(l===null)return(i._state?o.resolve:o.reject)(i._value);++o.psd.ref,++Ct,mn(xc,[l,i,o])}else i._listeners.push(o)}function xc(i,o,l){try{var c,h=o._value;!o._state&&Jn.length&&(Jn=[]),c=Xe&&o._consoleTask?o._consoleTask.run(function(){return i(h)}):i(h),o._state||Jn.indexOf(h)!==-1||function(m){for(var b=Pt.length;b;)if(Pt[--b]._value===m._value)return Pt.splice(b,1)}(o),l.resolve(c)}catch(m){l.reject(m)}finally{--Ct==0&&ri(),--l.psd.ref||l.psd.finalize()}}function wc(){Tt(lt,function(){Kt()&&$t()})}function Kt(){var i=Qr;return Xn=Qr=!1,i}function $t(){var i,o,l;do for(;0<gn.length;)for(i=gn,gn=[],l=i.length,o=0;o<l;++o){var c=i[o];c[0].apply(null,c[1])}while(0<gn.length);Xn=Qr=!0}function ri(){var i=Pt;Pt=[],i.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var o=Qn.slice(0),l=o.length;l;)o[--l]()}function Zn(i){return new X(hn,!1,i)}function ge(i,o){var l=te;return function(){var c=Kt(),h=te;try{return dt(l,!0),i.apply(this,arguments)}catch(m){o&&o(m)}finally{dt(h,!1),c&&$t()}}}y(X.prototype,{then:ei,_then:function(i,o){ni(this,new eo(null,null,i,o,te))},catch:function(i){if(arguments.length===1)return this.then(null,i);var o=i,l=arguments[1];return typeof o=="function"?this.then(null,function(c){return(c instanceof o?l:Zn)(c)}):this.then(null,function(c){return(c&&c.name===o?l:Zn)(c)})},finally:function(i){return this.then(function(o){return X.resolve(i()).then(function(){return o})},function(o){return X.resolve(i()).then(function(){return Zn(o)})})},timeout:function(i,o){var l=this;return i<1/0?new X(function(c,h){var m=setTimeout(function(){return h(new ne.Timeout(o))},i);l.then(c,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(X.prototype,Symbol.toStringTag,"Dexie.Promise"),lt.env=no(),y(X,{all:function(){var i=Pe.apply(null,arguments).map(rr);return new X(function(o,l){i.length===0&&o([]);var c=i.length;i.forEach(function(h,m){return X.resolve(h).then(function(b){i[m]=b,--c||o(i)},l)})})},resolve:function(i){return i instanceof X?i:i&&typeof i.then=="function"?new X(function(o,l){i.then(o,l)}):new X(hn,!0,i)},reject:Zn,race:function(){var i=Pe.apply(null,arguments).map(rr);return new X(function(o,l){i.map(function(c){return X.resolve(c).then(o,l)})})},PSD:{get:function(){return te},set:function(i){return te=i}},totalEchoes:{get:function(){return nr}},newPSD:ct,usePSD:Tt,scheduler:{get:function(){return mn},set:function(i){mn=i}},rejectionMapper:{get:function(){return Zr},set:function(i){Zr=i}},follow:function(i,o){return new X(function(l,c){return ct(function(h,m){var b=te;b.unhandleds=[],b.onunhandled=m,b.finalize=xt(function(){var x,S=this;x=function(){S.unhandleds.length===0?h():m(S.unhandleds[0])},Qn.push(function P(){x(),Qn.splice(Qn.indexOf(P),1)}),++Ct,mn(function(){--Ct==0&&ri()},[])},b.finalize),i()},o,l,c)})}}),St&&(St.allSettled&&L(X,"allSettled",function(){var i=Pe.apply(null,arguments).map(rr);return new X(function(o){i.length===0&&o([]);var l=i.length,c=new Array(l);i.forEach(function(h,m){return X.resolve(h).then(function(b){return c[m]={status:"fulfilled",value:b}},function(b){return c[m]={status:"rejected",reason:b}}).then(function(){return--l||o(c)})})})}),St.any&&typeof AggregateError<"u"&&L(X,"any",function(){var i=Pe.apply(null,arguments).map(rr);return new X(function(o,l){i.length===0&&l(new AggregateError([]));var c=i.length,h=new Array(c);i.forEach(function(m,b){return X.resolve(m).then(function(x){return o(x)},function(x){h[b]=x,--c||l(new AggregateError(h))})})})}),St.withResolvers&&(X.withResolvers=St.withResolvers));var Ae={awaits:0,echoes:0,id:0},Sc=0,er=[],tr=0,nr=0,Pc=0;function ct(i,o,l,c){var h=te,m=Object.create(h);return m.parent=h,m.ref=0,m.global=!1,m.id=++Pc,lt.env,m.env=Jr?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},o&&d(m,o),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Tt(m,i,l,c),m.ref===0&&m.finalize(),c}function Ut(){return Ae.id||(Ae.id=++Sc),++Ae.awaits,Ae.echoes+=Zs,Ae.id}function ft(){return!!Ae.awaits&&(--Ae.awaits==0&&(Ae.id=0),Ae.echoes=Ae.awaits*Zs,!0)}function rr(i){return Ae.echoes&&i&&i.constructor===St?(Ut(),i.then(function(o){return ft(),o},function(o){return ft(),be(o)})):i}function Cc(){var i=er[er.length-1];er.pop(),dt(i,!1)}function dt(i,o){var l,c=te;(o?!Ae.echoes||tr++&&i===te:!tr||--tr&&i===te)||queueMicrotask(o?(function(h){++nr,Ae.echoes&&--Ae.echoes!=0||(Ae.echoes=Ae.awaits=Ae.id=0),er.push(te),dt(h,!0)}).bind(null,i):Cc),i!==te&&(te=i,c===lt&&(lt.env=no()),Jr&&(l=lt.env.Promise,o=i.env,(c.global||i.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),l.all=o.all,l.race=o.race,l.resolve=o.resolve,l.reject=o.reject,o.allSettled&&(l.allSettled=o.allSettled),o.any&&(l.any=o.any))))}function no(){var i=a.Promise;return Jr?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Tt(i,o,l,c,h){var m=te;try{return dt(i,!0),o(l,c,h)}finally{dt(m,!1)}}function ro(i,o,l,c){return typeof i!="function"?i:function(){var h=te;l&&Ut(),dt(o,!0);try{return i.apply(this,arguments)}finally{dt(h,!1),c&&queueMicrotask(ft)}}}function ii(i){Promise===St&&Ae.echoes===0?tr===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+$e).indexOf("[native code]")===-1&&(Ut=ft=he);var be=X.reject,kt="￿",it="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",io="String expected.",qt=[],ir="__dbnames",si="readonly",oi="readwrite";function At(i,o){return i?o?function(){return i.apply(this,arguments)&&o.apply(this,arguments)}:i:o}var so={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function sr(i){return typeof i!="string"||/\./.test(i)?function(o){return o}:function(o){return o[i]===void 0&&i in o&&delete(o=He(o))[i],o}}function oo(){throw ne.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ce(i,o){try{var l=ao(i),c=ao(o);if(l!==c)return l==="Array"?1:c==="Array"?-1:l==="binary"?1:c==="binary"?-1:l==="string"?1:c==="string"?-1:l==="Date"?1:c!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return o<i?1:i<o?-1:0;case"binary":return function(h,m){for(var b=h.length,x=m.length,S=b<x?b:x,P=0;P<S;++P)if(h[P]!==m[P])return h[P]<m[P]?-1:1;return b===x?0:b<x?-1:1}(uo(i),uo(o));case"Array":return function(h,m){for(var b=h.length,x=m.length,S=b<x?b:x,P=0;P<S;++P){var E=ce(h[P],m[P]);if(E!==0)return E}return b===x?0:b<x?-1:1}(i,o)}}catch{}return NaN}function ao(i){var o=typeof i;return o!="object"?o:ArrayBuffer.isView(i)?"binary":(i=Ye(i),i==="ArrayBuffer"?"binary":i)}function uo(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}function or(i,o,l){var c=i.schema.yProps;return c?(o&&0<l.numFailures&&(o=o.filter(function(h,m){return!l.failures[m]})),Promise.all(c.map(function(h){return h=h.updatesTable,o?i.db.table(h).where("k").anyOf(o).delete():i.db.table(h).clear()})).then(function(){return l})):l}var yn=(lo.prototype.execute=function(i){var o=this["@@propmod"];if(o.add!==void 0){var l=o.add;if(f(l))return s(s([],f(i)?i:[],!0),l).sort();if(typeof l=="number")return(Number(i)||0)+l;if(typeof l=="bigint")try{return BigInt(i)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(o.remove!==void 0){var c=o.remove;if(f(c))return f(i)?i.filter(function(h){return!c.includes(h)}).sort():[];if(typeof c=="number")return Number(i)-c;if(typeof c=="bigint")try{return BigInt(i)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return l=(l=o.replacePrefix)===null||l===void 0?void 0:l[0],l&&typeof i=="string"&&i.startsWith(l)?o.replacePrefix[1]+i.substring(l.length):i},lo);function lo(i){this["@@propmod"]=i}function co(i,o){for(var l=u(o),c=l.length,h=!1,m=0;m<c;++m){var b=l[m],x=o[b],S=Z(i,b);x instanceof yn?(ee(i,b,x.execute(S)),h=!0):S!==x&&(ee(i,b,x),h=!0)}return h}var fo=(pe.prototype._trans=function(i,o,l){var c=this._tx||te.trans,h=this.name,m=Xe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function b(P,E,w){if(!w.schema[h])throw new ne.NotFound("Table "+h+" not part of transaction");return o(w.idbtrans,w)}var x=Kt();try{var S=c&&c.db._novip===this.db._novip?c===te.trans?c._promise(i,b,l):ct(function(){return c._promise(i,b,l)},{trans:c,transless:te.transless||te}):function P(E,w,O,C){if(E.idbdb&&(E._state.openComplete||te.letThrough||E._vip)){var k=E._createTransaction(w,O,E._dbSchema);try{k.create(),E._state.PR1398_maxLoop=3}catch(A){return A.name===Yr.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return P(E,w,O,C)})):be(A)}return k._promise(w,function(A,D){return ct(function(){return te.trans=k,C(A,D,k)})}).then(function(A){if(w==="readwrite")try{k.idbtrans.commit()}catch{}return w==="readonly"?A:k._completion.then(function(){return A})})}if(E._state.openComplete)return be(new ne.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return be(new ne.DatabaseClosed);E.open().catch(he)}return E._state.dbReadyPromise.then(function(){return P(E,w,O,C)})}(this.db,i,[this.name],b);return m&&(S._consoleTask=m,S=S.catch(function(P){return console.trace(P),be(P)})),S}finally{x&&$t()}},pe.prototype.get=function(i,o){var l=this;return i&&i.constructor===Object?this.where(i).first(o):i==null?be(new ne.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return l.core.get({trans:c,key:i}).then(function(h){return l.hook.reading.fire(h)})}).then(o)},pe.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(f(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var o=u(i);if(o.length===1)return this.where(o[0]).equals(i[o[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&o.every(function(P){return 0<=x.keyPath.indexOf(P)})){for(var S=0;S<o.length;++S)if(o.indexOf(x.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(x,S){return x.keyPath.length-S.keyPath.length})[0];if(l&&this.db._maxKey!==kt){var m=l.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(S){return i[S]}))}!l&&Xe&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var c=this.schema.idxByName;function h(x,S){return ce(x,S)===0}var b=o.reduce(function(w,S){var P=w[0],E=w[1],w=c[S],O=i[S];return[P||w,P||!w?At(E,w&&w.multi?function(C){return C=Z(C,S),f(C)&&C.some(function(k){return h(O,k)})}:function(C){return h(O,Z(C,S))}):E]},[null,null]),m=b[0],b=b[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(b):l?this.filter(b):this.where(o).equals("")},pe.prototype.filter=function(i){return this.toCollection().and(i)},pe.prototype.count=function(i){return this.toCollection().count(i)},pe.prototype.offset=function(i){return this.toCollection().offset(i)},pe.prototype.limit=function(i){return this.toCollection().limit(i)},pe.prototype.each=function(i){return this.toCollection().each(i)},pe.prototype.toArray=function(i){return this.toCollection().toArray(i)},pe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pe.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,f(i)?"[".concat(i.join("+"),"]"):i))},pe.prototype.reverse=function(){return this.toCollection().reverse()},pe.prototype.mapToClass=function(i){var o,l=this.db,c=this.name;function h(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof oo&&(function(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function E(){this.constructor=S}n(S,P),S.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)}(h,o=i),Object.defineProperty(h.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),h.prototype.table=function(){return c},i=h);for(var m=new Set,b=i.prototype;b;b=p(b))Object.getOwnPropertyNames(b).forEach(function(S){return m.add(S)});function x(S){if(!S)return S;var P,E=Object.create(i.prototype);for(P in S)if(!m.has(P))try{E[P]=S[P]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),i},pe.prototype.defineClass=function(){return this.mapToClass(function(i){d(this,i)})},pe.prototype.add=function(i,o){var l=this,c=this.schema.primKey,h=c.auto,m=c.keyPath,b=i;return m&&h&&(b=sr(m)(i)),this._trans("readwrite",function(x){return l.core.mutate({trans:x,type:"add",keys:o!=null?[o]:null,values:[b]})}).then(function(x){return x.numFailures?X.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{ee(i,m,x)}catch{}return x})},pe.prototype.upsert=function(i,o){var l=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return l.core.get({trans:h,key:i}).then(function(m){var b=m??{};return co(b,o),c&&ee(b,c,i),l.core.mutate({trans:h,type:"put",values:[b],keys:[i],upsert:!0,updates:{keys:[i],changeSpecs:[o]}}).then(function(x){return x.numFailures?X.reject(x.failures[0]):!!m})})})},pe.prototype.update=function(i,o){return typeof i!="object"||f(i)?this.where(":id").equals(i).modify(o):(i=Z(i,this.schema.primKey.keyPath),i===void 0?be(new ne.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(o))},pe.prototype.put=function(i,o){var l=this,c=this.schema.primKey,h=c.auto,m=c.keyPath,b=i;return m&&h&&(b=sr(m)(i)),this._trans("readwrite",function(x){return l.core.mutate({trans:x,type:"put",values:[b],keys:o!=null?[o]:null})}).then(function(x){return x.numFailures?X.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{ee(i,m,x)}catch{}return x})},pe.prototype.delete=function(i){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"delete",keys:[i]}).then(function(c){return or(o,[i],c)}).then(function(c){return c.numFailures?X.reject(c.failures[0]):void 0})})},pe.prototype.clear=function(){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"deleteRange",range:so}).then(function(l){return or(i,null,l)})}).then(function(o){return o.numFailures?X.reject(o.failures[0]):void 0})},pe.prototype.bulkGet=function(i){var o=this;return this._trans("readonly",function(l){return o.core.getMany({keys:i,trans:l}).then(function(c){return c.map(function(h){return o.hook.reading.fire(h)})})})},pe.prototype.bulkAdd=function(i,o,l){var c=this,h=Array.isArray(o)?o:void 0,m=(l=l||(h?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(b){var P=c.schema.primKey,x=P.auto,P=P.keyPath;if(P&&h)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,P=P&&x?i.map(sr(P)):i;return c.core.mutate({trans:b,type:"add",keys:h,values:P,wantResults:m}).then(function(k){var w=k.numFailures,O=k.results,C=k.lastResult,k=k.failures;if(w===0)return m?O:C;throw new Bt("".concat(c.name,".bulkAdd(): ").concat(w," of ").concat(S," operations failed"),k)})})},pe.prototype.bulkPut=function(i,o,l){var c=this,h=Array.isArray(o)?o:void 0,m=(l=l||(h?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(b){var P=c.schema.primKey,x=P.auto,P=P.keyPath;if(P&&h)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");var S=i.length,P=P&&x?i.map(sr(P)):i;return c.core.mutate({trans:b,type:"put",keys:h,values:P,wantResults:m}).then(function(k){var w=k.numFailures,O=k.results,C=k.lastResult,k=k.failures;if(w===0)return m?O:C;throw new Bt("".concat(c.name,".bulkPut(): ").concat(w," of ").concat(S," operations failed"),k)})})},pe.prototype.bulkUpdate=function(i){var o=this,l=this.core,c=i.map(function(b){return b.key}),h=i.map(function(b){return b.changes}),m=[];return this._trans("readwrite",function(b){return l.getMany({trans:b,keys:c,cache:"clone"}).then(function(x){var S=[],P=[];i.forEach(function(w,O){var C=w.key,k=w.changes,A=x[O];if(A){for(var D=0,R=Object.keys(k);D<R.length;D++){var _=R[D],I=k[_];if(_===o.schema.primKey.keyPath){if(ce(I,C)!==0)throw new ne.Constraint("Cannot update primary key in bulkUpdate()")}else ee(A,_,I)}m.push(O),S.push(C),P.push(A)}});var E=S.length;return l.mutate({trans:b,type:"put",keys:S,values:P,updates:{keys:c,changeSpecs:h}}).then(function(w){var O=w.numFailures,C=w.failures;if(O===0)return E;for(var k=0,A=Object.keys(C);k<A.length;k++){var D,R=A[k],_=m[Number(R)];_!=null&&(D=C[R],delete C[R],C[_]=D)}throw new Bt("".concat(o.name,".bulkUpdate(): ").concat(O," of ").concat(E," operations failed"),C)})})})},pe.prototype.bulkDelete=function(i){var o=this,l=i.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:i}).then(function(h){return or(o,i,h)})}).then(function(b){var h=b.numFailures,m=b.lastResult,b=b.failures;if(h===0)return m;throw new Bt("".concat(o.name,".bulkDelete(): ").concat(h," of ").concat(l," operations failed"),b)})},pe);function pe(){}function vn(i){function o(b,x){if(x){for(var S=arguments.length,P=new Array(S-1);--S;)P[S-1]=arguments[S];return l[b].subscribe.apply(null,P),i}if(typeof b=="string")return l[b]}var l={};o.addEventType=m;for(var c=1,h=arguments.length;c<h;++c)m(arguments[c]);return o;function m(b,x,S){if(typeof b!="object"){var P;x=x||bc;var E={subscribers:[],fire:S=S||he,subscribe:function(w){E.subscribers.indexOf(w)===-1&&(E.subscribers.push(w),E.fire=x(E.fire,w))},unsubscribe:function(w){E.subscribers=E.subscribers.filter(function(O){return O!==w}),E.fire=E.subscribers.reduce(x,S)}};return l[b]=o[b]=E}u(P=b).forEach(function(w){var O=P[w];if(f(O))m(w,P[w][0],P[w][1]);else{if(O!=="asap")throw new ne.InvalidArgument("Invalid event config");var C=m(w,dn,function(){for(var k=arguments.length,A=new Array(k);k--;)A[k]=arguments[k];C.subscribers.forEach(function(D){q(function(){D.apply(null,A)})})})}})}}function bn(i,o){return N(o).from({prototype:i}),o}function zt(i,o){return!(i.filter||i.algorithm||i.or)&&(o?i.justLimit:!i.replayFilter)}function ai(i,o){i.filter=At(i.filter,o)}function ui(i,o,l){var c=i.replayFilter;i.replayFilter=c?function(){return At(c(),o())}:o,i.justLimit=l&&!c}function ar(i,o){if(i.isPrimKey)return o.primaryKey;var l=o.getIndexByKeyPath(i.index);if(!l)throw new ne.Schema("KeyPath "+i.index+" on object store "+o.name+" is not indexed");return l}function ho(i,o,l){var c=ar(i,o.schema);return o.openCursor({trans:l,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:c,range:i.range}})}function ur(i,o,l,c){var h=i.replayFilter?At(i.filter,i.replayFilter()):i.filter;if(i.or){var m={},b=function(x,S,P){var E,w;h&&!h(S,P,function(O){return S.stop(O)},function(O){return S.fail(O)})||((w=""+(E=S.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(E)),v(m,w)||(m[w]=!0,o(x,S,P)))};return Promise.all([i.or._iterate(b,l),po(ho(i,c,l),i.algorithm,b,!i.keysOnly&&i.valueMapper)])}return po(ho(i,c,l),At(i.algorithm,h),o,!i.keysOnly&&i.valueMapper)}function po(i,o,l,c){var h=ge(c?function(m,b,x){return l(c(m),b,x)}:l);return i.then(function(m){if(m)return m.start(function(){var b=function(){return m.continue()};o&&!o(m,function(x){return b=x},function(x){m.stop(x),b=he},function(x){m.fail(x),b=he})||h(m.value,m,function(x){return b=x}),b()})})}var Tc=(fe.prototype._read=function(i,o){var l=this._ctx;return l.error?l.table._trans(null,be.bind(null,l.error)):l.table._trans("readonly",i).then(o)},fe.prototype._write=function(i){var o=this._ctx;return o.error?o.table._trans(null,be.bind(null,o.error)):o.table._trans("readwrite",i,"locked")},fe.prototype._addAlgorithm=function(i){var o=this._ctx;o.algorithm=At(o.algorithm,i)},fe.prototype._iterate=function(i,o){return ur(this._ctx,i,o,this._ctx.table.core)},fe.prototype.clone=function(i){var o=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return i&&d(l,i),o._ctx=l,o},fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},fe.prototype.each=function(i){var o=this._ctx;return this._read(function(l){return ur(o,i,l,o.table.core)})},fe.prototype.count=function(i){var o=this;return this._read(function(l){var c=o._ctx,h=c.table.core;if(zt(c,!0))return h.count({trans:l,query:{index:ar(c,h.schema),range:c.range}}).then(function(b){return Math.min(b,c.limit)});var m=0;return ur(c,function(){return++m,!1},l,h).then(function(){return m})}).then(i)},fe.prototype.sortBy=function(i,o){var l=i.split(".").reverse(),c=l[0],h=l.length-1;function m(S,P){return P?m(S[l[P]],P-1):S[c]}var b=this._ctx.dir==="next"?1:-1;function x(S,P){return ce(m(S,h),m(P,h))*b}return this.toArray(function(S){return S.sort(x)}).then(o)},fe.prototype.toArray=function(i){var o=this;return this._read(function(l){var c=o._ctx;if(c.dir==="next"&&zt(c,!0)&&0<c.limit){var h=c.valueMapper,m=ar(c,c.table.core.schema);return c.table.core.query({trans:l,limit:c.limit,values:!0,query:{index:m,range:c.range}}).then(function(x){return x=x.result,h?x.map(h):x})}var b=[];return ur(c,function(x){return b.push(x)},l,c.table.core).then(function(){return b})},i)},fe.prototype.offset=function(i){var o=this._ctx;return i<=0||(o.offset+=i,zt(o)?ui(o,function(){var l=i;return function(c,h){return l===0||(l===1?--l:h(function(){c.advance(l),l=0}),!1)}}):ui(o,function(){var l=i;return function(){return--l<0}})),this},fe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),ui(this._ctx,function(){var o=i;return function(l,c,h){return--o<=0&&c(h),0<=o}},!0),this},fe.prototype.until=function(i,o){return ai(this._ctx,function(l,c,h){return!i(l.value)||(c(h),o)}),this},fe.prototype.first=function(i){return this.limit(1).toArray(function(o){return o[0]}).then(i)},fe.prototype.last=function(i){return this.reverse().first(i)},fe.prototype.filter=function(i){var o;return ai(this._ctx,function(l){return i(l.value)}),(o=this._ctx).isMatch=At(o.isMatch,i),this},fe.prototype.and=function(i){return this.filter(i)},fe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},fe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},fe.prototype.desc=function(){return this.reverse()},fe.prototype.eachKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){i(c.key,c)})},fe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},fe.prototype.eachPrimaryKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){i(c.primaryKey,c)})},fe.prototype.keys=function(i){var o=this._ctx;o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,h){l.push(h.key)}).then(function(){return l}).then(i)},fe.prototype.primaryKeys=function(i){var o=this._ctx;if(o.dir==="next"&&zt(o,!0)&&0<o.limit)return this._read(function(c){var h=ar(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:h,range:o.range}})}).then(function(c){return c.result}).then(i);o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,h){l.push(h.primaryKey)}).then(function(){return l}).then(i)},fe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},fe.prototype.firstKey=function(i){return this.limit(1).keys(function(o){return o[0]}).then(i)},fe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},fe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var o={};return ai(this._ctx,function(h){var c=h.primaryKey.toString(),h=v(o,c);return o[c]=!0,!h}),this},fe.prototype.modify=function(i){var o=this,l=this._ctx;return this._write(function(c){var h=typeof i=="function"?i:function(A){return co(A,i)},m=l.table.core,P=m.schema.primaryKey,b=P.outbound,x=P.extractKey,S=200,P=o.db._options.modifyChunkSize;P&&(S=typeof P=="object"?P[m.name]||P["*"]||200:P);function E(A,_){var R=_.failures,_=_.numFailures;O+=A-_;for(var I=0,F=u(R);I<F.length;I++){var U=F[I];w.push(R[U])}}var w=[],O=0,C=[],k=i===mo;return o.clone().primaryKeys().then(function(A){function D(_){var I=Math.min(S,A.length-_),F=A.slice(_,_+I);return(k?Promise.resolve([]):m.getMany({trans:c,keys:F,cache:"immutable"})).then(function(U){var W=[],K=[],z=b?[]:null,Y=k?F:[];if(!k)for(var H=0;H<I;++H){var Q=U[H],ae={value:He(Q),primKey:A[_+H]};h.call(ae,ae.value,ae)!==!1&&(ae.value==null?Y.push(A[_+H]):b||ce(x(Q),x(ae.value))===0?(K.push(ae.value),b&&z.push(A[_+H])):(Y.push(A[_+H]),W.push(ae.value)))}return Promise.resolve(0<W.length&&m.mutate({trans:c,type:"add",values:W}).then(function(ue){for(var le in ue.failures)Y.splice(parseInt(le),1);E(W.length,ue)})).then(function(){return(0<K.length||R&&typeof i=="object")&&m.mutate({trans:c,type:"put",keys:z,values:K,criteria:R,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<_}).then(function(ue){return E(K.length,ue)})}).then(function(){return(0<Y.length||R&&k)&&m.mutate({trans:c,type:"delete",keys:Y,criteria:R,isAdditionalChunk:0<_}).then(function(ue){return or(l.table,Y,ue)}).then(function(ue){return E(Y.length,ue)})}).then(function(){return A.length>_+I&&D(_+S)})})}var R=zt(l)&&l.limit===1/0&&(typeof i!="function"||k)&&{index:l.index,range:l.range};return D(0).then(function(){if(0<w.length)throw new Gn("Error modifying one or more objects",w,O,C);return A.length})})})},fe.prototype.delete=function(){var i=this._ctx,o=i.range;return!zt(i)||i.table.schema.yProps||!i.isPrimKey&&o.type!==3?this.modify(mo):this._write(function(l){var c=i.table.core.schema.primaryKey,h=o;return i.table.core.count({trans:l,query:{index:c,range:h}}).then(function(m){return i.table.core.mutate({trans:l,type:"deleteRange",range:h}).then(function(S){var x=S.failures,S=S.numFailures;if(S)throw new Gn("Could not delete some values",Object.keys(x).map(function(P){return x[P]}),m-S);return m-S})})})},fe);function fe(){}var mo=function(i,o){return o.value=null};function kc(i,o){return i<o?-1:i===o?0:1}function Ac(i,o){return o<i?-1:i===o?0:1}function Ie(i,o,l){return i=i instanceof yo?new i.Collection(i):i,i._ctx.error=new(l||TypeError)(o),i}function Ht(i){return new i.Collection(i,function(){return go("")}).limit(0)}function lr(i,o,l,c){var h,m,b,x,S,P,E,w=l.length;if(!l.every(function(k){return typeof k=="string"}))return Ie(i,io);function O(k){h=k==="next"?function(D){return D.toUpperCase()}:function(D){return D.toLowerCase()},m=k==="next"?function(D){return D.toLowerCase()}:function(D){return D.toUpperCase()},b=k==="next"?kc:Ac;var A=l.map(function(D){return{lower:m(D),upper:h(D)}}).sort(function(D,R){return b(D.lower,R.lower)});x=A.map(function(D){return D.upper}),S=A.map(function(D){return D.lower}),E=(P=k)==="next"?"":c}O("next"),i=new i.Collection(i,function(){return ht(x[0],S[w-1]+c)}),i._ondirectionchange=function(k){O(k)};var C=0;return i._addAlgorithm(function(k,A,D){var R=k.key;if(typeof R!="string")return!1;var _=m(R);if(o(_,S,C))return!0;for(var I=null,F=C;F<w;++F){var U=function(W,K,z,Y,H,Q){for(var ae=Math.min(W.length,Y.length),ue=-1,le=0;le<ae;++le){var Fe=K[le];if(Fe!==Y[le])return H(W[le],z[le])<0?W.substr(0,le)+z[le]+z.substr(le+1):H(W[le],Y[le])<0?W.substr(0,le)+Y[le]+z.substr(le+1):0<=ue?W.substr(0,ue)+K[ue]+z.substr(ue+1):null;H(W[le],Fe)<0&&(ue=le)}return ae<Y.length&&Q==="next"?W+z.substr(W.length):ae<W.length&&Q==="prev"?W.substr(0,z.length):ue<0?null:W.substr(0,ue)+Y[ue]+z.substr(ue+1)}(R,_,x[F],S[F],b,P);U===null&&I===null?C=F+1:(I===null||0<b(I,U))&&(I=U)}return A(I!==null?function(){k.continue(I+E)}:D),!1}),i}function ht(i,o,l,c){return{type:2,lower:i,upper:o,lowerOpen:l,upperOpen:c}}function go(i){return{type:1,lower:i,upper:i}}var yo=(Object.defineProperty(Ee.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ee.prototype.between=function(i,o,l,c){l=l!==!1,c=c===!0;try{return 0<this._cmp(i,o)||this._cmp(i,o)===0&&(l||c)&&(!l||!c)?Ht(this):new this.Collection(this,function(){return ht(i,o,!l,!c)})}catch{return Ie(this,it)}},Ee.prototype.equals=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return go(i)})},Ee.prototype.above=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(i,void 0,!0)})},Ee.prototype.aboveOrEqual=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(i,void 0,!1)})},Ee.prototype.below=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(void 0,i,!1,!0)})},Ee.prototype.belowOrEqual=function(i){return i==null?Ie(this,it):new this.Collection(this,function(){return ht(void 0,i)})},Ee.prototype.startsWith=function(i){return typeof i!="string"?Ie(this,io):this.between(i,i+kt,!0,!0)},Ee.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):lr(this,function(o,l){return o.indexOf(l[0])===0},[i],kt)},Ee.prototype.equalsIgnoreCase=function(i){return lr(this,function(o,l){return o===l[0]},[i],"")},Ee.prototype.anyOfIgnoreCase=function(){var i=Pe.apply(ke,arguments);return i.length===0?Ht(this):lr(this,function(o,l){return l.indexOf(o)!==-1},i,"")},Ee.prototype.startsWithAnyOfIgnoreCase=function(){var i=Pe.apply(ke,arguments);return i.length===0?Ht(this):lr(this,function(o,l){return l.some(function(c){return o.indexOf(c)===0})},i,kt)},Ee.prototype.anyOf=function(){var i=this,o=Pe.apply(ke,arguments),l=this._cmp;try{o.sort(l)}catch{return Ie(this,it)}if(o.length===0)return Ht(this);var c=new this.Collection(this,function(){return ht(o[0],o[o.length-1])});c._ondirectionchange=function(m){l=m==="next"?i._ascending:i._descending,o.sort(l)};var h=0;return c._addAlgorithm(function(m,b,x){for(var S=m.key;0<l(S,o[h]);)if(++h===o.length)return b(x),!1;return l(S,o[h])===0||(b(function(){m.continue(o[h])}),!1)}),c},Ee.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ee.prototype.noneOf=function(){var i=Pe.apply(ke,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Ie(this,it)}var o=i.reduce(function(l,c){return l?l.concat([[l[l.length-1][1],c]]):[[-1/0,c]]},null);return o.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},Ee.prototype.inAnyRange=function(R,o){var l=this,c=this._cmp,h=this._ascending,m=this._descending,b=this._min,x=this._max;if(R.length===0)return Ht(this);if(!R.every(function(_){return _[0]!==void 0&&_[1]!==void 0&&h(_[0],_[1])<=0}))return Ie(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument);var S=!o||o.includeLowers!==!1,P=o&&o.includeUppers===!0,E,w=h;function O(_,I){return w(_[0],I[0])}try{(E=R.reduce(function(_,I){for(var F=0,U=_.length;F<U;++F){var W=_[F];if(c(I[0],W[1])<0&&0<c(I[1],W[0])){W[0]=b(W[0],I[0]),W[1]=x(W[1],I[1]);break}}return F===U&&_.push(I),_},[])).sort(O)}catch{return Ie(this,it)}var C=0,k=P?function(_){return 0<h(_,E[C][1])}:function(_){return 0<=h(_,E[C][1])},A=S?function(_){return 0<m(_,E[C][0])}:function(_){return 0<=m(_,E[C][0])},D=k,R=new this.Collection(this,function(){return ht(E[0][0],E[E.length-1][1],!S,!P)});return R._ondirectionchange=function(_){w=_==="next"?(D=k,h):(D=A,m),E.sort(O)},R._addAlgorithm(function(_,I,F){for(var U,W=_.key;D(W);)if(++C===E.length)return I(F),!1;return!k(U=W)&&!A(U)||(l._cmp(W,E[C][1])===0||l._cmp(W,E[C][0])===0||I(function(){w===h?_.continue(E[C][0]):_.continue(E[C][1])}),!1)}),R},Ee.prototype.startsWithAnyOf=function(){var i=Pe.apply(ke,arguments);return i.every(function(o){return typeof o=="string"})?i.length===0?Ht(this):this.inAnyRange(i.map(function(o){return[o,o+kt]})):Ie(this,"startsWithAnyOf() only works with strings")},Ee);function Ee(){}function Je(i){return ge(function(o){return xn(o),i(o.target.error),!1})}function xn(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var wn="storagemutated",li="x-storagemutated-1",pt=vn(null,wn),Ec=(Qe.prototype._lock=function(){return G(!te.global),++this._reculock,this._reculock!==1||te.global||(te.lockOwnerFor=this),this},Qe.prototype._unlock=function(){if(G(!te.global),--this._reculock==0)for(te.global||(te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Tt(i[1],i[0])}catch{}}return this},Qe.prototype._locked=function(){return this._reculock&&te.lockOwnerFor!==this},Qe.prototype.create=function(i){var o=this;if(!this.mode)return this;var l=this.db.idbdb,c=this.db._state.dbOpenError;if(G(!this.idbtrans),!i&&!l)switch(c&&c.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(c);case"MissingAPIError":throw new ne.MissingAPI(c.message,c);default:throw new ne.OpenFailed(c)}if(!this.active)throw new ne.TransactionInactive;return G(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ge(function(h){xn(h),o._reject(i.error)}),i.onabort=ge(function(h){xn(h),o.active&&o._reject(new ne.Abort(i.error)),o.active=!1,o.on("abort").fire(h)}),i.oncomplete=ge(function(){o.active=!1,o._resolve(),"mutatedParts"in i&&pt.storagemutated.fire(i.mutatedParts)}),this},Qe.prototype._promise=function(i,o,l){var c=this;if(i==="readwrite"&&this.mode!=="readwrite")return be(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return be(new ne.TransactionInactive);if(this._locked())return new X(function(m,b){c._blockedFuncs.push([function(){c._promise(i,o,l).then(m,b)},te])});if(l)return ct(function(){var m=new X(function(b,x){c._lock();var S=o(b,x,c);S&&S.then&&S.then(b,x)});return m.finally(function(){return c._unlock()}),m._lib=!0,m});var h=new X(function(m,b){var x=o(m,b,c);x&&x.then&&x.then(m,b)});return h._lib=!0,h},Qe.prototype._root=function(){return this.parent?this.parent._root():this},Qe.prototype.waitFor=function(i){var o,l=this._root(),c=X.resolve(i);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return c}):(l._waitingFor=c,l._waitingQueue=[],o=l.idbtrans.objectStore(l.storeNames[0]),function m(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(o.get(-1/0).onsuccess=m)}());var h=l._waitingFor;return new X(function(m,b){c.then(function(x){return l._waitingQueue.push(ge(m.bind(null,x)))},function(x){return l._waitingQueue.push(ge(b.bind(null,x)))}).finally(function(){l._waitingFor===h&&(l._waitingFor=null)})})},Qe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ne.Abort))},Qe.prototype.table=function(i){var o=this._memoizedTables||(this._memoizedTables={});if(v(o,i))return o[i];var l=this.schema[i];if(!l)throw new ne.NotFound("Table "+i+" not part of transaction");return l=new this.db.Table(i,l,this),l.core=this.db.core.table(i),o[i]=l},Qe);function Qe(){}function ci(i,o,l,c,h,m,b,x){return{name:i,keyPath:o,unique:l,multi:c,auto:h,compound:m,src:(l&&!b?"&":"")+(c?"*":"")+(h?"++":"")+vo(o),type:x}}function vo(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function fi(i,o,l){return{name:i,primKey:o,indexes:l,mappedClass:null,idxByName:(c=function(h){return[h.name,h]},l.reduce(function(h,m,b){return b=c(m,b),b&&(h[b[0]]=b[1]),h},{}))};var c}var Sn=function(i){try{return i.only([[]]),Sn=function(){return[[]]},[[]]}catch{return Sn=function(){return kt},kt}};function di(i){return i==null?function(){}:typeof i=="string"?(o=i).split(".").length===1?function(l){return l[o]}:function(l){return Z(l,o)}:function(l){return Z(l,i)};var o}function bo(i){return[].slice.call(i)}var Dc=0;function Pn(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function Oc(i,o,S){function c(D){if(D.type===3)return null;if(D.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=D.lower,k=D.upper,A=D.lowerOpen,D=D.upperOpen;return C===void 0?k===void 0?null:o.upperBound(k,!!D):k===void 0?o.lowerBound(C,!!A):o.bound(C,k,!!A,!!D)}function h(O){var C,k=O.name;return{name:k,schema:O,mutate:function(A){var D=A.trans,R=A.type,_=A.keys,I=A.values,F=A.range;return new Promise(function(U,W){U=ge(U);var K=D.objectStore(k),z=K.keyPath==null,Y=R==="put"||R==="add";if(!Y&&R!=="delete"&&R!=="deleteRange")throw new Error("Invalid operation type: "+R);var H,Q=(_||I||{length:1}).length;if(_&&I&&_.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(Q===0)return U({numFailures:0,failures:{},results:[],lastResult:void 0});function ae(Ve){++Fe,xn(Ve)}var ue=[],le=[],Fe=0;if(R==="deleteRange"){if(F.type===4)return U({numFailures:Fe,failures:le,results:[],lastResult:void 0});F.type===3?ue.push(H=K.clear()):ue.push(H=K.delete(c(F)))}else{var z=Y?z?[I,_]:[I,null]:[_,null],oe=z[0],je=z[1];if(Y)for(var _e=0;_e<Q;++_e)ue.push(H=je&&je[_e]!==void 0?K[R](oe[_e],je[_e]):K[R](oe[_e])),H.onerror=ae;else for(_e=0;_e<Q;++_e)ue.push(H=K[R](oe[_e])),H.onerror=ae}function wr(Ve){Ve=Ve.target.result,ue.forEach(function(Ot,Oi){return Ot.error!=null&&(le[Oi]=Ot.error)}),U({numFailures:Fe,failures:le,results:R==="delete"?_:ue.map(function(Ot){return Ot.result}),lastResult:Ve})}H.onerror=function(Ve){ae(Ve),wr(Ve)},H.onsuccess=wr})},getMany:function(A){var D=A.trans,R=A.keys;return new Promise(function(_,I){_=ge(_);for(var F,U=D.objectStore(k),W=R.length,K=new Array(W),z=0,Y=0,H=function(ue){ue=ue.target,K[ue._pos]=ue.result,++Y===z&&_(K)},Q=Je(I),ae=0;ae<W;++ae)R[ae]!=null&&((F=U.get(R[ae]))._pos=ae,F.onsuccess=H,F.onerror=Q,++z);z===0&&_(K)})},get:function(A){var D=A.trans,R=A.key;return new Promise(function(_,I){_=ge(_);var F=D.objectStore(k).get(R);F.onsuccess=function(U){return _(U.target.result)},F.onerror=Je(I)})},query:(C=P,function(A){return new Promise(function(D,R){D=ge(D);var _,I,F,z=A.trans,U=A.values,W=A.limit,H=A.query,K=W===1/0?void 0:W,Y=H.index,H=H.range,z=z.objectStore(k),Y=Y.isPrimaryKey?z:z.index(Y.name),H=c(H);if(W===0)return D({result:[]});C?((K=U?Y.getAll(H,K):Y.getAllKeys(H,K)).onsuccess=function(Q){return D({result:Q.target.result})},K.onerror=Je(R)):(_=0,I=!U&&"openKeyCursor"in Y?Y.openKeyCursor(H):Y.openCursor(H),F=[],I.onsuccess=function(Q){var ae=I.result;return ae?(F.push(U?ae.value:ae.primaryKey),++_===W?D({result:F}):void ae.continue()):D({result:F})},I.onerror=Je(R))})}),openCursor:function(A){var D=A.trans,R=A.values,_=A.query,I=A.reverse,F=A.unique;return new Promise(function(U,W){U=ge(U);var Y=_.index,K=_.range,z=D.objectStore(k),z=Y.isPrimaryKey?z:z.index(Y.name),Y=I?F?"prevunique":"prev":F?"nextunique":"next",H=!R&&"openKeyCursor"in z?z.openKeyCursor(c(K),Y):z.openCursor(c(K),Y);H.onerror=Je(W),H.onsuccess=ge(function(Q){var ae,ue,le,Fe,oe=H.result;oe?(oe.___id=++Dc,oe.done=!1,ae=oe.continue.bind(oe),ue=(ue=oe.continuePrimaryKey)&&ue.bind(oe),le=oe.advance.bind(oe),Fe=function(){throw new Error("Cursor not stopped")},oe.trans=D,oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=function(){throw new Error("Cursor not started")},oe.fail=ge(W),oe.next=function(){var je=this,_e=1;return this.start(function(){return _e--?je.continue():je.stop()}).then(function(){return je})},oe.start=function(je){function _e(){if(H.result)try{je()}catch(Ve){oe.fail(Ve)}else oe.done=!0,oe.start=function(){throw new Error("Cursor behind last entry")},oe.stop()}var wr=new Promise(function(Ve,Ot){Ve=ge(Ve),H.onerror=Je(Ot),oe.fail=Ot,oe.stop=function(Oi){oe.stop=oe.continue=oe.continuePrimaryKey=oe.advance=Fe,Ve(Oi)}});return H.onsuccess=ge(function(Ve){H.onsuccess=_e,_e()}),oe.continue=ae,oe.continuePrimaryKey=ue,oe.advance=le,_e(),wr},U(oe)):U(null)},W)})},count:function(A){var D=A.query,R=A.trans,_=D.index,I=D.range;return new Promise(function(F,U){var W=R.objectStore(k),K=_.isPrimaryKey?W:W.index(_.name),W=c(I),K=W?K.count(W):K.count();K.onsuccess=ge(function(z){return F(z.target.result)}),K.onerror=Je(U)})}}}var m,b,x,E=(b=S,x=bo((m=i).objectStoreNames),{schema:{name:m.name,tables:x.map(function(O){return b.objectStore(O)}).map(function(O){var C=O.keyPath,D=O.autoIncrement,k=f(C),A={},D={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C==null,compound:k,keyPath:C,autoIncrement:D,unique:!0,extractKey:di(C)},indexes:bo(O.indexNames).map(function(R){return O.index(R)}).map(function(F){var _=F.name,I=F.unique,U=F.multiEntry,F=F.keyPath,U={name:_,compound:f(F),keyPath:F,unique:I,multiEntry:U,extractKey:di(F)};return A[Pn(F)]=U}),getIndexByKeyPath:function(R){return A[Pn(R)]}};return A[":id"]=D.primaryKey,C!=null&&(A[Pn(C)]=D.primaryKey),D})},hasGetAll:0<x.length&&"getAll"in b.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),S=E.schema,P=E.hasGetAll,E=S.tables.map(h),w={};return E.forEach(function(O){return w[O.name]=O}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(O){if(!w[O])throw new Error("Table '".concat(O,"' not found"));return w[O]},MIN_KEY:-1/0,MAX_KEY:Sn(o),schema:S}}function Rc(i,o,l,c){var h=l.IDBKeyRange;return l.indexedDB,{dbcore:(c=Oc(o,h,c),i.dbcore.reduce(function(m,b){return b=b.create,r(r({},m),b(m))},c))}}function cr(i,c){var l=c.db,c=Rc(i._middlewares,l,i._deps,c);i.core=c.dbcore,i.tables.forEach(function(h){var m=h.name;i.core.schema.tables.some(function(b){return b.name===m})&&(h.core=i.core.table(m),i[m]instanceof i.Table&&(i[m].core=h.core))})}function fr(i,o,l,c){l.forEach(function(h){var m=c[h];o.forEach(function(b){var x=function S(P,E){return M(P,E)||(P=p(P))&&S(P,E)}(b,h);(!x||"value"in x&&x.value===void 0)&&(b===i.Transaction.prototype||b instanceof i.Transaction?L(b,h,{get:function(){return this.table(h)},set:function(S){T(this,h,{value:S,writable:!0,configurable:!0,enumerable:!0})}}):b[h]=new i.Table(h,m))})})}function hi(i,o){o.forEach(function(l){for(var c in l)l[c]instanceof i.Table&&delete l[c]})}function jc(i,o){return i._cfg.version-o._cfg.version}function _c(i,o,l,c){var h=i._dbSchema;l.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=fi("$meta",wo("")[0],[]),i._storeNames.push("$meta"));var m=i._createTransaction("readwrite",i._storeNames,h);m.create(l),m._completion.catch(c);var b=m._reject.bind(m),x=te.transless||te;ct(function(){return te.trans=m,te.transless=x,o!==0?(cr(i,l),P=o,((S=m).storeNames.includes("$meta")?S.table("$meta").get("version").then(function(E){return E??P}):X.resolve(P)).then(function(E){return O=E,C=m,k=l,A=[],E=(w=i)._versions,D=w._dbSchema=hr(0,w.idbdb,k),(E=E.filter(function(R){return R._cfg.version>=O})).length!==0?(E.forEach(function(R){A.push(function(){var _=D,I=R._cfg.dbschema;pr(w,_,k),pr(w,I,k),D=w._dbSchema=I;var F=pi(_,I);F.add.forEach(function(Y){mi(k,Y[0],Y[1].primKey,Y[1].indexes)}),F.change.forEach(function(Y){if(Y.recreate)throw new ne.Upgrade("Not yet support for changing primary key");var H=k.objectStore(Y.name);Y.add.forEach(function(Q){return dr(H,Q)}),Y.change.forEach(function(Q){H.deleteIndex(Q.name),dr(H,Q)}),Y.del.forEach(function(Q){return H.deleteIndex(Q)})});var U=R._cfg.contentUpgrade;if(U&&R._cfg.version>O){cr(w,k),C._memoizedTables={};var W=ie(I);F.del.forEach(function(Y){W[Y]=_[Y]}),hi(w,[w.Transaction.prototype]),fr(w,[w.Transaction.prototype],u(W),W),C.schema=W;var K,z=It(U);return z&&Ut(),F=X.follow(function(){var Y;(K=U(C))&&z&&(Y=ft.bind(null,null),K.then(Y,Y))}),K&&typeof K.then=="function"?X.resolve(K):F.then(function(){return K})}}),A.push(function(_){var I,F,U=R._cfg.dbschema;I=U,F=_,[].slice.call(F.db.objectStoreNames).forEach(function(W){return I[W]==null&&F.db.deleteObjectStore(W)}),hi(w,[w.Transaction.prototype]),fr(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),C.schema=w._dbSchema}),A.push(function(_){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===R._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(I){return I!=="$meta"})):_.objectStore("$meta").put(R._cfg.version,"version"))})}),function R(){return A.length?X.resolve(A.shift()(C.idbtrans)).then(R):X.resolve()}().then(function(){xo(D,k)})):X.resolve();var w,O,C,k,A,D}).catch(b)):(u(h).forEach(function(E){mi(l,E,h[E].primKey,h[E].indexes)}),cr(i,l),void X.follow(function(){return i.on.populate.fire(m)}).catch(b));var S,P})}function Lc(i,o){xo(i._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var l=hr(0,i.idbdb,o);pr(i,i._dbSchema,o);for(var c=0,h=pi(l,i._dbSchema).change;c<h.length;c++){var m=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=o.objectStore(b.name);b.add.forEach(function(S){Xe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(S.src)),dr(x,S)})}(h[c]);if(typeof m=="object")return m.value}}function pi(i,o){var l,c={del:[],add:[],change:[]};for(l in i)o[l]||c.del.push(l);for(l in o){var h=i[l],m=o[l];if(h){var b={name:l,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)b.recreate=!0,c.change.push(b);else{var x=h.idxByName,S=m.idxByName,P=void 0;for(P in x)S[P]||b.del.push(P);for(P in S){var E=x[P],w=S[P];E?E.src!==w.src&&b.change.push(w):b.add.push(w)}(0<b.del.length||0<b.add.length||0<b.change.length)&&c.change.push(b)}}else c.add.push([l,m])}return c}function mi(i,o,l,c){var h=i.db.createObjectStore(o,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return c.forEach(function(m){return dr(h,m)}),h}function xo(i,o){u(i).forEach(function(l){o.db.objectStoreNames.contains(l)||(Xe&&console.debug("Dexie: Creating missing table",l),mi(o,l,i[l].primKey,i[l].indexes))})}function dr(i,o){i.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function hr(i,o,l){var c={};return j(o.objectStoreNames,0).forEach(function(h){for(var m=l.objectStore(h),b=ci(vo(P=m.keyPath),P||"",!0,!1,!!m.autoIncrement,P&&typeof P!="string",!0),x=[],S=0;S<m.indexNames.length;++S){var E=m.index(m.indexNames[S]),P=E.keyPath,E=ci(E.name,P,!!E.unique,!!E.multiEntry,!1,P&&typeof P!="string",!1);x.push(E)}c[h]=fi(h,b,x)}),c}function pr(i,o,l){for(var c=l.db.objectStoreNames,h=0;h<c.length;++h){var m=c[h],b=l.objectStore(m);i._hasGetAll="getAll"in b;for(var x=0;x<b.indexNames.length;++x){var S=b.indexNames[x],P=b.index(S).keyPath,E=typeof P=="string"?P:"["+j(P).join("+")+"]";!o[m]||(P=o[m].idxByName[E])&&(P.name=S,delete o[m].idxByName[E],o[m].idxByName[S]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function wo(i){return i.split(",").map(function(o,l){var m=o.split(":"),c=(h=m[1])===null||h===void 0?void 0:h.trim(),h=(o=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return ci(h,m||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),f(m),l===0,c)})}var Nc=(Wt.prototype._createTableSchema=fi,Wt.prototype._parseIndexSyntax=wo,Wt.prototype._parseStoresSpec=function(i,o){var l=this;u(i).forEach(function(c){if(i[c]!==null){var h=l._parseIndexSyntax(i[c]),m=h.shift();if(!m)throw new ne.Schema("Invalid schema for table "+c+": "+i[c]);if(m.unique=!0,m.multi)throw new ne.Schema("Primary key cannot be multiEntry*");h.forEach(function(b){if(b.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}),h=l._createTableSchema(c,m,h),o[c]=h}})},Wt.prototype.stores=function(l){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,l):l;var l=o._versions,c={},h={};return l.forEach(function(m){d(c,m._cfg.storesSource),h=m._cfg.dbschema={},m._parseStoresSpec(c,h)}),o._dbSchema=h,hi(o,[o._allTables,o,o.Transaction.prototype]),fr(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],u(h),h),o._storeNames=u(h),this},Wt.prototype.upgrade=function(i){return this._cfg.contentUpgrade=Xr(this._cfg.contentUpgrade||he,i),this},Wt);function Wt(){}function gi(i,o){var l=i._dbNamesDB;return l||(l=i._dbNamesDB=new st(ir,{addons:[],indexedDB:i,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function yi(i){return i&&typeof i.databases=="function"}function vi(i){return ct(function(){return te.letThrough=!0,i()})}function bi(i){return!("from"in i)}var Re=function(i,o){if(!this){var l=new Re;return i&&"d"in i&&d(l,i),l}d(this,arguments.length?{d:1,from:i,to:1<arguments.length?o:i}:{d:0})};function Cn(i,o,l){var c=ce(o,l);if(!isNaN(c)){if(0<c)throw RangeError();if(bi(i))return d(i,{from:o,to:l,d:1});var h=i.l,c=i.r;if(ce(l,i.from)<0)return h?Cn(h,o,l):i.l={from:o,to:l,d:1,l:null,r:null},Po(i);if(0<ce(o,i.to))return c?Cn(c,o,l):i.r={from:o,to:l,d:1,l:null,r:null},Po(i);ce(o,i.from)<0&&(i.from=o,i.l=null,i.d=c?c.d+1:1),0<ce(l,i.to)&&(i.to=l,i.r=null,i.d=i.l?i.l.d+1:1),l=!i.r,h&&!i.l&&Tn(i,h),c&&l&&Tn(i,c)}}function Tn(i,o){bi(o)||function l(c,S){var m=S.from,b=S.to,x=S.l,S=S.r;Cn(c,m,b),x&&l(c,x),S&&l(c,S)}(i,o)}function So(i,o){var l=mr(o),c=l.next();if(c.done)return!1;for(var h=c.value,m=mr(i),b=m.next(h.from),x=b.value;!c.done&&!b.done;){if(ce(x.from,h.to)<=0&&0<=ce(x.to,h.from))return!0;ce(h.from,x.from)<0?h=(c=l.next(x.from)).value:x=(b=m.next(h.from)).value}return!1}function mr(i){var o=bi(i)?null:{s:0,n:i};return{next:function(l){for(var c=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,c)for(;o.n.l&&ce(l,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!c||ce(l,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Po(i){var o,l,c=(((o=i.r)===null||o===void 0?void 0:o.d)||0)-(((l=i.l)===null||l===void 0?void 0:l.d)||0),h=1<c?"r":c<-1?"l":"";h&&(o=h=="r"?"l":"r",l=r({},i),c=i[h],i.from=c.from,i.to=c.to,i[h]=c[h],l[h]=c[o],(i[o]=l).d=Co(l)),i.d=Co(i)}function Co(l){var o=l.r,l=l.l;return(o?l?Math.max(o.d,l.d):o.d:l?l.d:0)+1}function gr(i,o){return u(o).forEach(function(l){i[l]?Tn(i[l],o[l]):i[l]=function c(h){var m,b,x={};for(m in h)v(h,m)&&(b=h[m],x[m]=!b||typeof b!="object"||Me.has(b.constructor)?b:c(b));return x}(o[l])}),i}function xi(i,o){return i.all||o.all||Object.keys(i).some(function(l){return o[l]&&So(o[l],i[l])})}y(Re.prototype,(($e={add:function(i){return Tn(this,i),this},addKey:function(i){return Cn(this,i,i),this},addKeys:function(i){var o=this;return i.forEach(function(l){return Cn(o,l,l)}),this},hasKey:function(i){var o=mr(this).next(i).value;return o&&ce(o.from,i)<=0&&0<=ce(o.to,i)}})[rt]=function(){return mr(this)},$e));var Et={},wi={},Si=!1;function yr(i){gr(wi,i),Si||(Si=!0,setTimeout(function(){Si=!1,Pi(wi,!(wi={}))},0))}function Pi(i,o){o===void 0&&(o=!1);var l=new Set;if(i.all)for(var c=0,h=Object.values(Et);c<h.length;c++)To(b=h[c],i,l,o);else for(var m in i){var b,x=/^idb\:\/\/(.*)\/(.*)\//.exec(m);x&&(m=x[1],x=x[2],(b=Et["idb://".concat(m,"/").concat(x)])&&To(b,i,l,o))}l.forEach(function(S){return S()})}function To(i,o,l,c){for(var h=[],m=0,b=Object.entries(i.queries.query);m<b.length;m++){for(var x=b[m],S=x[0],P=[],E=0,w=x[1];E<w.length;E++){var O=w[E];xi(o,O.obsSet)?O.subscribers.forEach(function(D){return l.add(D)}):c&&P.push(O)}c&&h.push([S,P])}if(c)for(var C=0,k=h;C<k.length;C++){var A=k[C],S=A[0],P=A[1];i.queries.query[S]=P}}function Mc(i){var o=i._state,l=i._deps.indexedDB;if(o.isBeingOpened||i.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?be(o.dbOpenError):i});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var c=o.openCanceller,h=Math.round(10*i.verno),m=!1;function b(){if(o.openCanceller!==c)throw new ne.DatabaseClosed("db.open() was cancelled")}function x(){return new X(function(O,C){if(b(),!l)throw new ne.MissingAPI;var k=i.name,A=o.autoSchema||!h?l.open(k):l.open(k,h);if(!A)throw new ne.MissingAPI;A.onerror=Je(C),A.onblocked=ge(i._fireOnBlocked),A.onupgradeneeded=ge(function(D){var R;E=A.transaction,o.autoSchema&&!i._options.allowEmptyDB?(A.onerror=xn,E.abort(),A.result.close(),(R=l.deleteDatabase(k)).onsuccess=R.onerror=ge(function(){C(new ne.NoSuchDatabase("Database ".concat(k," doesnt exist")))})):(E.onerror=Je(C),D=D.oldVersion>Math.pow(2,62)?0:D.oldVersion,w=D<1,i.idbdb=A.result,m&&Lc(i,E),_c(i,D/10,E,C))},C),A.onsuccess=ge(function(){E=null;var D,R,_,I,F,U=i.idbdb=A.result,W=j(U.objectStoreNames);if(0<W.length)try{var K=U.transaction((I=W).length===1?I[0]:I,"readonly");if(o.autoSchema)R=U,_=K,(D=i).verno=R.version/10,_=D._dbSchema=hr(0,R,_),D._storeNames=j(R.objectStoreNames,0),fr(D,[D._allTables],u(_),_);else if(pr(i,i._dbSchema,K),((F=pi(hr(0,(F=i).idbdb,K),F._dbSchema)).add.length||F.change.some(function(z){return z.add.length||z.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),U.close(),h=U.version+1,m=!0,O(x());cr(i,K)}catch{}qt.push(i),U.onversionchange=ge(function(z){o.vcFired=!0,i.on("versionchange").fire(z)}),U.onclose=ge(function(){i.close({disableAutoOpen:!1})}),w&&(F=i._deps,K=k,U=F.indexedDB,F=F.IDBKeyRange,yi(U)||K===ir||gi(U,F).put({name:K}).catch(he)),O()},C)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<h)return h=0,x()}return X.reject(O)})}var S,P=o.dbReadyResolve,E=null,w=!1;return X.race([c,(typeof navigator>"u"?X.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function C(){return indexedDB.databases().finally(O)}S=setInterval(C,100),C()}).finally(function(){return clearInterval(S)}):Promise.resolve()).then(x)]).then(function(){return b(),o.onReadyBeingFired=[],X.resolve(vi(function(){return i.on.ready.fire(i.vip)})).then(function O(){if(0<o.onReadyBeingFired.length){var C=o.onReadyBeingFired.reduce(Xr,he);return o.onReadyBeingFired=[],X.resolve(vi(function(){return C(i.vip)})).then(O)}})}).finally(function(){o.openCanceller===c&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(O){o.dbOpenError=O;try{E&&E.abort()}catch{}return c===o.openCanceller&&i._close(),be(O)}).finally(function(){o.openComplete=!0,P()}).then(function(){var O;return w&&(O={},i.tables.forEach(function(C){C.schema.indexes.forEach(function(k){k.name&&(O["idb://".concat(i.name,"/").concat(C.name,"/").concat(k.name)]=new Re(-1/0,[[[]]]))}),O["idb://".concat(i.name,"/").concat(C.name,"/")]=O["idb://".concat(i.name,"/").concat(C.name,"/:dels")]=new Re(-1/0,[[[]]])}),pt(wn).fire(O),Pi(O,!0)),i})}function Ci(i){function o(m){return i.next(m)}var l=h(o),c=h(function(m){return i.throw(m)});function h(m){return function(S){var x=m(S),S=x.value;return x.done?S:S&&typeof S.then=="function"?S.then(l,c):f(S)?Promise.all(S).then(l,c):l(S)}}return h(o)()}function vr(i,o,l){for(var c=f(i)?i.slice():[i],h=0;h<l;++h)c.push(o);return c}var Vc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(o){var l=i.table(o),c=l.schema,h={},m=[];function b(w,O,C){var k=Pn(w),A=h[k]=h[k]||[],D=w==null?0:typeof w=="string"?1:w.length,R=0<O,R=r(r({},C),{name:R?"".concat(k,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:R,keyTail:O,keyLength:D,extractKey:di(w),unique:!R&&C.unique});return A.push(R),R.isPrimaryKey||m.push(R),1<D&&b(D===2?w[0]:w.slice(0,D-1),O+1,C),A.sort(function(_,I){return _.keyTail-I.keyTail}),R}o=b(c.primaryKey.keyPath,0,c.primaryKey),h[":id"]=[o];for(var x=0,S=c.indexes;x<S.length;x++){var P=S[x];b(P.keyPath,0,P)}function E(w){var O,C=w.query.index;return C.isVirtual?r(r({},w),{query:{index:C.lowLevelIndex,range:(O=w.query.range,C=C.keyTail,{type:O.type===1?2:O.type,lower:vr(O.lower,O.lowerOpen?i.MAX_KEY:i.MIN_KEY,C),lowerOpen:!0,upper:vr(O.upper,O.upperOpen?i.MIN_KEY:i.MAX_KEY,C),upperOpen:!0})}}):w}return r(r({},l),{schema:r(r({},c),{primaryKey:o,indexes:m,getIndexByKeyPath:function(w){return(w=h[Pn(w)])&&w[0]}}),count:function(w){return l.count(E(w))},query:function(w){return l.query(E(w))},openCursor:function(w){var O=w.query.index,C=O.keyTail,k=O.isVirtual,A=O.keyLength;return k?l.openCursor(E(w)).then(function(R){return R&&D(R)}):l.openCursor(w);function D(R){return Object.create(R,{continue:{value:function(_){_!=null?R.continue(vr(_,w.reverse?i.MAX_KEY:i.MIN_KEY,C)):w.unique?R.continue(R.key.slice(0,A).concat(w.reverse?i.MIN_KEY:i.MAX_KEY,C)):R.continue()}},continuePrimaryKey:{value:function(_,I){R.continuePrimaryKey(vr(_,i.MAX_KEY,C),I)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var _=R.key;return A===1?_[0]:_.slice(0,A)}},value:{get:function(){return R.value}}})}}})}})}};function Ti(i,o,l,c){return l=l||{},c=c||"",u(i).forEach(function(h){var m,b,x;v(o,h)?(m=i[h],b=o[h],typeof m=="object"&&typeof b=="object"&&m&&b?(x=Ye(m))!==Ye(b)?l[c+h]=o[h]:x==="Object"?Ti(m,b,l,c+h+"."):m!==b&&(l[c+h]=o[h]):m!==b&&(l[c+h]=o[h])):l[c+h]=void 0}),u(o).forEach(function(h){v(i,h)||(l[c+h]=o[h])}),l}function ki(i,o){return o.type==="delete"?o.keys:o.keys||o.values.map(i.extractKey)}var Ic={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(o){var l=i.table(o),c=l.schema.primaryKey;return r(r({},l),{mutate:function(h){var m=te.trans,b=m.table(o).hook,x=b.deleting,S=b.creating,P=b.updating;switch(h.type){case"add":if(S.fire===he)break;return m._promise("readwrite",function(){return E(h)},!0);case"put":if(S.fire===he&&P.fire===he)break;return m._promise("readwrite",function(){return E(h)},!0);case"delete":if(x.fire===he)break;return m._promise("readwrite",function(){return E(h)},!0);case"deleteRange":if(x.fire===he)break;return m._promise("readwrite",function(){return function w(O,C,k){return l.query({trans:O,values:!1,query:{index:c,range:C},limit:k}).then(function(A){var D=A.result;return E({type:"delete",keys:D,trans:O}).then(function(R){return 0<R.numFailures?Promise.reject(R.failures[0]):D.length<k?{failures:[],numFailures:0,lastResult:void 0}:w(O,r(r({},C),{lower:D[D.length-1],lowerOpen:!0}),k)})})}(h.trans,h.range,1e4)},!0)}return l.mutate(h);function E(w){var O,C,k,A=te.trans,D=w.keys||ki(c,w);if(!D)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?r(r({},w),{keys:D}):r({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),O=l,k=D,((C=w).type==="add"?Promise.resolve([]):O.getMany({trans:C.trans,keys:k,cache:"immutable"})).then(function(R){var _=D.map(function(I,F){var U,W,K,z=R[F],Y={onerror:null,onsuccess:null};return w.type==="delete"?x.fire.call(Y,I,z,A):w.type==="add"||z===void 0?(U=S.fire.call(Y,I,w.values[F],A),I==null&&U!=null&&(w.keys[F]=I=U,c.outbound||ee(w.values[F],c.keyPath,I))):(U=Ti(z,w.values[F]),(W=P.fire.call(Y,U,I,z,A))&&(K=w.values[F],Object.keys(W).forEach(function(H){v(K,H)?K[H]=W[H]:ee(K,H,W[H])}))),Y});return l.mutate(w).then(function(I){for(var F=I.failures,U=I.results,W=I.numFailures,I=I.lastResult,K=0;K<D.length;++K){var z=(U||D)[K],Y=_[K];z==null?Y.onerror&&Y.onerror(F[K]):Y.onsuccess&&Y.onsuccess(w.type==="put"&&R[K]?w.values[K]:z)}return{failures:F,results:U,numFailures:W,lastResult:I}}).catch(function(I){return _.forEach(function(F){return F.onerror&&F.onerror(I)}),Promise.reject(I)})})}}})}})}};function ko(i,o,l){try{if(!o||o.keys.length<i.length)return null;for(var c=[],h=0,m=0;h<o.keys.length&&m<i.length;++h)ce(o.keys[h],i[m])===0&&(c.push(l?He(o.values[h]):o.values[h]),++m);return c.length===i.length?c:null}catch{return null}}var Fc={stack:"dbcore",level:-1,create:function(i){return{table:function(o){var l=i.table(o);return r(r({},l),{getMany:function(c){if(!c.cache)return l.getMany(c);var h=ko(c.keys,c.trans._cache,c.cache==="clone");return h?X.resolve(h):l.getMany(c).then(function(m){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?He(m):m},m})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),l.mutate(c)}})}}}};function Ao(i,o){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function Eo(i,o){switch(i){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Bc={stack:"dbcore",level:0,name:"Observability",create:function(i){var o=i.schema.name,l=new Re(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(c,h,m){if(te.subscr&&h!=="readonly")throw new ne.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(te.querier));return i.transaction(c,h,m)},table:function(c){var h=i.table(c),m=h.schema,b=m.primaryKey,w=m.indexes,x=b.extractKey,S=b.outbound,P=b.autoIncrement&&w.filter(function(C){return C.compound&&C.keyPath.includes(b.keyPath)}),E=r(r({},h),{mutate:function(C){function k(H){return H="idb://".concat(o,"/").concat(c,"/").concat(H),I[H]||(I[H]=new Re)}var A,D,R,_=C.trans,I=C.mutatedParts||(C.mutatedParts={}),F=k(""),U=k(":dels"),W=C.type,Y=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[ki(b,C).filter(function(H){return H}),C.values]:[],K=Y[0],z=Y[1],Y=C.trans._cache;return f(K)?(F.addKeys(K),(Y=W==="delete"||K.length===z.length?ko(K,Y):null)||U.addKeys(K),(Y||z)&&(A=k,D=Y,R=z,m.indexes.forEach(function(H){var Q=A(H.name||"");function ae(le){return le!=null?H.extractKey(le):null}function ue(le){return H.multiEntry&&f(le)?le.forEach(function(Fe){return Q.addKey(Fe)}):Q.addKey(le)}(D||R).forEach(function(le,je){var oe=D&&ae(D[je]),je=R&&ae(R[je]);ce(oe,je)!==0&&(oe!=null&&ue(oe),je!=null&&ue(je))})}))):K?(z={from:(z=K.lower)!==null&&z!==void 0?z:i.MIN_KEY,to:(z=K.upper)!==null&&z!==void 0?z:i.MAX_KEY},U.add(z),F.add(z)):(F.add(l),U.add(l),m.indexes.forEach(function(H){return k(H.name).add(l)})),h.mutate(C).then(function(H){return!K||C.type!=="add"&&C.type!=="put"||(F.addKeys(H.results),P&&P.forEach(function(Q){for(var ae=C.values.map(function(oe){return Q.extractKey(oe)}),ue=Q.keyPath.findIndex(function(oe){return oe===b.keyPath}),le=0,Fe=H.results.length;le<Fe;++le)ae[le][ue]=H.results[le];k(Q.name).addKeys(ae)})),_.mutatedParts=gr(_.mutatedParts||{},I),H})}}),w=function(k){var A=k.query,k=A.index,A=A.range;return[k,new Re((k=A.lower)!==null&&k!==void 0?k:i.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:i.MAX_KEY)]},O={get:function(C){return[b,new Re(C.key)]},getMany:function(C){return[b,new Re().addKeys(C.keys)]},count:w,query:w,openCursor:w};return u(O).forEach(function(C){E[C]=function(k){var A=te.subscr,D=!!A,R=Ao(te,h)&&Eo(C,k)?k.obsSet={}:A;if(D){var _=function(z){return z="idb://".concat(o,"/").concat(c,"/").concat(z),R[z]||(R[z]=new Re)},I=_(""),F=_(":dels"),A=O[C](k),D=A[0],A=A[1];if((C==="query"&&D.isPrimaryKey&&!k.values?F:_(D.name||"")).add(A),!D.isPrimaryKey){if(C!=="count"){var U=C==="query"&&S&&k.values&&h.query(r(r({},k),{values:!1}));return h[C].apply(this,arguments).then(function(z){if(C==="query"){if(S&&k.values)return U.then(function(ae){return ae=ae.result,I.addKeys(ae),z});var Y=k.values?z.result.map(x):z.result;(k.values?I:F).addKeys(Y)}else if(C==="openCursor"){var H=z,Q=k.values;return H&&Object.create(H,{key:{get:function(){return F.addKey(H.primaryKey),H.key}},primaryKey:{get:function(){var ae=H.primaryKey;return F.addKey(ae),ae}},value:{get:function(){return Q&&I.addKey(H.primaryKey),H.value}}})}return z})}F.add(l)}}return h[C].apply(this,arguments)}}),E}})}};function Do(i,o,l){if(l.numFailures===0)return o;if(o.type==="deleteRange")return null;var c=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return l.numFailures===c?null:(o=r({},o),f(o.keys)&&(o.keys=o.keys.filter(function(h,m){return!(m in l.failures)})),"values"in o&&f(o.values)&&(o.values=o.values.filter(function(h,m){return!(m in l.failures)})),o)}function Ai(i,o){return l=i,((c=o).lower===void 0||(c.lowerOpen?0<ce(l,c.lower):0<=ce(l,c.lower)))&&(i=i,(o=o).upper===void 0||(o.upperOpen?ce(i,o.upper)<0:ce(i,o.upper)<=0));var l,c}function Oo(i,o,O,c,h,m){if(!O||O.length===0)return i;var b=o.query.index,x=b.multiEntry,S=o.query.range,P=c.schema.primaryKey.extractKey,E=b.extractKey,w=(b.lowLevelIndex||b).extractKey,O=O.reduce(function(C,k){var A=C,D=[];if(k.type==="add"||k.type==="put")for(var R=new Re,_=k.values.length-1;0<=_;--_){var I,F=k.values[_],U=P(F);R.hasKey(U)||(I=E(F),(x&&f(I)?I.some(function(H){return Ai(H,S)}):Ai(I,S))&&(R.addKey(U),D.push(F)))}switch(k.type){case"add":var W=new Re().addKeys(o.values?C.map(function(Q){return P(Q)}):C),A=C.concat(o.values?D.filter(function(Q){return Q=P(Q),!W.hasKey(Q)&&(W.addKey(Q),!0)}):D.map(function(Q){return P(Q)}).filter(function(Q){return!W.hasKey(Q)&&(W.addKey(Q),!0)}));break;case"put":var K=new Re().addKeys(k.values.map(function(Q){return P(Q)}));A=C.filter(function(Q){return!K.hasKey(o.values?P(Q):Q)}).concat(o.values?D:D.map(function(Q){return P(Q)}));break;case"delete":var z=new Re().addKeys(k.keys);A=C.filter(function(Q){return!z.hasKey(o.values?P(Q):Q)});break;case"deleteRange":var Y=k.range;A=C.filter(function(Q){return!Ai(P(Q),Y)})}return A},i);return O===i?i:(O.sort(function(C,k){return ce(w(C),w(k))||ce(P(C),P(k))}),o.limit&&o.limit<1/0&&(O.length>o.limit?O.length=o.limit:i.length===o.limit&&O.length<o.limit&&(h.dirty=!0)),m?Object.freeze(O):O)}function Ro(i,o){return ce(i.lower,o.lower)===0&&ce(i.upper,o.upper)===0&&!!i.lowerOpen==!!o.lowerOpen&&!!i.upperOpen==!!o.upperOpen}function Kc(i,o){return function(l,c,h,m){if(l===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=ce(l,c))===0){if(h&&m)return 0;if(h)return 1;if(m)return-1}return c}(i.lower,o.lower,i.lowerOpen,o.lowerOpen)<=0&&0<=function(l,c,h,m){if(l===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=ce(l,c))===0){if(h&&m)return 0;if(h)return-1;if(m)return 1}return c}(i.upper,o.upper,i.upperOpen,o.upperOpen)}function $c(i,o,l,c){i.subscribers.add(l),c.addEventListener("abort",function(){var h,m;i.subscribers.delete(l),i.subscribers.size===0&&(h=i,m=o,setTimeout(function(){h.subscribers.size===0&&de(m,h)},3e3))})}var Uc={stack:"dbcore",level:0,name:"Cache",create:function(i){var o=i.schema.name;return r(r({},i),{transaction:function(l,c,h){var m,b,x=i.transaction(l,c,h);return c==="readwrite"&&(b=(m=new AbortController).signal,h=function(S){return function(){if(m.abort(),c==="readwrite"){for(var P=new Set,E=0,w=l;E<w.length;E++){var O=w[E],C=Et["idb://".concat(o,"/").concat(O)];if(C){var k=i.table(O),A=C.optimisticOps.filter(function(Q){return Q.trans===x});if(x._explicit&&S&&x.mutatedParts)for(var D=0,R=Object.values(C.queries.query);D<R.length;D++)for(var _=0,I=(W=R[D]).slice();_<I.length;_++)xi((K=I[_]).obsSet,x.mutatedParts)&&(de(W,K),K.subscribers.forEach(function(Q){return P.add(Q)}));else if(0<A.length){C.optimisticOps=C.optimisticOps.filter(function(Q){return Q.trans!==x});for(var F=0,U=Object.values(C.queries.query);F<U.length;F++)for(var W,K,z,Y=0,H=(W=U[F]).slice();Y<H.length;Y++)(K=H[Y]).res!=null&&x.mutatedParts&&(S&&!K.dirty?(z=Object.isFrozen(K.res),z=Oo(K.res,K.req,A,k,K,z),K.dirty?(de(W,K),K.subscribers.forEach(function(Q){return P.add(Q)})):z!==K.res&&(K.res=z,K.promise=X.resolve({result:z}))):(K.dirty&&de(W,K),K.subscribers.forEach(function(Q){return P.add(Q)})))}}}P.forEach(function(Q){return Q()})}}},x.addEventListener("abort",h(!1),{signal:b}),x.addEventListener("error",h(!1),{signal:b}),x.addEventListener("complete",h(!0),{signal:b})),x},table:function(l){var c=i.table(l),h=c.schema.primaryKey;return r(r({},c),{mutate:function(m){var b=te.trans;if(h.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(m);var x=Et["idb://".concat(o,"/").concat(l)];return x?(b=c.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||ki(h,m).some(function(S){return S==null}))?(x.optimisticOps.push(m),m.mutatedParts&&yr(m.mutatedParts),b.then(function(S){0<S.numFailures&&(de(x.optimisticOps,m),(S=Do(0,m,S))&&x.optimisticOps.push(S),m.mutatedParts&&yr(m.mutatedParts))}),b.catch(function(){de(x.optimisticOps,m),m.mutatedParts&&yr(m.mutatedParts)})):b.then(function(S){var P=Do(0,r(r({},m),{values:m.values.map(function(E,w){var O;return S.failures[w]?E:(E=(O=h.keyPath)!==null&&O!==void 0&&O.includes(".")?He(E):r({},E),ee(E,h.keyPath,S.results[w]),E)})}),S);x.optimisticOps.push(P),queueMicrotask(function(){return m.mutatedParts&&yr(m.mutatedParts)})}),b):c.mutate(m)},query:function(m){if(!Ao(te,c)||!Eo("query",m))return c.query(m);var b=((P=te.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",w=te,x=w.requery,S=w.signal,P=function(k,A,D,R){var _=Et["idb://".concat(k,"/").concat(A)];if(!_)return[];if(!(A=_.queries[D]))return[null,!1,_,null];var I=A[(R.query?R.query.index.name:null)||""];if(!I)return[null,!1,_,null];switch(D){case"query":var F=I.find(function(U){return U.req.limit===R.limit&&U.req.values===R.values&&Ro(U.req.query.range,R.query.range)});return F?[F,!0,_,I]:[I.find(function(U){return("limit"in U.req?U.req.limit:1/0)>=R.limit&&(!R.values||U.req.values)&&Kc(U.req.query.range,R.query.range)}),!1,_,I];case"count":return F=I.find(function(U){return Ro(U.req.query.range,R.query.range)}),[F,!!F,_,I]}}(o,l,"query",m),E=P[0],w=P[1],O=P[2],C=P[3];return E&&w?E.obsSet=m.obsSet:(w=c.query(m).then(function(k){var A=k.result;if(E&&(E.res=A),b){for(var D=0,R=A.length;D<R;++D)Object.freeze(A[D]);Object.freeze(A)}else k.result=He(A);return k}).catch(function(k){return C&&E&&de(C,E),Promise.reject(k)}),E={obsSet:m.obsSet,promise:w,subscribers:new Set,type:"query",req:m,dirty:!1},C?C.push(E):(C=[E],(O=O||(Et["idb://".concat(o,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=C)),$c(E,C,x,S),E.promise.then(function(k){return{result:Oo(k.result,m,O==null?void 0:O.optimisticOps,c,E,b)}})}})}})}};function br(i,o){return new Proxy(i,{get:function(l,c,h){return c==="db"?o:Reflect.get(l,c,h)}})}var st=(xe.prototype.version=function(i){if(isNaN(i)||i<.1)throw new ne.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var o=this._versions,l=o.filter(function(c){return c._cfg.version===i})[0];return l||(l=new this.Version(i),o.push(l),o.sort(jc),l.stores({}),this._state.autoSchema=!1,l)},xe.prototype._whenReady=function(i){var o=this;return this.idbdb&&(this._state.openComplete||te.letThrough||this._vip)?i():new X(function(l,c){if(o._state.openComplete)return c(new ne.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void c(new ne.DatabaseClosed);o.open().catch(he)}o._state.dbReadyPromise.then(l,c)}).then(i)},xe.prototype.use=function(i){var o=i.stack,l=i.create,c=i.level,h=i.name;return h&&this.unuse({stack:o,name:h}),i=this._middlewares[o]||(this._middlewares[o]=[]),i.push({stack:o,create:l,level:c??10,name:h}),i.sort(function(m,b){return m.level-b.level}),this},xe.prototype.unuse=function(i){var o=i.stack,l=i.name,c=i.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(h){return c?h.create!==c:!!l&&h.name!==l})),this},xe.prototype.open=function(){var i=this;return Tt(lt,function(){return Mc(i)})},xe.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var i=this._state,o=qt.indexOf(this);if(0<=o&&qt.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new X(function(l){i.dbReadyResolve=l}),i.openCanceller=new X(function(l,c){i.cancelOpen=c}))},xe.prototype.close=function(l){var o=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;o?(l.isBeingOpened&&l.cancelOpen(new ne.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new ne.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},xe.prototype.delete=function(i){var o=this;i===void 0&&(i={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new X(function(h,m){function b(){o.close(i);var x=o._deps.indexedDB.deleteDatabase(o.name);x.onsuccess=ge(function(){var S,P,E;S=o._deps,P=o.name,E=S.indexedDB,S=S.IDBKeyRange,yi(E)||P===ir||gi(E,S).delete(P).catch(he),h()}),x.onerror=Je(m),x.onblocked=o._fireOnBlocked}if(l)throw new ne.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(b):b()})},xe.prototype.backendDB=function(){return this.idbdb},xe.prototype.isOpen=function(){return this.idbdb!==null},xe.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},xe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},xe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(xe.prototype,"tables",{get:function(){var i=this;return u(this._allTables).map(function(o){return i._allTables[o]})},enumerable:!1,configurable:!0}),xe.prototype.transaction=function(){var i=(function(o,l,c){var h=arguments.length;if(h<2)throw new ne.InvalidArgument("Too few arguments");for(var m=new Array(h-1);--h;)m[h-1]=arguments[h];return c=m.pop(),[o,Te(m),c]}).apply(this,arguments);return this._transaction.apply(this,i)},xe.prototype._transaction=function(i,o,l){var c=this,h=te.trans;h&&h.db===this&&i.indexOf("!")===-1||(h=null);var m,b,x=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(b=o.map(function(P){if(P=P instanceof c.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),i=="r"||i===si)m=si;else{if(i!="rw"&&i!=oi)throw new ne.InvalidArgument("Invalid transaction mode: "+i);m=oi}if(h){if(h.mode===si&&m===oi){if(!x)throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&b.forEach(function(P){if(h&&h.storeNames.indexOf(P)===-1){if(!x)throw new ne.SubTransaction("Table "+P+" not included in parent transaction.");h=null}}),x&&h&&!h.active&&(h=null)}}catch(P){return h?h._promise(null,function(E,w){w(P)}):be(P)}var S=(function P(E,w,O,C,k){return X.resolve().then(function(){var A=te.transless||te,D=E._createTransaction(w,O,E._dbSchema,C);if(D.explicit=!0,A={trans:D,transless:A},C)D.idbtrans=C.idbtrans;else try{D.create(),D.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(I){return I.name===Yr.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return P(E,w,O,null,k)})):be(I)}var R,_=It(k);return _&&Ut(),A=X.follow(function(){var I;(R=k.call(D,D))&&(_?(I=ft.bind(null,null),R.then(I,I)):typeof R.next=="function"&&typeof R.throw=="function"&&(R=Ci(R)))},A),(R&&typeof R.then=="function"?X.resolve(R).then(function(I){return D.active?I:be(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return R})).then(function(I){return C&&D._resolve(),D._completion.then(function(){return I})}).catch(function(I){return D._reject(I),be(I)})})}).bind(null,this,m,b,h,l);return h?h._promise(m,S,"lock"):te.trans?Tt(te.transless,function(){return c._whenReady(S)}):this._whenReady(S)},xe.prototype.table=function(i){if(!v(this._allTables,i))throw new ne.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},xe);function xe(i,o){var l=this;this._middlewares={},this.verno=0;var c=xe.dependencies;this._options=o=r({addons:xe.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},c=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,m,b,x,S,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:he,dbReadyPromise:null,cancelOpen:he,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};P.dbReadyPromise=new X(function(w){P.dbReadyResolve=w}),P.openCanceller=new X(function(w,O){P.cancelOpen=O}),this._state=P,this.name=i,this.on=vn(this,"populate","blocked","versionchange","close",{ready:[Xr,he]}),this.once=function(w,O){var C=function(){for(var k=[],A=0;A<arguments.length;A++)k[A]=arguments[A];l.on(w).unsubscribe(C),O.apply(l,k)};return l.on(w,C)},this.on.ready.subscribe=$(this.on.ready.subscribe,function(w){return function(O,C){xe.vip(function(){var k,A=l._state;A.openComplete?(A.dbOpenError||X.resolve().then(O),C&&w(O)):A.onReadyBeingFired?(A.onReadyBeingFired.push(O),C&&w(O)):(w(O),k=l,C||w(function D(){k.on.ready.unsubscribe(O),k.on.ready.unsubscribe(D)}))})}}),this.Collection=(h=this,bn(Tc.prototype,function(R,D){this.db=h;var C=so,k=null;if(D)try{C=D()}catch(_){k=_}var A=R._ctx,D=A.table,R=D.hook.reading.fire;this._ctx={table:D,index:A.index,isPrimKey:!A.index||D.schema.primKey.keyPath&&A.index===D.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:k,or:A.or,valueMapper:R!==dn?R:null}})),this.Table=(m=this,bn(fo.prototype,function(w,O,C){this.db=m,this._tx=C,this.name=w,this.schema=O,this.hook=m._allTables[w]?m._allTables[w].hook:vn(null,{creating:[gc,he],reading:[mc,dn],updating:[vc,he],deleting:[yc,he]})})),this.Transaction=(b=this,bn(Ec.prototype,function(w,O,C,k,A){var D=this;w!=="readonly"&&O.forEach(function(R){R=(R=C[R])===null||R===void 0?void 0:R.yProps,R&&(O=O.concat(R.map(function(_){return _.updatesTable})))}),this.db=b,this.mode=w,this.storeNames=O,this.schema=C,this.chromeTransactionDurability=k,this.idbtrans=null,this.on=vn(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(R,_){D._resolve=R,D._reject=_}),this._completion.then(function(){D.active=!1,D.on.complete.fire()},function(R){var _=D.active;return D.active=!1,D.on.error.fire(R),D.parent?D.parent._reject(R):_&&D.idbtrans&&D.idbtrans.abort(),be(R)})})),this.Version=(x=this,bn(Nc.prototype,function(w){this.db=x,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(S=this,bn(yo.prototype,function(w,O,C){if(this.db=S,this._ctx={table:w,index:O===":id"?null:O,or:C},this._cmp=this._ascending=ce,this._descending=function(k,A){return ce(A,k)},this._max=function(k,A){return 0<ce(k,A)?k:A},this._min=function(k,A){return ce(k,A)<0?k:A},this._IDBKeyRange=S._deps.IDBKeyRange,!this._IDBKeyRange)throw new ne.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=Sn(o.IDBKeyRange),this._createTransaction=function(w,O,C,k){return new l.Transaction(w,O,C,l._options.chromeTransactionDurability,k)},this._fireOnBlocked=function(w){l.on("blocked").fire(w),qt.filter(function(O){return O.name===l.name&&O!==l&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(w)})},this.use(Fc),this.use(Uc),this.use(Bc),this.use(Vc),this.use(Ic);var E=new Proxy(this,{get:function(w,O,C){if(O==="_vip")return!0;if(O==="table")return function(A){return br(l.table(A),E)};var k=Reflect.get(w,O,C);return k instanceof fo?br(k,E):O==="tables"?k.map(function(A){return br(A,E)}):O==="_createTransaction"?function(){return br(k.apply(this,arguments),E)}:k}});this.vip=E,c.forEach(function(w){return w(l)})}var xr,$e=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",qc=(Ei.prototype.subscribe=function(i,o,l){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:o,complete:l})},Ei.prototype[$e]=function(){return this},Ei);function Ei(i){this._subscribe=i}try{xr={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{xr={indexedDB:null,IDBKeyRange:null}}function jo(i){var o,l=!1,c=new qc(function(h){var m=It(i),b,x=!1,S={},P={},E={get closed(){return x},unsubscribe:function(){x||(x=!0,b&&b.abort(),w&&pt.storagemutated.unsubscribe(C))}};h.start&&h.start(E);var w=!1,O=function(){return ii(k)},C=function(A){gr(S,A),xi(P,S)&&O()},k=function(){var A,D,R;!x&&xr.indexedDB&&(S={},A={},b&&b.abort(),b=new AbortController,R=function(_){var I=Kt();try{m&&Ut();var F=ct(i,_);return F=m?F.finally(ft):F}finally{I&&$t()}}(D={subscr:A,signal:b.signal,requery:O,querier:i,trans:null}),Promise.resolve(R).then(function(_){l=!0,o=_,x||D.signal.aborted||(S={},function(I){for(var F in I)if(v(I,F))return;return 1}(P=A)||w||(pt(wn,C),w=!0),ii(function(){return!x&&h.next&&h.next(_)}))},function(_){l=!1,["DatabaseClosedError","AbortError"].includes(_==null?void 0:_.name)||x||ii(function(){x||h.error&&h.error(_)})}))};return setTimeout(O,0),E});return c.hasValue=function(){return l},c.getValue=function(){return o},c}var Dt=st;function Di(i){var o=mt;try{mt=!0,pt.storagemutated.fire(i),Pi(i,!0)}finally{mt=o}}y(Dt,r(r({},Yn),{delete:function(i){return new Dt(i,{addons:[]}).delete()},exists:function(i){return new Dt(i,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return o=Dt.dependencies,l=o.indexedDB,o=o.IDBKeyRange,(yi(l)?Promise.resolve(l.databases()).then(function(c){return c.map(function(h){return h.name}).filter(function(h){return h!==ir})}):gi(l,o).toCollection().primaryKeys()).then(i)}catch{return be(new ne.MissingAPI)}var o,l},defineClass:function(){return function(i){d(this,i)}},ignoreTransaction:function(i){return te.trans?Tt(te.transless,i):i()},vip:vi,async:function(i){return function(){try{var o=Ci(i.apply(this,arguments));return o&&typeof o.then=="function"?o:X.resolve(o)}catch(l){return be(l)}}},spawn:function(i,o,l){try{var c=Ci(i.apply(l,o||[]));return c&&typeof c.then=="function"?c:X.resolve(c)}catch(h){return be(h)}},currentTransaction:{get:function(){return te.trans||null}},waitFor:function(i,o){return o=X.resolve(typeof i=="function"?Dt.ignoreTransaction(i):i).timeout(o||6e4),te.trans?te.trans.waitFor(o):o},Promise:X,debug:{get:function(){return Xe},set:function(i){Qs(i)}},derive:N,extend:d,props:y,override:$,Events:vn,on:pt,liveQuery:jo,extendObservabilitySet:gr,getByKeyPath:Z,setByKeyPath:ee,delByKeyPath:function(i,o){typeof o=="string"?ee(i,o,void 0):"length"in o&&[].map.call(o,function(l){ee(i,l,void 0)})},shallowClone:ie,deepClone:He,getObjectDiff:Ti,cmp:ce,asap:q,minKey:-1/0,addons:[],connections:qt,errnames:Yr,dependencies:xr,cache:Et,semVer:"4.2.1",version:"4.2.1".split(".").map(function(i){return parseInt(i)}).reduce(function(i,o,l){return i+o/Math.pow(10,2*l)})})),Dt.maxKey=Sn(Dt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pt(wn,function(i){mt||(i=new CustomEvent(li,{detail:i}),mt=!0,dispatchEvent(i),mt=!1)}),addEventListener(li,function(i){i=i.detail,mt||Di(i)}));var Gt,mt=!1,_o=function(){};return typeof BroadcastChannel<"u"&&((_o=function(){(Gt=new BroadcastChannel(li)).onmessage=function(i){return i.data&&Di(i.data)}})(),typeof Gt.unref=="function"&&Gt.unref(),pt(wn,function(i){mt||Gt.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!st.disableBfCache&&i.persisted){Xe&&console.debug("Dexie: handling persisted pagehide"),Gt!=null&&Gt.close();for(var o=0,l=qt;o<l.length;o++)l[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!st.disableBfCache&&i.persisted&&(Xe&&console.debug("Dexie: handling persisted pageshow"),_o(),Di({all:new Re(-1/0,[[]])}))})),X.rejectionMapper=function(i,o){return!i||i instanceof Ft||i instanceof TypeError||i instanceof SyntaxError||!i.name||!Js[i.name]?i:(o=new Js[i.name](o||i.message,i),"stack"in i&&L(o,"stack",{get:function(){return this.inner.stack}}),o)},Qs(Xe),r(st,Object.freeze({__proto__:null,Dexie:st,liveQuery:jo,Entity:oo,cmp:ce,PropModification:yn,replacePrefix:function(i,o){return new yn({replacePrefix:[i,o]})},add:function(i){return new yn({add:i})},remove:function(i){return new yn({remove:i})},default:st,RangeSet:Re,mergeRanges:Tn,rangesOverlap:So}),{default:st}),st})})(Vu);var Qd=Vu.exports;const Qi=vu(Qd),ra=Symbol.for("Dexie"),_r=globalThis[ra]||(globalThis[ra]=Qi);if(Qi.semVer!==_r.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Qi.semVer} and ${_r.semVer}`);const{liveQuery:Ny,mergeRanges:My,rangesOverlap:Vy,RangeSet:Iy,cmp:Fy,Entity:By,PropModification:Ky,replacePrefix:$y,add:Uy,remove:qy,DexieYProvider:zy}=_r;class Zd extends _r{constructor(){super("FairPlayDB");Yt(this,"cards");Yt(this,"partners");Yt(this,"gameStates");Yt(this,"negotiations");this.version(1).stores({cards:"++id, category, holder, status, &metadata.createdAt",partners:"&id, name, &theme.color",gameStates:"++id, &createdAt",negotiations:"++id, initiator, status, &createdAt"})}}const eh=new Zd;async function th(){(await eh.cards.toArray()).length===0&&console.log("Database initialized and ready for data")}function nh(){const{t}=Un(),{setLanguage:e,language:n}=Mu(),[r,s]=J.useState("dashboard"),a=[{id:"dashboard",label:t("navigation.dashboard")},{id:"gameBoard",label:t("navigation.gameBoard")},{id:"cardGallery",label:t("navigation.cardGallery")},{id:"insights",label:t("navigation.insights")},{id:"settings",label:t("navigation.settings")}];return V.jsx("nav",{className:"bg-paper border-b-2 border-ink shadow-brutal-sm",children:V.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[V.jsxs("div",{className:"flex justify-between items-center h-16",children:[V.jsx("div",{className:"flex items-center",children:V.jsx("h1",{className:"font-display text-xl sm:text-2xl font-bold text-ink",children:t("common.appName")})}),V.jsx("div",{className:"hidden md:flex gap-8",children:a.map(u=>V.jsx("button",{onClick:()=>s(u.id),className:`text-sm font-body transition-all ${r===u.id?"text-partner-a font-bold":"text-ink hover:text-partner-b"}`,children:u.label},u.id))}),V.jsx("div",{className:"flex gap-4 items-center",children:V.jsx("button",{onClick:()=>e(n==="en"?"he":"en"),className:"px-3 py-1 bg-unassigned text-ink rounded-md font-body text-sm font-bold hover:shadow-brutal-sm transition-all",children:n==="en"?"עברית":"English"})})]}),V.jsx("div",{className:"md:hidden pb-4 flex gap-2 overflow-x-auto",children:a.map(u=>V.jsx("button",{onClick:()=>s(u.id),className:`px-3 py-1 rounded text-xs whitespace-nowrap transition-all ${r===u.id?"bg-partner-a text-paper font-bold":"bg-concrete text-paper hover:bg-ink"}`,children:u.label},u.id))})]})})}function rh(){return V.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[V.jsx("div",{className:"absolute inset-0 grain opacity-30"}),V.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-paper via-paper to-paper opacity-100"}),V.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-unassigned opacity-5 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-partner-a opacity-3 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute top-1/2 left-1/4 w-64 h-64 bg-partner-b opacity-3 rounded-full blur-3xl"}),V.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-concrete rounded-full opacity-20"}),V.jsx("div",{className:"absolute top-1/3 right-1/4 w-3 h-3 bg-concrete rounded-full opacity-15"}),V.jsx("div",{className:"absolute bottom-1/4 right-20 w-2 h-2 bg-concrete rounded-full opacity-20"})]})}const Iu=J.createContext({});function ih(t){const e=J.useRef(null);return e.current===null&&(e.current=t()),e.current}const vs=J.createContext(null),Fu=J.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function sh(t=!0){const e=J.useContext(vs);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=J.useId();J.useEffect(()=>{t&&s(a)},[t]);const u=J.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,u]:[!0]}const bs=typeof window<"u",oh=bs?J.useLayoutEffect:J.useEffect,Be=t=>t;let Bu=Be;function xs(t){let e;return()=>(e===void 0&&(e=t()),e)}const an=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ot=t=>t*1e3,at=t=>t/1e3,ah={useManualTiming:!1};function uh(t){let e=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function f(p){a.has(p)&&(d.schedule(p),t()),p(u)}const d={schedule:(p,g=!1,v=!1)=>{const T=v&&r?e:n;return g&&a.add(p),T.has(p)||T.add(p),p},cancel:p=>{n.delete(p),a.delete(p)},process:p=>{if(u=p,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(f),e.clear(),r=!1,s&&(s=!1,d.process(p))}};return d}const Pr=["read","resolveKeyframes","update","preRender","render","postRender"],lh=40;function Ku(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=Pr.reduce((B,j)=>(B[j]=uh(a),B),{}),{read:f,resolveKeyframes:d,update:p,preRender:g,render:v,postRender:y}=u,T=()=>{const B=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(B-s.timestamp,lh),1),s.timestamp=B,s.isProcessing=!0,f.process(s),d.process(s),p.process(s),g.process(s),v.process(s),y.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(T))},L=()=>{n=!0,r=!0,s.isProcessing||t(T)};return{schedule:Pr.reduce((B,j)=>{const $=u[j];return B[j]=(G,q=!1,Z=!1)=>(n||L(),$.schedule(G,q,Z)),B},{}),cancel:B=>{for(let j=0;j<Pr.length;j++)u[Pr[j]].cancel(B)},state:s,steps:u}}const{schedule:me,cancel:yt,state:De,steps:Li}=Ku(typeof requestAnimationFrame<"u"?requestAnimationFrame:Be,!0),$u=J.createContext({strict:!1}),ia={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},un={};for(const t in ia)un[t]={isEnabled:e=>ia[t].some(n=>!!e[n])};function ch(t){for(const e in t)un[e]={...un[e],...t[e]}}const fh=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fh.has(t)}let Uu=t=>!Lr(t);function dh(t){t&&(Uu=e=>e.startsWith("on")?!Lr(e):t(e))}try{dh(require("@emotion/is-prop-valid").default)}catch{}function hh(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Uu(s)||n===!0&&Lr(s)||!e&&!Lr(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function ph(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const qr=J.createContext({});function In(t){return typeof t=="string"||Array.isArray(t)}function zr(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ws=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ss=["initial",...ws];function Hr(t){return zr(t.animate)||Ss.some(e=>In(t[e]))}function qu(t){return!!(Hr(t)||t.variants)}function mh(t,e){if(Hr(t)){const{initial:n,animate:r}=t;return{initial:n===!1||In(n)?n:void 0,animate:In(r)?r:void 0}}return t.inherit!==!1?e:{}}function gh(t){const{initial:e,animate:n}=mh(t,J.useContext(qr));return J.useMemo(()=>({initial:e,animate:n}),[sa(e),sa(n)])}function sa(t){return Array.isArray(t)?t.join(" "):t}const yh=Symbol.for("motionComponentSymbol");function en(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vh(t,e,n){return J.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):en(n)&&(n.current=r))},[e])}const Ps=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bh="framerAppearId",zu="data-"+Ps(bh),{schedule:Cs}=Ku(queueMicrotask,!1),Hu=J.createContext({});function xh(t,e,n,r,s){var a,u;const{visualElement:f}=J.useContext(qr),d=J.useContext($u),p=J.useContext(vs),g=J.useContext(Fu).reducedMotion,v=J.useRef(null);r=r||d.renderer,!v.current&&r&&(v.current=r(t,{visualState:e,parent:f,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const y=v.current,T=J.useContext(Hu);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&wh(v.current,n,s,T);const L=J.useRef(!1);J.useInsertionEffect(()=>{y&&L.current&&y.update(n,p)});const N=n[zu],M=J.useRef(!!N&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,N))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,N)));return oh(()=>{y&&(L.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),Cs.render(y.render),M.current&&y.animationState&&y.animationState.animateChanges())}),J.useEffect(()=>{y&&(!M.current&&y.animationState&&y.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)===null||B===void 0||B.call(window,N)}),M.current=!1))}),y}function wh(t,e,n,r){const{layoutId:s,layout:a,drag:u,dragConstraints:f,layoutScroll:d,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Wu(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!u||f&&en(f),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:p})}function Wu(t){if(t)return t.options.allowProjection!==!1?t.projection:Wu(t.parent)}function Sh({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var a,u;t&&ch(t);function f(p,g){let v;const y={...J.useContext(Fu),...p,layoutId:Ph(p)},{isStatic:T}=y,L=gh(p),N=r(p,T);if(!T&&bs){Ch();const M=Th(y);v=M.MeasureLayout,L.visualElement=xh(s,N,y,e,M.ProjectionNode)}return V.jsxs(qr.Provider,{value:L,children:[v&&L.visualElement?V.jsx(v,{visualElement:L.visualElement,...y}):null,n(s,p,vh(N,L.visualElement,g),N,T,L.visualElement)]})}f.displayName=`motion.${typeof s=="string"?s:`create(${(u=(a=s.displayName)!==null&&a!==void 0?a:s.name)!==null&&u!==void 0?u:""})`}`;const d=J.forwardRef(f);return d[yh]=s,d}function Ph({layoutId:t}){const e=J.useContext(Iu).id;return e&&t!==void 0?e+"-"+t:t}function Ch(t,e){J.useContext($u).strict}function Th(t){const{drag:e,layout:n}=un;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const kh=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ts(t){return typeof t!="string"||t.includes("-")?!1:!!(kh.indexOf(t)>-1||/[A-Z]/u.test(t))}function oa(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ks(t,e,n,r){if(typeof e=="function"){const[s,a]=oa(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=oa(r);e=e(n!==void 0?n:t.custom,s,a)}return e}const Zi=t=>Array.isArray(t),Ah=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Eh=t=>Zi(t)?t[t.length-1]||0:t,Ne=t=>!!(t&&t.getVelocity);function kr(t){const e=Ne(t)?t.get():t;return Ah(e)?e.toValue():e}function Dh({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,a){const u={latestValues:Oh(r,s,a,t),renderState:e()};return n&&(u.onMount=f=>n({props:r,current:f,...u}),u.onUpdate=f=>n(f)),u}const Gu=t=>(e,n)=>{const r=J.useContext(qr),s=J.useContext(vs),a=()=>Dh(t,e,r,s);return n?a():ih(a)};function Oh(t,e,n,r){const s={},a=r(t,{});for(const y in a)s[y]=kr(a[y]);let{initial:u,animate:f}=t;const d=Hr(t),p=qu(t);e&&p&&!d&&t.inherit!==!1&&(u===void 0&&(u=e.initial),f===void 0&&(f=e.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const v=g?f:u;if(v&&typeof v!="boolean"&&!zr(v)){const y=Array.isArray(v)?v:[v];for(let T=0;T<y.length;T++){const L=ks(t,y[T]);if(L){const{transitionEnd:N,transition:M,...B}=L;for(const j in B){let $=B[j];if(Array.isArray($)){const G=g?$.length-1:0;$=$[G]}$!==null&&(s[j]=$)}for(const j in N)s[j]=N[j]}}}return s}const cn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vt=new Set(cn),Yu=t=>e=>typeof e=="string"&&e.startsWith(t),Xu=Yu("--"),Rh=Yu("var(--"),As=t=>Rh(t)?jh.test(t.split("/*")[0].trim()):!1,jh=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ju=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ut=(t,e,n)=>n>e?e:n<t?t:n,fn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Fn={...fn,transform:t=>ut(0,1,t)},Cr={...fn,default:1},qn=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),gt=qn("deg"),et=qn("%"),re=qn("px"),_h=qn("vh"),Lh=qn("vw"),aa={...et,parse:t=>et.parse(t)/100,transform:t=>et.transform(t*100)},Nh={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},Mh={rotate:gt,rotateX:gt,rotateY:gt,rotateZ:gt,scale:Cr,scaleX:Cr,scaleY:Cr,scaleZ:Cr,skew:gt,skewX:gt,skewY:gt,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:Fn,originX:aa,originY:aa,originZ:re},ua={...fn,transform:Math.round},Es={...Nh,...Mh,zIndex:ua,size:re,fillOpacity:Fn,strokeOpacity:Fn,numOctaves:ua},Vh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ih=cn.length;function Fh(t,e,n){let r="",s=!0;for(let a=0;a<Ih;a++){const u=cn[a],f=t[u];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(u.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||n){const p=Ju(f,Es[u]);if(!d){s=!1;const g=Vh[u]||u;r+=`${g}(${p}) `}n&&(e[u]=p)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Ds(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let u=!1,f=!1;for(const d in e){const p=e[d];if(Vt.has(d)){u=!0;continue}else if(Xu(d)){s[d]=p;continue}else{const g=Ju(p,Es[d]);d.startsWith("origin")?(f=!0,a[d]=g):r[d]=g}}if(e.transform||(u||n?r.transform=Fh(e,t.transform,n):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:p="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${p} ${g}`}}const Bh={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kh={offset:"strokeDashoffset",array:"strokeDasharray"};function $h(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?Bh:Kh;t[a.offset]=re.transform(-r);const u=re.transform(e),f=re.transform(n);t[a.array]=`${u} ${f}`}function la(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function Uh(t,e,n){const r=la(e,t.x,t.width),s=la(n,t.y,t.height);return`${r} ${s}`}function Os(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:a,pathLength:u,pathSpacing:f=1,pathOffset:d=0,...p},g,v){if(Ds(t,p,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:T,dimensions:L}=t;y.transform&&(L&&(T.transform=y.transform),delete y.transform),L&&(s!==void 0||a!==void 0||T.transform)&&(T.transformOrigin=Uh(L,s!==void 0?s:.5,a!==void 0?a:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),u!==void 0&&$h(y,u,f,d,!1)}const Rs=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Qu=()=>({...Rs(),attrs:{}}),js=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Zu(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const el=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tl(t,e,n,r){Zu(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(el.has(s)?s:Ps(s),e.attrs[s])}const Nr={};function qh(t){Object.assign(Nr,t)}function nl(t,{layout:e,layoutId:n}){return Vt.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Nr[t]||t==="opacity")}function _s(t,e,n){var r;const{style:s}=t,a={};for(const u in s)(Ne(s[u])||e.style&&Ne(e.style[u])||nl(u,t)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[u]=s[u]);return a}function rl(t,e,n){const r=_s(t,e,n);for(const s in t)if(Ne(t[s])||Ne(e[s])){const a=cn.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}function zh(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const ca=["x","y","width","height","cx","cy","r"],Hh={useVisualState:Gu({scrapeMotionValuesFromProps:rl,createRenderState:Qu,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let a=!!t.drag;if(!a){for(const f in s)if(Vt.has(f)){a=!0;break}}if(!a)return;let u=!e;if(e)for(let f=0;f<ca.length;f++){const d=ca[f];t[d]!==e[d]&&(u=!0)}u&&me.read(()=>{zh(n,r),me.render(()=>{Os(r,s,js(n.tagName),t.transformTemplate),tl(n,r)})})}})},Wh={useVisualState:Gu({scrapeMotionValuesFromProps:_s,createRenderState:Rs})};function il(t,e,n){for(const r in e)!Ne(e[r])&&!nl(r,n)&&(t[r]=e[r])}function Gh({transformTemplate:t},e){return J.useMemo(()=>{const n=Rs();return Ds(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Yh(t,e){const n=t.style||{},r={};return il(r,n,t),Object.assign(r,Gh(t,e)),r}function Xh(t,e){const n={},r=Yh(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Jh(t,e,n,r){const s=J.useMemo(()=>{const a=Qu();return Os(a,e,js(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};il(a,t.style,t),s.style={...a,...s.style}}return s}function Qh(t=!1){return(n,r,s,{latestValues:a},u)=>{const d=(Ts(n)?Jh:Xh)(r,a,u,n),p=hh(r,typeof n=="string",t),g=n!==J.Fragment?{...p,...d,ref:s}:{},{children:v}=r,y=J.useMemo(()=>Ne(v)?v.get():v,[v]);return J.createElement(n,{...g,children:y})}}function Zh(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const u={...Ts(r)?Hh:Wh,preloadedFeatures:t,useRender:Qh(s),createVisualElement:e,Component:r};return Sh(u)}}function sl(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Wr(t,e,n){const r=t.getProps();return ks(r,e,n!==void 0?n:r.custom,t)}const ep=xs(()=>window.ScrollTimeline!==void 0);class tp{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(ep()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class np extends tp{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Ls(t,e){return t?t[e]||t.default||t:void 0}const es=2e4;function ol(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<es;)e+=n,r=t.next(e);return e>=es?1/0:e}function Ns(t){return typeof t=="function"}function fa(t,e){t.timeline=e,t.onfinish=null}const Ms=t=>Array.isArray(t)&&typeof t[0]=="number",rp={linearEasing:void 0};function ip(t,e){const n=xs(t);return()=>{var r;return(r=rp[e])!==null&&r!==void 0?r:n()}}const Mr=ip(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),al=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=t(an(0,s-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function ul(t){return!!(typeof t=="function"&&Mr()||!t||typeof t=="string"&&(t in ts||Mr())||Ms(t)||Array.isArray(t)&&t.every(ul))}const En=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ts={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:En([0,.65,.55,1]),circOut:En([.55,0,1,.45]),backIn:En([.31,.01,.66,-.59]),backOut:En([.33,1.53,.69,.99])};function ll(t,e){if(t)return typeof t=="function"&&Mr()?al(t,e):Ms(t)?En(t):Array.isArray(t)?t.map(n=>ll(n,e)||ts.easeOut):ts[t]}const We={x:!1,y:!1};function cl(){return We.x||We.y}function sp(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const a=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function fl(t,e){const n=sp(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function da(t){return e=>{e.pointerType==="touch"||cl()||t(e)}}function op(t,e,n={}){const[r,s,a]=fl(t,n),u=da(f=>{const{target:d}=f,p=e(f);if(typeof p!="function"||!d)return;const g=da(v=>{p(v),d.removeEventListener("pointerleave",g)});d.addEventListener("pointerleave",g,s)});return r.forEach(f=>{f.addEventListener("pointerenter",u,s)}),a}const dl=(t,e)=>e?t===e?!0:dl(t,e.parentElement):!1,Vs=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ap=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function up(t){return ap.has(t.tagName)||t.tabIndex!==-1}const Dn=new WeakSet;function ha(t){return e=>{e.key==="Enter"&&t(e)}}function Ni(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const lp=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=ha(()=>{if(Dn.has(n))return;Ni(n,"down");const s=ha(()=>{Ni(n,"up")}),a=()=>Ni(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function pa(t){return Vs(t)&&!cl()}function cp(t,e,n={}){const[r,s,a]=fl(t,n),u=f=>{const d=f.currentTarget;if(!pa(f)||Dn.has(d))return;Dn.add(d);const p=e(f),g=(T,L)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),!(!pa(T)||!Dn.has(d))&&(Dn.delete(d),typeof p=="function"&&p(T,{success:L}))},v=T=>{g(T,n.useGlobalTarget||dl(d,T.target))},y=T=>{g(T,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",y,s)};return r.forEach(f=>{!up(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(n.useGlobalTarget?window:f).addEventListener("pointerdown",u,s),f.addEventListener("focus",p=>lp(p,s),s)}),a}function fp(t){return t==="x"||t==="y"?We[t]?null:(We[t]=!0,()=>{We[t]=!1}):We.x||We.y?null:(We.x=We.y=!0,()=>{We.x=We.y=!1})}const hl=new Set(["width","height","top","left","right","bottom",...cn]);let Ar;function dp(){Ar=void 0}const tt={now:()=>(Ar===void 0&&tt.set(De.isProcessing||ah.useManualTiming?De.timestamp:performance.now()),Ar),set:t=>{Ar=t,queueMicrotask(dp)}};function Is(t,e){t.indexOf(e)===-1&&t.push(e)}function Fs(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bs{constructor(){this.subscriptions=[]}add(e){return Is(this.subscriptions,e),()=>Fs(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const u=this.subscriptions[a];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function pl(t,e){return e?t*(1e3/e):0}const ma=30,hp=t=>!isNaN(parseFloat(t));class pp{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=tt.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=tt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hp(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Bs);const r=this.events[e].add(n);return e==="change"?()=>{r(),me.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=tt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ma)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ma);return pl(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bn(t,e){return new pp(t,e)}function mp(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bn(n))}function gp(t,e){const n=Wr(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const u in a){const f=Eh(a[u]);mp(t,u,f)}}function yp(t){return!!(Ne(t)&&t.add)}function ns(t,e){const n=t.getValue("willChange");if(yp(n))return n.add(e)}function ml(t){return t.props[zu]}const gl=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,vp=1e-7,bp=12;function xp(t,e,n,r,s){let a,u,f=0;do u=e+(n-e)/2,a=gl(u,r,s)-t,a>0?n=u:e=u;while(Math.abs(a)>vp&&++f<bp);return u}function zn(t,e,n,r){if(t===e&&n===r)return Be;const s=a=>xp(a,0,1,t,n);return a=>a===0||a===1?a:gl(s(a),e,r)}const yl=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vl=t=>e=>1-t(1-e),bl=zn(.33,1.53,.69,.99),Ks=vl(bl),xl=yl(Ks),wl=t=>(t*=2)<1?.5*Ks(t):.5*(2-Math.pow(2,-10*(t-1))),$s=t=>1-Math.sin(Math.acos(t)),Sl=vl($s),Pl=yl($s),Cl=t=>/^0[^.\s]+$/u.test(t);function wp(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Cl(t):!0}const jn=t=>Math.round(t*1e5)/1e5,Us=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Sp(t){return t==null}const Pp=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qs=(t,e)=>n=>!!(typeof n=="string"&&Pp.test(n)&&n.startsWith(t)||e&&!Sp(n)&&Object.prototype.hasOwnProperty.call(n,e)),Tl=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,u,f]=r.match(Us);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(u),alpha:f!==void 0?parseFloat(f):1}},Cp=t=>ut(0,255,t),Mi={...fn,transform:t=>Math.round(Cp(t))},Lt={test:qs("rgb","red"),parse:Tl("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Mi.transform(t)+", "+Mi.transform(e)+", "+Mi.transform(n)+", "+jn(Fn.transform(r))+")"};function Tp(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rs={test:qs("#"),parse:Tp,transform:Lt.transform},tn={test:qs("hsl","hue"),parse:Tl("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+et.transform(jn(e))+", "+et.transform(jn(n))+", "+jn(Fn.transform(r))+")"},Le={test:t=>Lt.test(t)||rs.test(t)||tn.test(t),parse:t=>Lt.test(t)?Lt.parse(t):tn.test(t)?tn.parse(t):rs.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Lt.transform(t):tn.transform(t)},kp=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ap(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Us))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(kp))===null||n===void 0?void 0:n.length)||0)>0}const kl="number",Al="color",Ep="var",Dp="var(",ga="${}",Op=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kn(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const f=e.replace(Op,d=>(Le.test(d)?(r.color.push(a),s.push(Al),n.push(Le.parse(d))):d.startsWith(Dp)?(r.var.push(a),s.push(Ep),n.push(d)):(r.number.push(a),s.push(kl),n.push(parseFloat(d))),++a,ga)).split(ga);return{values:n,split:f,indexes:r,types:s}}function El(t){return Kn(t).values}function Dl(t){const{split:e,types:n}=Kn(t),r=e.length;return s=>{let a="";for(let u=0;u<r;u++)if(a+=e[u],s[u]!==void 0){const f=n[u];f===kl?a+=jn(s[u]):f===Al?a+=Le.transform(s[u]):a+=s[u]}return a}}const Rp=t=>typeof t=="number"?0:t;function jp(t){const e=El(t);return Dl(t)(e.map(Rp))}const vt={test:Ap,parse:El,createTransformer:Dl,getAnimatableNone:jp},_p=new Set(["brightness","contrast","saturate","opacity"]);function Lp(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Us)||[];if(!r)return t;const s=n.replace(r,"");let a=_p.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const Np=/\b([a-z-]*)\(.*?\)/gu,is={...vt,getAnimatableNone:t=>{const e=t.match(Np);return e?e.map(Lp).join(" "):t}},Mp={...Es,color:Le,backgroundColor:Le,outlineColor:Le,fill:Le,stroke:Le,borderColor:Le,borderTopColor:Le,borderRightColor:Le,borderBottomColor:Le,borderLeftColor:Le,filter:is,WebkitFilter:is},zs=t=>Mp[t];function Ol(t,e){let n=zs(t);return n!==is&&(n=vt),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Vp=new Set(["auto","none","0"]);function Ip(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!Vp.has(a)&&Kn(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=Ol(n,s)}const ya=t=>t===fn||t===re,va=(t,e)=>parseFloat(t.split(", ")[e]),ba=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return va(s[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?va(a[1],t):0}},Fp=new Set(["x","y","z"]),Bp=cn.filter(t=>!Fp.has(t));function Kp(t){const e=[];return Bp.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ln={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ba(4,13),y:ba(5,14)};ln.translateX=ln.x;ln.translateY=ln.y;const Mt=new Set;let ss=!1,os=!1;function Rl(){if(os){const t=Array.from(Mt).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=Kp(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,u])=>{var f;(f=r.getValue(a))===null||f===void 0||f.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}os=!1,ss=!1,Mt.forEach(t=>t.complete()),Mt.clear()}function jl(){Mt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(os=!0)})}function $p(){jl(),Rl()}class Hs{constructor(e,n,r,s,a,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mt.add(this),ss||(ss=!0,me.read(jl),me.resolveKeyframes(Rl))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const u=s==null?void 0:s.get(),f=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const d=r.readValue(n,f);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=f),s&&u===void 0&&s.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const _l=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Up=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function qp(t){const e=Up.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Ll(t,e,n=1){const[r,s]=qp(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const u=a.trim();return _l(u)?parseFloat(u):u}return As(s)?Ll(s,e,n+1):s}const Nl=t=>e=>e.test(t),zp={test:t=>t==="auto",parse:t=>t},Ml=[fn,re,et,gt,Lh,_h,zp],xa=t=>Ml.find(Nl(t));class Vl extends Hs{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),As(p))){const g=Ll(p,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!hl.has(r)||e.length!==2)return;const[s,a]=e,u=xa(s),f=xa(a);if(u!==f)if(ya(u)&&ya(f))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)wp(e[s])&&r.push(s);r.length&&Ip(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ln[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const u=s.length-1,f=s[u];s[u]=ln[r](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,p])=>{n.getValue(d).set(p)}),this.resolveNoneKeyframes()}}const wa=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vt.test(t)||t==="0")&&!t.startsWith("url("));function Hp(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Wp(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],u=wa(s,e),f=wa(a,e);return!u||!f?!1:Hp(t)||(n==="spring"||Ns(n))&&r}const Gp=t=>t!==null;function Gr(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(Gp),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Yp=40;class Il{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=tt.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:u,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Yp?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$p(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=tt.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:u,onComplete:f,onUpdate:d,isGenerator:p}=this.options;if(!p&&!Wp(e,r,s,a))if(u)this.options.duration=0;else{d&&d(Gr(e,this.options,n)),f&&f(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ye=(t,e,n)=>t+(e-t)*n;function Vi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Xp({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,u=0;if(!e)s=a=u=n;else{const f=n<.5?n*(1+e):n+e-n*e,d=2*n-f;s=Vi(d,f,t+1/3),a=Vi(d,f,t),u=Vi(d,f,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function Vr(t,e){return n=>n>0?e:t}const Ii=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Jp=[rs,Lt,tn],Qp=t=>Jp.find(e=>e.test(t));function Sa(t){const e=Qp(t);if(!e)return!1;let n=e.parse(t);return e===tn&&(n=Xp(n)),n}const Pa=(t,e)=>{const n=Sa(t),r=Sa(e);if(!n||!r)return Vr(t,e);const s={...n};return a=>(s.red=Ii(n.red,r.red,a),s.green=Ii(n.green,r.green,a),s.blue=Ii(n.blue,r.blue,a),s.alpha=ye(n.alpha,r.alpha,a),Lt.transform(s))},Zp=(t,e)=>n=>e(t(n)),Hn=(...t)=>t.reduce(Zp),as=new Set(["none","hidden"]);function em(t,e){return as.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function tm(t,e){return n=>ye(t,e,n)}function Ws(t){return typeof t=="number"?tm:typeof t=="string"?As(t)?Vr:Le.test(t)?Pa:im:Array.isArray(t)?Fl:typeof t=="object"?Le.test(t)?Pa:nm:Vr}function Fl(t,e){const n=[...t],r=n.length,s=t.map((a,u)=>Ws(a)(a,e[u]));return a=>{for(let u=0;u<r;u++)n[u]=s[u](a);return n}}function nm(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Ws(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function rm(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const u=e.types[a],f=t.indexes[u][s[u]],d=(n=t.values[f])!==null&&n!==void 0?n:0;r[a]=d,s[u]++}return r}const im=(t,e)=>{const n=vt.createTransformer(e),r=Kn(t),s=Kn(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?as.has(t)&&!s.values.length||as.has(e)&&!r.values.length?em(t,e):Hn(Fl(rm(r,s),s.values),n):Vr(t,e)};function Bl(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ye(t,e,n):Ws(t)(t,e)}const sm=5;function Kl(t,e,n){const r=Math.max(e-sm,0);return pl(n-t(r),e-r)}const ve={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fi=.001;function om({duration:t=ve.duration,bounce:e=ve.bounce,velocity:n=ve.velocity,mass:r=ve.mass}){let s,a,u=1-e;u=ut(ve.minDamping,ve.maxDamping,u),t=ut(ve.minDuration,ve.maxDuration,at(t)),u<1?(s=p=>{const g=p*u,v=g*t,y=g-n,T=us(p,u),L=Math.exp(-v);return Fi-y/T*L},a=p=>{const v=p*u*t,y=v*n+n,T=Math.pow(u,2)*Math.pow(p,2)*t,L=Math.exp(-v),N=us(Math.pow(p,2),u);return(-s(p)+Fi>0?-1:1)*((y-T)*L)/N}):(s=p=>{const g=Math.exp(-p*t),v=(p-n)*t+1;return-Fi+g*v},a=p=>{const g=Math.exp(-p*t),v=(n-p)*(t*t);return g*v});const f=5/t,d=um(s,a,f);if(t=ot(t),isNaN(d))return{stiffness:ve.stiffness,damping:ve.damping,duration:t};{const p=Math.pow(d,2)*r;return{stiffness:p,damping:u*2*Math.sqrt(r*p),duration:t}}}const am=12;function um(t,e,n){let r=n;for(let s=1;s<am;s++)r=r-t(r)/e(r);return r}function us(t,e){return t*Math.sqrt(1-e*e)}const lm=["duration","bounce"],cm=["stiffness","damping","mass"];function Ca(t,e){return e.some(n=>t[n]!==void 0)}function fm(t){let e={velocity:ve.velocity,stiffness:ve.stiffness,damping:ve.damping,mass:ve.mass,isResolvedFromDuration:!1,...t};if(!Ca(t,cm)&&Ca(t,lm))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*ut(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ve.mass,stiffness:s,damping:a}}else{const n=om(t);e={...e,...n,mass:ve.mass},e.isResolvedFromDuration=!0}return e}function $l(t=ve.visualDuration,e=ve.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],f={done:!1,value:a},{stiffness:d,damping:p,mass:g,duration:v,velocity:y,isResolvedFromDuration:T}=fm({...n,velocity:-at(n.velocity||0)}),L=y||0,N=p/(2*Math.sqrt(d*g)),M=u-a,B=at(Math.sqrt(d/g)),j=Math.abs(M)<5;r||(r=j?ve.restSpeed.granular:ve.restSpeed.default),s||(s=j?ve.restDelta.granular:ve.restDelta.default);let $;if(N<1){const q=us(B,N);$=Z=>{const ee=Math.exp(-N*B*Z);return u-ee*((L+N*B*M)/q*Math.sin(q*Z)+M*Math.cos(q*Z))}}else if(N===1)$=q=>u-Math.exp(-B*q)*(M+(L+B*M)*q);else{const q=B*Math.sqrt(N*N-1);$=Z=>{const ee=Math.exp(-N*B*Z),ie=Math.min(q*Z,300);return u-ee*((L+N*B*M)*Math.sinh(ie)+q*M*Math.cosh(ie))/q}}const G={calculatedDuration:T&&v||null,next:q=>{const Z=$(q);if(T)f.done=q>=v;else{let ee=0;N<1&&(ee=q===0?ot(L):Kl($,q,Z));const ie=Math.abs(ee)<=r,Ce=Math.abs(u-Z)<=s;f.done=ie&&Ce}return f.value=f.done?u:Z,f},toString:()=>{const q=Math.min(ol(G),es),Z=al(ee=>G.next(q*ee).value,q,30);return q+"ms "+Z}};return G}function Ta({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:u,min:f,max:d,restDelta:p=.5,restSpeed:g}){const v=t[0],y={done:!1,value:v},T=ie=>f!==void 0&&ie<f||d!==void 0&&ie>d,L=ie=>f===void 0?d:d===void 0||Math.abs(f-ie)<Math.abs(d-ie)?f:d;let N=n*e;const M=v+N,B=u===void 0?M:u(M);B!==M&&(N=B-v);const j=ie=>-N*Math.exp(-ie/r),$=ie=>B+j(ie),G=ie=>{const Ce=j(ie),Te=$(ie);y.done=Math.abs(Ce)<=p,y.value=y.done?B:Te};let q,Z;const ee=ie=>{T(y.value)&&(q=ie,Z=$l({keyframes:[y.value,L(y.value)],velocity:Kl($,ie,y.value),damping:s,stiffness:a,restDelta:p,restSpeed:g}))};return ee(0),{calculatedDuration:null,next:ie=>{let Ce=!1;return!Z&&q===void 0&&(Ce=!0,G(ie),ee(ie)),q!==void 0&&ie>=q?Z.next(ie-q):(!Ce&&G(ie),y)}}}const dm=zn(.42,0,1,1),hm=zn(0,0,.58,1),Ul=zn(.42,0,.58,1),pm=t=>Array.isArray(t)&&typeof t[0]!="number",mm={linear:Be,easeIn:dm,easeInOut:Ul,easeOut:hm,circIn:$s,circInOut:Pl,circOut:Sl,backIn:Ks,backInOut:xl,backOut:bl,anticipate:wl},ka=t=>{if(Ms(t)){Bu(t.length===4);const[e,n,r,s]=t;return zn(e,n,r,s)}else if(typeof t=="string")return mm[t];return t};function gm(t,e,n){const r=[],s=n||Bl,a=t.length-1;for(let u=0;u<a;u++){let f=s(t[u],t[u+1]);if(e){const d=Array.isArray(e)?e[u]||Be:e;f=Hn(d,f)}r.push(f)}return r}function ym(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(Bu(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=gm(e,r,s),d=f.length,p=g=>{if(u&&g<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const y=an(t[v],t[v+1],g);return f[v](y)};return n?g=>p(ut(t[0],t[a-1],g)):p}function vm(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=an(0,e,r);t.push(ye(n,1,s))}}function bm(t){const e=[0];return vm(e,t.length-1),e}function xm(t,e){return t.map(n=>n*e)}function wm(t,e){return t.map(()=>e||Ul).splice(0,t.length-1)}function Ir({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=pm(r)?r.map(ka):ka(r),a={done:!1,value:e[0]},u=xm(n&&n.length===e.length?n:bm(e),t),f=ym(u,e,{ease:Array.isArray(s)?s:wm(e,s)});return{calculatedDuration:t,next:d=>(a.value=f(d),a.done=d>=t,a)}}const Sm=t=>{const e=({timestamp:n})=>t(n);return{start:()=>me.update(e,!0),stop:()=>yt(e),now:()=>De.isProcessing?De.timestamp:tt.now()}},Pm={decay:Ta,inertia:Ta,tween:Ir,keyframes:Ir,spring:$l},Cm=t=>t/100;class Gs extends Il{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,u=(s==null?void 0:s.KeyframeResolver)||Hs,f=(d,p)=>this.onKeyframesResolved(d,p);this.resolver=new u(a,f,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:u=0}=this.options,f=Ns(n)?n:Pm[n]||Ir;let d,p;f!==Ir&&typeof e[0]!="number"&&(d=Hn(Cm,Bl(e[0],e[1])),e=[0,100]);const g=f({...this.options,keyframes:e});a==="mirror"&&(p=f({...this.options,keyframes:[...e].reverse(),velocity:-u})),g.calculatedDuration===null&&(g.calculatedDuration=ol(g));const{calculatedDuration:v}=g,y=v+s,T=y*(r+1)-s;return{generator:g,mirroredGenerator:p,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:y,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:ie}=this.options;return{done:!0,value:ie[ie.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:u,mapPercentToKeyframes:f,keyframes:d,calculatedDuration:p,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return a.next(0);const{delay:y,repeat:T,repeatType:L,repeatDelay:N,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const B=this.currentTime-y*(this.speed>=0?1:-1),j=this.speed>=0?B<0:B>g;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let $=this.currentTime,G=a;if(T){const ie=Math.min(this.currentTime,g)/v;let Ce=Math.floor(ie),Te=ie%1;!Te&&ie>=1&&(Te=1),Te===1&&Ce--,Ce=Math.min(Ce,T+1),!!(Ce%2)&&(L==="reverse"?(Te=1-Te,N&&(Te-=N/v)):L==="mirror"&&(G=u)),$=ut(0,1,Te)*v}const q=j?{done:!1,value:d[0]}:G.next($);f&&(q.value=f(q.value));let{done:Z}=q;!j&&p!==null&&(Z=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const ee=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return ee&&s!==void 0&&(q.value=Gr(d,this.options,s)),M&&M(q.value),ee&&this.finish(),q}get duration(){const{resolved:e}=this;return e?at(e.calculatedDuration):0}get time(){return at(this.currentTime)}set time(e){e=ot(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=at(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Sm,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Tm=new Set(["opacity","clipPath","filter","transform"]);function km(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:u="loop",ease:f="easeInOut",times:d}={}){const p={[e]:n};d&&(p.offset=d);const g=ll(f,s);return Array.isArray(g)&&(p.easing=g),t.animate(p,{delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}const Am=xs(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Fr=10,Em=2e4;function Dm(t){return Ns(t.type)||t.type==="spring"||!ul(t.ease)}function Om(t,e){const n=new Gs({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let a=0;for(;!r.done&&a<Em;)r=n.sample(a),s.push(r.value),a+=Fr;return{times:void 0,keyframes:s,duration:a-Fr,ease:"linear"}}const ql={anticipate:wl,backInOut:xl,circInOut:Pl};function Rm(t){return t in ql}class Aa extends Il{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new Vl(a,(u,f)=>this.onKeyframesResolved(u,f),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:a,type:u,motionValue:f,name:d,startTime:p}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof a=="string"&&Mr()&&Rm(a)&&(a=ql[a]),Dm(this.options)){const{onComplete:v,onUpdate:y,motionValue:T,element:L,...N}=this.options,M=Om(e,N);e=M.keyframes,e.length===1&&(e[1]=e[0]),r=M.duration,s=M.times,a=M.ease,u="keyframes"}const g=km(f.owner.current,d,e,{...this.options,duration:r,times:s,ease:a});return g.startTime=p??this.calcStartTime(),this.pendingTimeline?(fa(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;f.set(Gr(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:u,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return at(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return at(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ot(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Be;const{animation:r}=n;fa(r,e)}return Be}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:a,ease:u,times:f}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:g,onComplete:v,element:y,...T}=this.options,L=new Gs({...T,keyframes:r,duration:s,type:a,ease:u,times:f,isGenerator:!0}),N=ot(this.time);p.setWithVelocity(L.sample(N-Fr).value,L.sample(N).value,Fr)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:u,type:f}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=n.owner.getProps();return Am()&&r&&Tm.has(r)&&!d&&!p&&!s&&a!=="mirror"&&u!==0&&f!=="inertia"}}const jm={type:"spring",stiffness:500,damping:25,restSpeed:10},_m=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Lm={type:"keyframes",duration:.8},Nm={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mm=(t,{keyframes:e})=>e.length>2?Lm:Vt.has(t)?t.startsWith("scale")?_m(e[1]):jm:Nm;function Vm({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:u,repeatDelay:f,from:d,elapsed:p,...g}){return!!Object.keys(g).length}const Ys=(t,e,n,r={},s,a)=>u=>{const f=Ls(r,t)||{},d=f.delay||r.delay||0;let{elapsed:p=0}=r;p=p-ot(d);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-p,onUpdate:y=>{e.set(y),f.onUpdate&&f.onUpdate(y)},onComplete:()=>{u(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:a?void 0:s};Vm(f)||(g={...g,...Mm(t,g)}),g.duration&&(g.duration=ot(g.duration)),g.repeatDelay&&(g.repeatDelay=ot(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),v&&!a&&e.get()!==void 0){const y=Gr(g.keyframes,f);if(y!==void 0)return me.update(()=>{g.onUpdate(y),g.onComplete()}),new np([])}return!a&&Aa.supports(g)?new Aa(g):new Gs(g)};function Im({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function zl(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var a;let{transition:u=t.getDefaultTransition(),transitionEnd:f,...d}=e;r&&(u=r);const p=[],g=s&&t.animationState&&t.animationState.getState()[s];for(const v in d){const y=t.getValue(v,(a=t.latestValues[v])!==null&&a!==void 0?a:null),T=d[v];if(T===void 0||g&&Im(g,v))continue;const L={delay:n,...Ls(u||{},v)};let N=!1;if(window.MotionHandoffAnimation){const B=ml(t);if(B){const j=window.MotionHandoffAnimation(B,v,me);j!==null&&(L.startTime=j,N=!0)}}ns(t,v),y.start(Ys(v,y,T,t.shouldReduceMotion&&hl.has(v)?{type:!1}:L,t,N));const M=y.animation;M&&p.push(M)}return f&&Promise.all(p).then(()=>{me.update(()=>{f&&gp(t,f)})}),p}function ls(t,e,n={}){var r;const s=Wr(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const u=s?()=>Promise.all(zl(t,s,n)):()=>Promise.resolve(),f=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:y}=a;return Fm(t,e,g+p,v,y,n)}:()=>Promise.resolve(),{when:d}=a;if(d){const[p,g]=d==="beforeChildren"?[u,f]:[f,u];return p().then(()=>g())}else return Promise.all([u(),f(n.delay)])}function Fm(t,e,n=0,r=0,s=1,a){const u=[],f=(t.variantChildren.size-1)*r,d=s===1?(p=0)=>p*r:(p=0)=>f-p*r;return Array.from(t.variantChildren).sort(Bm).forEach((p,g)=>{p.notify("AnimationStart",e),u.push(ls(p,e,{...a,delay:n+d(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(u)}function Bm(t,e){return t.sortNodePosition(e)}function Km(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>ls(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=ls(t,e,n);else{const s=typeof e=="function"?Wr(t,e,n.custom):e;r=Promise.all(zl(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const $m=Ss.length;function Hl(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Hl(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<$m;n++){const r=Ss[n],s=t.props[r];(In(s)||s===!1)&&(e[r]=s)}return e}const Um=[...ws].reverse(),qm=ws.length;function zm(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Km(t,n,r)))}function Hm(t){let e=zm(t),n=Ea(),r=!0;const s=d=>(p,g)=>{var v;const y=Wr(t,g,d==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(y){const{transition:T,transitionEnd:L,...N}=y;p={...p,...N,...L}}return p};function a(d){e=d(t)}function u(d){const{props:p}=t,g=Hl(t.parent)||{},v=[],y=new Set;let T={},L=1/0;for(let M=0;M<qm;M++){const B=Um[M],j=n[B],$=p[B]!==void 0?p[B]:g[B],G=In($),q=B===d?j.isActive:null;q===!1&&(L=M);let Z=$===g[B]&&$!==p[B]&&G;if(Z&&r&&t.manuallyAnimateOnMount&&(Z=!1),j.protectedKeys={...T},!j.isActive&&q===null||!$&&!j.prevProp||zr($)||typeof $=="boolean")continue;const ee=Wm(j.prevProp,$);let ie=ee||B===d&&j.isActive&&!Z&&G||M>L&&G,Ce=!1;const Te=Array.isArray($)?$:[$];let Me=Te.reduce(s(B),{});q===!1&&(Me={});const{prevResolvedValues:nt={}}=j,He={...nt,...Me},Ge=Se=>{ie=!0,y.has(Se)&&(Ce=!0,y.delete(Se)),j.needsAnimating[Se]=!0;const de=t.getValue(Se);de&&(de.liveStyle=!1)};for(const Se in He){const de=Me[Se],ke=nt[Se];if(T.hasOwnProperty(Se))continue;let Pe=!1;Zi(de)&&Zi(ke)?Pe=!sl(de,ke):Pe=de!==ke,Pe?de!=null?Ge(Se):y.add(Se):de!==void 0&&y.has(Se)?Ge(Se):j.protectedKeys[Se]=!0}j.prevProp=$,j.prevResolvedValues=Me,j.isActive&&(T={...T,...Me}),r&&t.blockInitialAnimation&&(ie=!1),ie&&(!(Z&&ee)||Ce)&&v.push(...Te.map(Se=>({animation:Se,options:{type:B}})))}if(y.size){const M={};y.forEach(B=>{const j=t.getBaseTarget(B),$=t.getValue(B);$&&($.liveStyle=!0),M[B]=j??null}),v.push({animation:M})}let N=!!v.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(v):Promise.resolve()}function f(d,p){var g;if(n[d].isActive===p)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(y=>{var T;return(T=y.animationState)===null||T===void 0?void 0:T.setActive(d,p)}),n[d].isActive=p;const v=u(d);for(const y in n)n[y].protectedKeys={};return v}return{animateChanges:u,setActive:f,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Ea(),r=!0}}}function Wm(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!sl(e,t):!1}function Rt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ea(){return{animate:Rt(!0),whileInView:Rt(),whileHover:Rt(),whileTap:Rt(),whileDrag:Rt(),whileFocus:Rt(),exit:Rt()}}class bt{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Gm extends bt{constructor(e){super(e),e.animationState||(e.animationState=Hm(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zr(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Ym=0;class Xm extends bt{constructor(){super(...arguments),this.id=Ym++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Jm={animation:{Feature:Gm},exit:{Feature:Xm}};function $n(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Wn(t){return{point:{x:t.pageX,y:t.pageY}}}const Qm=t=>e=>Vs(e)&&t(e,Wn(e));function _n(t,e,n,r){return $n(t,e,Qm(n),r)}const Da=(t,e)=>Math.abs(t-e);function Zm(t,e){const n=Da(t.x,e.x),r=Da(t.y,e.y);return Math.sqrt(n**2+r**2)}class Wl{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Ki(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,T=Zm(v.offset,{x:0,y:0})>=3;if(!y&&!T)return;const{point:L}=v,{timestamp:N}=De;this.history.push({...L,timestamp:N});const{onStart:M,onMove:B}=this.handlers;y||(M&&M(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Bi(y,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:T,onSessionEnd:L,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Ki(v.type==="pointercancel"?this.lastMoveEventInfo:Bi(y,this.transformPagePoint),this.history);this.startEvent&&T&&T(v,M),L&&L(v,M)},!Vs(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=Wn(e),f=Bi(u,this.transformPagePoint),{point:d}=f,{timestamp:p}=De;this.history=[{...d,timestamp:p}];const{onSessionStart:g}=n;g&&g(e,Ki(f,this.history)),this.removeListeners=Hn(_n(this.contextWindow,"pointermove",this.handlePointerMove),_n(this.contextWindow,"pointerup",this.handlePointerUp),_n(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yt(this.updatePoint)}}function Bi(t,e){return e?{point:e(t.point)}:t}function Oa(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ki({point:t},e){return{point:t,delta:Oa(t,Gl(e)),offset:Oa(t,eg(e)),velocity:tg(e,.1)}}function eg(t){return t[0]}function Gl(t){return t[t.length-1]}function tg(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Gl(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ot(e)));)n--;if(!r)return{x:0,y:0};const a=at(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const Yl=1e-4,ng=1-Yl,rg=1+Yl,Xl=.01,ig=0-Xl,sg=0+Xl;function Ke(t){return t.max-t.min}function og(t,e,n){return Math.abs(t-e)<=n}function Ra(t,e,n,r=.5){t.origin=r,t.originPoint=ye(e.min,e.max,t.origin),t.scale=Ke(n)/Ke(e),t.translate=ye(n.min,n.max,t.origin)-t.originPoint,(t.scale>=ng&&t.scale<=rg||isNaN(t.scale))&&(t.scale=1),(t.translate>=ig&&t.translate<=sg||isNaN(t.translate))&&(t.translate=0)}function Ln(t,e,n,r){Ra(t.x,e.x,n.x,r?r.originX:void 0),Ra(t.y,e.y,n.y,r?r.originY:void 0)}function ja(t,e,n){t.min=n.min+e.min,t.max=t.min+Ke(e)}function ag(t,e,n){ja(t.x,e.x,n.x),ja(t.y,e.y,n.y)}function _a(t,e,n){t.min=e.min-n.min,t.max=t.min+Ke(e)}function Nn(t,e,n){_a(t.x,e.x,n.x),_a(t.y,e.y,n.y)}function ug(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ye(n,t,r.max):Math.min(t,n)),t}function La(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function lg(t,{top:e,left:n,bottom:r,right:s}){return{x:La(t.x,n,s),y:La(t.y,e,r)}}function Na(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function cg(t,e){return{x:Na(t.x,e.x),y:Na(t.y,e.y)}}function fg(t,e){let n=.5;const r=Ke(t),s=Ke(e);return s>r?n=an(e.min,e.max-r,t.min):r>s&&(n=an(t.min,t.max-s,e.min)),ut(0,1,n)}function dg(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const cs=.35;function hg(t=cs){return t===!1?t=0:t===!0&&(t=cs),{x:Ma(t,"left","right"),y:Ma(t,"top","bottom")}}function Ma(t,e,n){return{min:Va(t,e),max:Va(t,n)}}function Va(t,e){return typeof t=="number"?t:t[e]||0}const Ia=()=>({translate:0,scale:1,origin:0,originPoint:0}),nn=()=>({x:Ia(),y:Ia()}),Fa=()=>({min:0,max:0}),we=()=>({x:Fa(),y:Fa()});function qe(t){return[t("x"),t("y")]}function Jl({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function pg({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function mg(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function $i(t){return t===void 0||t===1}function fs({scale:t,scaleX:e,scaleY:n}){return!$i(t)||!$i(e)||!$i(n)}function jt(t){return fs(t)||Ql(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ql(t){return Ba(t.x)||Ba(t.y)}function Ba(t){return t&&t!=="0%"}function Br(t,e,n){const r=t-n,s=e*r;return n+s}function Ka(t,e,n,r,s){return s!==void 0&&(t=Br(t,s,r)),Br(t,n,r)+e}function ds(t,e=0,n=1,r,s){t.min=Ka(t.min,e,n,r,s),t.max=Ka(t.max,e,n,r,s)}function Zl(t,{x:e,y:n}){ds(t.x,e.translate,e.scale,e.originPoint),ds(t.y,n.translate,n.scale,n.originPoint)}const $a=.999999999999,Ua=1.0000000000001;function gg(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,u;for(let f=0;f<s;f++){a=n[f],u=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&sn(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,Zl(t,u)),r&&jt(a.latestValues)&&sn(t,a.latestValues))}e.x<Ua&&e.x>$a&&(e.x=1),e.y<Ua&&e.y>$a&&(e.y=1)}function rn(t,e){t.min=t.min+e,t.max=t.max+e}function qa(t,e,n,r,s=.5){const a=ye(t.min,t.max,s);ds(t,e,n,a,r)}function sn(t,e){qa(t.x,e.x,e.scaleX,e.scale,e.originX),qa(t.y,e.y,e.scaleY,e.scale,e.originY)}function ec(t,e){return Jl(mg(t.getBoundingClientRect(),e))}function yg(t,e,n){const r=ec(t,n),{scroll:s}=e;return s&&(rn(r.x,s.offset.x),rn(r.y,s.offset.y)),r}const tc=({current:t})=>t?t.ownerDocument.defaultView:null,vg=new WeakMap;class bg{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=we(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wn(g).point)},a=(g,v)=>{const{drag:y,dragPropagation:T,onDragStart:L}=this.getProps();if(y&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fp(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qe(M=>{let B=this.getAxisMotionValue(M).get()||0;if(et.test(B)){const{projection:j}=this.visualElement;if(j&&j.layout){const $=j.layout.layoutBox[M];$&&(B=Ke($)*(parseFloat(B)/100))}}this.originPoint[M]=B}),L&&me.postRender(()=>L(g,v)),ns(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},u=(g,v)=>{const{dragPropagation:y,dragDirectionLock:T,onDirectionLock:L,onDrag:N}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:M}=v;if(T&&this.currentDirection===null){this.currentDirection=xg(M),this.currentDirection!==null&&L&&L(this.currentDirection);return}this.updateAxis("x",v.point,M),this.updateAxis("y",v.point,M),this.visualElement.render(),N&&N(g,v)},f=(g,v)=>this.stop(g,v),d=()=>qe(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Wl(e,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:tc(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&me.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Tr(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=ug(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&en(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=lg(s.layoutBox,n):this.constraints=!1,this.elastic=hg(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&qe(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=dg(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!en(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=yg(r,s.root,this.visualElement.getTransformPagePoint());let u=cg(s.layout.layoutBox,a);if(n){const f=n(pg(u));this.hasMutatedConstraints=!!f,f&&(u=Jl(f))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},p=qe(g=>{if(!Tr(g,n,this.currentDirection))return;let v=d&&d[g]||{};u&&(v={min:0,max:0});const y=s?200:1e6,T=s?40:1e7,L={type:"inertia",velocity:r?e[g]:0,bounceStiffness:y,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(g,L)});return Promise.all(p).then(f)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ns(this.visualElement,e),r.start(Ys(e,r,0,n,this.visualElement,!1))}stopAnimation(){qe(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qe(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qe(n=>{const{drag:r}=this.getProps();if(!Tr(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:f}=s.layout.layoutBox[n];a.set(e[n]-ye(u,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!en(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};qe(u=>{const f=this.getAxisMotionValue(u);if(f&&this.constraints!==!1){const d=f.get();s[u]=fg({min:d,max:d},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qe(u=>{if(!Tr(u,e,null))return;const f=this.getAxisMotionValue(u),{min:d,max:p}=this.constraints[u];f.set(ye(d,p,s[u]))})}addListeners(){if(!this.visualElement.current)return;vg.set(this.visualElement,this);const e=this.visualElement.current,n=_n(e,"pointerdown",d=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();en(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),me.read(r);const u=$n(window,"resize",()=>this.scalePositionWithinConstraints()),f=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(qe(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())});return()=>{u(),n(),a(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:u=cs,dragMomentum:f=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:u,dragMomentum:f}}}function Tr(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function xg(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class wg extends bt{constructor(e){super(e),this.removeGroupControls=Be,this.removeListeners=Be,this.controls=new bg(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Be}unmount(){this.removeGroupControls(),this.removeListeners()}}const za=t=>(e,n)=>{t&&me.postRender(()=>t(e,n))};class Sg extends bt{constructor(){super(...arguments),this.removePointerDownListener=Be}onPointerDown(e){this.session=new Wl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tc(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:za(e),onStart:za(n),onMove:r,onEnd:(a,u)=>{delete this.session,s&&me.postRender(()=>s(a,u))}}}mount(){this.removePointerDownListener=_n(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Er={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ha(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const An={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=Ha(t,e.target.x),r=Ha(t,e.target.y);return`${n}% ${r}%`}},Pg={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=vt.parse(t);if(s.length>5)return r;const a=vt.createTransformer(t),u=typeof s[0]!="number"?1:0,f=n.x.scale*e.x,d=n.y.scale*e.y;s[0+u]/=f,s[1+u]/=d;const p=ye(f,d,.5);return typeof s[2+u]=="number"&&(s[2+u]/=p),typeof s[3+u]=="number"&&(s[3+u]/=p),a(s)}};class Cg extends J.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;qh(Tg),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Er.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,u=r.projection;return u&&(u.isPresent=a,s||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||me.postRender(()=>{const f=u.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Cs.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nc(t){const[e,n]=sh(),r=J.useContext(Iu);return V.jsx(Cg,{...t,layoutGroup:r,switchLayoutGroup:J.useContext(Hu),isPresent:e,safeToRemove:n})}const Tg={borderRadius:{...An,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:An,borderTopRightRadius:An,borderBottomLeftRadius:An,borderBottomRightRadius:An,boxShadow:Pg};function kg(t,e,n){const r=Ne(t)?t:Bn(t);return r.start(Ys("",r,e,n)),r.animation}function Ag(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Eg=(t,e)=>t.depth-e.depth;class Dg{constructor(){this.children=[],this.isDirty=!1}add(e){Is(this.children,e),this.isDirty=!0}remove(e){Fs(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Eg),this.isDirty=!1,this.children.forEach(e)}}function Og(t,e){const n=tt.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(yt(r),t(a-e))};return me.read(r,!0),()=>yt(r)}const rc=["TopLeft","TopRight","BottomLeft","BottomRight"],Rg=rc.length,Wa=t=>typeof t=="string"?parseFloat(t):t,Ga=t=>typeof t=="number"||re.test(t);function jg(t,e,n,r,s,a){s?(t.opacity=ye(0,n.opacity!==void 0?n.opacity:1,_g(r)),t.opacityExit=ye(e.opacity!==void 0?e.opacity:1,0,Lg(r))):a&&(t.opacity=ye(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<Rg;u++){const f=`border${rc[u]}Radius`;let d=Ya(e,f),p=Ya(n,f);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||Ga(d)===Ga(p)?(t[f]=Math.max(ye(Wa(d),Wa(p),r),0),(et.test(p)||et.test(d))&&(t[f]+="%")):t[f]=p}(e.rotate||n.rotate)&&(t.rotate=ye(e.rotate||0,n.rotate||0,r))}function Ya(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _g=ic(0,.5,Sl),Lg=ic(.5,.95,Be);function ic(t,e,n){return r=>r<t?0:r>e?1:n(an(t,e,r))}function Xa(t,e){t.min=e.min,t.max=e.max}function Ue(t,e){Xa(t.x,e.x),Xa(t.y,e.y)}function Ja(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Qa(t,e,n,r,s){return t-=e,t=Br(t,1/n,r),s!==void 0&&(t=Br(t,1/s,r)),t}function Ng(t,e=0,n=1,r=.5,s,a=t,u=t){if(et.test(e)&&(e=parseFloat(e),e=ye(u.min,u.max,e/100)-u.min),typeof e!="number")return;let f=ye(a.min,a.max,r);t===a&&(f-=e),t.min=Qa(t.min,e,n,f,s),t.max=Qa(t.max,e,n,f,s)}function Za(t,e,[n,r,s],a,u){Ng(t,e[n],e[r],e[s],e.scale,a,u)}const Mg=["x","scaleX","originX"],Vg=["y","scaleY","originY"];function eu(t,e,n,r){Za(t.x,e,Mg,n?n.x:void 0,r?r.x:void 0),Za(t.y,e,Vg,n?n.y:void 0,r?r.y:void 0)}function tu(t){return t.translate===0&&t.scale===1}function sc(t){return tu(t.x)&&tu(t.y)}function nu(t,e){return t.min===e.min&&t.max===e.max}function Ig(t,e){return nu(t.x,e.x)&&nu(t.y,e.y)}function ru(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function oc(t,e){return ru(t.x,e.x)&&ru(t.y,e.y)}function iu(t){return Ke(t.x)/Ke(t.y)}function su(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Fg{constructor(){this.members=[]}add(e){Is(this.members,e),e.scheduleRender()}remove(e){if(Fs(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bg(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((s||a||u)&&(r=`translate3d(${s}px, ${a}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:v,rotateY:y,skewX:T,skewY:L}=n;p&&(r=`perspective(${p}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),y&&(r+=`rotateY(${y}deg) `),T&&(r+=`skewX(${T}deg) `),L&&(r+=`skewY(${L}deg) `)}const f=t.x.scale*e.x,d=t.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const _t={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},On=typeof window<"u"&&window.MotionDebug!==void 0,Ui=["","X","Y","Z"],Kg={visibility:"hidden"},ou=1e3;let $g=0;function qi(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function ac(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ml(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",me,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&ac(r)}function uc({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},f=e==null?void 0:e()){this.id=$g++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,On&&(_t.totalNodes=_t.resolvedTargetDeltas=_t.recalculatedProjection=0),this.nodes.forEach(zg),this.nodes.forEach(Xg),this.nodes.forEach(Jg),this.nodes.forEach(Hg),On&&window.MotionDebug.record(_t)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Dg)}addEventListener(u,f){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Bs),this.eventHandlers.get(u).add(f)}notifyListeners(u,...f){const d=this.eventHandlers.get(u);d&&d.notify(...f)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ag(u),this.instance=u;const{layoutId:d,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(p||d)&&(this.isLayoutDirty=!0),t){let v;const y=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=Og(y,250),Er.hasAnimatedSinceResize&&(Er.hasAnimatedSinceResize=!1,this.nodes.forEach(uu))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&g&&(d||p)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y,hasRelativeTargetChanged:T,layout:L})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||g.getDefaultTransition()||ny,{onLayoutAnimationStart:M,onLayoutAnimationComplete:B}=g.getProps(),j=!this.targetLayout||!oc(this.targetLayout,L)||T,$=!y&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||$||y&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,$);const G={...Ls(N,"layout"),onPlay:M,onComplete:B};(g.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else y||uu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=L})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qg),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ac(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(au);return}this.isUpdating||this.nodes.forEach(Gg),this.isUpdating=!1,this.nodes.forEach(Yg),this.nodes.forEach(Ug),this.nodes.forEach(qg),this.clearAllSnapshots();const f=tt.now();De.delta=ut(0,1e3/60,f-De.timestamp),De.timestamp=f,De.isProcessing=!0,Li.update.process(De),Li.preRender.process(De),Li.render.process(De),De.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cs.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Wg),this.sharedNodes.forEach(Zg)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=we(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(f=!1),f){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!sc(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&(f||jt(this.latestValues)||g)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return u&&(d=this.removeTransform(d)),ry(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:f}=this.options;if(!f)return we();const d=f.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(iy))){const{scroll:g}=this.root;g&&(rn(d.x,g.offset.x),rn(d.y,g.offset.y))}return d}removeElementScroll(u){var f;const d=we();if(Ue(d,u),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return d;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:v,options:y}=g;g!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&Ue(d,u),rn(d.x,v.offset.x),rn(d.y,v.offset.y))}return d}applyTransform(u,f=!1){const d=we();Ue(d,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!f&&g.options.layoutScroll&&g.scroll&&g!==g.root&&sn(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),jt(g.latestValues)&&sn(d,g.latestValues)}return jt(this.latestValues)&&sn(d,this.latestValues),d}removeTransform(u){const f=we();Ue(f,u);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!jt(p.latestValues))continue;fs(p.latestValues)&&p.updateSnapshot();const g=we(),v=p.measurePageBox();Ue(g,v),eu(f,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return jt(this.latestValues)&&eu(f,this.latestValues),f}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==De.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var f;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==d;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:y}=this.options;if(!(!this.layout||!(v||y))){if(this.resolvedRelativeTargetAt=De.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),Nn(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Ue(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=we(),this.targetWithTransforms=we()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ag(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ue(this.target,this.layout.layoutBox),Zl(this.target,this.targetDelta)):Ue(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),Nn(this.relativeTargetOrigin,this.target,T.target),Ue(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}On&&_t.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fs(this.parent.latestValues)||Ql(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const f=this.getLead(),d=!!this.resumingFrom||this!==f;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===De.timestamp&&(p=!1),p)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;Ue(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,T=this.treeScale.y;gg(this.layoutCorrected,this.treeScale,this.path,d),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=we());const{target:L}=f;if(!L){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ja(this.prevProjectionDelta.x,this.projectionDelta.x),Ja(this.prevProjectionDelta.y,this.projectionDelta.y)),Ln(this.projectionDelta,this.layoutCorrected,L,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==T||!su(this.projectionDelta.x,this.prevProjectionDelta.x)||!su(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",L)),On&&_t.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nn(),this.projectionDelta=nn(),this.projectionDeltaWithTransform=nn()}setAnimationOrigin(u,f=!1){const d=this.snapshot,p=d?d.latestValues:{},g={...this.latestValues},v=nn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const y=we(),T=d?d.source:void 0,L=this.layout?this.layout.source:void 0,N=T!==L,M=this.getStack(),B=!M||M.members.length<=1,j=!!(N&&!B&&this.options.crossfade===!0&&!this.path.some(ty));this.animationProgress=0;let $;this.mixTargetDelta=G=>{const q=G/1e3;lu(v.x,u.x,q),lu(v.y,u.y,q),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Nn(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ey(this.relativeTarget,this.relativeTargetOrigin,y,q),$&&Ig(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=we()),Ue($,this.relativeTarget)),N&&(this.animationValues=g,jg(g,p,this.latestValues,q,j,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{Er.hasAnimatedSinceResize=!0,this.currentAnimation=kg(0,ou,{...u,onUpdate:f=>{this.mixTargetDelta(f),u.onUpdate&&u.onUpdate(f)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ou),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:f,target:d,layout:p,latestValues:g}=u;if(!(!f||!d||!p)){if(this!==u&&this.layout&&p&&lc(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||we();const v=Ke(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+v;const y=Ke(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+y}Ue(f,d),sn(f,g),Ln(this.projectionDeltaWithTransform,this.layoutCorrected,f,g)}}registerSharedNode(u,f){this.sharedNodes.has(u)||this.sharedNodes.set(u,new Fg),this.sharedNodes.get(u).add(f);const p=f.options.initialPromotionConfig;f.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(f):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:f}=this.options;return f?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:f}=this.options;return f?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:f,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let f=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const p={};d.z&&qi("z",u,p,this.animationValues);for(let g=0;g<Ui.length;g++)qi(`rotate${Ui[g]}`,u,p,this.animationValues),qi(`skew${Ui[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}getProjectionStyles(u){var f,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Kg;const p={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=kr(u==null?void 0:u.pointerEvents)||"",p.transform=g?g(this.latestValues,""):"none",p;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=kr(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!jt(this.latestValues)&&(N.transform=g?g({},""):"none",this.hasProjected=!1),N}const y=v.animationValues||v.latestValues;this.applyTransformsToTarget(),p.transform=Bg(this.projectionDeltaWithTransform,this.treeScale,y),g&&(p.transform=g(y,p.transform));const{x:T,y:L}=this.projectionDelta;p.transformOrigin=`${T.origin*100}% ${L.origin*100}% 0`,v.animationValues?p.opacity=v===this?(d=(f=y.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:p.opacity=v===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const N in Nr){if(y[N]===void 0)continue;const{correct:M,applyTo:B}=Nr[N],j=p.transform==="none"?y[N]:M(y[N],v);if(B){const $=B.length;for(let G=0;G<$;G++)p[B[G]]=j}else p[N]=j}return this.options.layoutId&&(p.pointerEvents=v===this?kr(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var f;return(f=u.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(au),this.root.sharedNodes.clear()}}}function Ug(t){t.updateLayout()}function qg(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,u=n.source!==t.layout.source;a==="size"?qe(v=>{const y=u?n.measuredBox[v]:n.layoutBox[v],T=Ke(y);y.min=r[v].min,y.max=y.min+T}):lc(a,n.layoutBox,r)&&qe(v=>{const y=u?n.measuredBox[v]:n.layoutBox[v],T=Ke(r[v]);y.max=y.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+T)});const f=nn();Ln(f,r,n.layoutBox);const d=nn();u?Ln(d,t.applyTransform(s,!0),n.measuredBox):Ln(d,r,n.layoutBox);const p=!sc(f);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:T}=v;if(y&&T){const L=we();Nn(L,n.layoutBox,y.layoutBox);const N=we();Nn(N,r,T.layoutBox),oc(L,N)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=L,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:f,hasLayoutChanged:p,hasRelativeTargetChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zg(t){On&&_t.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Hg(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Wg(t){t.clearSnapshot()}function au(t){t.clearMeasurements()}function Gg(t){t.isLayoutDirty=!1}function Yg(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uu(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Xg(t){t.resolveTargetDelta()}function Jg(t){t.calcProjection()}function Qg(t){t.resetSkewAndRotation()}function Zg(t){t.removeLeadSnapshot()}function lu(t,e,n){t.translate=ye(e.translate,0,n),t.scale=ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function cu(t,e,n,r){t.min=ye(e.min,n.min,r),t.max=ye(e.max,n.max,r)}function ey(t,e,n,r){cu(t.x,e.x,n.x,r),cu(t.y,e.y,n.y,r)}function ty(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ny={duration:.45,ease:[.4,0,.1,1]},fu=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),du=fu("applewebkit/")&&!fu("chrome/")?Math.round:Be;function hu(t){t.min=du(t.min),t.max=du(t.max)}function ry(t){hu(t.x),hu(t.y)}function lc(t,e,n){return t==="position"||t==="preserve-aspect"&&!og(iu(e),iu(n),.2)}function iy(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const sy=uc({attachResizeListener:(t,e)=>$n(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zi={current:void 0},cc=uc({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zi.current){const t=new sy({});t.mount(window),t.setOptions({layoutScroll:!0}),zi.current=t}return zi.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oy={pan:{Feature:Sg},drag:{Feature:wg,ProjectionNode:cc,MeasureLayout:nc}};function pu(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&me.postRender(()=>a(e,Wn(e)))}class ay extends bt{mount(){const{current:e}=this.node;e&&(this.unmount=op(e,n=>(pu(this.node,n,"Start"),r=>pu(this.node,r,"End"))))}unmount(){}}class uy extends bt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hn($n(this.node.current,"focus",()=>this.onFocus()),$n(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mu(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&me.postRender(()=>a(e,Wn(e)))}class ly extends bt{mount(){const{current:e}=this.node;e&&(this.unmount=cp(e,n=>(mu(this.node,n,"Start"),(r,{success:s})=>mu(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hs=new WeakMap,Hi=new WeakMap,cy=t=>{const e=hs.get(t.target);e&&e(t)},fy=t=>{t.forEach(cy)};function dy({root:t,...e}){const n=t||document;Hi.has(n)||Hi.set(n,{});const r=Hi.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(fy,{root:t,...e})),r[s]}function hy(t,e,n){const r=dy(e);return hs.set(t,n),r.observe(t),()=>{hs.delete(t),r.unobserve(t)}}const py={some:0,all:1};class my extends bt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:py[s]},f=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),y=p?g:v;y&&y(d)};return hy(this.node.current,u,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(gy(e,n))&&this.startObserver()}unmount(){}}function gy({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const yy={inView:{Feature:my},tap:{Feature:ly},focus:{Feature:uy},hover:{Feature:ay}},vy={layout:{ProjectionNode:cc,MeasureLayout:nc}},ps={current:null},fc={current:!1};function by(){if(fc.current=!0,!!bs)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ps.current=t.matches;t.addListener(e),e()}else ps.current=!1}const xy=[...Ml,Le,vt],wy=t=>xy.find(Nl(t)),gu=new WeakMap;function Sy(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Ne(s))t.addValue(r,s);else if(Ne(a))t.addValue(r,Bn(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(r);t.addValue(r,Bn(u!==void 0?u:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const yu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Py{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:u},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hs,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=tt.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,me.render(this.render,!1,!0))};const{latestValues:d,renderState:p,onUpdate:g}=u;this.onUpdate=g,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=f,this.blockInitialAnimation=!!a,this.isControllingVariants=Hr(n),this.isVariantNode=qu(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in y){const L=y[T];d[T]!==void 0&&Ne(L)&&L.set(d[T],!1)}}mount(e){this.current=e,gu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),fc.current||by(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ps.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){gu.delete(this.current),this.projection&&this.projection.unmount(),yt(this.notifyUpdate),yt(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vt.has(e),s=n.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&me.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in un){const n=un[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):we()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<yu.length;r++){const s=yu[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,u=e[a];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=Sy(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bn(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(_l(s)||Cl(s))?s=parseFloat(s):!wy(s)&&vt.test(n)&&(s=Ol(e,n)),this.setBaseTarget(e,Ne(s)?s.get():s)),Ne(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=ks(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[e])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Ne(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Bs),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class dc extends Py{constructor(){super(...arguments),this.KeyframeResolver=Vl}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ne(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Cy(t){return window.getComputedStyle(t)}class Ty extends dc{constructor(){super(...arguments),this.type="html",this.renderInstance=Zu}readValueFromInstance(e,n){if(Vt.has(n)){const r=zs(n);return r&&r.default||0}else{const r=Cy(e),s=(Xu(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ec(e,n)}build(e,n,r){Ds(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return _s(e,n,r)}}class ky extends dc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=we}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vt.has(n)){const r=zs(n);return r&&r.default||0}return n=el.has(n)?n:Ps(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return rl(e,n,r)}build(e,n,r){Os(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){tl(e,n,r,s)}mount(e){this.isSVGTag=js(e.tagName),super.mount(e)}}const Ay=(t,e)=>Ts(t)?new ky(e):new Ty(e,{allowProjection:t!==J.Fragment}),Ey=Zh({...Jm,...yy,...oy,...vy},Ay),ze=ph(Ey);function ms({card:t,isSelected:e=!1,onClick:n,onDragStart:r,draggable:s=!0}){const{i18n:a}=Un(),[u,f]=J.useState(!1),[d,p]=J.useState(!1),g=a.language==="he",v=g?t.title.he:t.title.en,y=g?t.description.he:t.description.en,T=()=>{switch(t.holder){case"partner-a":return"bg-partner-a";case"partner-b":return"bg-partner-b";default:return"bg-unassigned"}},L=()=>{switch(t.category){case"daily-grind":return"border-partner-a";case"kids":return"border-partner-b";case"home":return"border-concrete";case"magic":return"border-unassigned";case"wild":return"border-ink";default:return"border-concrete"}},N={initial:{opacity:0,y:20},animate:{opacity:1,y:0},hover:{y:-12,boxShadow:"0 12px 24px rgba(10, 9, 8, 0.15)"},selected:{boxShadow:"0 0 0 3px rgba(230, 57, 70, 0.5)"}};return V.jsx("div",{draggable:s,onDragStart:r,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:V.jsxs(ze.div,{className:`relative w-full h-64 cursor-grab active:cursor-grabbing ${s?"hover:shadow-brutal":""}`,variants:N,initial:"initial",animate:e?"selected":"animate",whileHover:s?"hover":{},onClick:()=>{s||f(!u),n==null||n()},children:[V.jsxs(ze.div,{className:"w-full h-full relative",animate:{rotateY:u?180:0},transition:{duration:.6,type:"spring",stiffness:100},style:{transformStyle:"preserve-3d"},children:[V.jsxs("div",{className:`absolute w-full h-full ${T()} border-4 ${L()} rounded-lg p-6 flex flex-col justify-between torn-paper grain`,style:{backfaceVisibility:"hidden"},children:[V.jsxs("div",{children:[V.jsx("div",{className:"text-xs font-display font-bold text-paper mb-2 opacity-80 uppercase tracking-wider",children:t.category}),V.jsx("h3",{className:`font-display text-xl font-bold text-paper mb-3 ${g?"text-right":"text-left"}`,children:v}),V.jsx("p",{className:`text-sm font-body text-paper/90 line-clamp-3 ${g?"text-right":"text-left"}`,children:y})]}),V.jsxs("div",{className:"flex justify-between items-center text-xs text-paper/70 mt-4",children:[V.jsxs("div",{className:"flex gap-2",children:[t.metadata.difficulty>0&&V.jsx("span",{className:"font-bold",children:"⚡".repeat(t.metadata.difficulty)}),V.jsxs("span",{className:"opacity-75",children:[t.metadata.timeEstimate,"m"]})]}),d&&s&&V.jsx("span",{className:"text-paper/50 text-xs italic",children:"drag"})]})]}),V.jsxs("div",{className:"absolute w-full h-full bg-paper border-4 border-ink rounded-lg p-6 flex flex-col justify-between torn-paper grain",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[V.jsxs("div",{children:[V.jsx("h4",{className:"font-display text-sm font-bold text-ink mb-3 uppercase",children:"Details"}),V.jsx("p",{className:`text-sm font-body text-ink/80 ${g?"text-right":"text-left"}`,children:g?t.details.he:t.details.en})]}),V.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[V.jsx("span",{className:"text-xs px-2 py-1 bg-unassigned text-ink rounded font-bold",children:t.status}),t.metadata.isCustom&&V.jsx("span",{className:"text-xs px-2 py-1 bg-concrete/20 text-ink rounded",children:"Custom"})]})]})]}),e&&V.jsx("div",{className:"absolute -inset-2 border-3 border-partner-a rounded-lg pointer-events-none animate-pulse"})]})})}function Dy({partner:t,cards:e,onCardDrop:n,isActive:r=!0,totalTime:s=0}){const[a,u]=J.useState(!1),f=y=>{y.preventDefault(),u(!0)},d=()=>{u(!1)},p=y=>{y.preventDefault(),u(!1);const T=y.dataTransfer.getData("cardId");n==null||n(T)},g=t.id==="partner-a"?"bg-partner-a":"bg-partner-b",v=t.id==="partner-a"?"border-partner-a":"border-partner-b";return V.jsxs(ze.div,{className:`flex-1 rounded-lg border-3 ${v} p-6 transition-all ${a?"ring-2 ring-offset-2 ring-ink shadow-brutal":"shadow-brutal-sm"} ${r?"opacity-100":"opacity-70"}`,onDragOver:f,onDragLeave:d,onDrop:p,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[V.jsxs("div",{className:"mb-6 pb-4 border-b-2 border-ink",children:[V.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[V.jsx("div",{className:`w-12 h-12 ${g} rounded-full flex items-center justify-center text-paper font-display font-bold text-lg shadow-brutal-sm`,children:t.name.charAt(0).toUpperCase()}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-display text-lg font-bold text-ink",children:t.name}),V.jsxs("p",{className:"text-xs font-body text-concrete",children:[e.length," card",e.length!==1?"s":""]})]})]}),s>0&&V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"text-xs font-bold font-display text-concrete",children:"Time Commitment:"}),V.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${g} text-paper`,children:[s," minutes/week"]})]})]}),V.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 min-h-64 p-4 rounded ${a?"bg-unassigned/10 border-2 border-dashed border-ink":"bg-paper/50"} transition-colors`,children:e.length>0?e.map((y,T)=>V.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:T*.05},children:V.jsx(ms,{card:y,draggable:!0})},y.id)):V.jsx(ze.div,{className:"col-span-full flex items-center justify-center h-48 text-center",initial:{opacity:0},animate:{opacity:1},children:V.jsxs("div",{children:[V.jsx("p",{className:"text-sm font-display font-bold text-concrete mb-2",children:"Drop cards here"}),V.jsx("p",{className:"text-xs font-body text-concrete/70",children:"or drag from the card gallery"})]})})}),V.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-ink/20 flex gap-4 justify-between text-xs font-body",children:[V.jsxs("div",{children:[V.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Difficulty"}),V.jsxs("span",{className:"text-ink font-bold",children:[e.reduce((y,T)=>y+T.metadata.difficulty,0),"/",e.length*3]})]}),V.jsxs("div",{children:[V.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Completed"}),V.jsxs("span",{className:"text-ink font-bold",children:[e.filter(y=>y.status==="paused").length,"/",e.length]})]}),V.jsxs("div",{children:[V.jsx("span",{className:"block text-concrete font-bold mb-1",children:"Status"}),V.jsx("span",{className:`${g} text-paper px-2 py-1 rounded font-bold`,children:r?"Active":"Paused"})]})]})]})}function Oy({onDeal:t}){const{t:e}=Un(),n=Ji(j=>j.getCards()),{currentDealMode:r,setCurrentDealMode:s}=Jd(),[a,u]=J.useState([]),[f,d]=J.useState([]),[p,g]=J.useState([]),[v,y]=J.useState("deal"),[T]=J.useState([{id:"partner-a",name:e("partners.partnerA"),avatar:{type:"avatar-builder",data:"A"},preferences:{favoriteCards:[],avoidCards:[],strongSuits:["home"],availability:{}},stats:{currentCards:0,totalTimeCommitment:0,streaks:[],achievements:[]},theme:{color:"#E63946",pattern:{type:"solid",color:"#E63946"},icon:"A"}},{id:"partner-b",name:e("partners.partnerB"),avatar:{type:"avatar-builder",data:"B"},preferences:{favoriteCards:[],avoidCards:[],strongSuits:["kids"],availability:{}},stats:{currentCards:0,totalTimeCommitment:0,streaks:[],achievements:[]},theme:{color:"#06AED5",pattern:{type:"solid",color:"#06AED5"},icon:"B"}}]);J.useEffect(()=>{const j=n.filter(q=>!q.holder||q.holder===null),$=n.filter(q=>q.holder==="partner-a"),G=n.filter(q=>q.holder==="partner-b");u(j),d($),g(G)},[n]);const L=["random","weighted","draft","auction","quick"],N=j=>{s(j),t==null||t(j)},M=(j,$)=>{n.find(q=>q.id===j)&&Ji.setState(q=>({cards:q.cards.map(Z=>Z.id===j?{...Z,holder:$}:Z)}))},B=j=>j.reduce(($,G)=>$+G.metadata.timeEstimate,0);return V.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 py-8",children:[V.jsxs("div",{className:"mb-8",children:[V.jsx("h2",{className:"text-display-md font-display font-bold text-ink mb-4",children:e("navigation.gameBoard")}),V.jsx("div",{className:"flex gap-3 flex-wrap mb-6",children:L.map(j=>V.jsx(ze.button,{onClick:()=>N(j),className:`px-4 py-2 rounded-lg font-display font-bold transition-all ${r===j?"bg-partner-a text-paper shadow-brutal":"bg-concrete/20 text-ink hover:bg-concrete/30"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e(`game.dealModes.${j}`)},j))}),V.jsx("div",{className:"flex gap-2 border-b-2 border-ink",children:["deal","gallery"].map(j=>V.jsx("button",{onClick:()=>y(j),className:`px-4 py-2 font-display font-bold transition-colors ${v===j?"text-partner-a border-b-2 border-partner-a":"text-concrete hover:text-ink"}`,children:j==="deal"?"Deal":"Gallery"},j))})]}),v==="deal"?V.jsxs("div",{className:"space-y-8",children:[V.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:T.map(j=>V.jsx(Dy,{partner:j,cards:j.id==="partner-a"?f:p,onCardDrop:$=>M($,j.id),isActive:!0,totalTime:B(j.id==="partner-a"?f:p)},j.id))}),V.jsxs(ze.div,{className:"bg-unassigned/10 border-3 border-unassigned rounded-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[V.jsxs("h3",{className:"font-display text-lg font-bold text-ink mb-4",children:[e("cards.unassigned")," (",a.length,")"]}),a.length>0?V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((j,$)=>V.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:$*.05},children:V.jsx(ms,{card:j,draggable:!0})},j.id))}):V.jsxs(ze.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[V.jsx("p",{className:"text-lg font-display font-bold text-concrete mb-2",children:"All cards assigned!"}),V.jsx("p",{className:"text-sm font-body text-concrete/70",children:"Great job distributing the workload."})]})]})]}):V.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map((j,$)=>V.jsx(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:$*.05},children:V.jsx(ms,{card:j,draggable:!0,onDragStart:G=>{G.dataTransfer.setData("cardId",j.id)}})},j.id)):V.jsx("div",{className:"col-span-full text-center py-20",children:V.jsx("p",{className:"text-lg font-display font-bold text-concrete mb-2",children:e("cards.noCards")})})}),V.jsxs(ze.div,{className:"mt-8 pt-6 border-t-2 border-ink grid grid-cols-3 gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[V.jsxs("div",{className:"text-center p-4 bg-partner-a/10 rounded-lg",children:[V.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Partner A"}),V.jsx("p",{className:"text-2xl font-display font-bold text-partner-a",children:f.length}),V.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[B(f),"m/week"]})]}),V.jsxs("div",{className:"text-center p-4 bg-unassigned/10 rounded-lg",children:[V.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Unassigned"}),V.jsx("p",{className:"text-2xl font-display font-bold text-unassigned",children:a.length}),V.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[B(a),"m"]})]}),V.jsxs("div",{className:"text-center p-4 bg-partner-b/10 rounded-lg",children:[V.jsx("p",{className:"text-sm font-body text-concrete mb-2",children:"Partner B"}),V.jsx("p",{className:"text-2xl font-display font-bold text-partner-b",children:p.length}),V.jsxs("p",{className:"text-xs text-concrete/70 mt-1",children:[B(p),"m/week"]})]})]})]})}function Ry(){const{t}=Un(),e=Ji(s=>s.getCards()),[n,r]=J.useState(!1);return J.useEffect(()=>{r(e.length>0)},[e]),n?V.jsx(Oy,{}):V.jsx("div",{className:"relative z-10 min-h-full flex items-center",children:V.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full",children:V.jsxs("div",{className:"text-center py-20",children:[V.jsx("h2",{className:"text-display-lg font-display font-bold text-ink mb-6",children:"Welcome to Fair Play Deck"}),V.jsx("p",{className:"text-lg font-body text-concrete mb-8 max-w-2xl mx-auto",children:t("common.appDescription")}),V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12 mb-12",children:[{title:"Deal Cards",description:"Distribute household tasks fairly",icon:"🎴"},{title:"Negotiate",description:"Swap and adjust assignments",icon:"🤝"},{title:"Track Time",description:"Monitor workload balance",icon:"⏱️"}].map((s,a)=>V.jsxs("div",{className:"bg-paper border-3 border-ink p-8 rounded-lg brutalist-border hover:shadow-brutal transition-all stagger-{i+1}",children:[V.jsx("div",{className:"text-4xl mb-4",children:s.icon}),V.jsx("h3",{className:"font-display text-lg font-bold text-ink mb-2",children:s.title}),V.jsx("p",{className:"text-sm font-body text-concrete",children:s.description})]},a))}),V.jsx("p",{className:"text-sm font-body text-concrete/70 mb-6",children:"The app is ready to use! Navigate to the Game Board tab to start."}),V.jsx("button",{className:"px-8 py-3 bg-partner-a text-paper font-display font-bold rounded-lg hover:shadow-brutal transition-all animate-pulse",children:"Get Started"})]})})})}function jy(){const{i18n:t}=Un(),{language:e,theme:n,animations:r}=Mu();return J.useEffect(()=>{th().catch(console.error)},[]),J.useEffect(()=>{t.language!==e&&t.changeLanguage(e);const s=document.documentElement;s.setAttribute("dir",e==="he"?"rtl":"ltr"),s.setAttribute("lang",e)},[e,t]),J.useEffect(()=>{const s=document.documentElement;if(n==="auto"){const a=window.matchMedia("(prefers-color-scheme: dark)").matches;s.classList.toggle("dark",a)}else s.classList.toggle("dark",n==="dark")},[n]),J.useEffect(()=>{r?document.documentElement.style.removeProperty("--animation-duration"):document.documentElement.style.setProperty("--animation-duration","0ms")},[r]),V.jsxs("div",{className:"min-h-screen bg-paper text-ink overflow-x-hidden",children:[V.jsx(rh,{}),V.jsxs("div",{className:"flex flex-col h-screen",children:[V.jsx(nh,{}),V.jsx("main",{className:"flex-1 overflow-y-auto",children:V.jsx(Ry,{})})]})]})}Wi.createRoot(document.getElementById("root")).render(V.jsx(bu.StrictMode,{children:V.jsx(yf,{i18n:Oe,children:V.jsx(jy,{})})}));
//# sourceMappingURL=index-BNBXsbXl.js.map
